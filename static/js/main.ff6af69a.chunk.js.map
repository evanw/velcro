{"version":3,"sources":["lib/error.ts","../../resolver-host-compound/dist/dist-module/index.js","../../resolver-host-unpkg/dist/dist-module/index.js","lib/typeAcquisition.ts","lib/ResolverHostMonaco.ts","lib/ResolverHostWithCache.ts","lib/ResolverHostWithInflightCache.ts","lib/previewRuntime.ts","lib/EditorManager.ts","../../bundler/dist/dist-module/index.js","playground/Preview.tsx","../../resolver-host-memory/dist/dist-browser/index.js","../../resolver/dist/dist-module/index.js","lib/bundlerWorker.ts","lib/hooks.ts","playground/Editor.tsx","playground/Sidebar.tsx","playground/Playground.tsx","templates/react.ts","serviceWorker.ts","useServiceWorker.tsx","App.tsx","index.tsx"],"names":["ExtendableError","message","name","constructor","Error","InvariantError","NotSupportedError","TimeoutError","TranspileError","diagnostics","_AbstractResolverHost","ResolverHostCompound","hosts","_this","prefix","this","call","Map","set","key","value","resolver","url","href","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","_ref3","_ref2","child","startsWith","getCanonicalUrl","err","return","Promise","resolve","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref6","_ref5","getResolveRoot","reject","concat","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_ref9","_ref8","listEntries","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_ref12","_ref11","readFileContent","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","_ExtendableError","FetchError","_Error","captureStackTrace","stack","isValidEntry","entry","type","File","path","isValidFile","isValidDirectory","Directory","files","Array","isArray","every","signalFromCancellationToken","token","AbortControllerConstructor","abortController","isCancellationRequested","abort","onCancellationRequested","signal","UnpkgCdn","UNPKG_SPEC_RX","protocol","hostname","host","result","URL","pathname","matches","match","spec","version","JSDelivrCdn","kind","specRx","gh","npm","map","file","mapChildEntry","parent","_files","slice","dataHost","ResolverHostUnpkg","_this2","options","contentCache","buf","byteLength","max","inflightContentRequests","packageLock","packageEntriesCache","packageJsonCache","fetch","TypeError","AbortController","input","init","cdn","_getCanonicalUrl","mark","_callee","_ref","unresolvedSpec","packageJson","_args","wrap","_context","prev","isValidUrl","parseUrl","readPackageJsonWithCache","sent","abrupt","urlForPackageFile","stop","_x","_x2","_getResolveRoot","_callee2","_args2","_context2","_x3","_x4","_listEntries","_callee3","rootUrl","parentEntry","traversalSegments","_loop","_args3","_context3","readPackageEntriesWithCache","split","Boolean","segment","shift","find","basename","_x5","_x6","_readFileContent","_callee4","_","_ref4","cached","inflight","promise","_args4","_context4","get","redirect","then","res","ok","status","arrayBuffer","catch","aborted","delete","finish","_x7","_x8","_readPackageEntriesWithCache","_callee5","lockKey","lock","range","packageEntriesCacheForModule","exactMatch","_ref7","_packageEntries","packageEntries","_args5","_context5","t0","readPackageEntries","_x9","_readPackageJsonWithCache","_callee6","packageJsonCacheForModule","_packageJson","_args6","_context6","readPackageJson","_x10","_x11","_readPackageJson","_callee7","_ref13","content","manifest","_args7","_context7","parseBufferAsPackageJson","decoder","_x12","_x13","_readPackageEntries","_callee8","_ref14","json","_args8","_context8","urlForPackageList","normalizePackageListing","_x14","PackageEntryKind","HAS_D_TS_EXTENSION","getTypingsModuleSpec","pkgJson","typingsName","charAt","replace","typingsRange","major","TypeAcquirer","resolveBareModule","_onTypeFile","Emitter","typingsFiles","parentPath","moduleRoot","util","join","_listFiles","imported","promises","normalizedMain","main","test","contents","decode","filePath","fire","e","console","warn","all","typingsModuleSpec","_import","dependencies","unresolvedUrl","resolvedUrl","entries","queue","entriesAtPath","ResolvedEntryKind","pkgJsonPathname","bareModuleUrl","readParentPackageJson","resolvedPkgJson","pkgJsonText","JSON","stringify","resolvedName","_importAdjacentTypings","indexOf","_importTypingsFromDefinitelyTyped","error","specs","importTypesForSpec","importResults","reduce","event","ResolverHostMonaco","rootUri","Monaco","toString","_resolver","rootHref","getModels","model","modelHref","uri","seenDirs","Set","nestedPath","nextDirIdx","has","getModel","encoder","TextEncoder","getTranspiledValue","output","encode","getModeId","tryLoadFromWorker","a","typescript","getTypeScriptWorker","workerFactory","workerClient","getEmitOutput","getSyntacticDiagnostics","emitOutput","syntacticDiagnostics","emitSkipped","fsPath","diagnostic","startPosition","start","getPositionAt","endPosition","flattenDiagnosticMessageText","messageText","lineNumber","column","end","outputFiles","text","attempt","timeoutMs","race","timeout","code","Math","pow","getValue","AbstractResolverHost","diag","newLine","indent","ResolverHostWithCache","idbTimeout","hostConcurrency","hostTimeout","namespace","idbPromise","limiter","inflightGetCanonicalUrl","inflightGetResolveRoot","inflightListEntries","inflightReadFileContent","getCanonicalUrlCache","getResolveRootCache","listEntriesCache","readFileContentCache","Limiter","openDB","Bundler","schemaVersion","upgrade","db","oldVersion","newVersion","transaction","createObjectStore","objectStore","clear","loadFn","cache","inflightMap","storeName","serialize","deserialize","withInflightGrouping","withIdbCache","idb","withTimeout","put","withMemoryCache","withCache","duration","ResolverHostWithInflightCache","operationName","createBundleRuntime","ReactErrorOverlay","velcroRequire","channel","MessageChannel","window","setEditorHandler","postMessage","payload","startReportingRuntimeErrors","onError","port2","onmessage","data","dismissRuntimeErrors","reportBuildError","val","invalidations","isString","isValidReload","dismissBuildError","reload","runtime","__velcroRuntime","seen","potentialOrphans","requireReload","acceptCallbackQueue","disposeCallbackQueue","add","module","dependency","id","disposeCallbacks","disposeCallback","cb","acceptCallbacks","acceptCallback","dependents","root","dependent","remove","script","document","createElement","src","onerror","onload","toReload","require","potentialOrphan","potentialOrphanModule","size","head","appendChild","port1","EditorManager","unpkgCdn","forNpmFromJsdelivr","githubCdn","forGithubFromJsdelivr","cachingUnpkgHost","getRoot","previewRuntimeHost","ResolverHostMemory","inflightCachingHost","Resolver","extensions","packageMain","editor","disposableStore","DisposableStore","initialPath","typeAcquirer","bind","viewState","WeakMap","onWillFocusModelEmitter","onDidChangeEmitter","typescriptDefaults","setEagerModelSync","setMaximumWorkerIdleTime","setCompilerOptions","allowJs","allowNonTsExtensions","allowSyntheticDefaultImports","baseUrl","checkJs","esModuleInterop","experimentalDecorators","inlineSourceMap","inlineSources","isolatedModules","jsx","JsxEmit","React","lib","ModuleKind","CommonJS","moduleResolution","ModuleResolutionKind","NodeJs","noEmit","outDir","resolveJsonModule","rootDir","sourceMap","ScriptTarget","ES2015","typeRoots","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","createModel","onDidCreateModel","onDidChangePackageJson","typescriptVersion","parse","importTypesForSpecs","throttler","ThrottledDelayer","trigger","onDidChangeContent","onTypeFile","addExtraLib","language","inferLanguage","getModelByHref","focusModel","setModel","revealLineInCenter","ScrollType","Smooth","setPosition","columnNumber","markers","setModelMarkers","focus","getModelByPath","el","create","automaticLayout","minimap","enabled","showUnused","scrollBeyondLastLine","theme","wordWrap","wrappingIndent","onDidDispose","onDidChangeModel","newModelUrl","restoreViewState","onDidBlurEditorText","saveViewState","focusPath","npmSpec","resolveNpmSpec","hosted","resolvedSpec","user","project","gitRange","gitCommittish","dispose","EditorManagerContext","createContext","useActiveModel","workbench","useContext","useState","activeModel","setActiveModel","useEffect","disposable","trackEditor","onDidFocusEditorText","hasTextFocus","onDidCreateEditor","traverse","ast","ctx","visit","node","enter","leave","prop","index","_shouldSkip","shouldSkip","context","skipped","childKeys","j","skip","isArrowFunctionExpression","isFunctionDeclaration","isFunctionExpression","isIdentifier","isMemberExpression","isNodeWithStartAndEnd","isStringLiteral","isLiteral","parseFile","magicString","unboundSymbols","locals","nodeEnv","replacements","requires","requireResolves","original","onComment","_isBlock","_test","onToken","addSourcemapLocation","allowReturnOutsideFunction","sourceType","scopingAndRequiresVisitor","collectGlobalsVisitor","requireDependencies","callee","requireResolveDependencies","_node","symbolName","symbolNodes","_parent","isVariableDeclaration","nextParent","isScope","isBlockScope","declarations","declarePattern","_parent2","_nextParent2","_locals","declareFunction","isFunction","_locals2","isClassDeclaration","_parent3","_nextParent3","_locals3","isTryStatement","handler","_locals4","param","visitAndCaptureScoping","isIfStatement","isBinaryExpression","l","r","operator","left","right","memberExpressionMatches","replacement","alternate","consequent","visitAndSkipBranches","isCallExpression","firstArg","property","_firstArg","visitRequires","isPropertyOfMemberExpression","isProperty","isKeyOfProperty","isBindingIdentifier","foundBinding","declaresArguments","isThisExpression","_foundBinding","_nextParent","declaresThis","_unboundSymbols","params","isObjectPattern","properties","isArrayPattern","elements","isRestElement","argument","isAssignmentPattern","isProgram","isBlockStatement","pattern","memberParts","RELATE_PATH_RX","SPEC_RX","Deferred","internalState","promiseResolve","promiseReject","reason","parseBareModuleSpec","parsed","nameSpec","maybeParseBareModuleSpec","MapSet","m","valueSet","deleted","DEFAULT_SHIM_GLOBALS","Buffer","export","global","process","Asset","filename","indentExclusionRanges","sourceMappingUrl","str","re","lastMatch","exec","getSourceMappingUrl","asset","endsWith","_href","cssCode","BACKSLASH","charCodeAt","SINGLE_QUOTE","NL","CR","escaped","char","overwrite","prependRight","prepend","append","getParserForAsset","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","dep","DependencyKind","Require","references","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_dep","RequireResolve","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","shim","InjectedGlobal","exportName","setCode","InvariantViolation","_ExtendableError2","ResolveError","_ExtendableError3","fromHref","_this3","NODE_CORE_SHIMS","shims","coreLibName","assign","_resolveBareModuleReference2","_resolveBareModuleReference","_callee11","bareModuleReference","parentHref","_ref22","_ref22$invalidatedBy","invalidatedBy","_parseBareModuleSpec","parentUrl","parentPackageInfo","consolidatedDependencies","dependencySpec","_resolvedSpec","builtIn","_parseBareModuleSpec2","_name","_pathname","_spec","_resolvedSpec2","_args11","_context11","t1","peerDependencies","devDependencies","t2","t3","createRuntime","aliases","mappings","modules","registry","Runtime","Module","HotModule","seal","exports","hot","toStringTag","configurable","prototype","alias","fromId","toId","mappingsForId","getId","executeEntrypoints","register","factory","_alias","entrypoint","entrypoints","accept","dirname","Bundle","assets","entrypointsToAssets","dependenciesToAssets","assetsByHref","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","bundle","separator","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","addSource","buildAssetForImmediateExecution","aliasMap","from","acc","entrypointMap","_ref10","runtimeOptions","generateSourceMap","_this$buildForImmedia","buildForImmediateExecution","toDataUri","_this4","inputMap","generateMap","includeContent","hires","SourceMap","sourceRoot","names","sources","sourcesContent","_buildAssetAndCollect","clone","trim","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","resolveDetails","resolvedHref","buildAssetAndCollectDependencies","EMPTY_MODULE_URL","resolutionCache","resolutionInvalidations","onAssetAddedEmitter","onAssetRemovedEmitter","_generateBundle","tokenSource","pendingOperations","dfd","enqueue","resolveHref","resolveAsset","resolveDependency","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_iterator13","_step13","invalidation","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_iterator14","_step14","resolutionCacheKey","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_iterator15","_step15","_this5","cancel","op","onEnqueueAsset","onCompleteAsset","setTimeout","isSettled","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_iterator11","_step11","resolveWithDetails","_ref15","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_iterator12","_step12","getOrCreateAsset","readCode","getValues","deleteAll","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_iterator16","_step16","_readCode","_ref18","_resolveBareModuleReference3","_ref19","_ref19$invalidatedBy","resolvedArg","resolvedUri","fetchSpec","resolveRelativeModuleReference","_resolveRelativeModuleReference","_callee9","_ref20","combinedUri","resolveResult","_context9","ResolveDetailsKind","Relative","ignored","stableHref","stableRootHref","_x15","_resolveWithDetails","_callee10","fromUri","_ref21","_ref21$invalidatedBy","_context10","resolveBareModuleReference","_x16","_x17","_x18","PreviewProgress","props","total","round","completed","PreviewIframeWrap","PreviewWrap","PreviewMessageError","PreviewMessageErrorText","isInternal","PreviewMessages","PreviewMessageLine","line","PreviewMessage","lines","Preview","useRef","previewWrapRef","hmrClientRef","previewIframeRef","editorManager","messages","setMessages","buildProgress","setBuildProgress","runtimeBundleString","delayer","Delayer","Throttler","worker","Worker","hostApi","expose","connect","Transport","fromDomWorker","building","CancellationTokenSource","queueRefreshPreview","uris","current","refreshPreview","rerender","invalidate","runtimeBundle","invoke","unresolvedEntrypointHref","resolvedEntrypoint","resolvedEntrypointHref","codeBundle","runtimeBundleFile","codeBundleFile","markup","createObjectURL","htmlUrl","iframe","style","display","CanceledError","hotReload","hmrClient","updatedBundleFile","updatedBundleHref","send","Event","toPromise","onReload","refreshId","Date","now","time","toInvalidate","timeEnd","onWillDisposeModel","onMessage","contentWindow","fileName","row","getLineContent","MessagePort","HmrClient","debug","addEventListener","removeEventListener","className","ref","idx","port","onReloadEmitter","close","_regeneratorRuntime","_asyncToGenerator","_slicedToArray","_toConsumableArray","_possibleConstructorReturn","_getPrototypeOf","_assertThisInitialized","_inherits","_wrapNativeSuper","_classCallCheck","_createClass","errorHandler","ErrorHandler","listeners","unexpectedErrorHandler","listener","_removeListener","splice","newUnexpectedErrorHandler","emit","onUnexpectedError","combinedDisposable","_len2","disposables","_key2","_dispose","first","_len","rest","_key","d","_toDispose","_isDisposed","item","t","Disposable","_store","None","freeze","FIN","Node","element","Undefined","LinkedList","_first","_last","_size","_insert","atTheEnd","newNode","oldLast","oldFirst","didRemove","_remove","anchor","_disposable","_once","thisArgs","didFire","_map","snapshot","_forEach","each","_filter","_reduce","merge","initial","emitter","onFirstListenerAdd","onLastListenerRemove","_latch","firstCall","shouldEmit","once","any","_len3","events","_key3","debounce","subscription","delay","leading","leakWarningThreshold","handle","numDebouncedCalls","cur","clearTimeout","_output","stopwatch","getTime","latch","buffer","nextTick","flush","onFirstListenerDidAdd","ChainableEvent","fn","chain","fromNodeEventEmitter","eventName","on","removeListener","fromPromise","c","_globalLeakWarningThreshold","LeakageMonitor","customThreshold","random","_warnCountdown","_stacks","listenerCount","threshold","count","topStack","topCount","_disposed","_options","_leakageMon","_listeners","_deliveryQueue","iter","_this$_deliveryQueue$","_this$_deliveryQueue$2","_event","firstListener","isEmpty","removeMonitor","onListenerDidAdd","check","_noop","CancellationToken","shortcutEvent","callback","isCancellationToken","thing","Cancelled","MutableToken","_isCancelled","_emitter","hasInvalidOptionalStringField","field","hasInvalidDependenciesField","requestIdleCallback","cancelIdleCallback","didTimeout","timeRemaining","CHAR_DOT","CHAR_FORWARD_SLASH","TRAILING_SLASH_RX","validateString","isPathSeparator","FileEncoding","__proto__","ensureTrailingSlash","browser","hasInvalidBrowserField","isValidPackageJson","parseTextAsPackageJson","getFirstPathSegmentAfterPrefix","childHref","parentOffset","ext","matchedSlash","extIdx","firstNonSlashEnd","extname","startDot","startPart","preDotState","len","rootEnd","offset","last","initialSegment","resolvedPath","resolvedAbsolute","allowAboveRoot","lastSegmentLength","lastSlash","dots","lastSlashIndex","lastIndexOf","normalizeString","_this6","basePath","children","textEncoder","addFile","encoding","segments","UTF8","pop","dir","urlPathname","basePathname","fsPathname","_this7","getEntryAtPath","urlFromPath","binSting","binArray","Base64","atob","Uint8Array","_el","arr","Decoder","TextDecoder","EntryNotFoundError","TRAILING_SLASH_RX$1","defaultExtensions","_resolve","_options$invalidatedB","optionsWithDefaults","canonicalUrlPromise","canonicalUrl","rootHrefWithoutTrailingSlash","canonicalHref","ignoreBrowserOverrides","resolveAsDirectory","resolveAsFile","_resolveAsDirectory","mainPathname","packageJsonHref","packageJsonEntry","packageJsonContent","mainUrl","_resolveAsFile","parentPackageJson","browserOverrides","browserMap","packageJsonDir","impliedUrl","targetSpec","containingUrl","entryDirectoryMap","entryFileMap","_entry","childFilename","_childFilename","hrefWithExtension","mapping","_match","includes","t4","_readParentPackageJson","_options$invalidatedB2","hostRootUrl","hostRootHref","containingDirUrl","readPackageJsonOrRecurse","parentPackageJsonContent","parentDir","EntryKind","Editor","mount","Entry","modelFocused","color","cursor","backgroundColor","CreateEntry","SidebarFileDelete","Button","StyledTooltip","SidebarFile","tooltip","useTooltipState","gutter","onClick","TooltipReference","as","role","aria-label","Tooltip","Sidebar","sortEntries","models","sort","b","initialEntries","modelUri","setEntries","findIndex","useDirectory","prompt","onClickCreate","PlaygroundCmp","Provider","Playground","react","isLocalhost","location","config","navigator","origin","swUrl","headers","response","contentType","serviceWorker","ready","registration","unregister","registerValidSW","log","checkValidServiceWorker","onSuccess","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","ServiceWorkerContext","ServiceWorkerProvider","waitingServiceWorker","setWaitingServiceWorker","assetsUpdateReady","setAssetsUpdateReady","assetsCached","setAssetsCached","useMemo","updateAssets","waiting","active","PlaygroundWrapper","StatusBarItem","ReloadButton","StatusBar","useServiceWorker","offlineTooltip","reloadTooltip","StatusBarStyles","OfflineBolt","fontSize","Update","AppWrapper","Title","Subtitle","Link","Links","Header","globalCss","css","ReactDOM","render","CssBaseline","styles","rel","getElementById"],"mappings":"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","file":"static/js/main.ff6af69a.chunk.js","sourcesContent":["export interface Diagnostic {\n  message: string;\n  start?: { lineNumber: number; column: number };\n  end?: { lineNumber: number; column: number };\n  href?: string;\n}\n\nexport class ExtendableError extends Error {\n  constructor(message?: string) {\n    super(message);\n\n    this.name = this.constructor.name;\n  }\n}\n\nexport class InvariantError extends ExtendableError {}\n\nexport class NotSupportedError extends ExtendableError {}\n\nexport class TimeoutError extends ExtendableError {}\n\nexport class TranspileError extends ExtendableError {\n  constructor(message: string, readonly diagnostics: Diagnostic[]) {\n    super(message);\n  }\n}\n","import _slicedToArray from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { AbstractResolverHost } from '@velcro/resolver';\n\nvar ResolverHostCompound =\n/*#__PURE__*/\nfunction (_AbstractResolverHost) {\n  _inherits(ResolverHostCompound, _AbstractResolverHost);\n\n  function ResolverHostCompound(hosts) {\n    var _this;\n\n    _classCallCheck(this, ResolverHostCompound);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResolverHostCompound).call(this));\n    _this.hosts = new Map();\n\n    for (var prefix in hosts) {\n      _this.hosts.set(prefix, hosts[prefix]);\n    }\n\n    return _this;\n  }\n\n  _createClass(ResolverHostCompound, [{\n    key: \"getCanonicalUrl\",\n    value: function getCanonicalUrl(resolver, url) {\n      var href = url.href; // TODO: Decide whether a more efficient solution is needed\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.hosts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ref3 = _step.value;\n\n          var _ref2 = _slicedToArray(_ref3, 2);\n\n          var prefix = _ref2[0];\n          var child = _ref2[1];\n\n          if (href.startsWith(prefix)) {\n            if (typeof child.getCanonicalUrl === 'function') {\n              // console.error(`getCanonicalUrl(%s): %s`, url.href, prefix);\n              return child.getCanonicalUrl(resolver, url);\n            }\n\n            break;\n          }\n        } // If the resolved child doesn't have this method, treat it as an identity function\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return Promise.resolve(url);\n    }\n  }, {\n    key: \"getResolveRoot\",\n    value: function getResolveRoot(resolver, url) {\n      var href = url.href; // TODO: Decide whether a more efficient solution is needed\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.hosts[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _ref6 = _step2.value;\n\n          var _ref5 = _slicedToArray(_ref6, 2);\n\n          var prefix = _ref5[0];\n          var child = _ref5[1];\n\n          if (href.startsWith(prefix)) {\n            // console.error(`getResolveRoot(%s): %s`, url.href, prefix);\n            return child.getResolveRoot(resolver, url);\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return Promise.reject(new Error(\"No suitable host found for url \".concat(href)));\n    }\n  }, {\n    key: \"listEntries\",\n    value: function listEntries(resolver, url) {\n      var href = url.href; // TODO: Decide whether a more efficient solution is needed\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.hosts[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _ref9 = _step3.value;\n\n          var _ref8 = _slicedToArray(_ref9, 2);\n\n          var prefix = _ref8[0];\n          var child = _ref8[1];\n\n          if (href.startsWith(prefix)) {\n            // console.error(`listEntries(%s): %s`, url.href, prefix);\n            return child.listEntries(resolver, url);\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      return Promise.reject(new Error(\"No suitable host found for url \".concat(href)));\n    }\n  }, {\n    key: \"readFileContent\",\n    value: function readFileContent(resolver, url) {\n      var href = url.href; // TODO: Decide whether a more efficient solution is needed\n\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.hosts[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var _ref12 = _step4.value;\n\n          var _ref11 = _slicedToArray(_ref12, 2);\n\n          var prefix = _ref11[0];\n          var child = _ref11[1];\n\n          if (href.startsWith(prefix)) {\n            // console.error(`readFileContent(%s): %s`, url.href, prefix);\n            return child.readFileContent(resolver, url);\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return Promise.reject(new Error(\"No suitable host found for url \".concat(href)));\n    }\n  }]);\n\n  return ResolverHostCompound;\n}(AbstractResolverHost);\n\nexport { ResolverHostCompound };","import _defineProperty from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _createClass from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { ResolvedEntryKind, AbstractResolverHost, CanceledError, EntryNotFoundError, Resolver, util } from '@velcro/resolver';\nimport LRU from 'lru-cache';\nimport { validRange, satisfies } from 'semver';\n\nvar ExtendableError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(ExtendableError, _Error);\n\n  function ExtendableError(message) {\n    var _this;\n\n    _classCallCheck(this, ExtendableError);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ExtendableError).call(this, message));\n    _this.name = _this.constructor.name;\n\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(_assertThisInitialized(_this), _this.constructor);\n    } else {\n      _this.stack = new Error(message).stack;\n    }\n\n    return _this;\n  }\n\n  return ExtendableError;\n}(_wrapNativeSuper(Error));\n\nvar FetchError =\n/*#__PURE__*/\nfunction (_ExtendableError) {\n  _inherits(FetchError, _ExtendableError);\n\n  function FetchError(href, err) {\n    _classCallCheck(this, FetchError);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FetchError).call(this, \"Error while fetching \".concat(href, \": \").concat(err.name || Error, \": \").concat(err.message)));\n  }\n\n  return FetchError;\n}(ExtendableError);\n\nfunction isValidEntry(entry) {\n  if (!entry || typeof entry !== 'object') return false;\n  return isValidFile(entry) || isValidDirectory(entry);\n}\n\nfunction isValidDirectory(entry) {\n  return typeof entry === 'object' && entry && entry.type === ResolvedEntryKind.Directory && typeof entry.path === 'string' && entry.path && (typeof entry.files === 'undefined' || Array.isArray(entry.files) && entry.files.every(isValidEntry));\n}\n\nfunction isValidFile(entry) {\n  return typeof entry === 'object' && entry && entry.type === ResolvedEntryKind.File && typeof entry.path === 'string' && entry.path;\n}\n\nfunction signalFromCancellationToken(token, AbortControllerConstructor) {\n  if (!token || !AbortControllerConstructor) {\n    return;\n  }\n\n  var abortController = new AbortControllerConstructor();\n\n  if (token.isCancellationRequested) {\n    abortController.abort();\n  } else {\n    token.onCancellationRequested(function () {\n      return abortController.abort();\n    });\n  }\n\n  return abortController.signal;\n}\n\nvar UnpkgCdn =\n/*#__PURE__*/\nfunction () {\n  function UnpkgCdn() {\n    _classCallCheck(this, UnpkgCdn);\n\n    this.name = 'unpkg';\n    this.UNPKG_SPEC_RX = /^\\/((@[^/]+\\/[^/@]+|[^/@]+)(?:@([^/]+))?)(.*)?$/;\n  }\n\n  _createClass(UnpkgCdn, [{\n    key: \"isValidUrl\",\n    value: function isValidUrl(url) {\n      return url.protocol !== UnpkgCdn.protocol || url.hostname !== UnpkgCdn.host;\n    }\n  }, {\n    key: \"normalizePackageListing\",\n    value: function normalizePackageListing(result) {\n      if (!isValidDirectory(result)) {\n        throw new Error(\"Error normalizing directory listing\");\n      }\n\n      return result;\n    }\n  }, {\n    key: \"parseUrl\",\n    value: function parseUrl(url) {\n      if (url instanceof URL) {\n        url = url.pathname;\n      }\n      /**\r\n       * 1: scope + name + version\r\n       * 2: scope + name\r\n       * 3: version?\r\n       * 4: pathname\r\n       */\n\n\n      var matches = url.match(this.UNPKG_SPEC_RX);\n\n      if (!matches) {\n        throw new Error(\"Unable to parse unexpected unpkg url: \".concat(url));\n      }\n\n      return {\n        spec: matches[1],\n        name: matches[2],\n        version: matches[3] || '',\n        pathname: matches[4] || ''\n      };\n    }\n  }, {\n    key: \"urlForPackageFile\",\n    value: function urlForPackageFile(spec, pathname) {\n      return new URL(\"\".concat(UnpkgCdn.protocol, \"//\").concat(UnpkgCdn.host, \"/\").concat(spec).concat(pathname));\n    }\n  }, {\n    key: \"urlForPackageList\",\n    value: function urlForPackageList(spec) {\n      return new URL(\"\".concat(UnpkgCdn.protocol, \"//\").concat(UnpkgCdn.host, \"/\").concat(spec, \"/?meta\"));\n    }\n  }]);\n\n  return UnpkgCdn;\n}();\n\nUnpkgCdn.protocol = 'https:';\nUnpkgCdn.host = 'unpkg.com';\n\nvar JSDelivrCdn =\n/*#__PURE__*/\nfunction () {\n  function JSDelivrCdn() {\n    var kind = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'npm';\n\n    _classCallCheck(this, JSDelivrCdn);\n\n    this.kind = kind;\n    this.name = 'jsdelivr';\n    this.specRx = {\n      gh: /^\\/(([^/]+\\/[^/@]+)(?:@([^/]+))?)(.*)?$/,\n      npm: /^\\/((@[^/]+\\/[^/@]+|[^/@]+)(?:@([^/]+))?)(.*)?$/\n    };\n  }\n\n  _createClass(JSDelivrCdn, [{\n    key: \"isValidUrl\",\n    value: function isValidUrl(url) {\n      return url.protocol !== JSDelivrCdn.protocol || url.hostname !== JSDelivrCdn.host;\n    }\n  }, {\n    key: \"normalizePackageListing\",\n    value: function normalizePackageListing(result) {\n      if (!result || typeof result !== 'object') {\n        throw new Error(\"Unexpected package listing contents\");\n      }\n\n      var files = result.files;\n\n      if (!Array.isArray(files)) {\n        throw new Error(\"Unexpected package listing contents\");\n      }\n\n      var mapChildEntry = function mapChildEntry(parent, child) {\n        if (!child || typeof child !== 'object') {\n          throw new Error(\"Unexpected entry in package listing contents\");\n        }\n\n        var name = child.name;\n\n        if (typeof name !== 'string') {\n          throw new Error(\"Unexpected entry in package listing contents\");\n        }\n\n        var path = \"\".concat(parent, \"/\").concat(name);\n\n        if (child.type === ResolvedEntryKind.Directory) {\n          var _files = child.files;\n\n          if (!Array.isArray(_files)) {\n            throw new Error(\"Unexpected entry in package listing contents\");\n          }\n\n          return {\n            type: ResolvedEntryKind.Directory,\n            path: path,\n            files: _files.map(function (file) {\n              return mapChildEntry(path, file);\n            })\n          };\n        } else if (child.type === ResolvedEntryKind.File) {\n          return {\n            type: ResolvedEntryKind.File,\n            path: path\n          };\n        }\n\n        throw new Error(\"Error mapping child entry in package file listing\");\n      };\n\n      return {\n        type: ResolvedEntryKind.Directory,\n        path: '/',\n        files: files.map(function (file) {\n          return mapChildEntry('', file);\n        })\n      };\n    }\n  }, {\n    key: \"parseUrl\",\n    value: function parseUrl(url) {\n      if (url instanceof URL) {\n        url = url.pathname;\n      }\n\n      var prefix = \"/\".concat(this.kind);\n\n      if (!url.startsWith(prefix)) {\n        throw new Error(\"Unable to parse unexpected \".concat(this.name, \" url: \").concat(url));\n      }\n\n      url = url.slice(prefix.length);\n      /**\r\n       * 1: scope + name + version\r\n       * 2: scope + name\r\n       * 3: version?\r\n       * 4: pathname\r\n       */\n\n      var matches = url.match(this.specRx[this.kind]);\n\n      if (!matches) {\n        throw new Error(\"Unable to parse unexpected unpkg url: \".concat(url));\n      }\n\n      return {\n        spec: matches[1],\n        name: matches[2],\n        version: matches[3] || '',\n        pathname: matches[4] || ''\n      };\n    }\n  }, {\n    key: \"urlForPackageFile\",\n    value: function urlForPackageFile(spec, pathname) {\n      return new URL(\"\".concat(JSDelivrCdn.protocol, \"//\").concat(JSDelivrCdn.host, \"/\").concat(this.kind, \"/\").concat(spec).concat(pathname));\n    }\n  }, {\n    key: \"urlForPackageList\",\n    value: function urlForPackageList(spec) {\n      return new URL(\"\".concat(JSDelivrCdn.protocol, \"//\").concat(JSDelivrCdn.dataHost, \"/v1/package/\").concat(this.kind, \"/\").concat(spec, \"/tree\"));\n    }\n  }]);\n\n  return JSDelivrCdn;\n}();\n\nJSDelivrCdn.protocol = 'https:';\nJSDelivrCdn.host = 'cdn.jsdelivr.net';\nJSDelivrCdn.dataHost = 'data.jsdelivr.com';\n\nvar ResolverHostUnpkg =\n/*#__PURE__*/\nfunction (_AbstractResolverHost) {\n  _inherits(ResolverHostUnpkg, _AbstractResolverHost);\n\n  function ResolverHostUnpkg() {\n    var _this2;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ResolverHostUnpkg);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ResolverHostUnpkg).call(this));\n    _this2.contentCache = new LRU({\n      length: function length(buf) {\n        return buf.byteLength;\n      },\n      max: 1024 * 1024 * 5\n    });\n    _this2.inflightContentRequests = new Map();\n    _this2.packageLock = new Map();\n    _this2.packageEntriesCache = new Map();\n    _this2.packageJsonCache = new Map();\n\n    if (!options.fetch && typeof fetch !== 'function') {\n      throw new TypeError(\"A fetch function must be provided to the \".concat(_this2.constructor.name, \" if the environment doesn't provide one\"));\n    }\n\n    _this2.AbortController = options.AbortController;\n\n    _this2.fetch = options.fetch || function (input, init) {\n      return fetch(input, init);\n    };\n\n    _this2.cdn = options.cdn || new UnpkgCdn();\n    return _this2;\n  }\n\n  _createClass(ResolverHostUnpkg, [{\n    key: \"getCanonicalUrl\",\n    value: function () {\n      var _getCanonicalUrl = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(resolver, url) {\n        var _ref,\n            token,\n            unresolvedSpec,\n            packageJson,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ref = _args.length > 2 && _args[2] !== undefined ? _args[2] : {}, token = _ref.token;\n\n                if (!this.cdn.isValidUrl(url)) {\n                  _context.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Unable to list non-\".concat(this.cdn.name, \" entries for \").concat(url.href));\n\n              case 3:\n                unresolvedSpec = this.cdn.parseUrl(url);\n                _context.next = 6;\n                return this.readPackageJsonWithCache(resolver, unresolvedSpec, {\n                  token: token\n                });\n\n              case 6:\n                packageJson = _context.sent;\n\n                if (packageJson.name) {\n                  _context.next = 9;\n                  break;\n                }\n\n                throw new Error(\"Missing name property in package.json for '\".concat(url.href, \"'\"));\n\n              case 9:\n                if (packageJson.version) {\n                  _context.next = 11;\n                  break;\n                }\n\n                throw new Error(\"Missing version property in package.json for '\".concat(url.href, \"'\"));\n\n              case 11:\n                return _context.abrupt(\"return\", this.cdn.urlForPackageFile(\"\".concat(packageJson.name, \"@\").concat(packageJson.version), unresolvedSpec.pathname));\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getCanonicalUrl(_x, _x2) {\n        return _getCanonicalUrl.apply(this, arguments);\n      }\n\n      return getCanonicalUrl;\n    }()\n  }, {\n    key: \"getResolveRoot\",\n    value: function () {\n      var _getResolveRoot = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(resolver, url) {\n        var _ref2,\n            token,\n            unresolvedSpec,\n            packageJson,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref2 = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {}, token = _ref2.token;\n\n                if (!this.cdn.isValidUrl(url)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Unable to list non-\".concat(this.cdn.name, \" entries for \").concat(url.href));\n\n              case 3:\n                unresolvedSpec = this.cdn.parseUrl(url);\n                _context2.next = 6;\n                return this.readPackageJsonWithCache(resolver, unresolvedSpec, {\n                  token: token\n                });\n\n              case 6:\n                packageJson = _context2.sent;\n\n                if (packageJson.name) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                throw new Error(\"Missing name property in package.json for '\".concat(url.href, \"'\"));\n\n              case 9:\n                if (packageJson.version) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                throw new Error(\"Missing version property in package.json for '\".concat(url.href, \"'\"));\n\n              case 11:\n                return _context2.abrupt(\"return\", this.cdn.urlForPackageFile(\"\".concat(packageJson.name, \"@\").concat(packageJson.version), '/'));\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getResolveRoot(_x3, _x4) {\n        return _getResolveRoot.apply(this, arguments);\n      }\n\n      return getResolveRoot;\n    }()\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this.cdn.urlForPackageFile('', '');\n    }\n  }, {\n    key: \"listEntries\",\n    value: function () {\n      var _listEntries = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(resolver, url) {\n        var _ref3,\n            token,\n            rootUrl,\n            unresolvedSpec,\n            packageJson,\n            parentEntry,\n            traversalSegments,\n            _loop,\n            _args3 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _ref3 = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : {}, token = _ref3.token;\n\n                if (!this.cdn.isValidUrl(url)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Unable to list non-\".concat(this.cdn.name, \" entries for \").concat(url.href));\n\n              case 3:\n                _context3.next = 5;\n                return resolver.host.getResolveRoot(resolver, url, {\n                  token: token\n                });\n\n              case 5:\n                rootUrl = _context3.sent;\n                unresolvedSpec = this.cdn.parseUrl(url);\n                _context3.next = 9;\n                return this.readPackageJsonWithCache(resolver, unresolvedSpec, {\n                  token: token\n                });\n\n              case 9:\n                packageJson = _context3.sent;\n                url = this.cdn.urlForPackageFile(\"\".concat(packageJson.name, \"@\").concat(packageJson.version), unresolvedSpec.pathname);\n                _context3.next = 13;\n                return this.readPackageEntriesWithCache(this.cdn.parseUrl(url), {\n                  token: token\n                });\n\n              case 13:\n                parentEntry = _context3.sent;\n\n                if (!(token && token.isCancellationRequested)) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 16:\n                traversalSegments = unresolvedSpec.pathname.split('/').filter(Boolean);\n\n                _loop = function _loop() {\n                  var segment = traversalSegments.shift();\n\n                  if (parentEntry.type !== ResolvedEntryKind.Directory || !parentEntry.files) {\n                    throw new EntryNotFoundError(url);\n                  }\n\n                  parentEntry = parentEntry.files.find(function (file) {\n                    return file.type === ResolvedEntryKind.Directory && Resolver.path.basename(file.path) === segment;\n                  });\n                };\n\n                while (parentEntry && traversalSegments.length) {\n                  _loop();\n                }\n\n                if (parentEntry) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                throw new EntryNotFoundError(url);\n\n              case 21:\n                if (parentEntry.files) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", []);\n\n              case 23:\n                return _context3.abrupt(\"return\", parentEntry.files.map(function (entry) {\n                  return {\n                    type: entry.type,\n                    url: new URL(\".\".concat(entry.path), rootUrl)\n                  };\n                }));\n\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function listEntries(_x5, _x6) {\n        return _listEntries.apply(this, arguments);\n      }\n\n      return listEntries;\n    }()\n  }, {\n    key: \"readFileContent\",\n    value: function () {\n      var _readFileContent = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(_, url) {\n        var _ref4,\n            token,\n            href,\n            cached,\n            inflight,\n            signal,\n            fetch,\n            promise,\n            buf,\n            _args4 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref4 = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {}, token = _ref4.token;\n\n                if (!this.cdn.isValidUrl(url)) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Unable to read file contents for non-\".concat(this.cdn.name, \" entries for \").concat(url.href));\n\n              case 3:\n                href = url.href;\n                cached = this.contentCache.get(href);\n\n                if (!cached) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", cached);\n\n              case 7:\n                inflight = this.inflightContentRequests.get(href);\n\n                if (!inflight) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", inflight);\n\n              case 10:\n                // console.log('[MISS] readFileContent(%s)', href);\n                signal = signalFromCancellationToken(token, this.AbortController);\n                fetch = this.fetch;\n                promise = fetch(href, {\n                  redirect: 'follow',\n                  signal: signal\n                }).then(function (res) {\n                  if (!res.ok) {\n                    if (res.status === 404) {\n                      throw new EntryNotFoundError(href);\n                    }\n\n                    throw new Error(\"Error reading file content for \".concat(href, \": \").concat(res.status));\n                  }\n\n                  return res.arrayBuffer();\n                }, function (err) {\n                  throw new FetchError(href, err);\n                }).catch(function (err) {\n                  if (signal && signal.aborted) {\n                    throw new CanceledError('Canceled');\n                  }\n\n                  throw err;\n                });\n                this.inflightContentRequests.set(href, promise);\n                _context4.prev = 14;\n                _context4.next = 17;\n                return promise;\n\n              case 17:\n                buf = _context4.sent;\n                this.contentCache.set(href, buf);\n                return _context4.abrupt(\"return\", buf);\n\n              case 20:\n                _context4.prev = 20;\n                this.inflightContentRequests.delete(href);\n                return _context4.finish(20);\n\n              case 23:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[14,, 20, 23]]);\n      }));\n\n      function readFileContent(_x7, _x8) {\n        return _readFileContent.apply(this, arguments);\n      }\n\n      return readFileContent;\n    }()\n  }, {\n    key: \"resolveBareModule\",\n    value: function resolveBareModule(spec) {\n      var pathname = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      return this.cdn.urlForPackageFile(spec, pathname);\n    }\n  }, {\n    key: \"readPackageEntriesWithCache\",\n    value: function () {\n      var _readPackageEntriesWithCache = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(spec) {\n        var _ref5,\n            token,\n            lockKey,\n            lock,\n            range,\n            packageEntriesCacheForModule,\n            exactMatch,\n            _iteratorNormalCompletion,\n            _didIteratorError,\n            _iteratorError,\n            _iterator,\n            _step,\n            _ref8,\n            _ref7,\n            version,\n            _packageEntries,\n            promise,\n            packageEntries,\n            _args5 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref5 = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : {}, token = _ref5.token;\n                lockKey = \"entries:\".concat(spec.name);\n                lock = this.packageLock.get(lockKey);\n\n                if (!lock) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                _context5.next = 6;\n                return lock;\n\n              case 6:\n                range = validRange(spec.version);\n\n                if (range) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                throw new Error(\"Invalid SemVer range for spec \".concat(spec.spec));\n\n              case 9:\n                packageEntriesCacheForModule = this.packageEntriesCache.get(spec.name);\n\n                if (!packageEntriesCacheForModule) {\n                  _context5.next = 45;\n                  break;\n                }\n\n                exactMatch = packageEntriesCacheForModule.get(spec.version);\n\n                if (!exactMatch) {\n                  _context5.next = 14;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", exactMatch);\n\n              case 14:\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context5.prev = 17;\n                _iterator = packageEntriesCacheForModule[Symbol.iterator]();\n\n              case 19:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  _context5.next = 29;\n                  break;\n                }\n\n                _ref8 = _step.value;\n                _ref7 = _slicedToArray(_ref8, 2);\n                version = _ref7[0];\n                _packageEntries = _ref7[1];\n\n                if (!satisfies(version, range)) {\n                  _context5.next = 26;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", _packageEntries);\n\n              case 26:\n                _iteratorNormalCompletion = true;\n                _context5.next = 19;\n                break;\n\n              case 29:\n                _context5.next = 35;\n                break;\n\n              case 31:\n                _context5.prev = 31;\n                _context5.t0 = _context5[\"catch\"](17);\n                _didIteratorError = true;\n                _iteratorError = _context5.t0;\n\n              case 35:\n                _context5.prev = 35;\n                _context5.prev = 36;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 38:\n                _context5.prev = 38;\n\n                if (!_didIteratorError) {\n                  _context5.next = 41;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 41:\n                return _context5.finish(38);\n\n              case 42:\n                return _context5.finish(35);\n\n              case 43:\n                _context5.next = 47;\n                break;\n\n              case 45:\n                packageEntriesCacheForModule = new Map();\n                this.packageEntriesCache.set(spec.name, packageEntriesCacheForModule);\n\n              case 47:\n                // console.log('[MISS] readPackageEntriesWithCache(%s)', spec.spec);\n                promise = this.readPackageEntries(spec.spec, {\n                  token: token\n                });\n                this.packageLock.set(lockKey, promise);\n                _context5.next = 51;\n                return promise;\n\n              case 51:\n                packageEntries = _context5.sent;\n                this.packageLock.delete(lockKey);\n                packageEntriesCacheForModule.set(spec.version, packageEntries);\n                return _context5.abrupt(\"return\", packageEntries);\n\n              case 55:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[17, 31, 35, 43], [36,, 38, 42]]);\n      }));\n\n      function readPackageEntriesWithCache(_x9) {\n        return _readPackageEntriesWithCache.apply(this, arguments);\n      }\n\n      return readPackageEntriesWithCache;\n    }()\n  }, {\n    key: \"readPackageJsonWithCache\",\n    value: function () {\n      var _readPackageJsonWithCache = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(resolver, spec) {\n        var _ref9,\n            token,\n            lockKey,\n            lock,\n            packageJsonCacheForModule,\n            exactMatch,\n            range,\n            _iteratorNormalCompletion2,\n            _didIteratorError2,\n            _iteratorError2,\n            _iterator2,\n            _step2,\n            _ref12,\n            _ref11,\n            version,\n            _packageJson,\n            promise,\n            packageJson,\n            _args6 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _ref9 = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : {}, token = _ref9.token;\n                lockKey = \"packageJson:\".concat(spec.spec);\n                lock = this.packageLock.get(lockKey);\n\n                if (!lock) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                _context6.next = 6;\n                return lock;\n\n              case 6:\n                packageJsonCacheForModule = this.packageJsonCache.get(spec.name);\n\n                if (!packageJsonCacheForModule) {\n                  _context6.next = 44;\n                  break;\n                }\n\n                exactMatch = packageJsonCacheForModule.get(spec.version);\n\n                if (!exactMatch) {\n                  _context6.next = 11;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", exactMatch);\n\n              case 11:\n                range = validRange(spec.version);\n\n                if (!range) {\n                  _context6.next = 42;\n                  break;\n                }\n\n                _iteratorNormalCompletion2 = true;\n                _didIteratorError2 = false;\n                _iteratorError2 = undefined;\n                _context6.prev = 16;\n                _iterator2 = packageJsonCacheForModule[Symbol.iterator]();\n\n              case 18:\n                if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n                  _context6.next = 28;\n                  break;\n                }\n\n                _ref12 = _step2.value;\n                _ref11 = _slicedToArray(_ref12, 2);\n                version = _ref11[0];\n                _packageJson = _ref11[1];\n\n                if (!satisfies(version, range)) {\n                  _context6.next = 25;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", _packageJson);\n\n              case 25:\n                _iteratorNormalCompletion2 = true;\n                _context6.next = 18;\n                break;\n\n              case 28:\n                _context6.next = 34;\n                break;\n\n              case 30:\n                _context6.prev = 30;\n                _context6.t0 = _context6[\"catch\"](16);\n                _didIteratorError2 = true;\n                _iteratorError2 = _context6.t0;\n\n              case 34:\n                _context6.prev = 34;\n                _context6.prev = 35;\n\n                if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                  _iterator2.return();\n                }\n\n              case 37:\n                _context6.prev = 37;\n\n                if (!_didIteratorError2) {\n                  _context6.next = 40;\n                  break;\n                }\n\n                throw _iteratorError2;\n\n              case 40:\n                return _context6.finish(37);\n\n              case 41:\n                return _context6.finish(34);\n\n              case 42:\n                _context6.next = 46;\n                break;\n\n              case 44:\n                packageJsonCacheForModule = new Map();\n                this.packageJsonCache.set(spec.name, packageJsonCacheForModule);\n\n              case 46:\n                // console.log('[MISS] readPackageJsonWithCache(%s)', spec.spec);\n                promise = this.readPackageJson(resolver, spec.spec, {\n                  token: token\n                });\n                this.packageLock.set(lockKey, promise);\n                _context6.next = 50;\n                return promise;\n\n              case 50:\n                packageJson = _context6.sent;\n                this.packageLock.delete(lockKey);\n\n                if (packageJson.version) {\n                  _context6.next = 54;\n                  break;\n                }\n\n                throw new Error(\"Manifest missing a version identifier for \".concat(spec));\n\n              case 54:\n                packageJsonCacheForModule.set(packageJson.version, packageJson);\n                return _context6.abrupt(\"return\", packageJson);\n\n              case 56:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[16, 30, 34, 42], [35,, 37, 41]]);\n      }));\n\n      function readPackageJsonWithCache(_x10, _x11) {\n        return _readPackageJsonWithCache.apply(this, arguments);\n      }\n\n      return readPackageJsonWithCache;\n    }()\n  }, {\n    key: \"readPackageJson\",\n    value: function () {\n      var _readPackageJson = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(resolver, spec) {\n        var _ref13,\n            token,\n            url,\n            content,\n            manifest,\n            _args7 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _ref13 = _args7.length > 2 && _args7[2] !== undefined ? _args7[2] : {}, token = _ref13.token;\n                // console.log('readPackageJson(%s)', spec);\n                url = this.cdn.urlForPackageFile(spec, '/package.json');\n                _context7.next = 4;\n                return this.readFileContent(resolver, url, {\n                  token: token\n                });\n\n              case 4:\n                content = _context7.sent;\n                _context7.prev = 5;\n                manifest = util.parseBufferAsPackageJson(resolver.decoder, content, spec);\n                _context7.next = 12;\n                break;\n\n              case 9:\n                _context7.prev = 9;\n                _context7.t0 = _context7[\"catch\"](5);\n                throw new Error(\"Error parsing manifest as json for package \".concat(spec, \": \").concat(_context7.t0.message));\n\n              case 12:\n                return _context7.abrupt(\"return\", manifest);\n\n              case 13:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[5, 9]]);\n      }));\n\n      function readPackageJson(_x12, _x13) {\n        return _readPackageJson.apply(this, arguments);\n      }\n\n      return readPackageJson;\n    }()\n  }, {\n    key: \"readPackageEntries\",\n    value: function () {\n      var _readPackageEntries = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(spec) {\n        var _ref14,\n            token,\n            url,\n            href,\n            signal,\n            fetch,\n            res,\n            json,\n            _args8 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _ref14 = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : {}, token = _ref14.token;\n                // console.log('readPackageEntries(%s)', spec);\n                url = this.cdn.urlForPackageList(spec);\n                href = url.href;\n                signal = signalFromCancellationToken(token, this.AbortController);\n                fetch = this.fetch;\n                _context8.next = 7;\n                return fetch(href, {\n                  signal: signal\n                }).catch(function (err) {\n                  if (signal && signal.aborted) {\n                    throw new CanceledError('Canceled');\n                  }\n\n                  throw new FetchError(href, err);\n                });\n\n              case 7:\n                res = _context8.sent;\n\n                if (res.ok) {\n                  _context8.next = 12;\n                  break;\n                }\n\n                if (!(res.status === 404)) {\n                  _context8.next = 11;\n                  break;\n                }\n\n                throw new EntryNotFoundError(href);\n\n              case 11:\n                throw new Error(\"Error listing package contents for \".concat(spec, \": \").concat(res.status));\n\n              case 12:\n                _context8.next = 14;\n                return res.json();\n\n              case 14:\n                json = _context8.sent;\n                return _context8.abrupt(\"return\", this.cdn.normalizePackageListing(json));\n\n              case 16:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function readPackageEntries(_x14) {\n        return _readPackageEntries.apply(this, arguments);\n      }\n\n      return readPackageEntries;\n    }()\n  }], [{\n    key: \"forNpmFromUnpkg\",\n    value: function forNpmFromUnpkg() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return new ResolverHostUnpkg(_objectSpread({}, options, {\n        cdn: new UnpkgCdn()\n      }));\n    }\n  }, {\n    key: \"forNpmFromJsdelivr\",\n    value: function forNpmFromJsdelivr() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return new ResolverHostUnpkg(_objectSpread({}, options, {\n        cdn: new JSDelivrCdn('npm')\n      }));\n    }\n  }, {\n    key: \"forGithubFromJsdelivr\",\n    value: function forGithubFromJsdelivr() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return new ResolverHostUnpkg(_objectSpread({}, options, {\n        cdn: new JSDelivrCdn('gh')\n      }));\n    }\n  }]);\n\n  return ResolverHostUnpkg;\n}(AbstractResolverHost);\n\nexport { ResolverHostUnpkg, isValidDirectory, isValidEntry, isValidFile };","import { util, Resolver, PackageJson, ResolvedEntryKind } from '@velcro/resolver';\n\nimport { Emitter, Event } from 'ts-primitives';\n\nconst HAS_D_TS_EXTENSION = /\\.d\\.ts$/;\n\nenum PackageEntryKind {\n  Directory = 'directory',\n  File = 'file',\n}\n\ninterface PackageDirectoryEntry {\n  type: PackageEntryKind.Directory;\n  path: string;\n  files: PackageEntry[];\n}\n\ninterface PackageFileEntry {\n  type: PackageEntryKind.File;\n  path: string;\n}\n\ninterface TypingsFiles {\n  [fileName: string]: string;\n}\n\ntype PackageEntry = PackageDirectoryEntry | PackageFileEntry;\n\nfunction getTypingsModuleSpec(pkgJson: { name: string; version?: string }): { name: string; range: string } {\n  const typingsName = pkgJson.name.charAt(0) === '@' ? pkgJson.name.slice(1).replace('/', '__') : pkgJson.name;\n\n  let typingsRange = '*';\n\n  if (pkgJson.version) {\n    const major = pkgJson.version.split('.')[0];\n    typingsRange = `${major}.x`;\n  }\n\n  return {\n    name: `@types/${typingsName}`,\n    range: typingsRange,\n  };\n}\n\ninterface TypeFile {\n  pathname: string;\n  content: string;\n}\n\nexport class TypeAcquirer {\n  private _onTypeFile = new Emitter<TypeFile>();\n\n  constructor(\n    private readonly resolver: Resolver,\n    private readonly resolveBareModule: (spec: string, pathname?: string) => URL\n  ) {}\n\n  private _importAdjacentTypings(\n    typingsFiles: TypingsFiles,\n    pkgJson: PackageJson,\n    parentPath: string\n  ): Promise<boolean> {\n    // console.log('_importAdjacentTypings', pkgJson.name, pkgJson.version, parentPath);\n    const moduleRoot = util.join(parentPath, `node_modules/${pkgJson.name}/`);\n\n    if (!pkgJson.name) {\n      return Promise.resolve(false);\n    }\n\n    return this._listFiles(pkgJson.name, pkgJson.version).then(files => {\n      let imported = false;\n      const promises: Promise<void>[] = [];\n      const normalizedMain = util.resolve('/', pkgJson.main || 'index.js');\n\n      for (const pathname in files) {\n        if (!(normalizedMain === pathname || HAS_D_TS_EXTENSION.test(pathname))) {\n          continue;\n        }\n\n        promises.push(\n          this.resolver.host\n            .readFileContent(this.resolver, this.resolveBareModule(`${pkgJson.name}@${pkgJson.version}`, pathname))\n            .then(\n              // eslint-disable-next-line no-loop-func\n              buf => {\n                const contents = this.resolver.decoder.decode(buf);\n                const filePath = util.join(moduleRoot, pathname);\n                typingsFiles[filePath] = contents;\n\n                this._onTypeFile.fire({\n                  pathname: filePath,\n                  content: contents,\n                });\n\n                if (normalizedMain !== pathname) {\n                  imported = true;\n                }\n              },\n              e => {\n                console.warn(e);\n              }\n            )\n        );\n      }\n\n      if (!promises.length) {\n        return imported;\n      }\n\n      return Promise.all(promises).then(() => imported);\n    });\n  }\n\n  // private async _importEmbeddedTypings(\n  //   typingsFiles: TypingsFiles,\n  //   pkgJson: PackageJsonWithTypings,\n  //   parentPath: string\n  // ) {\n  //   let filesPromise: Promise<{ [fileName: string]: PackageFileEntry }> | undefined;\n  //   const readFiles = () => {\n  //     if (!filesPromise) {\n  //       filesPromise = this._listFiles(pkgJson.name, pkgJson.version);\n  //     }\n  //     return filesPromise;\n  //   };\n  //   const visitTypingsFile = async (fileName: string) => {\n  //     if (seen.has(fileName)) return;\n  //     seen.add(fileName);\n  //     console.log('visiting', fileName);\n  //     // Load the contents and add it to the known models\n  //     const sourceText = await this._readUnpkgFile(pkgJson.name, pkgJson.version, pkgJson.typings);\n  //     console.log('addExtraLib', sourceText, fileName);\n  //     typingsFiles[join(parentPath, fileName)] = sourceText;\n  //     const sourceFile = typescript.createSourceFile(fileName, sourceText, typescript.ScriptTarget.Latest, true);\n  //     const children: string[] = [];\n  //     typescript.forEachChild(sourceFile, child => {\n  //       if (typescript.isImportDeclaration(child) && typescript.isStringLiteral(child.moduleSpecifier)) {\n  //         children.push(child.moduleSpecifier.text);\n  //       } else if (\n  //         typescript.isExportDeclaration(child) &&\n  //         child.moduleSpecifier &&\n  //         child.moduleSpecifier &&\n  //         typescript.isStringLiteral(child.moduleSpecifier)\n  //       ) {\n  //         children.push(child.moduleSpecifier.text);\n  //       }\n  //     });\n  //     // We will figure out dependencies outside this module by building the optimized npm\n  //     // dependency tree\n  //     const relativeChildren = children.filter(ref => ref.charAt(0) === '.');\n  //     if (relativeChildren.length) {\n  //       const currentDir = dirname(fileName);\n  //       const files = await readFiles();\n  //       await Promise.all(\n  //         relativeChildren.map(ref => {\n  //           const childPathReference = resolve(currentDir, ref);\n  //           const childPath = resolveImportPath(files, childPathReference);\n  //           if (childPath) {\n  //             return visitTypingsFile(childPath);\n  //           }\n  //         })\n  //       );\n  //     }\n  //   };\n  //   const seen = new Set<string>();\n  //   const typescript = await import('typescript');\n  //   await visitTypingsFile(pkgJson.typings);\n  // }\n\n  private async _importTypingsFromDefinitelyTyped(\n    files: TypingsFiles,\n    pkgJson: PackageJson,\n    parentPath: string\n  ): Promise<void> {\n    // console.log('_importTypingsFromDefinitelyTyped', pkgJson.name, pkgJson.version, parentPath);\n    if (!pkgJson.name) {\n      return undefined;\n    }\n\n    const typingsModuleSpec = getTypingsModuleSpec({ name: pkgJson.name, version: pkgJson.version });\n\n    try {\n      const pkgJson = await this._import(files, typingsModuleSpec.name, typingsModuleSpec.range, parentPath);\n\n      if (pkgJson.dependencies) {\n        for (const name in pkgJson.dependencies) {\n          await this._import(files, name, pkgJson.dependencies[name], parentPath);\n        }\n      }\n    } catch (e) {\n      return undefined;\n    }\n  }\n\n  private async _listFiles(\n    name: string,\n    version: string = 'latest'\n  ): Promise<{ [pathname: string]: PackageFileEntry }> {\n    const unresolvedUrl = await this.resolver.host.getCanonicalUrl(\n      this.resolver,\n      this.resolveBareModule(`${name}@${version}`, '/')\n    );\n    const resolvedUrl = await this.resolver.host.getCanonicalUrl(this.resolver, unresolvedUrl);\n    const entries: { [pathname: string]: PackageFileEntry } = {};\n    const queue = [resolvedUrl];\n\n    while (queue.length) {\n      const next = queue.shift()!;\n      const entriesAtPath = await this.resolver.host.listEntries(this.resolver, next);\n\n      for (const entry of entriesAtPath) {\n        if (entry.type === ResolvedEntryKind.Directory) {\n          queue.push(entry.url);\n        } else {\n          const path = entry.url.href.slice(resolvedUrl.href.length - 1);\n          entries[path] = { type: PackageEntryKind.File, path };\n        }\n      }\n    }\n\n    return entries;\n  }\n\n  private async _import(\n    files: TypingsFiles,\n    name: string,\n    range: string,\n    parentPath: string = ''\n  ): Promise<PackageJson> {\n    // console.log('_import', name, range, parentPath);\n\n    const pkgJsonPathname = util.join(parentPath, 'node_modules', name, 'package.json');\n    const bareModuleUrl = this.resolveBareModule(`${name}@${range}`, '/package.json');\n    const resolvedPkgJson = await this.resolver.readParentPackageJson(bareModuleUrl);\n\n    if (!resolvedPkgJson) {\n      throw new Error(`Unable to load package.json for ${name}@${range}`);\n    }\n\n    const pkgJsonText = JSON.stringify(resolvedPkgJson.packageJson);\n    const resolvedName = resolvedPkgJson.packageJson.name || name;\n\n    files[pkgJsonPathname] = pkgJsonText;\n\n    this._onTypeFile.fire({\n      pathname: pkgJsonPathname,\n      content: pkgJsonText,\n    });\n\n    // if (isPackageJsonWithTypings(pkgJson)) {\n    //   await this._importEmbeddedTypings(files, pkgJson, parentPath);\n    // } else {\n    try {\n      const hasAdjacentTypings = await this._importAdjacentTypings(files, resolvedPkgJson.packageJson!, parentPath);\n\n      // console.log('hasAdjacentTypings', hasAdjacentTypings);\n\n      if (!hasAdjacentTypings && resolvedName.indexOf('@types/') !== 0) {\n        await this._importTypingsFromDefinitelyTyped(files, resolvedPkgJson.packageJson, parentPath);\n      }\n    } catch (err) {\n      console.error('error', err);\n    }\n    // }\n\n    return resolvedPkgJson.packageJson;\n  }\n\n  get onTypeFile(): Event<TypeFile> {\n    return this._onTypeFile.event;\n  }\n\n  async importTypesForSpec(name: string, range: string = 'latest', parentPath: string = ''): Promise<TypingsFiles> {\n    const files: TypingsFiles = {};\n\n    try {\n      await this._import(files, name, range, parentPath);\n    } catch (err) {\n      console.warn(err, `Type acquisition failed for ${name}@${range}`);\n    }\n\n    return files;\n  }\n\n  async importTypesForSpecs(specs: { [name: string]: string }, parentPath: string = ''): Promise<TypingsFiles> {\n    const promises = Object.keys(specs).map(name => this.importTypesForSpec(name, specs[name], parentPath));\n    const importResults = promises.length ? await Promise.all(promises) : [];\n\n    return importResults.reduce((files, result) => ({ ...files, ...result }), {} as TypingsFiles);\n  }\n}\n","import { Resolver, ResolvedEntryKind, AbstractResolverHost, ResolvedEntry } from '@velcro/resolver';\nimport * as Monaco from 'monaco-editor';\nimport { timeout } from 'ts-primitives';\n\nimport { InvariantError, TimeoutError, TranspileError, Diagnostic } from './error';\n\nconst LANGUAGE_TYPESCRIPT = 'typescript';\nconst MAX_TRANSPILE_ATTEMPTS = 3;\nconst TRANSPILE_TIMEOUT = 2000;\nconst TRANSPILE_TIMEOUT_BACKOFF = 500;\n\ntype Model = Monaco.editor.ITextModel;\n\nexport class ResolverHostMonaco extends AbstractResolverHost {\n  constructor(private readonly rootUri: Monaco.Uri = Monaco.Uri.file('/')) {\n    super();\n  }\n\n  get rootHref() {\n    return this.rootUri.toString(true);\n  }\n\n  async getResolveRoot() {\n    return new URL(this.rootUri.toString(true));\n  }\n\n  async listEntries(_resolver: Resolver, url: URL) {\n    const href = url.href.replace(/\\/?$/, '/');\n    const rootHref = this.rootUri.toString(true);\n\n    if (!href.startsWith(rootHref)) {\n      return [];\n    }\n\n    return Monaco.editor.getModels().reduce(\n      (entries, model) => {\n        const modelHref = model.uri.toString(true);\n        const seenDirs = new Set<string>();\n\n        if (modelHref.startsWith(href)) {\n          const nestedPath = modelHref.slice(href.length);\n          const nextDirIdx = nestedPath.indexOf('/');\n\n          if (nextDirIdx === 0) {\n            throw new Error('Invariant error: WAT?');\n          }\n\n          if (nextDirIdx > 0) {\n            // This is an intermediate directory\n            const url = new URL(nestedPath.slice(0, nextDirIdx + 1), href);\n\n            if (!seenDirs.has(url.href)) {\n              entries.push({\n                type: ResolvedEntryKind.Directory,\n                url,\n              });\n            }\n          } else {\n            entries.push({\n              type: ResolvedEntryKind.File,\n              url: new URL(modelHref),\n            });\n          }\n        }\n\n        return entries;\n      },\n      [] as ResolvedEntry[]\n    );\n  }\n\n  async readFileContent(_resolver: Resolver, url: URL) {\n    const href = url.href;\n\n    if (!href.startsWith(this.rootHref)) {\n      throw new InvariantError(\n        `Attempting to read file content for a model at '${href}' outside of this host's root '${this.rootHref}'`\n      );\n    }\n\n    const pathname = href.slice(this.rootHref.length);\n    const model = Monaco.editor.getModel(Monaco.Uri.file(pathname));\n\n    if (!model) {\n      throw new InvariantError(`Attempting to read file content for a model that doesn't exist at '${href}'`);\n    }\n\n    const encoder = new TextEncoder();\n    const output = await this.getTranspiledValue(model);\n\n    return encoder.encode(output);\n  }\n\n  private async getTranspiledValue(model: Monaco.editor.ITextModel) {\n    if (model.getModeId() === LANGUAGE_TYPESCRIPT) {\n      const href = model.uri.toString(true);\n\n      const tryLoadFromWorker = async () => {\n        const workerFactory = await Monaco.languages.typescript.getTypeScriptWorker();\n        const workerClient = await workerFactory(model.uri);\n        const [emitOutput, syntacticDiagnostics] = (await Promise.all([\n          workerClient.getEmitOutput(href),\n          workerClient.getSyntacticDiagnostics(href),\n        ])) as [import('typescript').EmitOutput, import('typescript').Diagnostic[]];\n\n        if (emitOutput.emitSkipped) {\n          throw new InvariantError(`Emit skipped when trying to read '${model.uri.fsPath}'`);\n        }\n\n        if (syntacticDiagnostics.length) {\n          const diagnostics: Diagnostic[] = syntacticDiagnostics.map(diagnostic => {\n            const startPosition =\n              typeof diagnostic.start === 'number' ? model.getPositionAt(diagnostic.start) : undefined;\n            const endPosition =\n              typeof diagnostic.start === 'number' && typeof diagnostic.length === 'number'\n                ? model.getPositionAt(diagnostic.start + diagnostic.length)\n                : undefined;\n\n            return {\n              message: flattenDiagnosticMessageText(diagnostic.messageText),\n              start: startPosition ? { lineNumber: startPosition.lineNumber, column: startPosition.column } : undefined,\n              end: endPosition ? { lineNumber: endPosition.lineNumber, column: endPosition.column } : undefined,\n              href: diagnostic.source,\n            };\n          });\n          throw new TranspileError(`${syntacticDiagnostics[0].messageText} at ${model.uri.fsPath}`, diagnostics);\n        }\n\n        return emitOutput.outputFiles[0].text;\n      };\n\n      let attempt = 0;\n\n      while (attempt++ < MAX_TRANSPILE_ATTEMPTS) {\n        try {\n          const code = await raceTimeout(tryLoadFromWorker(), TRANSPILE_TIMEOUT);\n\n          return code;\n        } catch (err) {\n          if (err instanceof TimeoutError) {\n            await timeout(TRANSPILE_TIMEOUT_BACKOFF * Math.pow(2, attempt));\n            continue;\n          }\n\n          throw err;\n        }\n      }\n\n      throw new TimeoutError(`Timed out while trying to transpile '${href}'`);\n    }\n\n    return model.getValue();\n  }\n}\n\nexport function flattenDiagnosticMessageText(\n  diag: string | import('typescript').DiagnosticMessageChain | undefined,\n  newLine: string = '\\n',\n  indent = 0\n): string {\n  if (typeof diag === 'string') {\n    return diag;\n  } else if (diag === undefined) {\n    return '';\n  }\n  let result = '';\n  if (indent) {\n    result += newLine;\n\n    for (let i = 0; i < indent; i++) {\n      result += '  ';\n    }\n  }\n  result += diag.messageText;\n  indent++;\n  if (diag.next) {\n    for (const kid of diag.next) {\n      result += flattenDiagnosticMessageText(kid, newLine, indent);\n    }\n  }\n  return result;\n}\n\nfunction raceTimeout<T>(promise: Promise<T>, timeoutMs: number): Promise<T> {\n  return Promise.race([\n    promise,\n    timeout(timeoutMs).then(() => {\n      return Promise.reject(new TimeoutError());\n    }),\n  ]);\n}\n","import { Bundler } from '@velcro/bundler';\nimport { Resolver, AbstractResolverHost, ResolverHost, ResolverHostOperationOptions } from '@velcro/resolver';\nimport { openDB, IDBPDatabase } from 'idb';\nimport { timeout, Limiter } from 'ts-primitives';\nimport { TimeoutError } from './error';\n\ntype ThenArg<T> = T extends Promise<infer U> ? U : T;\n\nexport class ResolverHostWithCache extends AbstractResolverHost {\n  private idbPromise: Promise<IDBPDatabase<unknown> | null>;\n\n  private readonly hostTimeout: number;\n  private readonly idbTimeout: number;\n  private readonly namespace: string;\n  private readonly limiter: Limiter<unknown>;\n\n  private readonly inflightGetCanonicalUrl = new Map<string, ReturnType<ResolverHost['getCanonicalUrl']>>();\n  private readonly inflightGetResolveRoot = new Map<string, ReturnType<ResolverHost['getResolveRoot']>>();\n  private readonly inflightListEntries = new Map<string, ReturnType<ResolverHost['listEntries']>>();\n  private readonly inflightReadFileContent = new Map<string, ReturnType<ResolverHost['readFileContent']>>();\n\n  private readonly getCanonicalUrlCache = new Map<string, ThenArg<ReturnType<ResolverHost['getCanonicalUrl']>>>();\n  private readonly getResolveRootCache = new Map<string, ThenArg<ReturnType<ResolverHost['getResolveRoot']>>>();\n  private readonly listEntriesCache = new Map<string, ThenArg<ReturnType<ResolverHost['listEntries']>>>();\n  private readonly readFileContentCache = new Map<string, ThenArg<ReturnType<ResolverHost['readFileContent']>>>();\n\n  constructor(\n    readonly host: ResolverHost,\n    { idbTimeout = 5000, hostConcurrency = 8, hostTimeout = 10000, namespace = 'default' } = {}\n  ) {\n    super();\n\n    this.hostTimeout = hostTimeout;\n    this.idbTimeout = idbTimeout;\n    this.namespace = namespace;\n    this.limiter = new Limiter(hostConcurrency);\n\n    this.idbPromise = openDB(`velcro:rhwc:${this.namespace}`, Bundler.schemaVersion, {\n      async upgrade(db, oldVersion, newVersion, transaction) {\n        if (!oldVersion) {\n          db.createObjectStore('getCanonicalUrl');\n          db.createObjectStore('getResolveRoot');\n          db.createObjectStore('listEntries');\n          db.createObjectStore('readFileContent');\n        }\n\n        await transaction.objectStore('getCanonicalUrl').clear();\n        await transaction.objectStore('getResolveRoot').clear();\n        await transaction.objectStore('listEntries').clear();\n        await transaction.objectStore('readFileContent').clear();\n      },\n    }).catch(err => {\n      console.error(err, 'error opening IndexedDB');\n\n      return null;\n    });\n  }\n\n  private async withMemoryCache<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    cache: Map<string, T>,\n    inflightMap: Map<string, Promise<T>>,\n    storeName: string,\n    serialize?: (result: T) => C,\n    deserialize?: (cached: C) => T\n  ): Promise<T> {\n    if (cache.has(href)) {\n      return cache.get(href)!;\n    }\n\n    const result = await this.withInflightGrouping(href, loadFn, inflightMap, storeName, serialize, deserialize);\n\n    cache.set(href, result);\n\n    return result;\n  }\n\n  private withInflightGrouping<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    inflightMap: Map<string, Promise<T>>,\n    storeName: string,\n    serialize?: (result: T) => C,\n    deserialize?: (cached: C) => T\n  ): Promise<T> {\n    let inflight = inflightMap.get(href);\n\n    if (!inflight) {\n      inflight = this.withIdbCache(href, loadFn, storeName, serialize, deserialize);\n\n      inflightMap.set(href, inflight);\n    }\n\n    Promise.resolve(inflight)\n      .catch(_ => undefined)\n      .then(() => inflightMap.delete(href));\n\n    return inflight;\n  }\n\n  private async withIdbCache<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    storeName: string,\n    serialize?: (result: T) => C,\n    deserialize?: (cached: C) => T\n  ): Promise<T> {\n    const idb = await this.idbPromise.catch(_ => undefined);\n\n    if (idb) {\n      const cached = await withTimeout(\n        this.idbTimeout,\n        idb.get(storeName, href),\n        `idb.get(${storeName}, ${href})`\n      ).catch(_ => {\n        // console.debug('[ResolverHostWithCache] %d MISS: timeout %s(%s)', this.limiter.size, storeName, href);\n      });\n\n      if (cached) {\n        const result = (deserialize ? deserialize(cached as any) : cached) as T;\n\n        return result;\n      }\n    }\n\n    const result = await withTimeout(this.hostTimeout, loadFn(), `Timed out on operation '${storeName}' for '${href}'`);\n\n    if (idb) {\n      idb.put(storeName, serialize ? serialize(result) : result, href).catch(_ => undefined);\n    }\n\n    return result;\n  }\n\n  private withCache<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    cache: Map<string, T>,\n    inflightMap: Map<string, Promise<T>>,\n    storeName: string,\n    serialize?: (result: T) => C,\n    deserialize?: (cached: C) => T\n  ): Promise<T> {\n    return this.withMemoryCache(href, loadFn, cache, inflightMap, storeName, serialize, deserialize);\n  }\n\n  async getCanonicalUrl(resolver: Resolver, url: URL, options?: ResolverHostOperationOptions) {\n    const result = await this.withCache(\n      url.href,\n      () => this.host.getCanonicalUrl(resolver, url, options),\n      this.getCanonicalUrlCache,\n      this.inflightGetCanonicalUrl,\n      'getCanonicalUrl',\n      url => url.href,\n      href => new URL(href)\n    );\n\n    return result;\n  }\n\n  async getResolveRoot(resolver: Resolver, url: URL, options?: ResolverHostOperationOptions) {\n    const result = await this.withCache(\n      url.href,\n      () => this.host.getResolveRoot(resolver, url, options),\n      this.getResolveRootCache,\n      this.inflightGetResolveRoot,\n      'getResolveRoot',\n      url => url.href,\n      href => new URL(href)\n    );\n\n    return result;\n  }\n\n  async listEntries(resolver: Resolver, url: URL, options?: ResolverHostOperationOptions) {\n    const result = await this.withCache(\n      url.href,\n      () => this.host.listEntries(resolver, url, options),\n      this.listEntriesCache,\n      this.inflightListEntries,\n      'listEntries',\n      entries =>\n        entries.map(entry => ({\n          type: entry.type,\n          href: entry.url.href,\n        })),\n      cached =>\n        cached.map(entry => ({\n          type: entry.type,\n          url: new URL(entry.href),\n        }))\n    );\n\n    return result;\n  }\n\n  async readFileContent(resolver: Resolver, url: URL, options?: ResolverHostOperationOptions) {\n    try {\n      const result = await this.withCache(\n        url.href,\n        () => this.host.readFileContent(resolver, url, options),\n        this.readFileContentCache,\n        this.inflightReadFileContent,\n        'readFileContent'\n      );\n\n      return result;\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nfunction withTimeout<T>(duration: number, promise: Promise<T>, message: string) {\n  return Promise.race([\n    promise,\n    timeout(duration * 10).then(() => {\n      // console.debug('[ResolverHostWithCache] TIMEOUT(%d): %s', duration, message);\n      return Promise.reject(new TimeoutError(message));\n    }),\n  ]);\n}\n","import { Resolver, AbstractResolverHost, ResolverHost, ResolverHostOperationOptions } from '@velcro/resolver';\nimport { timeout } from 'ts-primitives';\nimport { TimeoutError } from './error';\n\nexport class ResolverHostWithInflightCache extends AbstractResolverHost {\n  private readonly hostTimeout: number;\n\n  private readonly inflightGetCanonicalUrl = new Map<string, ReturnType<ResolverHost['getCanonicalUrl']>>();\n  private readonly inflightGetResolveRoot = new Map<string, ReturnType<ResolverHost['getResolveRoot']>>();\n  private readonly inflightListEntries = new Map<string, ReturnType<ResolverHost['listEntries']>>();\n  private readonly inflightReadFileContent = new Map<string, ReturnType<ResolverHost['readFileContent']>>();\n\n  constructor(readonly host: ResolverHost, { hostTimeout = 10000 } = {}) {\n    super();\n\n    this.hostTimeout = hostTimeout;\n  }\n\n  private withInflightGrouping<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    inflightMap: Map<string, Promise<T>>,\n    operationName: string\n  ): Promise<T> {\n    let inflight = inflightMap.get(href);\n\n    if (!inflight) {\n      inflight = withTimeout(\n        this.hostTimeout,\n        loadFn(),\n        `Timed out while calling ${operationName}(${JSON.stringify(href)})`\n      );\n\n      inflightMap.set(href, inflight);\n    }\n\n    inflight.catch(_ => undefined).then(() => inflightMap.delete(href));\n\n    return inflight;\n  }\n\n  async getCanonicalUrl(resolver: Resolver, url: URL, options?: ResolverHostOperationOptions) {\n    const result = await this.withInflightGrouping(\n      url.href,\n      () => this.host.getCanonicalUrl(resolver, url, options),\n      this.inflightGetCanonicalUrl,\n      'getCanonicalUrl'\n    );\n\n    return result;\n  }\n\n  async getResolveRoot(resolver: Resolver, url: URL, options?: ResolverHostOperationOptions) {\n    const result = await this.withInflightGrouping(\n      url.href,\n      () => this.host.getResolveRoot(resolver, url, options),\n      this.inflightGetResolveRoot,\n      'getResolveRoot'\n    );\n\n    return result;\n  }\n\n  async listEntries(resolver: Resolver, url: URL, options?: ResolverHostOperationOptions) {\n    const result = await this.withInflightGrouping(\n      url.href,\n      () => this.host.listEntries(resolver, url, options),\n      this.inflightListEntries,\n      'listEntries'\n    );\n\n    return result;\n  }\n\n  async readFileContent(resolver: Resolver, url: URL, options?: ResolverHostOperationOptions) {\n    try {\n      const result = await this.withInflightGrouping(\n        url.href,\n        () => this.host.readFileContent(resolver, url, options),\n        this.inflightReadFileContent,\n        'readFileContent'\n      );\n\n      return result;\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nfunction withTimeout<T>(duration: number, promise: Promise<T>, message: string) {\n  return Promise.race([\n    promise,\n    timeout(duration * 10).then(() => {\n      // console.debug('[ResolverHostWithCache] TIMEOUT(%d): %s', duration, message);\n      return Promise.reject(new TimeoutError(message));\n    }),\n  ]);\n}\n","import { Runtime } from '@velcro/bundler';\n\nexport interface HmrBuildErrorRequest {\n  type: 'build_error';\n  message?: string;\n  stack?: string;\n}\nexport interface HmrReloadRequest {\n  type: 'reload';\n  href: string;\n  invalidations: string[];\n}\n\nexport interface HmrReloadResponse {}\n\ndeclare var velcroRequire: NodeRequire;\ndeclare var __velcroRuntime: Runtime;\n\n/**\n * Important: This function needs to be fully self-contained because it will be stringified.\n * @param filename\n */\nexport function createBundleRuntime() {\n  const ReactErrorOverlay = velcroRequire('react-error-overlay') as typeof import('react-error-overlay');\n  const channel = new MessageChannel();\n\n  //@ts-ignore\n  window.ReactErrorOverlay = ReactErrorOverlay;\n\n  ReactErrorOverlay.setEditorHandler(err => {\n    window.parent.postMessage({ type: 'error_open', payload: err }, '*');\n  });\n  ReactErrorOverlay.startReportingRuntimeErrors({\n    onError: () => undefined,\n  });\n\n  channel.port2.onmessage = function(e) {\n    if (!e.data || typeof e.data !== 'object') {\n      throw new Error(`Unexpected message received by HMR server`);\n    }\n\n    switch (e.data.type) {\n      case 'build_error': {\n        ReactErrorOverlay.dismissRuntimeErrors();\n        ReactErrorOverlay.reportBuildError(e.data.message || e.data);\n\n        channel.port2.postMessage({\n          type: 'reload',\n        });\n        break;\n      }\n      case 'reload': {\n        if (isValidReload(e.data)) {\n          ReactErrorOverlay.dismissBuildError();\n          ReactErrorOverlay.dismissRuntimeErrors();\n          const reload = e.data;\n          const runtime = __velcroRuntime;\n          const queue = reload.invalidations.slice();\n          const seen = new Set<string>();\n          const potentialOrphans = new Set<string>();\n          const requireReload = [] as string[];\n          const acceptCallbackQueue = [] as ({ module: typeof runtime.root; cb: () => void })[];\n          const disposeCallbackQueue = [] as ({ module: typeof runtime.root; cb: () => void })[];\n\n          while (queue.length) {\n            const href = queue.shift()!;\n\n            if (seen.has(href)) continue;\n            seen.add(href);\n\n            const module = runtime.get(href);\n\n            if (!module) {\n              continue;\n            }\n\n            module.dependencies.forEach(dependency => {\n              potentialOrphans.add(dependency.id);\n            });\n\n            potentialOrphans.delete(module.id);\n\n            for (const disposeCallback of module.disposeCallbacks) {\n              disposeCallbackQueue.push({ module, cb: disposeCallback.cb });\n            }\n\n            if (module.acceptCallbacks.length) {\n              for (const acceptCallback of module.acceptCallbacks) {\n                acceptCallbackQueue.push({ module, cb: acceptCallback.cb });\n              }\n            } else {\n              const isEntrypoint = module.dependents.has(runtime.root);\n\n              if (isEntrypoint) {\n                requireReload.push(module.id);\n              } else {\n                module.dependents.forEach(dependent => {\n                  if (!seen.has(dependent.id)) {\n                    queue.push(dependent.id);\n                  }\n                });\n              }\n            }\n          }\n\n          seen.forEach(href => {\n            runtime.remove(href);\n          });\n\n          const script = document.createElement('script');\n          script.src = reload.href;\n          script.onerror = function(err) {\n            channel.port2.postMessage({\n              type: 'reload',\n              err,\n            });\n          };\n          script.onload = function() {\n            disposeCallbackQueue.forEach(({ cb, module }) => {\n              cb();\n            });\n            acceptCallbackQueue.forEach(({ cb, module }) => {\n              cb();\n            });\n\n            for (const toReload of requireReload) {\n              runtime.require(toReload);\n            }\n\n            // Find any module that will become orphaned by this change and\n            // dispose it\n            potentialOrphans.forEach(potentialOrphan => {\n              const potentialOrphanModule = runtime.get(potentialOrphan);\n\n              if (potentialOrphanModule && potentialOrphanModule.dependents.size === 0) {\n                for (const disposeCallback of potentialOrphanModule.disposeCallbacks) {\n                  disposeCallback.cb();\n                }\n\n                runtime.remove(potentialOrphan);\n              }\n            });\n\n            channel.port2.postMessage({\n              type: 'reload',\n            });\n          };\n\n          document.head.appendChild(script);\n        }\n      }\n    }\n  };\n\n  window.parent.postMessage({ type: 'hmr_ready', payload: channel.port1 }, '*', [channel.port1]);\n\n  //#region Type Guards\n\n  function isObject(val: unknown): val is Record<string | number, unknown> {\n    return val && typeof val === 'object';\n  }\n\n  function isString(val: unknown): val is string {\n    return typeof val === 'string';\n  }\n\n  function isValidReload(message: unknown): message is HmrReloadRequest {\n    if (!isObject(message)) return false;\n\n    if (message.type !== 'reload') return false;\n\n    if (!Array.isArray(message.invalidations) || message.invalidations.find(entry => typeof entry !== 'string')) {\n      return false;\n    }\n\n    return isString(message.href);\n  }\n  //#endregion\n}\n","import { Resolver } from '@velcro/resolver';\nimport { ResolverHostCompound } from '@velcro/resolver-host-compound';\nimport { ResolverHostMemory } from '@velcro/resolver-host-memory';\nimport { ResolverHostUnpkg } from '@velcro/resolver-host-unpkg';\nimport * as Monaco from 'monaco-editor';\nimport resolveNpmSpec from 'npm-package-arg';\nimport { useState, useEffect, useContext, createContext } from 'react';\nimport { Emitter, IDisposable, DisposableStore, ThrottledDelayer } from 'ts-primitives';\n\nimport { TypeAcquirer } from './typeAcquisition';\nimport { ResolverHostMonaco } from '../lib/ResolverHostMonaco';\nimport { ResolverHostWithCache } from '../lib/ResolverHostWithCache';\nimport { ResolverHostWithInflightCache } from '../lib/ResolverHostWithInflightCache';\nimport { NotSupportedError } from './error';\nimport { createBundleRuntime } from './previewRuntime';\n\nconst rootUri = Monaco.Uri.file('/');\n\nexport class EditorManager implements IDisposable {\n  readonly unpkgCdn = ResolverHostUnpkg.forNpmFromJsdelivr();\n  readonly githubCdn = ResolverHostUnpkg.forGithubFromJsdelivr();\n  readonly cachingUnpkgHost = new ResolverHostWithCache(this.unpkgCdn, {\n    namespace: this.unpkgCdn.getRoot().href,\n  });\n\n  readonly previewRuntimeHost = new ResolverHostMemory(\n    {\n      'index.js': `(${createBundleRuntime.toString().replace(/velcroRequire/g, 'require')})();`,\n      'package.json': JSON.stringify({\n        dependencies: {\n          'react-error-overlay': '^6.0.3',\n        },\n      }),\n    },\n    'preview'\n  );\n  readonly inflightCachingHost = new ResolverHostWithInflightCache(\n    new ResolverHostCompound({\n      [this.unpkgCdn.getRoot().href]: this.cachingUnpkgHost,\n      [this.previewRuntimeHost.getRoot().href]: this.previewRuntimeHost,\n      [rootUri.toString(true)]: new ResolverHostMonaco(rootUri),\n    })\n  );\n\n  readonly resolver = new Resolver(this.inflightCachingHost, {\n    extensions: ['.js', '.jsx', '.ts', '.tsx'],\n    packageMain: ['browser', 'main'],\n  });\n\n  editor: Monaco.editor.IStandaloneCodeEditor | null = null;\n\n  private readonly disposableStore = new DisposableStore();\n  private readonly initialPath: string | undefined;\n\n  private readonly typeAcquirer = new TypeAcquirer(this.resolver, this.resolveBareModule.bind(this));\n  private readonly viewState = new WeakMap<Monaco.editor.ITextModel, Monaco.editor.ICodeEditorViewState>();\n\n  private readonly onWillFocusModelEmitter = new Emitter<Monaco.editor.ITextModel>();\n  private readonly onDidChangeEmitter = new Emitter<{ model: Monaco.editor.ITextModel }>();\n\n  constructor(options: { files?: Record<string, string>; initialPath?: string } = {}) {\n    this.disposableStore.add(this.onWillFocusModelEmitter);\n    this.disposableStore.add(this.onDidChangeEmitter);\n\n    Monaco.languages.typescript.typescriptDefaults.setEagerModelSync(true);\n    Monaco.languages.typescript.typescriptDefaults.setMaximumWorkerIdleTime(-1);\n    Monaco.languages.typescript.typescriptDefaults.setCompilerOptions({\n      allowJs: true,\n      allowNonTsExtensions: true,\n      allowSyntheticDefaultImports: true,\n      baseUrl: '.',\n      checkJs: true,\n      esModuleInterop: true,\n      experimentalDecorators: true,\n      inlineSourceMap: true,\n      inlineSources: true,\n      isolatedModules: false,\n      jsx: Monaco.languages.typescript.JsxEmit.React,\n      lib: ['dom'],\n      module: Monaco.languages.typescript.ModuleKind.CommonJS,\n      moduleResolution: Monaco.languages.typescript.ModuleResolutionKind.NodeJs,\n      noEmit: false,\n      outDir: `dist`,\n      resolveJsonModule: true,\n      rootDir: '/',\n      sourceMap: true,\n      target: Monaco.languages.typescript.ScriptTarget.ES2015,\n      typeRoots: ['node_modules/@types'],\n    });\n    Monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\n      noSemanticValidation: true,\n      noSyntaxValidation: false,\n    });\n\n    if (options.files) {\n      for (const pathname in options.files) {\n        const content = options.files[pathname];\n\n        this.createModel(pathname, content);\n      }\n    }\n\n    Monaco.editor.onDidCreateModel(model => {\n      const onDidChangePackageJson = async () => {\n        const value = model.getValue();\n\n        let dependencies = {\n          typescript: Monaco.languages.typescript.typescriptVersion,\n        };\n\n        try {\n          const pkgJson = JSON.parse(value);\n\n          if (pkgJson.dependencies) {\n            dependencies = { ...dependencies, ...pkgJson.dependencies };\n          }\n        } catch (_) {\n          // Ignore\n        }\n\n        Monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({ noSemanticValidation: true });\n        await this.typeAcquirer.importTypesForSpecs(dependencies);\n        Monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({ noSemanticValidation: false });\n      };\n\n      if (model.uri.toString(true) === `${rootUri.toString(true)}package.json`) {\n        const throttler = new ThrottledDelayer(1500);\n        throttler.trigger(onDidChangePackageJson);\n\n        this.disposableStore.add(model.onDidChangeContent(() => throttler.trigger(onDidChangePackageJson)));\n        this.disposableStore.add(throttler);\n      }\n    });\n\n    this.disposableStore.add(\n      this.typeAcquirer.onTypeFile(file => {\n        this.disposableStore.add(\n          Monaco.languages.typescript.typescriptDefaults.addExtraLib(\n            file.content,\n            Monaco.Uri.file(file.pathname).toString(true)\n          )\n        );\n      })\n    );\n\n    this.initialPath = options.initialPath;\n  }\n\n  get dispose() {\n    return this.disposableStore.dispose;\n  }\n\n  get onDidChange() {\n    return this.onDidChangeEmitter.event;\n  }\n\n  get onWillFocusModel() {\n    return this.onWillFocusModelEmitter.event;\n  }\n\n  createModel(pathname: string, content = '') {\n    const language = this.inferLanguage(pathname);\n\n    let uri: Monaco.Uri;\n\n    try {\n      uri = Monaco.Uri.file(pathname);\n    } catch (err) {\n      throw new Error(`Invalid path '${pathname}': ${err && err.message}`);\n    }\n\n    if (Monaco.editor.getModel(uri)) {\n      throw new Error(`Cannot create file because it exists '${pathname}'`);\n    }\n\n    return Monaco.editor.createModel(content, language, uri);\n  }\n\n  focusHref(\n    href: string,\n    options: { lineNumber?: number; columnNumber?: number; markers?: Monaco.editor.IMarkerData[] } = {}\n  ) {\n    const model = this.getModelByHref(href);\n\n    if (model) {\n      this.focusModel(model, options);\n    }\n  }\n\n  focusModel(\n    model: Monaco.editor.ITextModel,\n    options: { lineNumber?: number; columnNumber?: number; markers?: Monaco.editor.IMarkerData[] } = {}\n  ) {\n    if (this.editor) {\n      this.editor.setModel(model);\n      if (options.lineNumber) {\n        this.editor.revealLineInCenter(options.lineNumber, Monaco.editor.ScrollType.Smooth);\n        this.editor.setPosition({\n          column: options.columnNumber || 0,\n          lineNumber: options.lineNumber,\n        });\n      }\n      if (options.markers) {\n        Monaco.editor.setModelMarkers(model, 'editorManager', options.markers);\n      }\n      this.editor.focus();\n    }\n  }\n\n  focusPath(\n    path: string,\n    options: { lineNumber?: number; columnNumber?: number; markers?: Monaco.editor.IMarkerData[] } = {}\n  ) {\n    const model = this.getModelByPath(path);\n\n    if (model) {\n      this.focusModel(model, options);\n    }\n  }\n\n  getModelByHref(href: string) {\n    try {\n      const uri = Monaco.Uri.parse(href);\n      return Monaco.editor.getModel(uri);\n    } catch (_) {\n      return null;\n    }\n  }\n\n  getModelByPath(path: string) {\n    return Monaco.editor.getModel(Monaco.Uri.file(path));\n  }\n\n  mount(el: HTMLElement) {\n    if (this.editor) {\n      throw new Error('Invariant violation: Editor already mounted');\n    }\n\n    this.editor = Monaco.editor.create(el, {\n      model: null,\n      automaticLayout: true,\n      minimap: {\n        enabled: false,\n      },\n      showUnused: true,\n      scrollBeyondLastLine: false,\n      theme: 'vs',\n      wordWrap: 'bounded',\n      wrappingIndent: 'same',\n    });\n\n    this.editor.onDidDispose(() => {\n      this.editor = null;\n    });\n\n    this.editor.onDidChangeModel(e => {\n      if (e.newModelUrl && this.editor) {\n        const model = Monaco.editor.getModel(e.newModelUrl)!;\n        const viewState = this.viewState.get(model);\n\n        if (viewState) {\n          this.editor.restoreViewState(viewState);\n        }\n      }\n    });\n\n    this.editor.onDidBlurEditorText(() => {\n      if (this.editor) {\n        const model = this.editor.getModel();\n        const viewState = this.editor.saveViewState();\n\n        if (model && viewState) {\n          this.viewState.set(model, viewState);\n        }\n      }\n    });\n\n    this.disposableStore.add(this.editor);\n\n    if (this.initialPath) {\n      this.focusPath(this.initialPath);\n    }\n\n    return this.editor;\n  }\n\n  inferLanguage(pathname: string) {\n    return pathname.match(/\\.(?:tsx?|jsx?)$/) ? 'typescript' : undefined;\n  }\n\n  resolveBareModule(spec: string, pathname?: string) {\n    const npmSpec = resolveNpmSpec(spec);\n\n    switch (npmSpec.type) {\n      case 'range':\n      case 'version': {\n        return this.unpkgCdn.resolveBareModule(spec, pathname);\n      }\n      case 'git': {\n        if (npmSpec.hosted && npmSpec.hosted.type === 'github') {\n          const resolvedSpec = `${npmSpec.hosted.user}/${npmSpec.hosted.project}@${npmSpec.gitRange ||\n            npmSpec.gitCommittish}`;\n          return this.githubCdn.resolveBareModule(resolvedSpec, pathname);\n        }\n\n        throw new NotSupportedError(\n          `Unable to resolve '${spec}' because dependencies of type '${npmSpec.type}' are not yet supported`\n        );\n      }\n      default: {\n        debugger;\n        throw new NotSupportedError(\n          `Unable to resolve '${spec}' because dependencies of type '${npmSpec.type}' are not yet supported`\n        );\n      }\n    }\n  }\n}\n\nexport const EditorManagerContext = createContext(new EditorManager());\n\nexport function useActiveModel() {\n  const workbench = useContext(EditorManagerContext);\n  const [activeModel, setActiveModel] = useState<Monaco.editor.ITextModel | null>(\n    workbench.editor ? workbench.editor.getModel() : null\n  );\n\n  useEffect(() => {\n    const disposable = new DisposableStore();\n\n    const trackEditor = (editor: Monaco.editor.ICodeEditor) => {\n      editor.onDidChangeModel(e => {\n        const model = e.newModelUrl ? Monaco.editor.getModel(e.newModelUrl) : null;\n\n        setActiveModel(model);\n      });\n\n      disposable.add(\n        editor.onDidBlurEditorText(() => {\n          setActiveModel(null);\n        })\n      );\n\n      disposable.add(\n        editor.onDidFocusEditorText(() => {\n          setActiveModel(editor.getModel());\n        })\n      );\n\n      if (editor.hasTextFocus()) {\n        setActiveModel(editor.getModel());\n      }\n    };\n\n    disposable.add(Monaco.editor.onDidCreateEditor(trackEditor));\n    if (workbench.editor) {\n      trackEditor(workbench.editor);\n    }\n\n    return () => disposable.dispose();\n  }, [workbench.editor, activeModel]);\n\n  return activeModel;\n}\n","import _regeneratorRuntime from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _possibleConstructorReturn from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _classCallCheck from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _slicedToArray from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Emitter } from 'ts-primitives';\nexport { CancellationToken, CancellationTokenSource } from 'ts-primitives';\nimport MagicString, { Bundle as Bundle$1 } from 'magic-string';\nimport { parse as parse$1 } from 'acorn';\nimport { CanceledError, CancellationTokenSource } from '@velcro/resolver';\nimport { resolve } from 'npm-package-arg';\nimport remapping from '@ampproject/remapping';\nimport { Base64 } from 'js-base64';\nvar version = \"0.27.0\";\n\nfunction traverse(ast, ctx, _ref) {\n  var enter = _ref.enter,\n      leave = _ref.leave;\n  visit(ast, null, ctx, enter, leave);\n}\n\nvar shouldSkip = false;\nvar context = {\n  skip: function skip() {\n    return shouldSkip = true;\n  }\n};\nvar childKeys = {};\n\nfunction visit(node, parent, ctx, enter, leave, prop, index) {\n  if (!node) return;\n  node.parent = parent;\n\n  if (enter) {\n    var _shouldSkip = shouldSkip;\n    shouldSkip = false;\n    enter.call(context, node, parent, ctx, prop, index);\n    var skipped = shouldSkip;\n    shouldSkip = _shouldSkip;\n    if (skipped) return;\n  }\n\n  var keys = childKeys[node.type] || (childKeys[node.type] = Object.keys(node).filter(function (key) {\n    return key !== 'parent' && typeof node[key] === 'object';\n  }));\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = node[key];\n\n    if (Array.isArray(value)) {\n      for (var j = 0; j < value.length; j++) {\n        visit(value[j], node, ctx, enter, leave, key, j);\n      }\n    } else if (value && value.type) {\n      visit(value, node, ctx, enter, leave, key);\n    }\n  }\n\n  if (leave) {\n    leave(node, parent, ctx, prop, index);\n  }\n}\n\nfunction isArrowFunctionExpression(node) {\n  return node.type === 'ArrowFunctionExpression';\n}\n\nfunction isArrayPattern(node) {\n  return node.type === 'ArrayPattern';\n}\n\nfunction isAssignmentPattern(node) {\n  return node.type === 'AssignmentPattern';\n}\n\nfunction isBinaryExpression(node) {\n  return node.type === 'BinaryExpression';\n}\n\nfunction isBlockStatement(node) {\n  return node.type === 'BlockStatement';\n}\n\nfunction isCallExpression(node) {\n  return node.type === 'CallExpression';\n}\n\nfunction isClassDeclaration(node) {\n  return node.type === 'ClassDeclaration';\n}\n\nfunction isFunctionDeclaration(node) {\n  return node.type === 'FunctionDeclaration';\n}\n\nfunction isFunctionExpression(node) {\n  return node.type === 'FunctionExpression';\n}\n\nfunction isIdentifier(node) {\n  return node.type === 'Identifier';\n}\n\nfunction isIfStatement(node) {\n  return node.type === 'IfStatement';\n}\n\nfunction isLiteral(node) {\n  return node.type === 'Literal';\n}\n\nfunction isMemberExpression(node) {\n  return node.type === 'MemberExpression';\n}\n\nfunction isNodeWithStartAndEnd(node) {\n  return typeof node.start === 'number' && typeof node.end === 'number';\n}\n\nfunction isObjectPattern(node) {\n  return node.type === 'ObjectPattern';\n}\n\nfunction isProperty(node) {\n  return node.type === 'Property';\n}\n\nfunction isRestElement(node) {\n  return node.type === 'RestElement';\n}\n\nfunction isProgram(node) {\n  return node.type === 'Program';\n}\n\nfunction isThisExpression(node) {\n  return node.type === 'ThisExpression';\n}\n\nfunction isTryStatement(node) {\n  return node.type === 'TryStatement';\n}\n\nfunction isVariableDeclaration(node) {\n  return node.type === 'VariableDeclaration';\n} // Refinements or groups\n\n\nfunction isFunction(node) {\n  return isFunctionDeclaration(node) || isFunctionExpression(node) || isArrowFunctionExpression(node);\n}\n\nfunction isStringLiteral(node) {\n  return isLiteral(node) && typeof node.value === 'string';\n}\n\nfunction parse(code, options) {\n  return parse$1(code, _objectSpread({}, options, {\n    allowReturnOutsideFunction: true,\n    sourceType: 'script'\n  }));\n}\n\nfunction parseFile(uri, magicString) {\n  var ctx = {\n    unboundSymbols: new Map(),\n    locals: new Map(),\n    nodeEnv: 'development',\n    replacements: [],\n    requires: [],\n    requireResolves: [],\n    skip: new Set()\n  };\n\n  try {\n    // let lastToken: acorn.Token | undefined = undefined;\n    var ast = parse(magicString.original, {\n      onComment: function onComment(_isBlock, _test, start, end) {\n        magicString.remove(start, end);\n      },\n      onToken: function onToken(token) {\n        magicString.addSourcemapLocation(token.start); // const wsStart = lastToken ? lastToken.end : 0;\n        // if (wsStart < token.start - 1) {\n        //   const between = magicString.original.substring(wsStart, token.start);\n        //   if (whitespaceRx.test(between)) {\n        //     magicString.overwrite(wsStart, token.start - 1, ' ');\n        //   }\n        // }\n        // lastToken = token;\n      }\n    });\n    traverse(ast, ctx, scopingAndRequiresVisitor);\n    traverse(ast, ctx, collectGlobalsVisitor);\n  } catch (err) {\n    throw new Error(\"Error parsing \".concat(uri, \": \").concat(err.message));\n  }\n\n  var requireDependencies = [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = ctx.requires[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      requireDependencies.push({\n        callee: _objectSpread({}, node.callee),\n        spec: _objectSpread({}, node.spec)\n      });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var requireResolveDependencies = [];\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = ctx.requireResolves[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _node = _step2.value;\n      requireResolveDependencies.push({\n        callee: _objectSpread({}, _node.callee),\n        spec: _objectSpread({}, _node.spec)\n      });\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var unboundSymbols = new Map();\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = ctx.unboundSymbols[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _ref4 = _step3.value;\n\n      var _ref3 = _slicedToArray(_ref4, 2);\n\n      var symbolName = _ref3[0];\n      var symbolNodes = _ref3[1];\n      unboundSymbols.set(symbolName, symbolNodes.map(function (node) {\n        return {\n          start: node.start,\n          end: node.end\n        };\n      }));\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return {\n    requireDependencies: requireDependencies,\n    requireResolveDependencies: requireResolveDependencies,\n    unboundSymbols: unboundSymbols\n  };\n}\n\nvar scopingAndRequiresVisitor = {\n  enter: function enter(node, parent, ctx) {\n    if (ctx.skip.has(node)) {\n      return this.skip();\n    }\n\n    visitAndCaptureScoping(node, parent, ctx);\n    visitAndSkipBranches(node, parent, ctx);\n    visitRequires(node, parent, ctx);\n  }\n};\nvar collectGlobalsVisitor = {\n  enter: function enter(node, _parent, ctx) {\n    if (isBindingIdentifier(node) && isIdentifier(node)) {\n      var name = node.name;\n      if (name === 'undefined') return;\n      var foundBinding = false;\n      var nextParent = node.parent;\n\n      while (nextParent) {\n        if (name === 'arguments' && declaresArguments(nextParent)) {\n          foundBinding = true;\n          break;\n        }\n\n        var locals = ctx.locals.get(nextParent);\n\n        if (locals && locals[name]) {\n          foundBinding = true;\n          break;\n        }\n\n        nextParent = nextParent.parent;\n      }\n\n      if (!foundBinding && isNodeWithStartAndEnd(node)) {\n        var unboundSymbols = ctx.unboundSymbols.get(name);\n\n        if (!unboundSymbols) {\n          unboundSymbols = [];\n          ctx.unboundSymbols.set(name, unboundSymbols);\n        }\n\n        unboundSymbols.push(node);\n      }\n    } else if (isThisExpression(node)) {\n      var _foundBinding = false;\n      var _nextParent = node.parent;\n\n      while (_nextParent) {\n        if (declaresThis(_nextParent)) {\n          _foundBinding = true;\n          break;\n        }\n\n        _nextParent = _nextParent.parent;\n      }\n\n      if (!_foundBinding && isNodeWithStartAndEnd(node)) {\n        var _unboundSymbols = ctx.unboundSymbols.get('this');\n\n        if (!_unboundSymbols) {\n          _unboundSymbols = [];\n          ctx.unboundSymbols.set('this', _unboundSymbols);\n        }\n\n        _unboundSymbols.push(node);\n      }\n    }\n  }\n};\n\nfunction visitAndCaptureScoping(node, _parent, ctx) {\n  if (isVariableDeclaration(node)) {\n    var parent;\n    var nextParent = node.parent;\n\n    while (nextParent) {\n      if (node.kind === 'var' ? isScope(nextParent) : isBlockScope(nextParent)) {\n        parent = nextParent;\n        break;\n      }\n\n      nextParent = nextParent.parent;\n    }\n\n    if (!parent) {\n      throw new Error(\"Invariant violation: Failed to find a parent\");\n    }\n\n    var locals = ctx.locals.get(parent);\n\n    if (!locals) {\n      locals = {};\n      ctx.locals.set(parent, locals);\n    }\n\n    var _iteratorNormalCompletion4 = true;\n    var _didIteratorError4 = false;\n    var _iteratorError4 = undefined;\n\n    try {\n      for (var _iterator4 = node.declarations[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n        var declaration = _step4.value;\n        declarePattern(declaration.id, locals);\n      }\n    } catch (err) {\n      _didIteratorError4 = true;\n      _iteratorError4 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n          _iterator4.return();\n        }\n      } finally {\n        if (_didIteratorError4) {\n          throw _iteratorError4;\n        }\n      }\n    }\n  } else if (isFunctionDeclaration(node)) {\n    var _parent2;\n\n    var _nextParent2 = node.parent;\n\n    if (_nextParent2 && _nextParent2.parent) {\n      _nextParent2 = _nextParent2.parent;\n    }\n\n    while (_nextParent2) {\n      if (isScope(_nextParent2)) {\n        _parent2 = _nextParent2;\n        break;\n      }\n\n      _nextParent2 = _nextParent2.parent;\n    }\n\n    if (!_parent2) {\n      throw new Error(\"Invariant violation: Failed to find a parent\");\n    }\n\n    var _locals = ctx.locals.get(_parent2);\n\n    if (!_locals) {\n      _locals = {};\n      ctx.locals.set(_parent2, _locals);\n    }\n\n    declareFunction(node, _locals);\n  } else if (isFunction(node)) {\n    var _locals2 = ctx.locals.get(node);\n\n    if (!_locals2) {\n      _locals2 = {};\n      ctx.locals.set(node, _locals2);\n    }\n\n    declareFunction(node, _locals2);\n  } else if (isClassDeclaration(node) && node.id) {\n    var _parent3;\n\n    var _nextParent3 = node.parent;\n\n    if (_nextParent3 && _nextParent3.parent) {\n      _nextParent3 = _nextParent3.parent;\n    }\n\n    while (_nextParent3) {\n      if (isScope(_nextParent3)) {\n        _parent3 = _nextParent3;\n        break;\n      }\n\n      _nextParent3 = _nextParent3.parent;\n    }\n\n    if (!_parent3) {\n      throw new Error(\"Invariant violation: Failed to find a parent\");\n    }\n\n    var _locals3 = ctx.locals.get(_parent3);\n\n    if (!_locals3) {\n      _locals3 = {};\n      ctx.locals.set(_parent3, _locals3);\n    }\n\n    _locals3[node.id.name] = true;\n  } else if (isTryStatement(node)) {\n    if (node.handler) {\n      var _locals4 = ctx.locals.get(node.handler);\n\n      if (!_locals4) {\n        _locals4 = {};\n        ctx.locals.set(node.handler, _locals4);\n      }\n\n      declarePattern(node.handler.param, _locals4);\n    }\n  }\n}\n\nfunction visitAndSkipBranches(node, _parent, ctx) {\n  if (isIfStatement(node) && isBinaryExpression(node.test)) {\n    var tests = {\n      '!=': function _(l, r) {\n        return l != r;\n      },\n      '!==': function _(l, r) {\n        return l !== r;\n      },\n      '==': function _(l, r) {\n        return l == r;\n      },\n      '===': function _(l, r) {\n        return l === r;\n      }\n    };\n    var test = tests[node.test.operator];\n\n    if (test) {\n      if (isStringLiteral(node.test.left) && isMemberExpression(node.test.right) && memberExpressionMatches(node.test.right, 'process.env.NODE_ENV')) {\n        // if ('development' === process.env.NODE_ENV) {}\n        ctx.replacements.push({\n          start: node.test.right.start,\n          end: node.test.right.end,\n          replacement: JSON.stringify(ctx.nodeEnv)\n        });\n\n        if (!test(node.test.left.value, ctx.nodeEnv)) {\n          ctx.skip.add(node.consequent);\n        } else if (node.alternate) {\n          ctx.skip.add(node.alternate);\n        }\n      } else if (isStringLiteral(node.test.right) && isMemberExpression(node.test.left) && memberExpressionMatches(node.test.left, 'process.env.NODE_ENV')) {\n        // if (process.env.NODE_ENV === 'development') {}\n        ctx.replacements.push({\n          start: node.test.left.start,\n          end: node.test.left.end,\n          replacement: JSON.stringify(ctx.nodeEnv)\n        });\n\n        if (!test(node.test.right.value, ctx.nodeEnv)) {\n          ctx.skip.add(node.consequent);\n        } else if (node.alternate) {\n          ctx.skip.add(node.alternate);\n        }\n      }\n    }\n  }\n}\n\nfunction visitRequires(node, _parent, ctx) {\n  if (isCallExpression(node) && isNodeWithStartAndEnd(node.callee)) {\n    var callee = node.callee;\n\n    if (isIdentifier(callee) && isNodeWithStartAndEnd(callee) && callee.name === 'require') {\n      var firstArg = node.arguments[0];\n\n      if (isStringLiteral(firstArg) && isNodeWithStartAndEnd(firstArg)) {\n        ctx.requires.push({\n          spec: {\n            start: firstArg.start,\n            end: firstArg.end,\n            value: firstArg.value\n          },\n          callee: {\n            start: callee.start,\n            end: callee.end\n          }\n        });\n      } else {\n        console.warn('Non string-literal first arg to require', firstArg);\n      }\n    } else if (isMemberExpression(callee) && isIdentifier(callee.object) && callee.object.name === 'require' && isIdentifier(callee.property) && callee.property.name === 'resolve') {\n      var _firstArg = node.arguments[0];\n\n      if (isStringLiteral(_firstArg) && isNodeWithStartAndEnd(_firstArg)) {\n        ctx.requireResolves.push({\n          spec: {\n            start: _firstArg.start,\n            end: _firstArg.end,\n            value: _firstArg.value\n          },\n          callee: {\n            start: callee.start,\n            end: callee.end\n          }\n        });\n      } else {\n        console.warn('Non string-literal first arg to require.resolve', _firstArg);\n      }\n    }\n  }\n}\n\nfunction declareFunction(node, locals) {\n  node.params.forEach(function (node) {\n    declarePattern(node, locals);\n  });\n\n  if (node.id) {\n    locals[node.id.name] = true;\n  }\n}\n\nfunction declarePattern(node, locals) {\n  if (isIdentifier(node)) {\n    locals[node.name] = true;\n  } else if (isObjectPattern(node)) {\n    node.properties.forEach(function (node) {\n      return declarePattern(node.value, locals);\n    });\n  } else if (isArrayPattern(node)) {\n    node.elements.forEach(function (node) {\n      return node && declarePattern(node, locals);\n    });\n  } else if (isRestElement(node)) {\n    declarePattern(node.argument, locals);\n  } else if (isAssignmentPattern(node)) {\n    declarePattern(node.left, locals);\n  } else {\n    throw new Error(\"Invariant violation: Unexpected pattern type: \".concat(node.type));\n  }\n}\n\nfunction isBindingIdentifier(node) {\n  return isIdentifier(node) && !isPropertyOfMemberExpression(node) && !isKeyOfProperty(node);\n}\n\nfunction isKeyOfProperty(node) {\n  return node.parent && isProperty(node.parent) && node.parent.key === node;\n}\n\nfunction isPropertyOfMemberExpression(node) {\n  return node.parent && isMemberExpression(node.parent) && node.parent.object !== node;\n}\n\nfunction isScope(node) {\n  return isFunctionDeclaration(node) || isFunctionExpression(node) || isArrowFunctionExpression(node) || isProgram(node);\n}\n\nfunction isBlockScope(node) {\n  return isBlockStatement(node) || isScope(node);\n}\n\nfunction declaresArguments(node) {\n  return isFunctionDeclaration(node) || isFunctionExpression(node);\n}\n\nfunction declaresThis(node) {\n  return isFunctionDeclaration(node) || isFunctionExpression(node);\n}\n\nfunction memberExpressionMatches(node, pattern) {\n  var memberParts = pattern.split('.');\n\n  if (memberParts.length < 2) {\n    return false;\n  }\n\n  var object = memberParts.shift();\n  var property = memberParts.shift();\n\n  for (var i = memberParts.length - 1; i >= 0; i--) {\n    if (!isIdentifier(node.property) || node.property.name !== memberParts[i]) {\n      return false;\n    }\n\n    if (!isMemberExpression(node.object)) {\n      return false;\n    }\n\n    node = node.object;\n  }\n\n  if (!isIdentifier(node.object) || !isIdentifier(node.property)) {\n    return false;\n  }\n\n  return node.object.name === object && node.property.name === property;\n}\n\nvar RELATE_PATH_RX = /^[./]|^[a-z_-]+:/;\nvar SPEC_RX = /^((@[^/]+\\/[^/@]+|[^./@][^/@]*)(?:@([^/]+))?)(.*)?$/;\n\nvar Deferred =\n/*#__PURE__*/\nfunction () {\n  function Deferred(token) {\n    var _this = this;\n\n    _classCallCheck(this, Deferred);\n\n    this.internalState = 'pending';\n    this.promise = new Promise(function (promiseResolve, promiseReject) {\n      _this.promiseResolve = promiseResolve;\n      _this.promiseReject = promiseReject;\n    });\n\n    if (token) {\n      if (token.isCancellationRequested) {\n        this.reject(new CanceledError('Canceled'));\n      } else {\n        token.onCancellationRequested(function () {\n          _this.reject(new CanceledError('Canceled'));\n        });\n      }\n    }\n  }\n\n  _createClass(Deferred, [{\n    key: \"resolve\",\n    value: function resolve(value) {\n      this.internalState = 'resolved';\n      this.promiseResolve(value);\n    }\n  }, {\n    key: \"reject\",\n    value: function reject(reason) {\n      this.internalState = 'rejected';\n      this.promiseReject(reason);\n    }\n  }, {\n    key: \"isSettled\",\n    get: function get() {\n      return this.internalState !== 'pending';\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return this.internalState;\n    }\n  }]);\n\n  return Deferred;\n}();\n\nfunction isBareModuleSpecifier(spec) {\n  return !RELATE_PATH_RX.test(spec);\n}\n\nfunction maybeParseBareModuleSpec(spec) {\n  /**\r\n   * 1: scope + name + version\r\n   * 2: scope + name\r\n   * 3: version?\r\n   * 4: pathname\r\n   */\n  var matches = spec.match(SPEC_RX);\n\n  if (!matches) {\n    return undefined;\n  }\n\n  return {\n    nameSpec: matches[1],\n    name: matches[2],\n    spec: matches[3] || '',\n    pathname: matches[4] || ''\n  };\n}\n\nfunction parseBareModuleSpec(spec) {\n  var parsed = maybeParseBareModuleSpec(spec);\n\n  if (!parsed) {\n    throw new Error(\"Unable to parse unexpected unpkg url: '\".concat(spec, \"'\"));\n  }\n\n  return parsed;\n} // this looks ridiculous, but it prevents sourcemap tooling from mistaking\n// this for an actual sourceMappingURL\n\n\nfunction getSourceMappingUrl(str) {\n  var re = /(?:\\/\\/[@#][\\s]*(?:source)MappingURL=([^\\s'\"]+)[\\s]*$)|(?:\\/\\*[@#][\\s]*(?:source)MappingURL=([^\\s*'\"]+)[\\s]*(?:\\*\\/)[\\s]*$)/gm; // Keep executing the search to find the *last* sourceMappingURL to avoid\n  // picking up sourceMappingURLs from comments, strings, etc.\n\n  var lastMatch = null;\n  var match;\n\n  while (match = re.exec(str)) {\n    lastMatch = match;\n  }\n\n  if (!lastMatch) return null;\n  return lastMatch[1];\n}\n\nvar MapSet =\n/*#__PURE__*/\nfunction () {\n  function MapSet() {\n    _classCallCheck(this, MapSet);\n\n    this.m = new Map();\n  }\n\n  _createClass(MapSet, [{\n    key: \"add\",\n    value: function add(key, value) {\n      var valueSet = this.m.get(key);\n\n      if (!valueSet) {\n        valueSet = new Set();\n        this.m.set(key, valueSet);\n      }\n\n      valueSet.add(value);\n      return this;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key, value) {\n      var valueSet = this.m.get(key);\n      var deleted = false;\n\n      if (valueSet) {\n        deleted = valueSet.delete(value);\n\n        if (deleted && !valueSet.size) {\n          this.m.delete(key);\n        }\n      }\n\n      return deleted;\n    }\n  }, {\n    key: \"deleteAll\",\n    value: function deleteAll(key) {\n      return this.m.delete(key);\n    }\n  }, {\n    key: \"getValues\",\n    value: function getValues(key) {\n      return new Set(this.m.get(key));\n    }\n  }, {\n    key: \"has\",\n    value: function has(key, value) {\n      var valueSet = this.m.get(key);\n      return valueSet ? valueSet.has(value) : false;\n    }\n  }]);\n\n  return MapSet;\n}();\n\nvar DEFAULT_SHIM_GLOBALS = {\n  Buffer: {\n    spec: \"@velcro/node-libs@\".concat(version, \"/lib/buffer.js\"),\n    export: 'Buffer'\n  },\n  global: {\n    spec: \"@velcro/node-libs@\".concat(version, \"/lib/global.js\")\n  },\n  process: {\n    spec: \"@velcro/node-libs@\".concat(version, \"/lib/process.js\")\n  }\n};\n\nvar Asset =\n/*#__PURE__*/\nfunction () {\n  function Asset(href, rootHref) {\n    _classCallCheck(this, Asset);\n\n    this.href = href;\n    this.rootHref = rootHref;\n    this.dependencies = undefined;\n  }\n\n  _createClass(Asset, [{\n    key: \"setCode\",\n    value: function setCode(code) {\n      this.magicString = new MagicString(code, {\n        filename: this.href,\n        indentExclusionRanges: []\n      });\n      this.sourceMappingUrl = getSourceMappingUrl(code);\n      var parser = getParserForAsset(this);\n      var dependencies = parser.parse(this.href, this.magicString);\n      this.dependencies = [];\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = dependencies.requireDependencies[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var dep = _step5.value;\n          this.dependencies.push({\n            type: Asset.DependencyKind.Require,\n            callee: dep.callee,\n            references: [{\n              start: dep.spec.start,\n              end: dep.spec.end\n            }],\n            value: dep.spec.value\n          });\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = dependencies.requireResolveDependencies[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var _dep = _step6.value;\n          this.dependencies.push({\n            type: Asset.DependencyKind.RequireResolve,\n            callee: _dep.callee,\n            references: [{\n              start: _dep.spec.start,\n              end: _dep.spec.end\n            }],\n            value: _dep.spec.value\n          });\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6.return != null) {\n            _iterator6.return();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion7 = true;\n      var _didIteratorError7 = false;\n      var _iteratorError7 = undefined;\n\n      try {\n        for (var _iterator7 = dependencies.unboundSymbols[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n          var _ref7 = _step7.value;\n\n          var _ref6 = _slicedToArray(_ref7, 2);\n\n          var symbolName = _ref6[0];\n          var references = _ref6[1];\n          var shim = DEFAULT_SHIM_GLOBALS[symbolName];\n\n          if (shim) {\n            this.dependencies.push({\n              type: Asset.DependencyKind.InjectedGlobal,\n              exportName: shim.export,\n              references: references,\n              symbolName: symbolName,\n              value: \"\".concat(shim.spec).concat(shim.export ? \"[\".concat(JSON.stringify(shim.export), \"]\") : '')\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError7 = true;\n        _iteratorError7 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion7 && _iterator7.return != null) {\n            _iterator7.return();\n          }\n        } finally {\n          if (_didIteratorError7) {\n            throw _iteratorError7;\n          }\n        }\n      }\n\n      return this.dependencies;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        href: this.href,\n        rootHref: this.rootHref,\n        dependencies: this.dependencies,\n        sourceMappingUrl: this.sourceMappingUrl,\n        code: this.magicString ? this.magicString.original : ''\n      };\n    }\n  }], [{\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      var asset = new Asset(json.href, json.rootHref);\n      asset.dependencies = json.dependencies;\n      asset.sourceMappingUrl = json.sourceMappingUrl;\n      asset.setCode(json.code);\n      return asset;\n    }\n  }]);\n\n  return Asset;\n}();\n\n(function (Asset) {\n  var DependencyKind;\n\n  (function (DependencyKind) {\n    DependencyKind[\"Require\"] = \"require\";\n    DependencyKind[\"RequireResolve\"] = \"require.resolve\";\n    DependencyKind[\"InjectedGlobal\"] = \"injected_global\";\n  })(DependencyKind = Asset.DependencyKind || (Asset.DependencyKind = {}));\n})(Asset || (Asset = {}));\n\nfunction getParserForAsset(asset) {\n  if (asset.href.endsWith('.css')) {\n    return {\n      parse: function parse(_href, magicString) {\n        var cssCode = magicString.original;\n        var BACKSLASH = '\\\\'.charCodeAt(0);\n        var SINGLE_QUOTE = \"'\".charCodeAt(0);\n        var NL = '\\n'.charCodeAt(0);\n        var CR = '\\r'.charCodeAt(0);\n        var escaped = false;\n\n        for (var i = 0; i < cssCode.length; i++) {\n          var char = cssCode.charCodeAt(i);\n\n          if (char === BACKSLASH) {\n            escaped = !escaped;\n            continue;\n          }\n\n          if (!escaped) {\n            // Escape certain characters (if not already escaped)\n            switch (char) {\n              case CR:\n              case NL:\n                magicString.overwrite(i, i + 1, ' ');\n                break;\n\n              case SINGLE_QUOTE:\n                magicString.prependRight(i, '\\\\');\n                break;\n            }\n          }\n\n          escaped = false;\n        }\n\n        magicString.prepend(\"\\n          function reload(){\\n            var styleTag = document.createElement(\\\"style\\\");\\n            styleTag.type = \\\"text/css\\\";\\n            styleTag.innerHTML = '\");\n        magicString.append(\"';\\n            document.head.appendChild(styleTag);\\n\\n            return function() {    \\n              if (styleTag && styleTag.parentElement) {\\n                styleTag.parentElement.removeChild(styleTag);\\n              }\\n            };\\n          };\\n\\n          var remove = reload();\\n\\n          if (module.hot && module.hot.dispose) {\\n            module.hot.dispose(function() {\\n              remove();\\n            });\\n          }\\n        \");\n        return {\n          requireDependencies: [],\n          requireResolveDependencies: [],\n          unboundSymbols: new Map()\n        };\n      }\n    };\n  }\n\n  if (asset.href.endsWith('.json')) {\n    return {\n      parse: function parse(_href, magicString) {\n        magicString.prepend('module.exports = ');\n        return {\n          requireDependencies: [],\n          requireResolveDependencies: [],\n          unboundSymbols: new Map()\n        };\n      }\n    };\n  }\n\n  return {\n    parse: parseFile\n  };\n}\n\nvar ExtendableError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(ExtendableError, _Error);\n\n  function ExtendableError(message) {\n    var _this2;\n\n    _classCallCheck(this, ExtendableError);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ExtendableError).call(this, message));\n    _this2.name = _this2.constructor.name;\n\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(_assertThisInitialized(_this2), _this2.constructor);\n    } else {\n      _this2.stack = new Error(message).stack;\n    }\n\n    return _this2;\n  }\n\n  return ExtendableError;\n}(_wrapNativeSuper(Error));\n\nvar InvariantViolation =\n/*#__PURE__*/\nfunction (_ExtendableError) {\n  _inherits(InvariantViolation, _ExtendableError);\n\n  function InvariantViolation() {\n    _classCallCheck(this, InvariantViolation);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(InvariantViolation).apply(this, arguments));\n  }\n\n  return InvariantViolation;\n}(ExtendableError);\n\nvar NotSupportedError =\n/*#__PURE__*/\nfunction (_ExtendableError2) {\n  _inherits(NotSupportedError, _ExtendableError2);\n\n  function NotSupportedError() {\n    _classCallCheck(this, NotSupportedError);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NotSupportedError).apply(this, arguments));\n  }\n\n  return NotSupportedError;\n}(ExtendableError);\n\nvar ResolveError =\n/*#__PURE__*/\nfunction (_ExtendableError3) {\n  _inherits(ResolveError, _ExtendableError3);\n\n  function ResolveError(href, fromHref) {\n    var _this3;\n\n    _classCallCheck(this, ResolveError);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(ResolveError).call(this, \"Unable to resolve '\".concat(href, \"'\").concat(fromHref ? \" from '\".concat(fromHref, \"'\") : '')));\n    _this3.href = href;\n    _this3.fromHref = fromHref;\n    return _this3;\n  }\n\n  return ResolveError;\n}(ExtendableError);\n\nvar NODE_CORE_SHIMS = ['assert', 'buffer', 'constants', 'crypto', 'events', 'fs', 'http', 'https', 'net', 'os', 'path', 'process', 'querystring', 'stream', 'tls', 'url', 'util', 'vm', 'zlib'].reduce(function (shims, coreLibName) {\n  return Object.assign(shims, _defineProperty({}, coreLibName, \"@velcro/node-libs@\".concat(version, \"/lib/\").concat(coreLibName, \".js\")));\n}, {});\nNODE_CORE_SHIMS['string_decoder'] = 'string_decoder@1.2.0';\nNODE_CORE_SHIMS['punycode'] = 'punycode@2.1.1';\n\nfunction _resolveBareModuleReference2(_x, _x2, _x3) {\n  return _resolveBareModuleReference.apply(this, arguments);\n} //@ts-check\n\n/**\n *\n * @param {import('./types').ImmediateExecutionManifest} manifest\n * @param {import('./types').RuntimeOptions} [options]\n * @returns {import('./types').IRuntime}\n */\n\n\nfunction _resolveBareModuleReference() {\n  _resolveBareModuleReference = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee11(resolver, bareModuleReference, parentHref) {\n    var _ref22,\n        _ref22$invalidatedBy,\n        invalidatedBy,\n        token,\n        _parseBareModuleSpec,\n        name,\n        pathname,\n        spec,\n        resolvedSpec,\n        parentUrl,\n        parentPackageInfo,\n        consolidatedDependencies,\n        dependencySpec,\n        _resolvedSpec,\n        builtIn,\n        _parseBareModuleSpec2,\n        _name,\n        _pathname,\n        _spec,\n        _resolvedSpec2,\n        _args11 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _ref22 = _args11.length > 3 && _args11[3] !== undefined ? _args11[3] : {}, _ref22$invalidatedBy = _ref22.invalidatedBy, invalidatedBy = _ref22$invalidatedBy === void 0 ? new Set() : _ref22$invalidatedBy, token = _ref22.token;\n\n            if (bareModuleReference) {\n              _context11.next = 3;\n              break;\n            }\n\n            throw new TypeError(\"Impossible to import an empty package name\".concat(parentHref ? \" from \".concat(parentHref) : ''));\n\n          case 3:\n            _parseBareModuleSpec = parseBareModuleSpec(bareModuleReference), name = _parseBareModuleSpec.name, pathname = _parseBareModuleSpec.pathname, spec = _parseBareModuleSpec.spec;\n\n            if (!spec) {\n              _context11.next = 13;\n              break;\n            }\n\n            _context11.prev = 5;\n            resolvedSpec = resolve(name, spec, parentHref);\n            return _context11.abrupt(\"return\", {\n              name: name,\n              pathname: pathname,\n              resolvedSpec: resolvedSpec,\n              spec: spec\n            });\n\n          case 10:\n            _context11.prev = 10;\n            _context11.t0 = _context11[\"catch\"](5);\n            throw _context11.t0;\n\n          case 13:\n            if (parentHref) {\n              _context11.next = 15;\n              break;\n            }\n\n            throw new ResolveError(spec, parentHref);\n\n          case 15:\n            _context11.prev = 15;\n            parentUrl = new URL(parentHref);\n            _context11.next = 22;\n            break;\n\n          case 19:\n            _context11.prev = 19;\n            _context11.t1 = _context11[\"catch\"](15);\n            throw new Error(\"Error loading bare module \".concat(spec, \" because the parent module \").concat(parentHref, \" could not be resolved to a URL\"));\n\n          case 22:\n            _context11.next = 24;\n            return resolver.readParentPackageJson(parentUrl, {\n              invalidatedBy: invalidatedBy,\n              token: token\n            });\n\n          case 24:\n            parentPackageInfo = _context11.sent;\n\n            if (!parentPackageInfo) {\n              _context11.next = 38;\n              break;\n            }\n\n            invalidatedBy.add(parentPackageInfo.url.href);\n            consolidatedDependencies = _objectSpread({}, parentPackageInfo.packageJson.peerDependencies || {}, {}, parentPackageInfo.packageJson.devDependencies || {}, {}, parentPackageInfo.packageJson.dependencies || {});\n            dependencySpec = consolidatedDependencies[name];\n\n            if (!dependencySpec) {\n              _context11.next = 38;\n              break;\n            }\n\n            _context11.prev = 30;\n            _resolvedSpec = resolve(name, dependencySpec, parentHref);\n            return _context11.abrupt(\"return\", {\n              name: name,\n              pathname: pathname,\n              resolvedSpec: _resolvedSpec,\n              spec: spec\n            });\n\n          case 35:\n            _context11.prev = 35;\n            _context11.t2 = _context11[\"catch\"](30);\n            throw _context11.t2;\n\n          case 38:\n            // That failed, let's try a NODE_SHIM\n            builtIn = NODE_CORE_SHIMS[bareModuleReference];\n\n            if (!builtIn) {\n              _context11.next = 51;\n              break;\n            }\n\n            _parseBareModuleSpec2 = parseBareModuleSpec(builtIn), _name = _parseBareModuleSpec2.name, _pathname = _parseBareModuleSpec2.pathname, _spec = _parseBareModuleSpec2.spec;\n\n            if (_spec) {\n              _context11.next = 43;\n              break;\n            }\n\n            throw new InvariantViolation(\"Found a node core shim '\".concat(builtIn, \"' for '\").concat(bareModuleReference, \"' that didn't include a version specifier\"));\n\n          case 43:\n            _context11.prev = 43;\n            _resolvedSpec2 = resolve(_name, _spec, parentHref);\n            return _context11.abrupt(\"return\", {\n              name: _name,\n              pathname: _pathname,\n              resolvedSpec: _resolvedSpec2,\n              spec: _spec\n            });\n\n          case 48:\n            _context11.prev = 48;\n            _context11.t3 = _context11[\"catch\"](43);\n            throw _context11.t3;\n\n          case 51:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11, null, [[5, 10], [15, 19], [30, 35], [43, 48]]);\n  }));\n  return _resolveBareModuleReference.apply(this, arguments);\n}\n\nfunction createRuntime(manifest, options) {\n  /** @type {Record<string, string | undefined>} */\n  var aliases = Object.create(null);\n  /** @type {Record<string, Record<string, string | undefined> | undefined> } */\n\n  var mappings = Object.create(null);\n  /** @type {Record<string, Module | undefined>} */\n\n  var modules = Object.create(null);\n  /** @type {Record<string, import('./types').ModuleFactory | undefined>} */\n\n  var registry = Object.create(null);\n  /**\n   * @class\n   * @implements {import('./types').IRuntime}\n   * @property {Module} root\n   */\n\n  function Runtime() {\n    /**\n     * @readonly\n     */\n    this.root = new Module('velcro://root', this);\n  }\n  /**\n   * @param {string} name\n   * @param {string} id\n   */\n\n\n  Runtime.prototype.alias = function (name, id) {\n    aliases[name] = id;\n  };\n  /**\n   * @param {string} fromId\n   * @param {string} spec\n   * @param {string} toId\n   */\n\n\n  Runtime.prototype.dependency = function (fromId, spec, toId) {\n    var mappingsForId = mappings[fromId];\n\n    if (!mappingsForId) {\n      mappingsForId = {};\n      mappings[fromId] = mappingsForId;\n    }\n\n    mappingsForId[spec] = toId;\n  };\n  /**\n   * @param {string} id\n   */\n\n\n  Runtime.prototype.get = function (id) {\n    id = aliases[id] || id;\n    return modules[id];\n  };\n  /**\n   * @param {string} fromId\n   * @param {string} spec\n   * @returns {string}\n   */\n\n\n  Runtime.prototype.getId = function (fromId, spec) {\n    var alias = aliases[spec];\n\n    if (alias) {\n      return alias;\n    }\n\n    var mappingsForId = mappings[fromId];\n    return mappingsForId && mappingsForId[spec] || spec;\n  };\n  /**\n   * @param {import('./types').ImmediateExecutionManifest} manifest\n   * @param {boolean} [executeEntrypoints]\n   */\n\n\n  Runtime.prototype.init = function (manifest, executeEntrypoints) {\n    for (var href in manifest.modules) {\n      var module = manifest.modules[href];\n\n      for (var alias in module.dependencies) {\n        this.dependency(href, alias, module.dependencies[alias]);\n      }\n\n      this.register(href, module.factory);\n    }\n\n    for (var _alias in manifest.aliases) {\n      this.alias(_alias, manifest.aliases[_alias]);\n    }\n\n    for (var entrypoint in manifest.entrypoints) {\n      this.alias(entrypoint, manifest.entrypoints[entrypoint]);\n\n      if (executeEntrypoints) {\n        this.require(entrypoint);\n      }\n    }\n  };\n  /**\n   * @param {string} id\n   * @param {import('./types').ModuleFactory} factory\n   */\n\n\n  Runtime.prototype.register = function (id, factory) {\n    registry[id] = factory;\n  };\n  /**\n   * @param {string} id\n   * @returns {Module | undefined}\n   */\n\n\n  Runtime.prototype.remove = function (id) {\n    var module = this.get(id);\n\n    if (!module) {\n      return;\n    }\n\n    module.dependents.forEach(function (dependent) {\n      dependent.dependencies.delete(module);\n    });\n    module.dependencies.forEach(function (dependency) {\n      dependency.dependents.delete(module);\n    });\n    delete modules[module.id];\n    delete mappings[module.id];\n    delete registry[module.id];\n    return module;\n  };\n  /**\n   * @param {string} id\n   */\n\n\n  Runtime.prototype.require = function (id) {\n    return this.root.require(aliases[id] || id);\n  };\n  /**\n   * @class\n   * @param {Module} module\n   */\n\n\n  function HotModule(module) {\n    /** @private */\n    this.module = module;\n  }\n  /**\n   * @param {() => void} cb\n   */\n\n\n  HotModule.prototype.accept = function (cb) {\n    this.module.acceptCallbacks.push({\n      cb: cb\n    });\n  };\n  /**\n   * @param {() => void} cb\n   */\n\n\n  HotModule.prototype.dispose = function (cb) {\n    this.module.disposeCallbacks.push({\n      cb: cb\n    });\n  };\n  /**\n   * @class\n   * @param {string} id\n   * @param {Runtime} runtime\n   */\n\n\n  function Module(id, runtime) {\n    /** @type {Set<Module>} */\n    this.dependencies = new Set();\n    /** @type {Set<Module>} */\n\n    this.dependents = new Set();\n    this.id = id;\n    /** @type {import('./types').AcceptCallback[]} */\n\n    this.acceptCallbacks = [];\n    /** @type {import('./types').DisposeCallback[]} */\n\n    this.disposeCallbacks = [];\n    /** @readonly */\n\n    this.module = Object.seal({\n      exports: {},\n      id: id,\n      hot: new HotModule(this)\n    });\n    /** @readonly */\n\n    this.runtime = runtime;\n    Object.defineProperty(this, Symbol.toStringTag, {\n      configurable: false,\n      enumerable: false,\n      get: function get() {\n        return 'Module';\n      }\n    });\n  }\n  /**\n   * @param {string} id\n   */\n\n\n  Module.prototype.require = function (id) {\n    id = this.runtime.getId(this.id, id);\n    /** @type {Module | undefined} */\n\n    var module = modules[id];\n\n    if (!module) {\n      var factory = registry[id];\n\n      if (!factory) {\n        throw new Error(\"Factory missing for \".concat(id));\n      }\n\n      module = new Module(id, this.runtime);\n      modules[id] = module; // Free up the registry entry and release any refs for GC\n\n      delete registry[id];\n      var dirname = id;\n      var filename = id;\n      factory.call(module.module.exports, module.module, module.module.exports, module.require.bind(module), dirname, filename);\n    } // In a hot reload scenario there may be two generations\n    // of the same module. Don't record these dependencies.\n\n\n    if (module.id !== this.id) {\n      module.dependents.add(this);\n      this.dependencies.add(module);\n    }\n\n    return module.module.exports;\n  }; //@ts-ignore\n\n\n  var runtime = options && options.runtime && window[options.runtime] || new Runtime();\n  runtime.init(manifest, options && options.executeEntrypoints);\n  return runtime;\n}\n\nvar Bundle =\n/*#__PURE__*/\nfunction () {\n  function Bundle(assets, entrypointsToAssets, dependenciesToAssets) {\n    _classCallCheck(this, Bundle);\n\n    this.assets = assets;\n    this.entrypointsToAssets = entrypointsToAssets;\n    this.dependenciesToAssets = dependenciesToAssets;\n    this.assetsByHref = new Map();\n    var _iteratorNormalCompletion8 = true;\n    var _didIteratorError8 = false;\n    var _iteratorError8 = undefined;\n\n    try {\n      for (var _iterator8 = assets[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n        var asset = _step8.value;\n        this.assetsByHref.set(asset.href, asset);\n      }\n    } catch (err) {\n      _didIteratorError8 = true;\n      _iteratorError8 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion8 && _iterator8.return != null) {\n          _iterator8.return();\n        }\n      } finally {\n        if (_didIteratorError8) {\n          throw _iteratorError8;\n        }\n      }\n    }\n  }\n\n  _createClass(Bundle, [{\n    key: \"buildForImmediateExecution\",\n    value: function buildForImmediateExecution() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var bundle = new Bundle$1({\n        separator: '\\n\\t\\t,\\n'\n      });\n      var _iteratorNormalCompletion9 = true;\n      var _didIteratorError9 = false;\n      var _iteratorError9 = undefined;\n\n      try {\n        for (var _iterator9 = this.assets[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n          var asset = _step9.value;\n          bundle.addSource(buildAssetForImmediateExecution(asset));\n        }\n      } catch (err) {\n        _didIteratorError9 = true;\n        _iteratorError9 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion9 && _iterator9.return != null) {\n            _iterator9.return();\n          }\n        } finally {\n          if (_didIteratorError9) {\n            throw _iteratorError9;\n          }\n        }\n      }\n\n      var aliasMap = Array.from(this.dependenciesToAssets).reduce(function (acc, _ref8) {\n        var _ref9 = _slicedToArray(_ref8, 2),\n            name = _ref9[0],\n            asset = _ref9[1];\n\n        acc[name] = asset.href;\n        return acc;\n      }, {});\n      var entrypointMap = Array.from(this.entrypointsToAssets).reduce(function (acc, _ref10) {\n        var _ref11 = _slicedToArray(_ref10, 2),\n            name = _ref11[0],\n            asset = _ref11[1];\n\n        acc[name] = asset.href;\n        return acc;\n      }, {});\n      var runtimeOptions = {\n        executeEntrypoints: options.executeEntrypoints,\n        runtime: options.runtime\n      };\n      bundle.prepend(\"(\".concat(createRuntime.toString(), \")({\\n\\taliases:\").concat(JSON.stringify(aliasMap), \",\\n\\tentrypoints:\").concat(JSON.stringify(entrypointMap), \",\\n\\tmodules:{\\n\"));\n      bundle.append(\"\\n\\t}\\n}, \".concat(JSON.stringify(runtimeOptions), \");\"));\n      var code = bundle.toString();\n      var sourceMap = options.sourceMap ? this.generateSourceMap(bundle, '') : undefined;\n      return {\n        code: code,\n        sourceMap: sourceMap\n      };\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var _this$buildForImmedia = this.buildForImmediateExecution(options),\n          code = _this$buildForImmedia.code,\n          sourceMap = _this$buildForImmedia.sourceMap;\n\n      return code + (sourceMap ? \"\\n//# sourceMappingURL=\".concat(sourceMap.toDataUri()) : '');\n    }\n  }, {\n    key: \"generateSourceMap\",\n    value: function generateSourceMap(bundle, href) {\n      var _this4 = this;\n\n      var inputMap = bundle.generateMap({\n        includeContent: true,\n        hires: false,\n        source: href\n      }); // In case a source map seems to be self-referential, avoid crashing\n\n      var seen = new Set();\n      return new SourceMap(remapping(inputMap.toString(), function (uri) {\n        var asset = _this4.assetsByHref.get(uri);\n\n        if (asset && asset.sourceMappingUrl) {\n          if (seen.has(asset)) {\n            return null;\n          }\n\n          seen.add(asset);\n          var match = asset.sourceMappingUrl.match(/^data:application\\/json;(?:charset=([^;]+);)?base64,(.*)$/);\n\n          if (match) {\n            if (match[1] && match[1] !== 'utf-8') {\n              return null;\n            }\n\n            try {\n              var decoded = JSON.parse(Base64.decode(match[2]));\n              return decoded;\n            } catch (err) {\n              return null;\n            }\n          }\n        }\n\n        return null;\n      }, false));\n    }\n  }]);\n\n  return Bundle;\n}();\n\nvar SourceMap =\n/*#__PURE__*/\nfunction () {\n  function SourceMap(input) {\n    _classCallCheck(this, SourceMap);\n\n    this.file = input.file;\n    this.mappings = input.mappings;\n    this.sourceRoot = input.sourceRoot;\n    this.names = input.names;\n    this.sources = input.sources;\n    this.sourcesContent = input.sourcesContent;\n    this.version = input.version;\n  }\n\n  _createClass(SourceMap, [{\n    key: \"toString\",\n    value: function toString() {\n      return JSON.stringify(this);\n    }\n  }, {\n    key: \"toDataUri\",\n    value: function toDataUri() {\n      return \"data:application/json;charset=utf-8;base64,\".concat(Base64.encode(this.toString()));\n    }\n  }]);\n\n  return SourceMap;\n}();\n\nfunction buildAssetAndCollectDependencies(asset) {\n  var indent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '\\t';\n\n  if (!asset.magicString) {\n    throw new InvariantViolation(\"Invariant violation: asset is not loaded '\".concat(asset.href, \"'\"));\n  }\n\n  var dependencies = {};\n  var magicString = asset.magicString.clone();\n  magicString.trim();\n  magicString.indent(indent);\n\n  if (!asset.dependencies) {\n    throw new InvariantViolation(\"Asset '\".concat(asset.href, \"' scheduled for build is missing its dependencies array\"));\n  } // We'll replace each dependency string with the resolved stable href. The stable href doesn't require any\n  // information about where it is being resolved from, so it is useful as a long-term pointer whose target\n  // can change over time\n\n\n  var _iteratorNormalCompletion10 = true;\n  var _didIteratorError10 = false;\n  var _iteratorError10 = undefined;\n\n  try {\n    for (var _iterator10 = asset.dependencies[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n      var dependency = _step10.value;\n\n      if (!dependency.resolveDetails) {\n        throw new InvariantViolation(\"Asset '\".concat(asset.href, \"' has an unresolved dependency of type '\").concat(dependency.type, \"' with spec '\").concat(dependency.value, \"'\"));\n      }\n\n      switch (dependency.type) {\n        case Asset.DependencyKind.Require:\n          {\n            dependencies[dependency.value] = dependency.resolveDetails.resolvedHref;\n            break;\n          }\n\n        case Asset.DependencyKind.RequireResolve:\n          {\n            dependencies[dependency.value] = dependency.resolveDetails.resolvedHref;\n            break;\n          }\n\n        case Asset.DependencyKind.InjectedGlobal:\n          {\n            magicString.prepend(\"\\n\".concat(indent, \"const \").concat(dependency.symbolName, \" = require(\").concat(JSON.stringify(dependency.symbolName), \")\").concat(dependency.exportName ? \".\".concat(dependency.exportName) : '', \";\\n\"));\n            dependencies[dependency.symbolName] = dependency.resolveDetails.resolvedHref;\n            break;\n          }\n\n        default:\n          throw new Error(\"Invariant violation: Encountered unexpected dependency kind '\".concat(dependency.type, \"'\"));\n      }\n    }\n  } catch (err) {\n    _didIteratorError10 = true;\n    _iteratorError10 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion10 && _iterator10.return != null) {\n        _iterator10.return();\n      }\n    } finally {\n      if (_didIteratorError10) {\n        throw _iteratorError10;\n      }\n    }\n  }\n\n  return {\n    dependencies: dependencies,\n    magicString: magicString\n  };\n}\n\nfunction buildAssetForImmediateExecution(asset) {\n  var _buildAssetAndCollect = buildAssetAndCollectDependencies(asset, '\\t\\t\\t\\t'),\n      dependencies = _buildAssetAndCollect.dependencies,\n      magicString = _buildAssetAndCollect.magicString;\n\n  magicString.prepend(\"\\t\\t\".concat(JSON.stringify(asset.href), \": {\\n\\t\\t\\tdependencies: \").concat(JSON.stringify(dependencies), \",\\n\\t\\t\\tfactory: function(module, exports, require, __dirname, __filename){\\n\"));\n  magicString.append('\\n\\t\\t}}');\n  return magicString;\n}\n\nvar EMPTY_MODULE_URL = new URL('velcro://@empty');\nvar EMPTY_MODULE_CODE = 'module.exports = function(){};';\n\nvar Bundler =\n/*#__PURE__*/\nfunction () {\n  function Bundler(options) {\n    _classCallCheck(this, Bundler);\n\n    this.assetsByHref = new Map();\n    this.resolutionCache = new Map();\n    this.resolutionInvalidations = new MapSet();\n    this.onAssetAddedEmitter = new Emitter();\n    this.onAssetRemovedEmitter = new Emitter();\n    this.resolveBareModule = options.resolveBareModule;\n    this.resolver = options.resolver;\n  }\n\n  _createClass(Bundler, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this.onAssetAddedEmitter.dispose();\n      this.onAssetRemovedEmitter.dispose();\n      this.assetsByHref.clear();\n    }\n  }, {\n    key: \"getOrCreateAsset\",\n    value: function getOrCreateAsset(_ref12) {\n      var href = _ref12.resolvedHref,\n          rootHref = _ref12.rootHref;\n      var asset = this.assetsByHref.get(href);\n\n      if (!asset) {\n        asset = new Asset(href, rootHref);\n        this.assetsByHref.set(href, asset);\n        this.onAssetAddedEmitter.fire(asset);\n      }\n\n      return asset;\n    }\n  }, {\n    key: \"generateBundle\",\n    value: function () {\n      var _generateBundle = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(entrypoints) {\n        var _this5 = this;\n\n        var options,\n            tokenSource,\n            token,\n            pendingOperations,\n            assets,\n            dfd,\n            dependenciesToAssets,\n            entrypointsToAssets,\n            enqueue,\n            resolveHref,\n            resolveAsset,\n            resolveDependency,\n            _iteratorNormalCompletion13,\n            _didIteratorError13,\n            _iteratorError13,\n            _iterator13,\n            _step13,\n            invalidation,\n            _iteratorNormalCompletion14,\n            _didIteratorError14,\n            _iteratorError14,\n            _iterator14,\n            _step14,\n            resolutionCacheKey,\n            _iteratorNormalCompletion15,\n            _didIteratorError15,\n            _iteratorError15,\n            _loop,\n            _iterator15,\n            _step15,\n            _args6 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                options = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : {};\n\n                if (Array.isArray(entrypoints)) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                throw new Error('Generating a bundle requires passing in an array of entrypoints');\n\n              case 3:\n                tokenSource = new CancellationTokenSource();\n                token = tokenSource.token;\n\n                if (options.token) {\n                  if (options.token.isCancellationRequested) {\n                    tokenSource.cancel();\n                    tokenSource.dispose();\n                  }\n\n                  options.token.onCancellationRequested(function () {\n                    tokenSource.cancel();\n                    tokenSource.dispose();\n                  });\n                }\n\n                pendingOperations = 0;\n                assets = new Set();\n                dfd = new Deferred(token);\n                dependenciesToAssets = new Map();\n                entrypointsToAssets = new Map();\n\n                enqueue =\n                /*#__PURE__*/\n                function () {\n                  var _ref13 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee(op) {\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.prev = 0;\n                            pendingOperations++;\n\n                            if (options.onEnqueueAsset) {\n                              options.onEnqueueAsset();\n                            }\n\n                            _context.next = 5;\n                            return op();\n\n                          case 5:\n                            if (options.onCompleteAsset) {\n                              options.onCompleteAsset();\n                            }\n\n                            pendingOperations--;\n\n                            if (!(pendingOperations < 0)) {\n                              _context.next = 9;\n                              break;\n                            }\n\n                            throw new InvariantViolation('Pending operations fell below zero');\n\n                          case 9:\n                            if (pendingOperations === 0) {\n                              // Let's make sure this happens after the current microtask.\n                              setTimeout(function () {\n                                return dfd.resolve();\n                              }, 0);\n                            }\n\n                            _context.next = 15;\n                            break;\n\n                          case 12:\n                            _context.prev = 12;\n                            _context.t0 = _context[\"catch\"](0);\n\n                            // Let's make sure this happens 'later'.\n                            if (!dfd.isSettled) {\n                              Promise.resolve().then(function () {\n                                return dfd.reject(_context.t0);\n                              }).catch(function (_) {\n                                return undefined;\n                              });\n                            }\n\n                          case 15:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee, null, [[0, 12]]);\n                  }));\n\n                  return function enqueue(_x5) {\n                    return _ref13.apply(this, arguments);\n                  };\n                }();\n\n                resolveHref =\n                /*#__PURE__*/\n                function () {\n                  var _ref14 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee2(spec, fromHref) {\n                    var resolutionCacheKey, resolveDetails, _iteratorNormalCompletion11, _didIteratorError11, _iteratorError11, _iterator11, _step11, invalidatedBy;\n\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            resolutionCacheKey = JSON.stringify([spec, fromHref]);\n                            resolveDetails = _this5.resolutionCache.get(resolutionCacheKey);\n\n                            if (resolveDetails) {\n                              _context2.next = 26;\n                              break;\n                            }\n\n                            _context2.next = 5;\n                            return _this5.resolveWithDetails(spec, fromHref, {\n                              token: token\n                            });\n\n                          case 5:\n                            resolveDetails = _context2.sent;\n\n                            _this5.resolutionCache.set(resolutionCacheKey, resolveDetails);\n\n                            _iteratorNormalCompletion11 = true;\n                            _didIteratorError11 = false;\n                            _iteratorError11 = undefined;\n                            _context2.prev = 10;\n\n                            for (_iterator11 = resolveDetails.invalidatedBy[Symbol.iterator](); !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {\n                              invalidatedBy = _step11.value;\n\n                              if (invalidatedBy !== resolveDetails.resolvedHref) {\n                                _this5.resolutionInvalidations.add(invalidatedBy, resolutionCacheKey);\n                              }\n                            }\n\n                            _context2.next = 18;\n                            break;\n\n                          case 14:\n                            _context2.prev = 14;\n                            _context2.t0 = _context2[\"catch\"](10);\n                            _didIteratorError11 = true;\n                            _iteratorError11 = _context2.t0;\n\n                          case 18:\n                            _context2.prev = 18;\n                            _context2.prev = 19;\n\n                            if (!_iteratorNormalCompletion11 && _iterator11.return != null) {\n                              _iterator11.return();\n                            }\n\n                          case 21:\n                            _context2.prev = 21;\n\n                            if (!_didIteratorError11) {\n                              _context2.next = 24;\n                              break;\n                            }\n\n                            throw _iteratorError11;\n\n                          case 24:\n                            return _context2.finish(21);\n\n                          case 25:\n                            return _context2.finish(18);\n\n                          case 26:\n                            return _context2.abrupt(\"return\", resolveDetails);\n\n                          case 27:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, null, [[10, 14, 18, 26], [19,, 21, 25]]);\n                  }));\n\n                  return function resolveHref(_x6, _x7) {\n                    return _ref14.apply(this, arguments);\n                  };\n                }();\n\n                resolveAsset =\n                /*#__PURE__*/\n                function () {\n                  var _ref15 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee3(resolveDetails) {\n                    var asset, code, _iteratorNormalCompletion12, _didIteratorError12, _iteratorError12, _iterator12, _step12, dependency;\n\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            asset = _this5.getOrCreateAsset(resolveDetails); // Already enqueued in this bundle, no need to re-enqueue\n\n                            if (assets.has(asset)) {\n                              _context3.next = 27;\n                              break;\n                            }\n\n                            assets.add(asset);\n\n                            if (!(!asset.magicString || !asset.dependencies)) {\n                              _context3.next = 8;\n                              break;\n                            }\n\n                            _context3.next = 6;\n                            return _this5.readCode(asset, {\n                              token: token\n                            });\n\n                          case 6:\n                            code = _context3.sent;\n                            asset.setCode(code);\n\n                          case 8:\n                            _iteratorNormalCompletion12 = true;\n                            _didIteratorError12 = false;\n                            _iteratorError12 = undefined;\n                            _context3.prev = 11;\n\n                            for (_iterator12 = asset.dependencies[Symbol.iterator](); !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {\n                              dependency = _step12.value;\n                              resolveDependency(asset, dependency);\n                            }\n\n                            _context3.next = 19;\n                            break;\n\n                          case 15:\n                            _context3.prev = 15;\n                            _context3.t0 = _context3[\"catch\"](11);\n                            _didIteratorError12 = true;\n                            _iteratorError12 = _context3.t0;\n\n                          case 19:\n                            _context3.prev = 19;\n                            _context3.prev = 20;\n\n                            if (!_iteratorNormalCompletion12 && _iterator12.return != null) {\n                              _iterator12.return();\n                            }\n\n                          case 22:\n                            _context3.prev = 22;\n\n                            if (!_didIteratorError12) {\n                              _context3.next = 25;\n                              break;\n                            }\n\n                            throw _iteratorError12;\n\n                          case 25:\n                            return _context3.finish(22);\n\n                          case 26:\n                            return _context3.finish(19);\n\n                          case 27:\n                            return _context3.abrupt(\"return\", asset);\n\n                          case 28:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3, null, [[11, 15, 19, 27], [20,, 22, 26]]);\n                  }));\n\n                  return function resolveAsset(_x8) {\n                    return _ref15.apply(this, arguments);\n                  };\n                }();\n\n                resolveDependency = function resolveDependency(asset, dependency) {\n                  enqueue(\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee4() {\n                    var resolveDetails;\n                    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            resolveDetails = dependency.resolveDetails;\n\n                            if (resolveDetails) {\n                              _context4.next = 8;\n                              break;\n                            }\n\n                            _context4.next = 4;\n                            return resolveHref(dependency.value, asset.href);\n\n                          case 4:\n                            resolveDetails = _context4.sent;\n                            dependency.resolveDetails = resolveDetails;\n                            _context4.next = 8;\n                            break;\n\n                          case 8:\n                            return _context4.abrupt(\"return\", resolveAsset(resolveDetails));\n\n                          case 9:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  })));\n                };\n\n                if (!options.invalidations) {\n                  _context6.next = 60;\n                  break;\n                }\n\n                _iteratorNormalCompletion13 = true;\n                _didIteratorError13 = false;\n                _iteratorError13 = undefined;\n                _context6.prev = 19;\n                _iterator13 = options.invalidations[Symbol.iterator]();\n\n              case 21:\n                if (_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done) {\n                  _context6.next = 46;\n                  break;\n                }\n\n                invalidation = _step13.value;\n                _iteratorNormalCompletion14 = true;\n                _didIteratorError14 = false;\n                _iteratorError14 = undefined;\n                _context6.prev = 26;\n\n                for (_iterator14 = this.resolutionInvalidations.getValues(invalidation)[Symbol.iterator](); !(_iteratorNormalCompletion14 = (_step14 = _iterator14.next()).done); _iteratorNormalCompletion14 = true) {\n                  resolutionCacheKey = _step14.value;\n                  this.resolutionInvalidations.deleteAll(invalidation);\n                  if (this.resolutionCache.delete(resolutionCacheKey)) ;\n                }\n\n                _context6.next = 34;\n                break;\n\n              case 30:\n                _context6.prev = 30;\n                _context6.t0 = _context6[\"catch\"](26);\n                _didIteratorError14 = true;\n                _iteratorError14 = _context6.t0;\n\n              case 34:\n                _context6.prev = 34;\n                _context6.prev = 35;\n\n                if (!_iteratorNormalCompletion14 && _iterator14.return != null) {\n                  _iterator14.return();\n                }\n\n              case 37:\n                _context6.prev = 37;\n\n                if (!_didIteratorError14) {\n                  _context6.next = 40;\n                  break;\n                }\n\n                throw _iteratorError14;\n\n              case 40:\n                return _context6.finish(37);\n\n              case 41:\n                return _context6.finish(34);\n\n              case 42:\n                if (this.assetsByHref.delete(invalidation)) ;\n\n              case 43:\n                _iteratorNormalCompletion13 = true;\n                _context6.next = 21;\n                break;\n\n              case 46:\n                _context6.next = 52;\n                break;\n\n              case 48:\n                _context6.prev = 48;\n                _context6.t1 = _context6[\"catch\"](19);\n                _didIteratorError13 = true;\n                _iteratorError13 = _context6.t1;\n\n              case 52:\n                _context6.prev = 52;\n                _context6.prev = 53;\n\n                if (!_iteratorNormalCompletion13 && _iterator13.return != null) {\n                  _iterator13.return();\n                }\n\n              case 55:\n                _context6.prev = 55;\n\n                if (!_didIteratorError13) {\n                  _context6.next = 58;\n                  break;\n                }\n\n                throw _iteratorError13;\n\n              case 58:\n                return _context6.finish(55);\n\n              case 59:\n                return _context6.finish(52);\n\n              case 60:\n                _iteratorNormalCompletion15 = true;\n                _didIteratorError15 = false;\n                _iteratorError15 = undefined;\n                _context6.prev = 63;\n\n                _loop = function _loop() {\n                  var entrypoint = _step15.value;\n                  enqueue(\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee5() {\n                    var resolveDetails, asset, code, dependencies, _iteratorNormalCompletion16, _didIteratorError16, _iteratorError16, _iterator16, _step16, dependency;\n\n                    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            _context5.next = 2;\n                            return resolveHref(entrypoint);\n\n                          case 2:\n                            resolveDetails = _context5.sent;\n                            _context5.next = 5;\n                            return resolveAsset(resolveDetails);\n\n                          case 5:\n                            asset = _context5.sent;\n                            entrypointsToAssets.set(entrypoint, asset);\n\n                            if (!(!asset.magicString || !asset.dependencies)) {\n                              _context5.next = 31;\n                              break;\n                            }\n\n                            _context5.next = 10;\n                            return _this5.readCode(asset, {\n                              token: token\n                            });\n\n                          case 10:\n                            code = _context5.sent;\n                            dependencies = asset.setCode(code);\n                            _iteratorNormalCompletion16 = true;\n                            _didIteratorError16 = false;\n                            _iteratorError16 = undefined;\n                            _context5.prev = 15;\n\n                            for (_iterator16 = dependencies[Symbol.iterator](); !(_iteratorNormalCompletion16 = (_step16 = _iterator16.next()).done); _iteratorNormalCompletion16 = true) {\n                              dependency = _step16.value;\n                              resolveDependency(asset, dependency);\n                            }\n\n                            _context5.next = 23;\n                            break;\n\n                          case 19:\n                            _context5.prev = 19;\n                            _context5.t0 = _context5[\"catch\"](15);\n                            _didIteratorError16 = true;\n                            _iteratorError16 = _context5.t0;\n\n                          case 23:\n                            _context5.prev = 23;\n                            _context5.prev = 24;\n\n                            if (!_iteratorNormalCompletion16 && _iterator16.return != null) {\n                              _iterator16.return();\n                            }\n\n                          case 26:\n                            _context5.prev = 26;\n\n                            if (!_didIteratorError16) {\n                              _context5.next = 29;\n                              break;\n                            }\n\n                            throw _iteratorError16;\n\n                          case 29:\n                            return _context5.finish(26);\n\n                          case 30:\n                            return _context5.finish(23);\n\n                          case 31:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5, null, [[15, 19, 23, 31], [24,, 26, 30]]);\n                  })));\n                };\n\n                for (_iterator15 = entrypoints[Symbol.iterator](); !(_iteratorNormalCompletion15 = (_step15 = _iterator15.next()).done); _iteratorNormalCompletion15 = true) {\n                  _loop();\n                }\n\n                _context6.next = 72;\n                break;\n\n              case 68:\n                _context6.prev = 68;\n                _context6.t2 = _context6[\"catch\"](63);\n                _didIteratorError15 = true;\n                _iteratorError15 = _context6.t2;\n\n              case 72:\n                _context6.prev = 72;\n                _context6.prev = 73;\n\n                if (!_iteratorNormalCompletion15 && _iterator15.return != null) {\n                  _iterator15.return();\n                }\n\n              case 75:\n                _context6.prev = 75;\n\n                if (!_didIteratorError15) {\n                  _context6.next = 78;\n                  break;\n                }\n\n                throw _iteratorError15;\n\n              case 78:\n                return _context6.finish(75);\n\n              case 79:\n                return _context6.finish(72);\n\n              case 80:\n                _context6.next = 82;\n                return dfd.promise;\n\n              case 82:\n                return _context6.abrupt(\"return\", new Bundle(assets, entrypointsToAssets, dependenciesToAssets));\n\n              case 83:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[19, 48, 52, 60], [26, 30, 34, 42], [35,, 37, 41], [53,, 55, 59], [63, 68, 72, 80], [73,, 75, 79]]);\n      }));\n\n      function generateBundle(_x4) {\n        return _generateBundle.apply(this, arguments);\n      }\n\n      return generateBundle;\n    }()\n  }, {\n    key: \"readCode\",\n    value: function () {\n      var _readCode = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(asset, _ref18) {\n        var token, buf, code;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                token = _ref18.token;\n\n                if (!(asset.href === EMPTY_MODULE_URL.href)) {\n                  _context7.next = 3;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", EMPTY_MODULE_CODE);\n\n              case 3:\n                _context7.next = 5;\n                return this.resolver.host.readFileContent(this.resolver, new URL(asset.href), {\n                  token: token\n                });\n\n              case 5:\n                buf = _context7.sent;\n                code = this.resolver.decoder.decode(buf);\n                return _context7.abrupt(\"return\", code);\n\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function readCode(_x9, _x10) {\n        return _readCode.apply(this, arguments);\n      }\n\n      return readCode;\n    }()\n  }, {\n    key: \"resolveBareModuleReference\",\n    value: function () {\n      var _resolveBareModuleReference3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(href, fromHref) {\n        var _ref19,\n            _ref19$invalidatedBy,\n            invalidatedBy,\n            token,\n            resolvedArg,\n            resolvedUri,\n            _args8 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _ref19 = _args8.length > 2 && _args8[2] !== undefined ? _args8[2] : {}, _ref19$invalidatedBy = _ref19.invalidatedBy, invalidatedBy = _ref19$invalidatedBy === void 0 ? new Set() : _ref19$invalidatedBy, token = _ref19.token;\n                _context8.next = 3;\n                return _resolveBareModuleReference2(this.resolver, href, fromHref, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 3:\n                resolvedArg = _context8.sent;\n\n                if (resolvedArg) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                throw new ResolveError(href, fromHref);\n\n              case 6:\n                _context8.t0 = resolvedArg.resolvedSpec.type;\n                _context8.next = _context8.t0 === 'range' ? 9 : _context8.t0 === 'tag' ? 9 : _context8.t0 === 'version' ? 9 : 13;\n                break;\n\n              case 9:\n                _context8.next = 11;\n                return this.resolveBareModule(\"\".concat(resolvedArg.name, \"@\").concat(resolvedArg.resolvedSpec.fetchSpec), resolvedArg.pathname);\n\n              case 11:\n                resolvedUri = _context8.sent;\n                return _context8.abrupt(\"return\", this.resolveRelativeModuleReference(resolvedUri.href, fromHref, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }));\n\n              case 13:\n                throw new NotSupportedError(\"Unsupported dependency type '\".concat(resolvedArg.resolvedSpec.type, \"' for '\").concat(href, \"'\").concat(fromHref ? \" from \".concat(fromHref) : ''));\n\n              case 14:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function resolveBareModuleReference(_x11, _x12) {\n        return _resolveBareModuleReference3.apply(this, arguments);\n      }\n\n      return resolveBareModuleReference;\n    }()\n  }, {\n    key: \"resolveRelativeModuleReference\",\n    value: function () {\n      var _resolveRelativeModuleReference = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9(href, fromHref, _ref20) {\n        var invalidatedBy, token, combinedUri, resolveResult, resolvedUri, resolvedHref, rootHref;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                invalidatedBy = _ref20.invalidatedBy, token = _ref20.token;\n                combinedUri = new URL(href, fromHref);\n                _context9.next = 4;\n                return this.resolver.resolve(combinedUri, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 4:\n                resolveResult = _context9.sent;\n\n                if (!resolveResult.resolvedUrl) {\n                  resolvedUri = EMPTY_MODULE_URL;\n                } else {\n                  resolvedUri = resolveResult.resolvedUrl;\n                }\n\n                resolvedHref = resolvedUri.href;\n                rootHref = resolveResult.rootUrl.href;\n                return _context9.abrupt(\"return\", {\n                  type: Bundler.ResolveDetailsKind.Relative,\n                  ignored: resolveResult.ignored,\n                  invalidatedBy: invalidatedBy,\n                  resolvedHref: resolvedHref,\n                  rootHref: rootHref,\n                  stableHref: resolvedHref,\n                  stableRootHref: rootHref\n                });\n\n              case 9:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function resolveRelativeModuleReference(_x13, _x14, _x15) {\n        return _resolveRelativeModuleReference.apply(this, arguments);\n      }\n\n      return resolveRelativeModuleReference;\n    }()\n  }, {\n    key: \"resolveWithDetails\",\n    value: function () {\n      var _resolveWithDetails = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee10(uri, fromUri, _ref21) {\n        var _ref21$invalidatedBy, invalidatedBy, token;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _ref21$invalidatedBy = _ref21.invalidatedBy, invalidatedBy = _ref21$invalidatedBy === void 0 ? new Set() : _ref21$invalidatedBy, token = _ref21.token;\n\n                if (!isBareModuleSpecifier(uri)) {\n                  _context10.next = 3;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\", this.resolveBareModuleReference(uri, fromUri, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }));\n\n              case 3:\n                return _context10.abrupt(\"return\", this.resolveRelativeModuleReference(uri, fromUri, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }));\n\n              case 4:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function resolveWithDetails(_x16, _x17, _x18) {\n        return _resolveWithDetails.apply(this, arguments);\n      }\n\n      return resolveWithDetails;\n    }()\n  }, {\n    key: \"onAssetAdded\",\n    get: function get() {\n      return this.onAssetAddedEmitter.event;\n    }\n  }, {\n    key: \"onAssetRemoved\",\n    get: function get() {\n      return this.onAssetRemovedEmitter.event;\n    }\n  }]);\n\n  return Bundler;\n}();\n\n(function (Bundler) {\n  var ResolveDetailsKind;\n\n  (function (ResolveDetailsKind) {\n    ResolveDetailsKind[\"BareModule\"] = \"bare_module\";\n    ResolveDetailsKind[\"Relative\"] = \"relative\";\n  })(ResolveDetailsKind = Bundler.ResolveDetailsKind || (Bundler.ResolveDetailsKind = {}));\n})(Bundler || (Bundler = {}));\n\nvar base64 = {\n  decode: Base64.decode,\n  encode: Base64.encode\n};\nexport { Asset, Bundle, Bundler, InvariantViolation, NotSupportedError, ResolveError, base64, getSourceMappingUrl };","import styled from '@emotion/styled/macro';\nimport { expose, Transport } from '@ggoodman/rpc';\nimport { InvariantViolation } from '@velcro/bundler';\nimport { CanceledError } from '@velcro/resolver';\nimport * as Monaco from 'monaco-editor';\nimport React, { useEffect, useRef, useContext, useState } from 'react';\nimport {\n  Delayer,\n  Throttler,\n  DisposableStore,\n  CancellationTokenSource,\n  IDisposable,\n  Emitter,\n  Event,\n  timeout,\n  CancellationToken,\n} from 'ts-primitives';\n\nimport { EditorManagerContext } from '../lib/EditorManager';\nimport { TimeoutError } from '../lib/error';\nimport { HmrBuildErrorRequest, HmrReloadRequest, HmrReloadResponse } from '../lib/previewRuntime';\n\nexport interface DeferredExecutionModuleRecord {\n  code: string;\n  dependencies: Record<string, string>;\n}\n\nexport interface DeferredExecutionManifest {\n  aliases: Record<string, string>;\n  entrypoints: Record<string, string>;\n  modules: Record<string, DeferredExecutionModuleRecord>;\n}\n\ninterface MessageLine {\n  isInternal: boolean;\n  text: string;\n}\ninterface Message {\n  lines: MessageLine[];\n}\n\nconst PreviewProgress = styled.div<{ completed: number; total: number }>`\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  width: ${props => (props.total ? `${Math.round((100 * props.completed) / props.total)}%` : 0)};\n  left: 0;\n  height: ${props => (props.total ? '2px' : '0')};\n  background-color: #008cba;\n  transition: width 0.5s 0s cubic-bezier(0.455, 0.03, 0.515, 0.955);\n`;\nconst PreviewIframeWrap = styled.div`\n  position: relative;\n  overflow: hidden;\n\n  & > iframe {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: none;\n    width: 100%;\n    height: 100%;\n  }\n`;\nconst PreviewWrap = styled.div`\n  position: relative;\n  background: white;\n\n  ${PreviewIframeWrap} {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n`;\nconst PreviewMessageError = styled.ul`\n  margin: 0;\n  padding: 1em 2em;\n  font-family: monospace;\n  font-size: 16px;\n  background-color: rgba(255, 0, 0, 0.5);\n  backdrop-filter: brightness(50%);\n  color: white;\n  list-style: none;\n`;\nconst PreviewMessageErrorText = styled.li<{ isInternal: boolean }>`\n  white-space: pre-wrap;\n  opacity: ${props => (props.isInternal ? 0.7 : 1.0)};\n`;\nconst PreviewMessages = styled.div`\n  z-index: 1;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column-reverse;\n`;\nconst PreviewMessageLine: React.FC<{ line: MessageLine }> = ({ line }) => {\n  return <PreviewMessageErrorText isInternal={line.isInternal}>{line.text}</PreviewMessageErrorText>;\n};\nconst PreviewMessage: React.FC<{ message: Message }> = ({ message }) => {\n  return message.lines.length ? (\n    <PreviewMessageError>\n      {message.lines.map((line, i) => (\n        <PreviewMessageLine key={i} line={line}></PreviewMessageLine>\n      ))}\n    </PreviewMessageError>\n  ) : null;\n};\n\nconst Preview: React.FC<{ className?: string }> = props => {\n  const invalidations = useRef(new Set<string>());\n  const previewWrapRef = useRef<HTMLDivElement | null>(null);\n  const hmrClientRef = useRef<HmrClient | null>(null);\n  const previewIframeRef = useRef<HTMLIFrameElement | null>(null);\n  const editorManager = useContext(EditorManagerContext);\n  const [messages, setMessages] = useState([] as Message[]);\n  const [buildProgress, setBuildProgress] = useState({ completed: 0, total: 0 });\n  const runtimeBundleString = useRef('');\n\n  useEffect(() => {\n    const disposable = new DisposableStore();\n    const delayer = new Delayer(500);\n    const throttler = new Throttler();\n\n    const worker = new Worker('../lib/bundlerWorker', { type: 'module' });\n    const hostApi: import('../lib/bundlerWorker').HostApi = {\n      async getCanonicalUrl(href) {\n        const url = await editorManager.inflightCachingHost.getCanonicalUrl(editorManager.resolver, new URL(href));\n\n        return url.href;\n      },\n      async getResolveRoot(href) {\n        const url = await editorManager.inflightCachingHost.getResolveRoot(editorManager.resolver, new URL(href));\n\n        return url.href;\n      },\n      async listEntries(href) {\n        const entries = await editorManager.inflightCachingHost.listEntries(editorManager.resolver, new URL(href));\n\n        return entries.map(entry => {\n          return {\n            type: entry.type,\n            href: entry.url.href,\n          };\n        });\n      },\n      async readFileContent(href) {\n        const content = await editorManager.inflightCachingHost.readFileContent(editorManager.resolver, new URL(href));\n\n        return editorManager.resolver.decoder.decode(content);\n      },\n      async resolveBareModule(spec, pathname) {\n        const url = await editorManager.resolveBareModule(spec, pathname);\n\n        return url.href;\n      },\n    };\n    const workerClient = expose(hostApi).connect<import('../lib/bundlerWorker').WorkerApi>(\n      Transport.fromDomWorker(worker)\n    );\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    let building = true;\n    let tokenSource = new CancellationTokenSource();\n\n    const queueRefreshPreview = (uris: string[]) => {\n      tokenSource.cancel();\n      tokenSource.dispose();\n\n      tokenSource = new CancellationTokenSource();\n\n      for (const uri of uris) {\n        invalidations.current.add(uri);\n      }\n\n      delayer.trigger(() => throttler.queue(() => refreshPreview(tokenSource.token)));\n    };\n\n    const rerender = async (invalidate: string[], token: CancellationToken) => {\n      let runtimeBundle = runtimeBundleString.current;\n\n      try {\n        if (!runtimeBundle) {\n          runtimeBundle = await workerClient.invoke(\n            'generateBundle',\n            [`${editorManager.previewRuntimeHost.getRoot()}index.js`],\n            onEnqueueAsset,\n            onCompleteAsset,\n            {\n              executeEntrypoints: true,\n              sourceMap: false,\n            }\n          );\n          runtimeBundleString.current = runtimeBundle;\n        }\n\n        let codeBundle: string;\n\n        try {\n          const unresolvedEntrypointHref = Monaco.Uri.file('/').toString(true);\n          const resolvedEntrypoint = await editorManager.resolver.resolve(unresolvedEntrypointHref);\n\n          if (!resolvedEntrypoint.resolvedUrl) {\n            throw new Error(`Unable to determine the entrypoing to your code`);\n          }\n\n          const resolvedEntrypointHref = resolvedEntrypoint.resolvedUrl.href;\n\n          codeBundle = await workerClient.invoke(\n            'generateBundle',\n            [resolvedEntrypointHref],\n            onEnqueueAsset,\n            onCompleteAsset,\n            {\n              executeEntrypoints: true,\n              invalidations: invalidate,\n              sourceMap: true,\n            }\n          );\n        } catch (err) {\n          if (err.name === 'CanceledError') {\n            throw err;\n          }\n\n          codeBundle = `ReactErrorOverlay.reportBuildError(${JSON.stringify(err.message)});\\n`;\n        }\n\n        const runtimeBundleFile = new File([runtimeBundle], 'playground:///runtime.js', {\n          type: 'text/javascript',\n        });\n        const codeBundleFile = new File([`var __velcroRuntime = ${codeBundle};\\n`], 'playground:///index.js', {\n          type: 'text/javascript',\n        });\n        const markup = new File(\n          [\n            `\n  <!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <script src=\"${URL.createObjectURL(runtimeBundleFile)}\"></script>\n  </head>\n  <body>\n  <div id=\"root\"></div>\n  <script src=\"${URL.createObjectURL(codeBundleFile)}\"></script>\n  </body>\n  </html>`,\n          ],\n          Monaco.Uri.file('/index.html').toString(true),\n          {\n            type: 'text/html',\n          }\n        );\n        const htmlUrl = URL.createObjectURL(markup);\n        const iframe = document.createElement('iframe');\n        iframe.style.display = 'none';\n        iframe.src = htmlUrl;\n\n        if (previewWrapRef.current) {\n          previewWrapRef.current.appendChild(iframe);\n        }\n\n        try {\n          await new Promise((resolve, reject) => {\n            iframe.onload = () => resolve();\n            iframe.onerror = reject;\n          });\n        } catch (err) {\n          iframe.remove();\n          throw err;\n        }\n\n        if (previewIframeRef.current) {\n          previewIframeRef.current.remove();\n        }\n\n        iframe.style.display = '';\n\n        previewIframeRef.current = iframe;\n      } catch (err) {\n        tokenSource.cancel();\n\n        if (!(err instanceof CanceledError) && (err && err.name !== 'CanceledError')) {\n          setMessages(messages => [...messages, { lines: [{ isInternal: false, text: err.message }] }]);\n        }\n      } finally {\n        if (tokenSource) {\n          tokenSource.dispose();\n        }\n\n        building = false;\n\n        setBuildProgress({ completed: 0, total: 0 });\n      }\n    };\n\n    const hotReload = async (invalidate: string[], hmrClient: HmrClient, token: CancellationToken) => {\n      try {\n        const unresolvedEntrypointHref = Monaco.Uri.file('/').toString(true);\n        const resolvedEntrypoint = await editorManager.resolver.resolve(unresolvedEntrypointHref);\n\n        if (!resolvedEntrypoint.resolvedUrl) {\n          throw new Error(`Unable to determine the entrypoing to your code`);\n        }\n\n        const resolvedEntrypointHref = resolvedEntrypoint.resolvedUrl.href;\n        const codeBundle = await workerClient.invoke(\n          'generateBundle',\n          [resolvedEntrypointHref],\n          onEnqueueAsset,\n          onCompleteAsset,\n          {\n            executeEntrypoints: false,\n            invalidations: invalidate,\n            runtime: '__velcroRuntime',\n            sourceMap: true,\n          }\n        );\n        const updatedBundleFile = new File([codeBundle], 'playground:///runtime.js', {\n          type: 'text/javascript',\n        });\n        const updatedBundleHref = URL.createObjectURL(updatedBundleFile);\n\n        hmrClient.send({\n          type: 'reload',\n          invalidations: invalidate,\n          href: updatedBundleHref,\n        });\n\n        await Promise.race([\n          Event.toPromise(hmrClient.onReload),\n          timeout(5000).then(() => {\n            throw new TimeoutError(`HMR refresh timed out`);\n          }),\n        ]);\n      } catch (err) {\n        hmrClient.send({\n          type: 'build_error',\n          message: err.message,\n          stack: err.stack,\n        });\n      }\n    };\n\n    const refreshPreview = async (token: CancellationToken) => {\n      const refreshId = Date.now();\n      console.time(`Refresh ${refreshId}`);\n      const toInvalidate = Array.from(invalidations.current);\n\n      setMessages([]);\n\n      invalidations.current.clear();\n\n      building = true;\n      setBuildProgress({ completed: 0, total: 0 });\n\n      try {\n        if (!hmrClientRef.current) {\n          return await rerender(toInvalidate, token);\n        } else {\n          return await hotReload(toInvalidate, hmrClientRef.current, token);\n        }\n      } catch (err) {\n      } finally {\n        console.timeEnd(`Refresh ${refreshId}`);\n        building = false;\n        setBuildProgress({ completed: 0, total: 0 });\n      }\n    };\n\n    disposable.add(delayer);\n\n    const onEnqueueAsset = () => {\n      if (building) {\n        setBuildProgress(buildProgress => {\n          return {\n            completed: buildProgress.completed,\n            total: buildProgress.total + 1,\n          };\n        });\n      }\n    };\n    const onCompleteAsset = () => {\n      if (building) {\n        setBuildProgress(buildProgress => {\n          return {\n            completed: buildProgress.completed + 1,\n            total: buildProgress.total,\n          };\n        });\n      }\n    };\n\n    for (const model of Monaco.editor.getModels()) {\n      disposable.add(\n        model.onDidChangeContent(() => {\n          queueRefreshPreview([model.uri.toString(true)]);\n        })\n      );\n    }\n\n    disposable.add(\n      Monaco.editor.onDidCreateModel(model => {\n        queueRefreshPreview([model.uri.toString(true)]);\n\n        disposable.add(\n          model.onDidChangeContent(() => {\n            queueRefreshPreview([model.uri.toString(true)]);\n          })\n        );\n      })\n    );\n\n    disposable.add(\n      Monaco.editor.onWillDisposeModel(model => {\n        queueRefreshPreview([model.uri.toString(true)]);\n      })\n    );\n\n    disposable.add(\n      (() => {\n        const onMessage = async (e: MessageEvent) => {\n          if (\n            (previewIframeRef.current && e.source !== previewIframeRef.current.contentWindow) ||\n            !e.data ||\n            typeof e.data.type !== 'string' ||\n            !e.data.payload\n          ) {\n            return;\n          }\n\n          switch (e.data.type) {\n            case 'error_open': {\n              if (!editorManager.editor) {\n                return;\n              }\n\n              const model = editorManager.getModelByHref(e.data.payload.fileName);\n\n              if (model) {\n                let lineNumber: number | undefined = e.data.payload.lineNumber;\n                let columnNumber: number | undefined = undefined;\n\n                if (lineNumber !== undefined) {\n                  const row = model.getLineContent(lineNumber);\n                  const matches = row.match(/^(\\s*)/);\n\n                  columnNumber = matches ? matches[1].length + 1 : undefined;\n                }\n\n                editorManager.focusModel(model, {\n                  lineNumber,\n                  columnNumber,\n                });\n              }\n\n              break;\n            }\n            case 'hmr_ready': {\n              if (!(e.data.payload instanceof MessagePort)) {\n                console.warn(\n                  'Received \"hmr_ready\" message from preview but did not receive the expected MessagePort payload',\n                  e.data\n                );\n                return;\n              }\n\n              hmrClientRef.current = new HmrClient(e.data.payload);\n              break;\n            }\n            default: {\n              console.debug({ message: e.data }, 'Unknown message received from preview iframe');\n            }\n          }\n        };\n\n        window.addEventListener('message', onMessage);\n        return {\n          dispose() {\n            window.removeEventListener('message', onMessage);\n          },\n        };\n      })()\n    );\n\n    disposable.add({\n      dispose() {\n        if (hmrClientRef.current) {\n          hmrClientRef.current.dispose();\n        }\n      },\n    });\n\n    disposable.add(workerClient);\n\n    queueRefreshPreview([]);\n\n    return () => disposable.dispose();\n  }, [editorManager.resolver, editorManager, invalidations]);\n\n  return (\n    <PreviewWrap className={props.className}>\n      <PreviewProgress completed={buildProgress.completed} total={buildProgress.total}></PreviewProgress>\n      {previewIframeRef.current ? null : 'Building the preview...'}\n      <PreviewIframeWrap ref={previewWrapRef}></PreviewIframeWrap>\n      <PreviewMessages>\n        {messages.map((message, idx) => (\n          <PreviewMessage key={idx} message={message}></PreviewMessage>\n        ))}\n      </PreviewMessages>\n    </PreviewWrap>\n  );\n};\n\nexport default styled(Preview)``;\n\nclass HmrClient implements IDisposable {\n  private readonly onReloadEmitter = new Emitter<HmrReloadResponse>();\n\n  constructor(private readonly port: MessagePort) {\n    port.onmessage = e => {\n      if (!e.data || typeof e.data !== 'object') {\n        throw new InvariantViolation('Unexpected message received from HMR client');\n      }\n\n      switch (e.data.type) {\n        case 'reload': {\n          this.onReloadEmitter.fire(e.data);\n          break;\n        }\n        default: {\n          throw new InvariantViolation(`Unexpected message with type '${e.data.type}' received from HMR client`);\n        }\n      }\n    };\n  }\n\n  get onReload() {\n    return this.onReloadEmitter.event;\n  }\n\n  dispose() {\n    this.port.close();\n  }\n\n  send(message: HmrBuildErrorRequest | HmrReloadRequest) {\n    this.port.postMessage(message);\n  }\n}\n","var _regeneratorRuntime = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _slicedToArray = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _toConsumableArray = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _possibleConstructorReturn = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _assertThisInitialized = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _wrapNativeSuper = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nvar _classCallCheck = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) : typeof define === 'function' && define.amd ? define(['exports'], factory) : (global = global || self, factory(global.Velcro = global.Velcro || {}));\n})(this, function (exports) {\n  'use strict';\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n  // Avoid circular dependency on EventEmitter by implementing a subset of the interface.\n\n  var ErrorHandler =\n  /*#__PURE__*/\n  function () {\n    function ErrorHandler() {\n      _classCallCheck(this, ErrorHandler);\n\n      this.listeners = [];\n\n      this.unexpectedErrorHandler = function (e) {\n        setTimeout(function () {\n          if (e.stack) {\n            throw new Error(e.message + '\\n\\n' + e.stack);\n          }\n\n          throw e;\n        }, 0);\n      };\n    }\n\n    _createClass(ErrorHandler, [{\n      key: \"addListener\",\n      value: function addListener(listener) {\n        var _this = this;\n\n        this.listeners.push(listener);\n        return function () {\n          _this._removeListener(listener);\n        };\n      }\n    }, {\n      key: \"emit\",\n      value: function emit(e) {\n        this.listeners.forEach(function (listener) {\n          listener(e);\n        });\n      }\n    }, {\n      key: \"_removeListener\",\n      value: function _removeListener(listener) {\n        this.listeners.splice(this.listeners.indexOf(listener), 1);\n      }\n    }, {\n      key: \"setUnexpectedErrorHandler\",\n      value: function setUnexpectedErrorHandler(newUnexpectedErrorHandler) {\n        this.unexpectedErrorHandler = newUnexpectedErrorHandler;\n      }\n    }, {\n      key: \"getUnexpectedErrorHandler\",\n      value: function getUnexpectedErrorHandler() {\n        return this.unexpectedErrorHandler;\n      }\n    }, {\n      key: \"onUnexpectedError\",\n      value: function onUnexpectedError(e) {\n        this.unexpectedErrorHandler(e);\n        this.emit(e);\n      } // For external errors, we don't want the listeners to be called\n\n    }, {\n      key: \"onUnexpectedExternalError\",\n      value: function onUnexpectedExternalError(e) {\n        this.unexpectedErrorHandler(e);\n      }\n    }]);\n\n    return ErrorHandler;\n  }();\n\n  var errorHandler = new ErrorHandler();\n\n  function onUnexpectedError(e) {\n    // ignore errors from cancelled promises\n    if (!isPromiseCanceledError(e)) {\n      errorHandler.onUnexpectedError(e);\n    }\n\n    return undefined;\n  }\n\n  var ExtendableError =\n  /*#__PURE__*/\n  function (_Error) {\n    _inherits(ExtendableError, _Error);\n\n    function ExtendableError(message) {\n      var _this2;\n\n      _classCallCheck(this, ExtendableError);\n\n      _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ExtendableError).call(this, message));\n      _this2.name = _this2.constructor.name;\n\n      if (typeof Error.captureStackTrace === 'function') {\n        Error.captureStackTrace(_assertThisInitialized(_this2), _this2.constructor);\n      } else {\n        _this2.stack = new Error(message).stack;\n      }\n\n      return _this2;\n    }\n\n    return ExtendableError;\n  }(_wrapNativeSuper(Error));\n\n  var CanceledError =\n  /*#__PURE__*/\n  function (_ExtendableError) {\n    _inherits(CanceledError, _ExtendableError);\n\n    function CanceledError() {\n      _classCallCheck(this, CanceledError);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(CanceledError).apply(this, arguments));\n    }\n\n    return CanceledError;\n  }(ExtendableError);\n  /**\r\n   * Checks if the given error is a promise in canceled state\r\n   */\n\n\n  function isPromiseCanceledError(error) {\n    return error instanceof CanceledError;\n  }\n\n  function _dispose(first) {\n    for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      rest[_key - 1] = arguments[_key];\n    }\n\n    if (Array.isArray(first)) {\n      first.forEach(function (d) {\n        return d && d.dispose();\n      });\n      return [];\n    } else if (rest.length === 0) {\n      if (first) {\n        first.dispose();\n        return first;\n      }\n\n      return undefined;\n    } else {\n      _dispose(first);\n\n      _dispose(rest);\n\n      return [];\n    }\n  }\n\n  function combinedDisposable() {\n    for (var _len2 = arguments.length, disposables = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      disposables[_key2] = arguments[_key2];\n    }\n\n    return {\n      dispose: function dispose() {\n        return _dispose(disposables);\n      }\n    };\n  }\n\n  var DisposableStore =\n  /*#__PURE__*/\n  function () {\n    function DisposableStore() {\n      _classCallCheck(this, DisposableStore);\n\n      this._toDispose = new Set();\n      this._isDisposed = false;\n    }\n    /**\r\n     * Dispose of all registered disposables and mark this object as disposed.\r\n     *\r\n     * Any future disposables added to this object will be disposed of on `add`.\r\n     */\n\n\n    _createClass(DisposableStore, [{\n      key: \"dispose\",\n      value: function dispose() {\n        this._isDisposed = true;\n        this.clear();\n      }\n      /**\r\n       * Dispose of all registered disposables but do not mark this object as disposed.\r\n       */\n\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        this._toDispose.forEach(function (item) {\n          return item.dispose();\n        });\n\n        this._toDispose.clear();\n      }\n    }, {\n      key: \"add\",\n      value: function add(t) {\n        if (this._isDisposed) {\n          console.warn('Registering disposable on object that has already been disposed.');\n          t.dispose();\n        } else {\n          this._toDispose.add(t);\n        }\n\n        return t;\n      }\n    }]);\n\n    return DisposableStore;\n  }();\n\n  var Disposable =\n  /*#__PURE__*/\n  function () {\n    function Disposable() {\n      _classCallCheck(this, Disposable);\n\n      this._store = new DisposableStore();\n    }\n\n    _createClass(Disposable, [{\n      key: \"dispose\",\n      value: function dispose() {\n        this._store.dispose();\n      }\n    }, {\n      key: \"_register\",\n      value: function _register(t) {\n        return this._store.add(t);\n      }\n    }]);\n\n    return Disposable;\n  }();\n\n  Disposable.None = Object.freeze({\n    dispose: function dispose() {}\n  });\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n\n  var FIN = {\n    done: true,\n    value: undefined\n  };\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n\n  var Node = function Node(element) {\n    _classCallCheck(this, Node);\n\n    this.element = element;\n    this.next = Node.Undefined;\n    this.prev = Node.Undefined;\n  };\n\n  Node.Undefined = new Node(undefined);\n\n  var LinkedList =\n  /*#__PURE__*/\n  function () {\n    function LinkedList() {\n      _classCallCheck(this, LinkedList);\n\n      this._first = Node.Undefined;\n      this._last = Node.Undefined;\n      this._size = 0;\n    }\n\n    _createClass(LinkedList, [{\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return this._first === Node.Undefined;\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        this._first = Node.Undefined;\n        this._last = Node.Undefined;\n        this._size = 0;\n      }\n    }, {\n      key: \"unshift\",\n      value: function unshift(element) {\n        return this._insert(element, false);\n      }\n    }, {\n      key: \"push\",\n      value: function push(element) {\n        return this._insert(element, true);\n      }\n    }, {\n      key: \"_insert\",\n      value: function _insert(element, atTheEnd) {\n        var _this3 = this;\n\n        var newNode = new Node(element);\n\n        if (this._first === Node.Undefined) {\n          this._first = newNode;\n          this._last = newNode;\n        } else if (atTheEnd) {\n          // push\n          var oldLast = this._last;\n          this._last = newNode;\n          newNode.prev = oldLast;\n          oldLast.next = newNode;\n        } else {\n          // unshift\n          var oldFirst = this._first;\n          this._first = newNode;\n          newNode.next = oldFirst;\n          oldFirst.prev = newNode;\n        }\n\n        this._size += 1;\n        var didRemove = false;\n        return function () {\n          if (!didRemove) {\n            didRemove = true;\n\n            _this3._remove(newNode);\n          }\n        };\n      }\n    }, {\n      key: \"shift\",\n      value: function shift() {\n        if (this._first === Node.Undefined) {\n          return undefined;\n        } else {\n          var res = this._first.element;\n\n          this._remove(this._first);\n\n          return res;\n        }\n      }\n    }, {\n      key: \"pop\",\n      value: function pop() {\n        if (this._last === Node.Undefined) {\n          return undefined;\n        } else {\n          var res = this._last.element;\n\n          this._remove(this._last);\n\n          return res;\n        }\n      }\n    }, {\n      key: \"_remove\",\n      value: function _remove(node) {\n        if (node.prev !== Node.Undefined && node.next !== Node.Undefined) {\n          // middle\n          var anchor = node.prev;\n          anchor.next = node.next;\n          node.next.prev = anchor;\n        } else if (node.prev === Node.Undefined && node.next === Node.Undefined) {\n          // only node\n          this._first = Node.Undefined;\n          this._last = Node.Undefined;\n        } else if (node.next === Node.Undefined) {\n          // last\n          this._last = this._last.prev;\n          this._last.next = Node.Undefined;\n        } else if (node.prev === Node.Undefined) {\n          // first\n          this._first = this._first.next;\n          this._first.prev = Node.Undefined;\n        } // done\n\n\n        this._size -= 1;\n      }\n    }, {\n      key: \"iterator\",\n      value: function iterator() {\n        var element;\n        var node = this._first;\n        return {\n          next: function next() {\n            if (node === Node.Undefined) {\n              return FIN;\n            }\n\n            if (!element) {\n              element = {\n                done: false,\n                value: node.element\n              };\n            } else {\n              element.value = node.element;\n            }\n\n            node = node.next;\n            return element;\n          }\n        };\n      }\n    }, {\n      key: \"toArray\",\n      value: function toArray() {\n        var result = [];\n\n        for (var node = this._first; node !== Node.Undefined; node = node.next) {\n          result.push(node.element);\n        }\n\n        return result;\n      }\n    }, {\n      key: \"size\",\n      get: function get() {\n        return this._size;\n      }\n    }]);\n\n    return LinkedList;\n  }();\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n\n\n  var Event;\n\n  (function (Event) {\n    var _disposable = {\n      dispose: function dispose() {}\n    };\n\n    Event.None = function () {\n      return _disposable;\n    };\n    /**\r\n     * Given an event, returns another event which only fires once.\r\n     */\n\n\n    function _once(event) {\n      return function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        // we need this, in case the event fires during the listener call\n        var didFire = false;\n        var result;\n        result = event(function (e) {\n          if (didFire) {\n            return;\n          } else if (result) {\n            result.dispose();\n          } else {\n            didFire = true;\n          }\n\n          return listener.call(thisArgs, e);\n        }, null, disposables);\n\n        if (didFire) {\n          result.dispose();\n        }\n\n        return result;\n      };\n    }\n\n    Event.once = _once;\n    /**\r\n     * Given an event and a `map` function, returns another event which maps each element\r\n     * throught the mapping function.\r\n     */\n\n    function _map(event, map) {\n      return snapshot(function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        return event(function (i) {\n          return listener.call(thisArgs, map(i));\n        }, null, disposables);\n      });\n    }\n\n    Event.map = _map;\n    /**\r\n     * Given an event and an `each` function, returns another identical event and calls\r\n     * the `each` function per each element.\r\n     */\n\n    function _forEach(event, each) {\n      return snapshot(function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        return event(function (i) {\n          each(i);\n          listener.call(thisArgs, i);\n        }, null, disposables);\n      });\n    }\n\n    Event.forEach = _forEach;\n\n    function _filter(event, filter) {\n      return snapshot(function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        return event(function (e) {\n          return filter(e) && listener.call(thisArgs, e);\n        }, null, disposables);\n      });\n    }\n\n    Event.filter = _filter;\n    /**\r\n     * Given an event, returns the same event but typed as `Event<void>`.\r\n     */\n\n    function signal(event) {\n      return event;\n    }\n\n    Event.signal = signal;\n    /**\r\n     * Given a collection of events, returns a single event which emits\r\n     * whenever any of the provided events emit.\r\n     */\n\n    function any() {\n      for (var _len3 = arguments.length, events = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        events[_key3] = arguments[_key3];\n      }\n\n      return function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        return combinedDisposable.apply(void 0, _toConsumableArray(events.map(function (event) {\n          return event(function (e) {\n            return listener.call(thisArgs, e);\n          }, null, disposables);\n        })));\n      };\n    }\n\n    Event.any = any;\n    /**\r\n     * Given an event and a `merge` function, returns another event which maps each element\r\n     * and the cummulative result throught the `merge` function. Similar to `map`, but with memory.\r\n     */\n\n    function _reduce(event, merge, initial) {\n      var output = initial;\n      return _map(event, function (e) {\n        output = merge(output, e);\n        return output;\n      });\n    }\n\n    Event.reduce = _reduce;\n    /**\r\n     * Given a chain of event processing functions (filter, map, etc), each\r\n     * function will be invoked per event & per listener. Snapshotting an event\r\n     * chain allows each function to be invoked just once per event.\r\n     */\n\n    function snapshot(event) {\n      var listener;\n      var emitter = new Emitter({\n        onFirstListenerAdd: function onFirstListenerAdd() {\n          listener = event(emitter.fire, emitter);\n        },\n        onLastListenerRemove: function onLastListenerRemove() {\n          listener.dispose();\n        }\n      });\n      return emitter.event;\n    }\n\n    Event.snapshot = snapshot;\n\n    function debounce(event, merge) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n      var leading = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var leakWarningThreshold = arguments.length > 4 ? arguments[4] : undefined;\n      var subscription;\n      var output = undefined;\n      var handle = undefined;\n      var numDebouncedCalls = 0;\n      var emitter = new Emitter({\n        leakWarningThreshold: leakWarningThreshold,\n        onFirstListenerAdd: function onFirstListenerAdd() {\n          subscription = event(function (cur) {\n            numDebouncedCalls++;\n            output = merge(output, cur);\n\n            if (leading && !handle) {\n              emitter.fire(output);\n            }\n\n            clearTimeout(handle);\n            handle = setTimeout(function () {\n              var _output = output;\n              output = undefined;\n              handle = undefined;\n\n              if (!leading || numDebouncedCalls > 1) {\n                emitter.fire(_output);\n              }\n\n              numDebouncedCalls = 0;\n            }, delay);\n          });\n        },\n        onLastListenerRemove: function onLastListenerRemove() {\n          subscription.dispose();\n        }\n      });\n      return emitter.event;\n    }\n\n    Event.debounce = debounce;\n    /**\r\n     * Given an event, it returns another event which fires only once and as soon as\r\n     * the input event emits. The event data is the number of millis it took for the\r\n     * event to fire.\r\n     */\n\n    function stopwatch(event) {\n      var start = new Date().getTime();\n      return _map(_once(event), function (_) {\n        return new Date().getTime() - start;\n      });\n    }\n\n    Event.stopwatch = stopwatch;\n    /**\r\n     * Given an event, it returns another event which fires only when the event\r\n     * element changes.\r\n     */\n\n    function _latch(event) {\n      var firstCall = true;\n      var cache;\n      return _filter(event, function (value) {\n        var shouldEmit = firstCall || value !== cache;\n        firstCall = false;\n        cache = value;\n        return shouldEmit;\n      });\n    }\n\n    Event.latch = _latch;\n    /**\r\n     * Buffers the provided event until a first listener comes\r\n     * along, at which point fire all the events at once and\r\n     * pipe the event from then on.\r\n     *\r\n     * ```typescript\r\n     * const emitter = new Emitter<number>();\r\n     * const event = emitter.event;\r\n     * const bufferedEvent = buffer(event);\r\n     *\r\n     * emitter.fire(1);\r\n     * emitter.fire(2);\r\n     * emitter.fire(3);\r\n     * // nothing...\r\n     *\r\n     * const listener = bufferedEvent(num => console.log(num));\r\n     * // 1, 2, 3\r\n     *\r\n     * emitter.fire(4);\r\n     * // 4\r\n     * ```\r\n     */\n\n    function buffer(event) {\n      var nextTick = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _buffer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n      var buffer = _buffer.slice();\n\n      var listener = event(function (e) {\n        if (buffer) {\n          buffer.push(e);\n        } else {\n          emitter.fire(e);\n        }\n      });\n\n      var flush = function flush() {\n        if (buffer) {\n          buffer.forEach(function (e) {\n            return emitter.fire(e);\n          });\n        }\n\n        buffer = null;\n      };\n\n      var emitter = new Emitter({\n        onFirstListenerAdd: function onFirstListenerAdd() {\n          if (!listener) {\n            listener = event(function (e) {\n              return emitter.fire(e);\n            });\n          }\n        },\n        onFirstListenerDidAdd: function onFirstListenerDidAdd() {\n          if (buffer) {\n            if (nextTick) {\n              setTimeout(flush, 0);\n            } else {\n              flush();\n            }\n          }\n        },\n        onLastListenerRemove: function onLastListenerRemove() {\n          if (listener) {\n            listener.dispose();\n          }\n\n          listener = null;\n        }\n      });\n      return emitter.event;\n    }\n\n    Event.buffer = buffer;\n\n    var ChainableEvent =\n    /*#__PURE__*/\n    function () {\n      function ChainableEvent(event) {\n        _classCallCheck(this, ChainableEvent);\n\n        this.event = event;\n      }\n\n      _createClass(ChainableEvent, [{\n        key: \"map\",\n        value: function map(fn) {\n          return new ChainableEvent(_map(this.event, fn));\n        }\n      }, {\n        key: \"forEach\",\n        value: function forEach(fn) {\n          return new ChainableEvent(_forEach(this.event, fn));\n        }\n      }, {\n        key: \"filter\",\n        value: function filter(fn) {\n          return new ChainableEvent(_filter(this.event, fn));\n        }\n      }, {\n        key: \"reduce\",\n        value: function reduce(merge, initial) {\n          return new ChainableEvent(_reduce(this.event, merge, initial));\n        }\n      }, {\n        key: \"latch\",\n        value: function latch() {\n          return new ChainableEvent(_latch(this.event));\n        }\n      }, {\n        key: \"on\",\n        value: function on(listener, thisArgs, disposables) {\n          return this.event(listener, thisArgs, disposables);\n        }\n      }, {\n        key: \"once\",\n        value: function once(listener, thisArgs, disposables) {\n          return _once(this.event)(listener, thisArgs, disposables);\n        }\n      }]);\n\n      return ChainableEvent;\n    }();\n\n    function chain(event) {\n      return new ChainableEvent(event);\n    }\n\n    Event.chain = chain;\n\n    function fromNodeEventEmitter(emitter, eventName) {\n      var map = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (id) {\n        return id;\n      };\n\n      var fn = function fn() {\n        return result.fire(map.apply(void 0, arguments));\n      };\n\n      var onFirstListenerAdd = function onFirstListenerAdd() {\n        return emitter.on(eventName, fn);\n      };\n\n      var onLastListenerRemove = function onLastListenerRemove() {\n        return emitter.removeListener(eventName, fn);\n      };\n\n      var result = new Emitter({\n        onFirstListenerAdd: onFirstListenerAdd,\n        onLastListenerRemove: onLastListenerRemove\n      });\n      return result.event;\n    }\n\n    Event.fromNodeEventEmitter = fromNodeEventEmitter;\n\n    function fromPromise(promise) {\n      var emitter = new Emitter();\n      var shouldEmit = false;\n      promise.then(undefined, function () {\n        return null;\n      }).then(function () {\n        if (!shouldEmit) {\n          setTimeout(function () {\n            return emitter.fire(undefined);\n          }, 0);\n        } else {\n          emitter.fire(undefined);\n        }\n      });\n      shouldEmit = true;\n      return emitter.event;\n    }\n\n    Event.fromPromise = fromPromise;\n\n    function toPromise(event) {\n      return new Promise(function (c) {\n        return _once(event)(c);\n      });\n    }\n\n    Event.toPromise = toPromise;\n  })(Event || (Event = {}));\n\n  var _globalLeakWarningThreshold = -1;\n\n  var LeakageMonitor =\n  /*#__PURE__*/\n  function () {\n    function LeakageMonitor(customThreshold) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Math.random().toString(18).slice(2, 5);\n\n      _classCallCheck(this, LeakageMonitor);\n\n      this.customThreshold = customThreshold;\n      this.name = name;\n      this._warnCountdown = 0;\n    }\n\n    _createClass(LeakageMonitor, [{\n      key: \"dispose\",\n      value: function dispose() {\n        if (this._stacks) {\n          this._stacks.clear();\n        }\n      }\n    }, {\n      key: \"check\",\n      value: function check(listenerCount) {\n        var _this4 = this;\n\n        var threshold = _globalLeakWarningThreshold;\n\n        if (typeof this.customThreshold === 'number') {\n          threshold = this.customThreshold;\n        }\n\n        if (threshold <= 0 || listenerCount < threshold) {\n          return undefined;\n        }\n\n        if (!this._stacks) {\n          this._stacks = new Map();\n        }\n\n        var stack = new Error().stack.split('\\n').slice(3).join('\\n');\n        var count = this._stacks.get(stack) || 0;\n\n        this._stacks.set(stack, count + 1);\n\n        this._warnCountdown -= 1;\n\n        if (this._warnCountdown <= 0) {\n          // only warn on first exceed and then every time the limit\n          // is exceeded by 50% again\n          this._warnCountdown = threshold * 0.5; // find most frequent listener and print warning\n\n          var topStack;\n          var topCount = 0;\n\n          this._stacks.forEach(function (count, stack) {\n            if (!topStack || topCount < count) {\n              topStack = stack;\n              topCount = count;\n            }\n          });\n\n          console.warn(\"[\".concat(this.name, \"] potential listener LEAK detected, having \").concat(listenerCount, \" listeners already. MOST frequent listener (\").concat(topCount, \"):\"));\n          console.warn(topStack);\n        }\n\n        return function () {\n          var count = _this4._stacks.get(stack) || 0;\n\n          _this4._stacks.set(stack, count - 1);\n        };\n      }\n    }]);\n\n    return LeakageMonitor;\n  }();\n  /**\r\n   * The Emitter can be used to expose an Event to the public\r\n   * to fire it from the insides.\r\n   * Sample:\r\n      class Document {\r\n          private _onDidChange = new Emitter<(value:string)=>any>();\r\n          public onDidChange = this._onDidChange.event;\r\n          // getter-style\r\n          // get onDidChange(): Event<(value:string)=>any> {\r\n          // \treturn this._onDidChange.event;\r\n          // }\r\n          private _doIt() {\r\n              //...\r\n              this._onDidChange.fire(value);\r\n          }\r\n      }\r\n   */\n\n\n  var Emitter =\n  /*#__PURE__*/\n  function () {\n    function Emitter(options) {\n      _classCallCheck(this, Emitter);\n\n      this._disposed = false;\n      this._options = options;\n      this._leakageMon = _globalLeakWarningThreshold > 0 ? new LeakageMonitor(this._options && this._options.leakWarningThreshold) : undefined;\n    }\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\n\n\n    _createClass(Emitter, [{\n      key: \"fire\",\n\n      /**\r\n       * To be kept private to fire an event to\r\n       * subscribers\r\n       */\n      value: function fire(event) {\n        if (this._listeners) {\n          // put all [listener,event]-pairs into delivery queue\n          // then emit all event. an inner/nested event might be\n          // the driver of this\n          if (!this._deliveryQueue) {\n            this._deliveryQueue = new LinkedList();\n          }\n\n          for (var iter = this._listeners.iterator(), e = iter.next(); !e.done; e = iter.next()) {\n            this._deliveryQueue.push([e.value, event]);\n          }\n\n          while (this._deliveryQueue.size > 0) {\n            var _this$_deliveryQueue$ = this._deliveryQueue.shift(),\n                _this$_deliveryQueue$2 = _slicedToArray(_this$_deliveryQueue$, 2),\n                listener = _this$_deliveryQueue$2[0],\n                _event = _this$_deliveryQueue$2[1];\n\n            try {\n              if (typeof listener === 'function') {\n                listener.call(undefined, _event);\n              } else {\n                listener[0].call(listener[1], _event);\n              }\n            } catch (e) {\n              onUnexpectedError(e);\n            }\n          }\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        if (this._listeners) {\n          this._listeners.clear();\n        }\n\n        if (this._deliveryQueue) {\n          this._deliveryQueue.clear();\n        }\n\n        if (this._leakageMon) {\n          this._leakageMon.dispose();\n        }\n\n        this._disposed = true;\n      }\n    }, {\n      key: \"event\",\n      get: function get() {\n        var _this5 = this;\n\n        if (!this._event) {\n          this._event = function (listener, thisArgs, disposables) {\n            if (!_this5._listeners) {\n              _this5._listeners = new LinkedList();\n            }\n\n            var firstListener = _this5._listeners.isEmpty();\n\n            if (firstListener && _this5._options && _this5._options.onFirstListenerAdd) {\n              _this5._options.onFirstListenerAdd(_this5);\n            }\n\n            var remove = _this5._listeners.push(!thisArgs ? listener : [listener, thisArgs]);\n\n            if (firstListener && _this5._options && _this5._options.onFirstListenerDidAdd) {\n              _this5._options.onFirstListenerDidAdd(_this5);\n            }\n\n            if (_this5._options && _this5._options.onListenerDidAdd) {\n              _this5._options.onListenerDidAdd(_this5, listener, thisArgs);\n            } // check and record this emitter for potential leakage\n\n\n            var removeMonitor;\n\n            if (_this5._leakageMon) {\n              removeMonitor = _this5._leakageMon.check(_this5._listeners.size);\n            }\n\n            var result;\n            result = {\n              dispose: function dispose() {\n                if (removeMonitor) {\n                  removeMonitor();\n                }\n\n                result.dispose = Emitter._noop;\n\n                if (!_this5._disposed) {\n                  remove();\n\n                  if (_this5._options && _this5._options.onLastListenerRemove) {\n                    var hasListeners = _this5._listeners && !_this5._listeners.isEmpty();\n\n                    if (!hasListeners) {\n                      _this5._options.onLastListenerRemove(_this5);\n                    }\n                  }\n                }\n              }\n            };\n\n            if (Array.isArray(disposables)) {\n              disposables.push(result);\n            }\n\n            return result;\n          };\n        }\n\n        return this._event;\n      }\n    }]);\n\n    return Emitter;\n  }();\n\n  Emitter._noop = function () {};\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n\n\n  var shortcutEvent = Object.freeze(function (callback, context) {\n    var handle = setTimeout(callback.bind(context), 0);\n    return {\n      dispose: function dispose() {\n        clearTimeout(handle);\n      }\n    };\n  });\n  var CancellationToken;\n\n  (function (CancellationToken) {\n    function isCancellationToken(thing) {\n      if (thing === CancellationToken.None || thing === CancellationToken.Cancelled) {\n        return true;\n      }\n\n      if (thing instanceof MutableToken) {\n        return true;\n      }\n\n      if (!thing || typeof thing !== 'object') {\n        return false;\n      }\n\n      return typeof thing.isCancellationRequested === 'boolean' && typeof thing.onCancellationRequested === 'function';\n    }\n\n    CancellationToken.isCancellationToken = isCancellationToken;\n    CancellationToken.None = Object.freeze({\n      isCancellationRequested: false,\n      onCancellationRequested: Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n      isCancellationRequested: true,\n      onCancellationRequested: shortcutEvent\n    });\n  })(CancellationToken || (CancellationToken = {}));\n\n  var MutableToken =\n  /*#__PURE__*/\n  function () {\n    function MutableToken() {\n      _classCallCheck(this, MutableToken);\n\n      this._isCancelled = false;\n      this._emitter = null;\n    }\n\n    _createClass(MutableToken, [{\n      key: \"cancel\",\n      value: function cancel() {\n        if (!this._isCancelled) {\n          this._isCancelled = true;\n\n          if (this._emitter) {\n            this._emitter.fire(undefined);\n\n            this.dispose();\n          }\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        if (this._emitter) {\n          this._emitter.dispose();\n\n          this._emitter = null;\n        }\n      }\n    }, {\n      key: \"isCancellationRequested\",\n      get: function get() {\n        return this._isCancelled;\n      }\n    }, {\n      key: \"onCancellationRequested\",\n      get: function get() {\n        if (this._isCancelled) {\n          return shortcutEvent;\n        }\n\n        if (!this._emitter) {\n          this._emitter = new Emitter();\n        }\n\n        return this._emitter.event;\n      }\n    }]);\n\n    return MutableToken;\n  }();\n\n  (function () {\n    if (typeof requestIdleCallback !== 'function' || typeof cancelIdleCallback !== 'function') {\n      var dummyIdle = Object.freeze({\n        didTimeout: true,\n        timeRemaining: function timeRemaining() {\n          return 15;\n        }\n      });\n    }\n  })();\n\n  var ResolvedEntryKind;\n\n  (function (ResolvedEntryKind) {\n    ResolvedEntryKind[\"Directory\"] = \"directory\";\n    ResolvedEntryKind[\"File\"] = \"file\";\n  })(ResolvedEntryKind || (ResolvedEntryKind = {}));\n\n  function isValidPackageJson(json) {\n    return typeof json === 'object' && json !== null && !hasInvalidOptionalStringField(json, 'name') && !hasInvalidOptionalStringField(json, 'version') && !hasInvalidBrowserField(json) && !hasInvalidOptionalStringField(json, 'main') && !hasInvalidOptionalStringField(json, 'module') && !hasInvalidOptionalStringField(json, 'jsnext:main') && !hasInvalidOptionalStringField(json, 'unpkg') && !hasInvalidDependenciesField(json, 'dependencies') && !hasInvalidDependenciesField(json, 'devDependencies') && !hasInvalidDependenciesField(json, 'peerDependencies');\n  }\n\n  function hasInvalidBrowserField(json) {\n    var error = '';\n    var browser = json.browser;\n\n    if (browser) {\n      if (typeof browser === 'object') {\n        for (var key in browser) {\n          if (typeof key !== 'string') {\n            error = \"The key \".concat(key, \" of .browser must be a string\");\n            break;\n          }\n\n          if (typeof browser[key] !== 'string' && browser[key] !== false) {\n            error = \"The value \".concat(key, \" of .browser must be a string or false\");\n            break;\n          }\n        }\n      }\n    }\n\n    return error;\n  }\n\n  function hasInvalidOptionalStringField(json, field) {\n    return json[field] !== undefined && typeof json[field] !== 'string';\n  }\n\n  function hasInvalidDependenciesField(json, field) {\n    return json[field] !== undefined && typeof json[field] === 'object' && json[field] !== null && !Object.keys(json[field]).every(function (key) {\n      return typeof key === 'string' && typeof json[field][key] === 'string';\n    });\n  }\n\n  var CHAR_DOT = 46;\n  /* . */\n\n  var CHAR_FORWARD_SLASH = 47;\n  /* / */\n\n  var TRAILING_SLASH_RX = /\\/?$/;\n\n  function ensureTrailingSlash(pathname) {\n    return pathname.replace(TRAILING_SLASH_RX, '/');\n  }\n\n  function parseBufferAsPackageJson(decoder, content, spec) {\n    try {\n      var text = decoder.decode(content);\n      return parseTextAsPackageJson(text, spec);\n    } catch (err) {\n      throw new Error(\"Error decoding manifest buffer for package \".concat(spec, \": \").concat(err.message));\n    }\n  }\n\n  function parseTextAsPackageJson(text, spec) {\n    var json;\n\n    try {\n      json = JSON.parse(text);\n    } catch (err) {\n      throw new Error(\"Error parsing manifest as json for package \".concat(spec, \": \").concat(err.message));\n    }\n\n    if (!isValidPackageJson(json)) {\n      throw new Error(\"Invalid manifest for the package \".concat(spec));\n    }\n\n    return json;\n  }\n\n  function getFirstPathSegmentAfterPrefix(child, parent) {\n    var childHref = child.pathname;\n    var parentHref = parent.pathname;\n    var parentOffset = parentHref.charAt(parentHref.length - 1) === '/' ? -1 : 0;\n\n    for (var i = 0; i <= childHref.length; i++) {\n      if (i < parentHref.length) {\n        if (childHref.charAt(i) !== parentHref.charAt(i)) {\n          throw new Error(\"The child entry \".concat(child.href, \" does not have the pathname of \").concat(parent.href, \" as a prefix\"));\n        }\n      } else if (i === parentHref.length + parentOffset) {\n        if (childHref.charAt(i) !== '/') {\n          throw new Error(\"The child entry \".concat(child.href, \" does not have the pathname of \").concat(parent.href, \" as a prefix\"));\n        }\n      } else if (childHref.charAt(i) === '/') {\n        return childHref.slice(parentHref.length + 1 + parentOffset, i);\n      }\n    }\n\n    return childHref.slice(parentHref.length + 1 + parentOffset);\n  }\n\n  function validateString(value, name) {\n    if (typeof value !== 'string') {\n      throw new TypeError(\"The '\".concat(name, \"' argument must be of type string but got \").concat(typeof value));\n    }\n  }\n\n  function basename(path, ext) {\n    if (ext !== undefined) {\n      validateString(ext, 'ext');\n    }\n\n    validateString(path, 'path');\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) {\n        return '';\n      }\n\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n\n      for (i = path.length - 1; i >= start; --i) {\n        var code = path.charCodeAt(i);\n\n        if (isPathSeparator(code)) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) {\n        end = firstNonSlashEnd;\n      } else if (end === -1) {\n        end = path.length;\n      }\n\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= start; --i) {\n        if (isPathSeparator(path.charCodeAt(i))) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) {\n        return '';\n      }\n\n      return path.slice(start, end);\n    }\n  }\n\n  function extname(path) {\n    validateString(path, 'path');\n    var start = 0;\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true; // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n\n    var preDotState = 0;\n\n    for (var i = path.length - 1; i >= start; --i) {\n      var code = path.charCodeAt(i);\n\n      if (isPathSeparator(code)) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n\n        continue;\n      }\n\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n\n      if (code === CHAR_DOT) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) {\n          startDot = i;\n        } else if (preDotState !== 1) {\n          preDotState = 1;\n        }\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 || // We saw a non-dot character immediately before the dot\n    preDotState === 0 || // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n\n    return path.slice(startDot, end);\n  }\n\n  function dirname(path) {\n    validateString(path, 'path');\n    var len = path.length;\n\n    if (len === 0) {\n      return '.';\n    }\n\n    var rootEnd = -1;\n    var end = -1;\n    var matchedSlash = true;\n    var offset = 0;\n    var code = path.charCodeAt(0); // Try to match a root\n\n    if (len > 1) {\n      if (isPathSeparator(code)) {\n        // Possible UNC root\n        rootEnd = offset = 1;\n\n        if (isPathSeparator(path.charCodeAt(1))) {\n          // Matched double path separator at beginning\n          var j = 2;\n          var last = j; // Match 1 or more non-path separators\n\n          for (; j < len; ++j) {\n            if (isPathSeparator(path.charCodeAt(j))) {\n              break;\n            }\n          }\n\n          if (j < len && j !== last) {\n            // Matched!\n            last = j; // Match 1 or more path separators\n\n            for (; j < len; ++j) {\n              if (!isPathSeparator(path.charCodeAt(j))) {\n                break;\n              }\n            }\n\n            if (j < len && j !== last) {\n              // Matched!\n              last = j; // Match 1 or more non-path separators\n\n              for (; j < len; ++j) {\n                if (isPathSeparator(path.charCodeAt(j))) {\n                  break;\n                }\n              }\n\n              if (j === len) {\n                // We matched a UNC root only\n                return path;\n              }\n\n              if (j !== last) {\n                // We matched a UNC root with leftovers\n                // Offset by 1 to include the separator after the UNC root to\n                // treat it as a \"normal root\" on top of a (UNC) root\n                rootEnd = offset = j + 1;\n              }\n            }\n          }\n        }\n      }\n    } else if (isPathSeparator(code)) {\n      // `path` contains just a path separator, exit early to avoid\n      // unnecessary work\n      return path;\n    }\n\n    for (var i = len - 1; i >= offset; --i) {\n      if (isPathSeparator(path.charCodeAt(i))) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) {\n      if (rootEnd === -1) {\n        return '.';\n      } else {\n        end = rootEnd;\n      }\n    }\n\n    return path.slice(0, end);\n  }\n\n  function join(initialSegment) {\n    var pathname = initialSegment;\n\n    for (var i = 0; i < (arguments.length <= 1 ? 0 : arguments.length - 1); i++) {\n      var segment = i + 1 < 1 || arguments.length <= i + 1 ? undefined : arguments[i + 1];\n\n      if (segment.startsWith('/')) {\n        segment = segment.slice(1);\n      }\n\n      if (pathname.endsWith('/')) {\n        pathname += segment;\n      } else {\n        pathname += \"/\".concat(segment);\n      }\n    }\n\n    return pathname;\n  }\n\n  function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path = void 0;\n\n      if (i >= 0) {\n        path = i < 0 || arguments.length <= i ? undefined : arguments[i];\n      } else {\n        break;\n      }\n\n      validateString(path, 'path'); // Skip empty entries\n\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n    } // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n    // Normalize the path\n\n\n    resolvedPath = normalizeString(resolvedPath, !resolvedAbsolute, '/', isPathSeparator);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0) {\n        return '/' + resolvedPath;\n      } else {\n        return '/';\n      }\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  }\n\n  function isPathSeparator(code) {\n    return code === CHAR_FORWARD_SLASH;\n  }\n\n  function normalizeString(path, allowAboveRoot, separator, isPathSeparator) {\n    var res = '';\n    var lastSegmentLength = 0;\n    var lastSlash = -1;\n    var dots = 0;\n    var code = -1;\n\n    for (var i = 0; i <= path.length; ++i) {\n      if (i < path.length) {\n        code = path.charCodeAt(i);\n      } else if (isPathSeparator(code)) {\n        break;\n      } else {\n        code = CHAR_FORWARD_SLASH;\n      }\n\n      if (isPathSeparator(code)) {\n        if (lastSlash === i - 1 || dots === 1) ;else if (lastSlash !== i - 1 && dots === 2) {\n          if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== CHAR_DOT || res.charCodeAt(res.length - 2) !== CHAR_DOT) {\n            if (res.length > 2) {\n              var lastSlashIndex = res.lastIndexOf(separator);\n\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf(separator);\n              }\n\n              lastSlash = i;\n              dots = 0;\n              continue;\n            } else if (res.length === 2 || res.length === 1) {\n              res = '';\n              lastSegmentLength = 0;\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          }\n\n          if (allowAboveRoot) {\n            if (res.length > 0) {\n              res += \"\".concat(separator, \"..\");\n            } else {\n              res = '..';\n            }\n\n            lastSegmentLength = 2;\n          }\n        } else {\n          if (res.length > 0) {\n            res += separator + path.slice(lastSlash + 1, i);\n          } else {\n            res = path.slice(lastSlash + 1, i);\n          }\n\n          lastSegmentLength = i - lastSlash - 1;\n        }\n        lastSlash = i;\n        dots = 0;\n      } else if (code === CHAR_DOT && dots !== -1) {\n        ++dots;\n      } else {\n        dots = -1;\n      }\n    }\n\n    return res;\n  }\n\n  var util =\n  /*#__PURE__*/\n  Object.freeze({\n    __proto__: null,\n    ensureTrailingSlash: ensureTrailingSlash,\n    parseBufferAsPackageJson: parseBufferAsPackageJson,\n    getFirstPathSegmentAfterPrefix: getFirstPathSegmentAfterPrefix,\n    basename: basename,\n    extname: extname,\n    dirname: dirname,\n    join: join,\n    resolve: resolve\n  });\n\n  var AbstractResolverHost =\n  /*#__PURE__*/\n  function () {\n    function AbstractResolverHost() {\n      _classCallCheck(this, AbstractResolverHost);\n    }\n\n    _createClass(AbstractResolverHost, [{\n      key: \"getCanonicalUrl\",\n      value: function getCanonicalUrl(_resolver, url) {\n        return Promise.resolve(url);\n      }\n    }]);\n\n    return AbstractResolverHost;\n  }();\n\n  var FileEncoding;\n\n  (function (FileEncoding) {\n    FileEncoding[\"Base64\"] = \"base64\";\n    FileEncoding[\"UTF8\"] = \"utf-8\";\n  })(FileEncoding || (FileEncoding = {}));\n\n  var ResolverHostMemory =\n  /*#__PURE__*/\n  function (_AbstractResolverHost) {\n    _inherits(ResolverHostMemory, _AbstractResolverHost);\n\n    function ResolverHostMemory(files) {\n      var _this6;\n\n      var basePath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\".concat(Date.now());\n\n      _classCallCheck(this, ResolverHostMemory);\n\n      _this6 = _possibleConstructorReturn(this, _getPrototypeOf(ResolverHostMemory).call(this));\n      _this6.root = {\n        type: ResolvedEntryKind.Directory,\n        children: {}\n      };\n      _this6.textEncoder = new TextEncoder();\n      _this6.baseUrl = new URL(util.ensureTrailingSlash(basePath), 'memory:/');\n\n      for (var pathname in files) {\n        var file = files[pathname];\n\n        if (typeof file === 'string') {\n          _this6.addFile(pathname, file);\n        } else {\n          _this6.addFile(pathname, file.content, file.encoding);\n        }\n      }\n\n      return _this6;\n    }\n\n    _createClass(ResolverHostMemory, [{\n      key: \"getEntryAtPath\",\n      value: function getEntryAtPath(pathname) {\n        var segments = Array.isArray(pathname) ? pathname.slice() : pathname.split('/').filter(Boolean);\n        var parent = this.root;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = segments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var segment = _step.value;\n\n            if (!parent || parent.type !== ResolvedEntryKind.Directory) {\n              throw new Error(\"Failed to add \".concat(pathname));\n            }\n\n            parent = parent.children[segment];\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return parent;\n      }\n    }, {\n      key: \"addFile\",\n      value: function addFile(pathname, content) {\n        var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : FileEncoding.UTF8;\n        var segments = pathname.split('/').filter(Boolean);\n        var filename = segments.pop();\n\n        if (!filename) {\n          throw new Error(\"Unable to add a file without a filename '\".concat(pathname, \"'\"));\n        }\n\n        var parent = this.root;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = segments[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var segment = _step2.value;\n\n            if (!parent || parent.type !== ResolvedEntryKind.Directory) {\n              throw new Error(\"Failed to add \".concat(pathname));\n            }\n\n            var dir = parent.children[segment];\n\n            if (!dir) {\n              dir = {\n                type: ResolvedEntryKind.Directory,\n                children: {}\n              };\n              parent.children[segment] = dir;\n            }\n\n            parent = dir;\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        if (parent.type !== ResolvedEntryKind.Directory) {\n          throw new Error(\"Cannot add file to a non directory entry \".concat(pathname));\n        }\n\n        if (parent.children[filename]) {\n          throw new Error(\"Entry already exists at \".concat(pathname));\n        }\n\n        var entry = {\n          type: ResolvedEntryKind.File,\n          content: content,\n          encoding: encoding\n        };\n        parent.children[filename] = entry;\n        return entry;\n      }\n    }, {\n      key: \"getResolveRoot\",\n      value: function () {\n        var _getResolveRoot = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  return _context.abrupt(\"return\", this.baseUrl);\n\n                case 1:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function getResolveRoot() {\n          return _getResolveRoot.apply(this, arguments);\n        }\n\n        return getResolveRoot;\n      }()\n    }, {\n      key: \"getRoot\",\n      value: function getRoot() {\n        return this.baseUrl;\n      }\n    }, {\n      key: \"listEntries\",\n      value: function () {\n        var _listEntries = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2(_resolver, url) {\n          var _this7 = this;\n\n          var urlPathname, basePathname, fsPathname, parent;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  urlPathname = util.ensureTrailingSlash(url.pathname);\n                  basePathname = this.baseUrl.pathname;\n                  fsPathname = urlPathname.startsWith(basePathname) ? urlPathname.slice(basePathname.length - 1) : urlPathname;\n                  parent = this.getEntryAtPath(fsPathname);\n\n                  if (parent) {\n                    _context2.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"No such directory \".concat(url.href));\n\n                case 6:\n                  if (!(parent.type !== ResolvedEntryKind.Directory)) {\n                    _context2.next = 8;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot list entries under a file at \".concat(url.href));\n\n                case 8:\n                  return _context2.abrupt(\"return\", Object.keys(parent.children).map(function (filename) {\n                    var entry = parent.children[filename];\n                    return {\n                      url: _this7.urlFromPath(util.join(fsPathname, filename)),\n                      type: entry.type\n                    };\n                  }));\n\n                case 9:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function listEntries(_x, _x2) {\n          return _listEntries.apply(this, arguments);\n        }\n\n        return listEntries;\n      }()\n    }, {\n      key: \"readFileContent\",\n      value: function () {\n        var _readFileContent = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3(_resolver, url) {\n          var urlPathname, basePathname, fsPathname, entry, binSting, binArray;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  urlPathname = util.ensureTrailingSlash(url.pathname);\n                  basePathname = this.baseUrl.pathname;\n                  fsPathname = urlPathname.startsWith(basePathname) ? urlPathname.slice(basePathname.length - 1) : urlPathname;\n                  entry = this.getEntryAtPath(fsPathname);\n\n                  if (entry) {\n                    _context3.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"No such file \".concat(url.href));\n\n                case 6:\n                  if (!(entry.type !== 'file')) {\n                    _context3.next = 8;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot read content of a non-file at \".concat(url.href));\n\n                case 8:\n                  _context3.t0 = entry.encoding;\n                  _context3.next = _context3.t0 === FileEncoding.Base64 ? 11 : _context3.t0 === FileEncoding.UTF8 ? 15 : 16;\n                  break;\n\n                case 11:\n                  binSting = atob(entry.content);\n                  binArray = new Uint8Array(binSting.length);\n                  Array.prototype.forEach.call(binArray, function (_el, idx, arr) {\n                    arr[idx] = binSting.charCodeAt(idx);\n                  });\n                  return _context3.abrupt(\"return\", binArray.buffer);\n\n                case 15:\n                  return _context3.abrupt(\"return\", this.textEncoder.encode(entry.content).buffer);\n\n                case 16:\n                  throw new Error(\"Unsupported encoding for \".concat(url.href, \": \").concat(entry.encoding));\n\n                case 17:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n\n        function readFileContent(_x3, _x4) {\n          return _readFileContent.apply(this, arguments);\n        }\n\n        return readFileContent;\n      }()\n    }, {\n      key: \"urlFromPath\",\n      value: function urlFromPath(pathname) {\n        return new URL(util.join(this.baseUrl.pathname, pathname), this.baseUrl);\n      }\n    }]);\n\n    return ResolverHostMemory;\n  }(AbstractResolverHost);\n\n  exports.ResolverHostMemory = ResolverHostMemory;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","import _defineProperty from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _possibleConstructorReturn from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _classCallCheck from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { CancellationTokenSource, CanceledError } from 'ts-primitives';\nexport { CanceledError, CancellationToken, CancellationTokenSource } from 'ts-primitives';\nvar ResolvedEntryKind;\n\n(function (ResolvedEntryKind) {\n  ResolvedEntryKind[\"Directory\"] = \"directory\";\n  ResolvedEntryKind[\"File\"] = \"file\";\n})(ResolvedEntryKind || (ResolvedEntryKind = {}));\n\nfunction isValidPackageJson(json) {\n  return typeof json === 'object' && json !== null && !hasInvalidOptionalStringField(json, 'name') && !hasInvalidOptionalStringField(json, 'version') && !hasInvalidBrowserField(json) && !hasInvalidOptionalStringField(json, 'main') && !hasInvalidOptionalStringField(json, 'module') && !hasInvalidOptionalStringField(json, 'jsnext:main') && !hasInvalidOptionalStringField(json, 'unpkg') && !hasInvalidDependenciesField(json, 'dependencies') && !hasInvalidDependenciesField(json, 'devDependencies') && !hasInvalidDependenciesField(json, 'peerDependencies');\n}\n\nfunction hasInvalidBrowserField(json) {\n  var error = '';\n  var browser = json.browser;\n\n  if (browser) {\n    if (typeof browser === 'object') {\n      for (var key in browser) {\n        if (typeof key !== 'string') {\n          error = \"The key \".concat(key, \" of .browser must be a string\");\n          break;\n        }\n\n        if (typeof browser[key] !== 'string' && browser[key] !== false) {\n          error = \"The value \".concat(key, \" of .browser must be a string or false\");\n          break;\n        }\n      }\n    }\n  }\n\n  return error;\n}\n\nfunction hasInvalidOptionalStringField(json, field) {\n  return json[field] !== undefined && typeof json[field] !== 'string';\n}\n\nfunction hasInvalidDependenciesField(json, field) {\n  return json[field] !== undefined && typeof json[field] === 'object' && json[field] !== null && !Object.keys(json[field]).every(function (key) {\n    return typeof key === 'string' && typeof json[field][key] === 'string';\n  });\n}\n\nvar CHAR_DOT = 46;\n/* . */\n\nvar CHAR_FORWARD_SLASH = 47;\n/* / */\n\nvar TRAILING_SLASH_RX = /\\/?$/;\n\nfunction ensureTrailingSlash(pathname) {\n  return pathname.replace(TRAILING_SLASH_RX, '/');\n}\n\nfunction parseBufferAsPackageJson(decoder, content, spec) {\n  try {\n    var text = decoder.decode(content);\n    return parseTextAsPackageJson(text, spec);\n  } catch (err) {\n    throw new Error(\"Error decoding manifest buffer for package \".concat(spec, \": \").concat(err.message));\n  }\n}\n\nfunction parseTextAsPackageJson(text, spec) {\n  var json;\n\n  try {\n    json = JSON.parse(text);\n  } catch (err) {\n    throw new Error(\"Error parsing manifest as json for package \".concat(spec, \": \").concat(err.message));\n  }\n\n  if (!isValidPackageJson(json)) {\n    throw new Error(\"Invalid manifest for the package \".concat(spec));\n  }\n\n  return json;\n}\n\nfunction getFirstPathSegmentAfterPrefix(child, parent) {\n  var childHref = child.pathname;\n  var parentHref = parent.pathname;\n  var parentOffset = parentHref.charAt(parentHref.length - 1) === '/' ? -1 : 0;\n\n  for (var i = 0; i <= childHref.length; i++) {\n    if (i < parentHref.length) {\n      if (childHref.charAt(i) !== parentHref.charAt(i)) {\n        throw new Error(\"The child entry \".concat(child.href, \" does not have the pathname of \").concat(parent.href, \" as a prefix\"));\n      }\n    } else if (i === parentHref.length + parentOffset) {\n      if (childHref.charAt(i) !== '/') {\n        throw new Error(\"The child entry \".concat(child.href, \" does not have the pathname of \").concat(parent.href, \" as a prefix\"));\n      }\n    } else if (childHref.charAt(i) === '/') {\n      return childHref.slice(parentHref.length + 1 + parentOffset, i);\n    }\n  }\n\n  return childHref.slice(parentHref.length + 1 + parentOffset);\n}\n\nfunction validateString(value, name) {\n  if (typeof value !== 'string') {\n    throw new TypeError(\"The '\".concat(name, \"' argument must be of type string but got \").concat(typeof value));\n  }\n}\n\nfunction basename(path, ext) {\n  if (ext !== undefined) {\n    validateString(ext, 'ext');\n  }\n\n  validateString(path, 'path');\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n    if (ext.length === path.length && ext === path) {\n      return '';\n    }\n\n    var extIdx = ext.length - 1;\n    var firstNonSlashEnd = -1;\n\n    for (i = path.length - 1; i >= start; --i) {\n      var code = path.charCodeAt(i);\n\n      if (isPathSeparator(code)) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else {\n        if (firstNonSlashEnd === -1) {\n          // We saw the first non-path separator, remember this index in case\n          // we need it if the extension ends up not matching\n          matchedSlash = false;\n          firstNonSlashEnd = i + 1;\n        }\n\n        if (extIdx >= 0) {\n          // Try to match the explicit extension\n          if (code === ext.charCodeAt(extIdx)) {\n            if (--extIdx === -1) {\n              // We matched the extension, so mark this as the end of our path\n              // component\n              end = i;\n            }\n          } else {\n            // Extension does not match, so our result is the entire path\n            // component\n            extIdx = -1;\n            end = firstNonSlashEnd;\n          }\n        }\n      }\n    }\n\n    if (start === end) {\n      end = firstNonSlashEnd;\n    } else if (end === -1) {\n      end = path.length;\n    }\n\n    return path.slice(start, end);\n  } else {\n    for (i = path.length - 1; i >= start; --i) {\n      if (isPathSeparator(path.charCodeAt(i))) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // path component\n        matchedSlash = false;\n        end = i + 1;\n      }\n    }\n\n    if (end === -1) {\n      return '';\n    }\n\n    return path.slice(start, end);\n  }\n}\n\nfunction extname(path) {\n  validateString(path, 'path');\n  var start = 0;\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true; // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n\n  var preDotState = 0;\n\n  for (var i = path.length - 1; i >= start; --i) {\n    var code = path.charCodeAt(i);\n\n    if (isPathSeparator(code)) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now\n      if (!matchedSlash) {\n        startPart = i + 1;\n        break;\n      }\n\n      continue;\n    }\n\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n\n    if (code === CHAR_DOT) {\n      // If this is our first dot, mark it as the start of our extension\n      if (startDot === -1) {\n        startDot = i;\n      } else if (preDotState !== 1) {\n        preDotState = 1;\n      }\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 || // We saw a non-dot character immediately before the dot\n  preDotState === 0 || // The (right-most) trimmed path component is exactly '..'\n  preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n\n  return path.slice(startDot, end);\n}\n\nfunction dirname(path) {\n  validateString(path, 'path');\n  var len = path.length;\n\n  if (len === 0) {\n    return '.';\n  }\n\n  var rootEnd = -1;\n  var end = -1;\n  var matchedSlash = true;\n  var offset = 0;\n  var code = path.charCodeAt(0); // Try to match a root\n\n  if (len > 1) {\n    if (isPathSeparator(code)) {\n      // Possible UNC root\n      rootEnd = offset = 1;\n\n      if (isPathSeparator(path.charCodeAt(1))) {\n        // Matched double path separator at beginning\n        var j = 2;\n        var last = j; // Match 1 or more non-path separators\n\n        for (; j < len; ++j) {\n          if (isPathSeparator(path.charCodeAt(j))) {\n            break;\n          }\n        }\n\n        if (j < len && j !== last) {\n          // Matched!\n          last = j; // Match 1 or more path separators\n\n          for (; j < len; ++j) {\n            if (!isPathSeparator(path.charCodeAt(j))) {\n              break;\n            }\n          }\n\n          if (j < len && j !== last) {\n            // Matched!\n            last = j; // Match 1 or more non-path separators\n\n            for (; j < len; ++j) {\n              if (isPathSeparator(path.charCodeAt(j))) {\n                break;\n              }\n            }\n\n            if (j === len) {\n              // We matched a UNC root only\n              return path;\n            }\n\n            if (j !== last) {\n              // We matched a UNC root with leftovers\n              // Offset by 1 to include the separator after the UNC root to\n              // treat it as a \"normal root\" on top of a (UNC) root\n              rootEnd = offset = j + 1;\n            }\n          }\n        }\n      }\n    }\n  } else if (isPathSeparator(code)) {\n    // `path` contains just a path separator, exit early to avoid\n    // unnecessary work\n    return path;\n  }\n\n  for (var i = len - 1; i >= offset; --i) {\n    if (isPathSeparator(path.charCodeAt(i))) {\n      if (!matchedSlash) {\n        end = i;\n        break;\n      }\n    } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) {\n    if (rootEnd === -1) {\n      return '.';\n    } else {\n      end = rootEnd;\n    }\n  }\n\n  return path.slice(0, end);\n}\n\nfunction join(initialSegment) {\n  var pathname = initialSegment;\n\n  for (var i = 0; i < (arguments.length <= 1 ? 0 : arguments.length - 1); i++) {\n    var segment = i + 1 < 1 || arguments.length <= i + 1 ? undefined : arguments[i + 1];\n\n    if (segment.startsWith('/')) {\n      segment = segment.slice(1);\n    }\n\n    if (pathname.endsWith('/')) {\n      pathname += segment;\n    } else {\n      pathname += \"/\".concat(segment);\n    }\n  }\n\n  return pathname;\n}\n\nfunction resolve() {\n  var resolvedPath = '';\n  var resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = void 0;\n\n    if (i >= 0) {\n      path = i < 0 || arguments.length <= i ? undefined : arguments[i];\n    } else {\n      break;\n    }\n\n    validateString(path, 'path'); // Skip empty entries\n\n    if (path.length === 0) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n  } // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n  // Normalize the path\n\n\n  resolvedPath = normalizeString(resolvedPath, !resolvedAbsolute, '/', isPathSeparator);\n\n  if (resolvedAbsolute) {\n    if (resolvedPath.length > 0) {\n      return '/' + resolvedPath;\n    } else {\n      return '/';\n    }\n  } else if (resolvedPath.length > 0) {\n    return resolvedPath;\n  } else {\n    return '.';\n  }\n}\n\nfunction isPathSeparator(code) {\n  return code === CHAR_FORWARD_SLASH;\n}\n\nfunction normalizeString(path, allowAboveRoot, separator, isPathSeparator) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code = -1;\n\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length) {\n      code = path.charCodeAt(i);\n    } else if (isPathSeparator(code)) {\n      break;\n    } else {\n      code = CHAR_FORWARD_SLASH;\n    }\n\n    if (isPathSeparator(code)) {\n      if (lastSlash === i - 1 || dots === 1) ;else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== CHAR_DOT || res.charCodeAt(res.length - 2) !== CHAR_DOT) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf(separator);\n\n            if (lastSlashIndex === -1) {\n              res = '';\n              lastSegmentLength = 0;\n            } else {\n              res = res.slice(0, lastSlashIndex);\n              lastSegmentLength = res.length - 1 - res.lastIndexOf(separator);\n            }\n\n            lastSlash = i;\n            dots = 0;\n            continue;\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n\n        if (allowAboveRoot) {\n          if (res.length > 0) {\n            res += \"\".concat(separator, \"..\");\n          } else {\n            res = '..';\n          }\n\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0) {\n          res += separator + path.slice(lastSlash + 1, i);\n        } else {\n          res = path.slice(lastSlash + 1, i);\n        }\n\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === CHAR_DOT && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n\n  return res;\n}\n\nvar util =\n/*#__PURE__*/\nObject.freeze({\n  __proto__: null,\n  ensureTrailingSlash: ensureTrailingSlash,\n  parseBufferAsPackageJson: parseBufferAsPackageJson,\n  getFirstPathSegmentAfterPrefix: getFirstPathSegmentAfterPrefix,\n  basename: basename,\n  extname: extname,\n  dirname: dirname,\n  join: join,\n  resolve: resolve\n});\n\nvar Decoder =\n/*#__PURE__*/\nfunction () {\n  function Decoder() {\n    _classCallCheck(this, Decoder);\n\n    if (typeof TextDecoder !== 'undefined') {\n      this.decoder = new TextDecoder();\n    }\n  }\n\n  _createClass(Decoder, [{\n    key: \"decode\",\n    value: function decode(buf) {\n      var str = this.decoder ? this.decoder.decode(buf) : Buffer.from(buf).toString('utf-8');\n      return str.charCodeAt(0) === 0xfeff ? str.slice(1) : str;\n    }\n  }]);\n\n  return Decoder;\n}();\n\nvar ExtendableError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(ExtendableError, _Error);\n\n  function ExtendableError(message) {\n    var _this;\n\n    _classCallCheck(this, ExtendableError);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ExtendableError).call(this, message));\n    _this.name = _this.constructor.name;\n\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(_assertThisInitialized(_this), _this.constructor);\n    } else {\n      _this.stack = new Error(message).stack;\n    }\n\n    return _this;\n  }\n\n  return ExtendableError;\n}(_wrapNativeSuper(Error));\n\nvar EntryNotFoundError =\n/*#__PURE__*/\nfunction (_ExtendableError) {\n  _inherits(EntryNotFoundError, _ExtendableError);\n\n  function EntryNotFoundError(url) {\n    var _this2;\n\n    _classCallCheck(this, EntryNotFoundError);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(EntryNotFoundError).call(this, \"Not found \".concat(url.toString())));\n    _this2.url = url;\n    return _this2;\n  }\n\n  return EntryNotFoundError;\n}(ExtendableError);\n\nvar AbstractResolverHost =\n/*#__PURE__*/\nfunction () {\n  function AbstractResolverHost() {\n    _classCallCheck(this, AbstractResolverHost);\n  }\n\n  _createClass(AbstractResolverHost, [{\n    key: \"getCanonicalUrl\",\n    value: function getCanonicalUrl(_resolver, url) {\n      return Promise.resolve(url);\n    }\n  }]);\n\n  return AbstractResolverHost;\n}();\n\nvar TRAILING_SLASH_RX$1 = /\\/?$/;\n\nvar Resolver =\n/*#__PURE__*/\nfunction () {\n  function Resolver(host) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Resolver);\n\n    this.host = host;\n    this.decoder = new Decoder();\n    this.extensions = Array.from(options.extensions || Resolver.defaultExtensions);\n    this.packageMain = options.packageMain || ['main'];\n  }\n\n  _createClass(Resolver, [{\n    key: \"resolve\",\n    value: function () {\n      var _resolve = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(url) {\n        var options,\n            _options$invalidatedB,\n            invalidatedBy,\n            token,\n            tokenSource,\n            optionsWithDefaults,\n            canonicalUrlPromise,\n            _ref,\n            _ref2,\n            canonicalUrl,\n            rootUrl,\n            rootHref,\n            rootHrefWithoutTrailingSlash,\n            canonicalHref,\n            resolvedUrl,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n                if (url instanceof URL) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.prev = 2;\n                url = new URL(url);\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](2);\n                throw new Error(\"Invalid URL: \".concat(url, \": \").concat(_context.t0.message));\n\n              case 9:\n                _options$invalidatedB = options.invalidatedBy, invalidatedBy = _options$invalidatedB === void 0 ? new Set() : _options$invalidatedB;\n                token = options.token;\n\n                if (!token) {\n                  tokenSource = new CancellationTokenSource();\n                  token = tokenSource.token;\n                }\n\n                optionsWithDefaults = {\n                  extensions: options.extensions || this.extensions,\n                  ignoreBrowserOverrides: typeof options.ignoreBrowserOverrides === 'undefined' ? false : options.ignoreBrowserOverrides,\n                  invalidatedBy: invalidatedBy,\n                  packageMain: options.packageMain || this.packageMain,\n                  token: token\n                };\n                canonicalUrlPromise = this.host.getCanonicalUrl(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }); // To figure out if the url should be resolved as a file or as a directory, we need to first canonicalize the url\n                // if the host supports this and resolve the root url for the given asset.\n\n                _context.next = 16;\n                return Promise.all([canonicalUrlPromise, this.host.getResolveRoot(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                })]);\n\n              case 16:\n                _ref = _context.sent;\n                _ref2 = _slicedToArray(_ref, 2);\n                canonicalUrl = _ref2[0];\n                rootUrl = _ref2[1];\n\n                if (!token.isCancellationRequested) {\n                  _context.next = 22;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 22:\n                rootHref = rootUrl.href;\n                rootHrefWithoutTrailingSlash = rootHref.replace(TRAILING_SLASH_RX$1, '');\n                canonicalHref = canonicalUrl.href;\n\n                if (canonicalHref.startsWith(rootHrefWithoutTrailingSlash)) {\n                  _context.next = 27;\n                  break;\n                }\n\n                throw new Error(\"Unable to resolve a module whose path \".concat(canonicalHref, \" is above the host's root \").concat(rootHref));\n\n              case 27:\n                if (!(rootHrefWithoutTrailingSlash === canonicalHref || rootHref == canonicalHref)) {\n                  _context.next = 33;\n                  break;\n                }\n\n                _context.next = 30;\n                return this.resolveAsDirectory(canonicalUrl, optionsWithDefaults);\n\n              case 30:\n                _context.t1 = _context.sent;\n                _context.next = 36;\n                break;\n\n              case 33:\n                _context.next = 35;\n                return this.resolveAsFile(canonicalUrl, optionsWithDefaults);\n\n              case 35:\n                _context.t1 = _context.sent;\n\n              case 36:\n                resolvedUrl = _context.t1;\n\n                if (!token.isCancellationRequested) {\n                  _context.next = 39;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 39:\n                return _context.abrupt(\"return\", {\n                  ignored: resolvedUrl === false,\n                  invalidatedBy: invalidatedBy,\n                  resolvedUrl: resolvedUrl || undefined,\n                  rootUrl: rootUrl\n                });\n\n              case 40:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 6]]);\n      }));\n\n      function resolve(_x) {\n        return _resolve.apply(this, arguments);\n      }\n\n      return resolve;\n    }()\n    /**\r\n     * Resolve a reference treating it as a directory\r\n     *\r\n     * 1. If there is a `package.json` file and this has a `main` entry, use that\r\n     * 2. Assume `index` if no main file is found in the `package.json` manifest\r\n     *\r\n     * The outcome of this process will then be resolved as if it were a file.\r\n     */\n\n  }, {\n    key: \"resolveAsDirectory\",\n    value: function () {\n      var _resolveAsDirectory = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(url, options) {\n        var invalidatedBy, token, _ref3, _ref4, rootUrl, entries, mainPathname, packageJsonHref, packageJsonEntry, packageJsonContent, packageJson, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, packageMain, pathname, mainUrl;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                invalidatedBy = options.invalidatedBy, token = options.token; // If the enclosing directory is removed, then this file should be invalidated\n\n                invalidatedBy.add(url.href);\n                _context2.next = 4;\n                return Promise.all([this.host.getResolveRoot(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }), this.host.listEntries(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                })]);\n\n              case 4:\n                _ref3 = _context2.sent;\n                _ref4 = _slicedToArray(_ref3, 2);\n                rootUrl = _ref4[0];\n                entries = _ref4[1];\n\n                if (!token.isCancellationRequested) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 10:\n                mainPathname = 'index'; // Step 1: Look for a package.json with an main field\n\n                packageJsonHref = new URL(resolve(url.pathname, './package.json'), url).href;\n                packageJsonEntry = entries.find(function (entry) {\n                  return entry.type === ResolvedEntryKind.File && entry.url.href === packageJsonHref;\n                }); // If the package.json file changes (or is created), invalidate the resolution\n\n                invalidatedBy.add(packageJsonHref);\n\n                if (!packageJsonEntry) {\n                  _context2.next = 49;\n                  break;\n                }\n\n                _context2.next = 17;\n                return this.host.readFileContent(this, packageJsonEntry.url, {\n                  token: token\n                });\n\n              case 17:\n                packageJsonContent = _context2.sent;\n\n                if (!token.isCancellationRequested) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 20:\n                packageJson = parseBufferAsPackageJson(this.decoder, packageJsonContent, url.href);\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context2.prev = 24;\n                _iterator = this.packageMain[Symbol.iterator]();\n\n              case 26:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  _context2.next = 35;\n                  break;\n                }\n\n                packageMain = _step.value;\n                pathname = packageJson[packageMain];\n\n                if (!(typeof pathname === 'string')) {\n                  _context2.next = 32;\n                  break;\n                }\n\n                mainPathname = pathname;\n                return _context2.abrupt(\"break\", 35);\n\n              case 32:\n                _iteratorNormalCompletion = true;\n                _context2.next = 26;\n                break;\n\n              case 35:\n                _context2.next = 41;\n                break;\n\n              case 37:\n                _context2.prev = 37;\n                _context2.t0 = _context2[\"catch\"](24);\n                _didIteratorError = true;\n                _iteratorError = _context2.t0;\n\n              case 41:\n                _context2.prev = 41;\n                _context2.prev = 42;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 44:\n                _context2.prev = 44;\n\n                if (!_didIteratorError) {\n                  _context2.next = 47;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 47:\n                return _context2.finish(44);\n\n              case 48:\n                return _context2.finish(41);\n\n              case 49:\n                mainUrl = new URL(resolve(url.pathname, mainPathname), rootUrl);\n                return _context2.abrupt(\"return\", this.resolveAsFile(mainUrl, options));\n\n              case 51:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[24, 37, 41, 49], [42,, 44, 48]]);\n      }));\n\n      function resolveAsDirectory(_x2, _x3) {\n        return _resolveAsDirectory.apply(this, arguments);\n      }\n\n      return resolveAsDirectory;\n    }()\n    /**\r\n     * Resolve a reference treating it as a file\r\n     *\r\n     * 1. List entries in the containing directory\r\n     * 2. Look for an exact file match or a file match with one of the supplied extensions\r\n     * 3. Look for a matching child directory and attempt to resolve that as a directory\r\n     */\n\n  }, {\n    key: \"resolveAsFile\",\n    value: function () {\n      var _resolveAsFile = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(url, options) {\n        var invalidatedBy, token, rootUrl, parentPackageJson, browserOverrides, browserMap, packageJsonDir, entry, impliedUrl, targetSpec, target, containingUrl, filename, entries, entryDirectoryMap, entryFileMap, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _entry, childFilename, _childFilename, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, ext, hrefWithExtension, mapping, _match, match;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(url.pathname === '' || url.pathname === '/')) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                throw new TypeError(\"Unable to resolve the root as a file: \".concat(url.href));\n\n              case 2:\n                invalidatedBy = options.invalidatedBy, token = options.token;\n                invalidatedBy.add(url.href);\n                _context3.next = 6;\n                return this.host.getResolveRoot(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 6:\n                rootUrl = _context3.sent;\n\n                if (!token.isCancellationRequested) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 9:\n                if (!(this.packageMain.includes('browser') && !options.ignoreBrowserOverrides)) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                _context3.next = 12;\n                return this.readParentPackageJson(url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 12:\n                _context3.t0 = _context3.sent;\n                _context3.next = 16;\n                break;\n\n              case 15:\n                _context3.t0 = undefined;\n\n              case 16:\n                parentPackageJson = _context3.t0;\n\n                if (!token.isCancellationRequested) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 19:\n                browserOverrides = new Map();\n\n                if (parentPackageJson) {\n                  invalidatedBy.add(parentPackageJson.url.href);\n                }\n\n                if (!(parentPackageJson && typeof parentPackageJson.packageJson.browser === 'object')) {\n                  _context3.next = 37;\n                  break;\n                }\n\n                browserMap = parentPackageJson.packageJson.browser;\n                packageJsonDir = dirname(parentPackageJson.url.pathname);\n                _context3.t1 = _regeneratorRuntime.keys(browserMap);\n\n              case 25:\n                if ((_context3.t2 = _context3.t1()).done) {\n                  _context3.next = 37;\n                  break;\n                }\n\n                entry = _context3.t2.value;\n                impliedUrl = new URL(resolve(packageJsonDir, entry), parentPackageJson.url);\n                targetSpec = browserMap[entry];\n                target = targetSpec === false ? false : new URL(resolve(packageJsonDir, targetSpec), parentPackageJson.url);\n\n                if (!(impliedUrl.href === url.href)) {\n                  _context3.next = 34;\n                  break;\n                }\n\n                if (!(target === false)) {\n                  _context3.next = 33;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", false);\n\n              case 33:\n                return _context3.abrupt(\"return\", this.resolveAsFile(target, _objectSpread({}, options, {\n                  ignoreBrowserOverrides: true\n                })));\n\n              case 34:\n                browserOverrides.set(impliedUrl.href, target);\n                _context3.next = 25;\n                break;\n\n              case 37:\n                containingUrl = new URL(ensureTrailingSlash(dirname(url.pathname)), rootUrl);\n                invalidatedBy.add(containingUrl.href);\n                filename = basename(url.pathname);\n                _context3.next = 42;\n                return this.host.listEntries(this, containingUrl, {\n                  token: token\n                });\n\n              case 42:\n                entries = _context3.sent;\n\n                if (!token.isCancellationRequested) {\n                  _context3.next = 45;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 45:\n                entryDirectoryMap = new Map();\n                entryFileMap = new Map();\n                _iteratorNormalCompletion2 = true;\n                _didIteratorError2 = false;\n                _iteratorError2 = undefined;\n                _context3.prev = 50;\n                _iterator2 = entries[Symbol.iterator]();\n\n              case 52:\n                if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n                  _context3.next = 60;\n                  break;\n                }\n\n                _entry = _step2.value;\n\n                if (!(_entry.url.href === url.href && _entry.type == ResolvedEntryKind.File)) {\n                  _context3.next = 56;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _entry.url);\n\n              case 56:\n                if (_entry.type === ResolvedEntryKind.Directory) {\n                  childFilename = getFirstPathSegmentAfterPrefix(_entry.url, containingUrl);\n                  entryDirectoryMap.set(childFilename, _entry);\n                } else if (_entry.type === ResolvedEntryKind.File) {\n                  _childFilename = basename(_entry.url.pathname);\n                  entryFileMap.set(_childFilename, _entry);\n                }\n\n              case 57:\n                _iteratorNormalCompletion2 = true;\n                _context3.next = 52;\n                break;\n\n              case 60:\n                _context3.next = 66;\n                break;\n\n              case 62:\n                _context3.prev = 62;\n                _context3.t3 = _context3[\"catch\"](50);\n                _didIteratorError2 = true;\n                _iteratorError2 = _context3.t3;\n\n              case 66:\n                _context3.prev = 66;\n                _context3.prev = 67;\n\n                if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                  _iterator2.return();\n                }\n\n              case 69:\n                _context3.prev = 69;\n\n                if (!_didIteratorError2) {\n                  _context3.next = 72;\n                  break;\n                }\n\n                throw _iteratorError2;\n\n              case 72:\n                return _context3.finish(69);\n\n              case 73:\n                return _context3.finish(66);\n\n              case 74:\n                // Look for browser overrides\n                _iteratorNormalCompletion3 = true;\n                _didIteratorError3 = false;\n                _iteratorError3 = undefined;\n                _context3.prev = 77;\n                _iterator3 = options.extensions[Symbol.iterator]();\n\n              case 79:\n                if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n                  _context3.next = 98;\n                  break;\n                }\n\n                ext = _step3.value;\n                hrefWithExtension = \"\".concat(url.href).concat(ext);\n                mapping = browserOverrides.get(hrefWithExtension);\n                invalidatedBy.add(hrefWithExtension);\n\n                if (!(mapping === false)) {\n                  _context3.next = 88;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", false);\n\n              case 88:\n                if (!mapping) {\n                  _context3.next = 90;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", this.resolveAsFile(mapping, _objectSpread({}, options, {\n                  ignoreBrowserOverrides: true\n                })));\n\n              case 90:\n                _match = entryFileMap.get(\"\".concat(filename).concat(ext));\n\n                if (!_match) {\n                  _context3.next = 95;\n                  break;\n                }\n\n                if (!(_match.type !== ResolvedEntryKind.File)) {\n                  _context3.next = 94;\n                  break;\n                }\n\n                return _context3.abrupt(\"continue\", 95);\n\n              case 94:\n                return _context3.abrupt(\"return\", _match.url);\n\n              case 95:\n                _iteratorNormalCompletion3 = true;\n                _context3.next = 79;\n                break;\n\n              case 98:\n                _context3.next = 104;\n                break;\n\n              case 100:\n                _context3.prev = 100;\n                _context3.t4 = _context3[\"catch\"](77);\n                _didIteratorError3 = true;\n                _iteratorError3 = _context3.t4;\n\n              case 104:\n                _context3.prev = 104;\n                _context3.prev = 105;\n\n                if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                  _iterator3.return();\n                }\n\n              case 107:\n                _context3.prev = 107;\n\n                if (!_didIteratorError3) {\n                  _context3.next = 110;\n                  break;\n                }\n\n                throw _iteratorError3;\n\n              case 110:\n                return _context3.finish(107);\n\n              case 111:\n                return _context3.finish(104);\n\n              case 112:\n                // First, attempt to find a matching file or directory\n                match = entryDirectoryMap.get(filename);\n\n                if (!match) {\n                  _context3.next = 117;\n                  break;\n                }\n\n                if (!(match.type !== ResolvedEntryKind.Directory)) {\n                  _context3.next = 116;\n                  break;\n                }\n\n                throw new Error(\"Invariant violation \".concat(match.type, \" is unexpected\"));\n\n              case 116:\n                return _context3.abrupt(\"return\", this.resolveAsDirectory(match.url, options));\n\n              case 117:\n                throw new EntryNotFoundError(url);\n\n              case 118:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[50, 62, 66, 74], [67,, 69, 73], [77, 100, 104, 112], [105,, 107, 111]]);\n      }));\n\n      function resolveAsFile(_x4, _x5) {\n        return _resolveAsFile.apply(this, arguments);\n      }\n\n      return resolveAsFile;\n    }()\n  }, {\n    key: \"readParentPackageJson\",\n    value: function () {\n      var _readParentPackageJson = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(url) {\n        var _this3 = this;\n\n        var options,\n            _options$invalidatedB2,\n            invalidatedBy,\n            token,\n            hostRootUrl,\n            hostRootHref,\n            containingDirUrl,\n            readPackageJsonOrRecurse,\n            _args5 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                options = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : {};\n                _options$invalidatedB2 = options.invalidatedBy, invalidatedBy = _options$invalidatedB2 === void 0 ? new Set() : _options$invalidatedB2, token = options.token;\n                _context5.next = 4;\n                return this.host.getCanonicalUrl(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 4:\n                url = _context5.sent;\n\n                if (!(token && token.isCancellationRequested)) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 7:\n                _context5.next = 9;\n                return this.host.getResolveRoot(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 9:\n                hostRootUrl = _context5.sent;\n\n                if (!(token && token.isCancellationRequested)) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 12:\n                hostRootHref = ensureTrailingSlash(hostRootUrl.href);\n                containingDirUrl = new URL(ensureTrailingSlash(dirname(url.pathname)), url);\n\n                readPackageJsonOrRecurse =\n                /*#__PURE__*/\n                function () {\n                  var _ref5 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee4(dir) {\n                    var entries, packageJsonHref, packageJsonEntry, parentPackageJsonContent, packageJson, parentDir;\n                    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            if (dir.href.startsWith(hostRootHref)) {\n                              _context4.next = 2;\n                              break;\n                            }\n\n                            return _context4.abrupt(\"return\", undefined);\n\n                          case 2:\n                            invalidatedBy.add(dir.href);\n                            _context4.next = 5;\n                            return _this3.host.listEntries(_this3, dir, {\n                              invalidatedBy: invalidatedBy,\n                              token: token\n                            });\n\n                          case 5:\n                            entries = _context4.sent;\n\n                            if (!(token && token.isCancellationRequested)) {\n                              _context4.next = 8;\n                              break;\n                            }\n\n                            throw new CanceledError('Canceled');\n\n                          case 8:\n                            packageJsonHref = new URL(resolve(dir.pathname, './package.json'), url).href;\n                            packageJsonEntry = entries.find(function (entry) {\n                              return entry.type === ResolvedEntryKind.File && entry.url.href === packageJsonHref;\n                            });\n                            invalidatedBy.add(packageJsonHref);\n\n                            if (!packageJsonEntry) {\n                              _context4.next = 27;\n                              break;\n                            }\n\n                            _context4.prev = 12;\n                            _context4.next = 15;\n                            return _this3.host.readFileContent(_this3, packageJsonEntry.url, {\n                              invalidatedBy: invalidatedBy,\n                              token: token\n                            });\n\n                          case 15:\n                            parentPackageJsonContent = _context4.sent;\n\n                            if (!(token && token.isCancellationRequested)) {\n                              _context4.next = 18;\n                              break;\n                            }\n\n                            throw new CanceledError('Canceled');\n\n                          case 18:\n                            packageJson = parseBufferAsPackageJson(_this3.decoder, parentPackageJsonContent, packageJsonEntry.url.href);\n                            return _context4.abrupt(\"return\", {\n                              packageJson: packageJson,\n                              url: packageJsonEntry.url\n                            });\n\n                          case 22:\n                            _context4.prev = 22;\n                            _context4.t0 = _context4[\"catch\"](12);\n\n                            if (!(_context4.t0 instanceof CanceledError || _context4.t0 && _context4.t0.name === 'CanceledError')) {\n                              _context4.next = 26;\n                              break;\n                            }\n\n                            throw _context4.t0;\n\n                          case 26:\n                            console.warn(\"Error reading the parent package manifest for \".concat(url.href, \" from \").concat(packageJsonEntry.url.href, \": \").concat(_context4.t0.message));\n\n                          case 27:\n                            // Not found here, let's try one up\n                            parentDir = new URL(ensureTrailingSlash(dirname(dir.pathname)), dir); // Skip infinite recursion\n\n                            if (!(parentDir.href === dir.href)) {\n                              _context4.next = 30;\n                              break;\n                            }\n\n                            return _context4.abrupt(\"return\", undefined);\n\n                          case 30:\n                            return _context4.abrupt(\"return\", readPackageJsonOrRecurse(parentDir));\n\n                          case 31:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4, null, [[12, 22]]);\n                  }));\n\n                  return function readPackageJsonOrRecurse(_x7) {\n                    return _ref5.apply(this, arguments);\n                  };\n                }();\n\n                return _context5.abrupt(\"return\", readPackageJsonOrRecurse(containingDirUrl));\n\n              case 16:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function readParentPackageJson(_x6) {\n        return _readParentPackageJson.apply(this, arguments);\n      }\n\n      return readParentPackageJson;\n    }()\n  }]);\n\n  return Resolver;\n}();\n\nResolver.defaultExtensions = ['.js', '.jsx', '.es6', '.es', '.mjs', '.ts', '.tsx', '.json'];\nResolver.path = {\n  basename: basename,\n  dirname: dirname,\n  extname: extname,\n  resolve: resolve\n};\nexport { AbstractResolverHost, Decoder, EntryNotFoundError, ResolvedEntryKind, Resolver, isValidPackageJson, util };","module.exports = __webpack_public_path__ + \"static/js/0.24d172f4.chunk.worker.js\"","import * as Monaco from 'monaco-editor';\nimport { useEffect, useState } from 'react';\nimport { DisposableStore } from 'ts-primitives';\n\n// import { EditorContext } from './context';\n\nexport enum EntryKind {\n  Directory = 'directory',\n  File = 'file',\n}\n\nexport interface IDirectory {\n  type: EntryKind.Directory;\n  uri: Monaco.Uri;\n}\nexport interface IFile {\n  type: EntryKind.File;\n  uri: Monaco.Uri;\n  model: Monaco.editor.ITextModel;\n}\n\nexport type DirectoryEntry = IDirectory | IFile;\n\nexport function useDirectory(uri: Monaco.Uri) {\n  // Make sure the URI always ends with a trailing slash\n  const prefix = uri.toString(true).replace(/\\/?$/, '/');\n  const sortEntries = (models: (DirectoryEntry)[]) => {\n    return [...models].sort((a, b) => (a.uri.fsPath > b.uri.fsPath ? 1 : -1));\n  };\n\n  const initialEntries = sortEntries(\n    Monaco.editor.getModels().reduce(\n      (entries, model) => {\n        const modelUri = model.uri.toString(true);\n\n        if (modelUri.startsWith(prefix)) {\n          const nestedPath = modelUri.slice(prefix.length);\n          const nextDirIdx = nestedPath.indexOf('/');\n\n          if (nextDirIdx === 0) {\n            throw new Error('Invariant error: WAT?');\n          }\n\n          if (nextDirIdx > 0) {\n            // This is an intermediate directory\n            const uri = Monaco.Uri.parse(`${prefix}${nestedPath.slice(0, nextDirIdx + 1)}`);\n\n            entries.push({\n              type: EntryKind.Directory,\n              uri,\n            });\n          } else {\n            entries.push({\n              type: EntryKind.File,\n              uri: model.uri,\n              model,\n            });\n          }\n        }\n\n        return entries;\n      },\n      [] as DirectoryEntry[]\n    )\n  );\n  const [entries, setEntries] = useState(initialEntries);\n\n  useEffect(() => {\n    const disposable = new DisposableStore();\n    const prefix = uri.toString(true).replace(/\\/?$/, '/');\n\n    disposable.add(\n      Monaco.editor.onDidCreateModel((model: Monaco.editor.ITextModel) => {\n        const modelUri = model.uri.toString(true);\n\n        if (modelUri.startsWith(prefix)) {\n          const nestedPath = modelUri.slice(prefix.length);\n          const nextDirIdx = nestedPath.indexOf('/');\n\n          if (nextDirIdx === 0) {\n            throw new Error('Invariant error: WAT?');\n          }\n\n          if (nextDirIdx > 0) {\n            // This is an intermediate directory\n            const uri = Monaco.Uri.parse(`${prefix}${nestedPath.slice(0, nextDirIdx)}`);\n\n            // It is possible that we already have this directory\n            const entry = entries.find(entry => entry.uri.toString(true) === uri.toString(true));\n\n            if (entry) {\n              if (entry.type !== EntryKind.Directory) {\n                throw new Error(\n                  `Invariant violation: A file in '${prefix}' conflicts with the path of the new file '${modelUri}'`\n                );\n              }\n\n              return;\n            }\n\n            entries.push({ type: EntryKind.Directory, uri });\n\n            return setEntries(sortEntries(entries));\n          }\n\n          if (\n            !entries.find(\n              entry => entry.type === EntryKind.File && entry.uri.toString(true) === model.uri.toString(true)\n            )\n          ) {\n            entries.push({ type: EntryKind.File, uri: model.uri, model });\n\n            setEntries(sortEntries(entries));\n          }\n        }\n      })\n    );\n\n    disposable.add(\n      Monaco.editor.onWillDisposeModel(model => {\n        const idx = entries.findIndex(entry => entry.type === EntryKind.File && entry.model === model);\n\n        if (idx === -1) {\n          throw new Error(`Invariant violation: Removing an untracked model: '${model.uri.fsPath}'`);\n        }\n\n        entries.splice(idx, 1);\n\n        setEntries(sortEntries(entries));\n      })\n    );\n\n    return () => disposable.dispose();\n  }, [entries, uri]);\n\n  return entries;\n}\n","import styled from '@emotion/styled/macro';\nimport React, { useRef, useEffect, useContext } from 'react';\nimport { EditorManagerContext } from '../lib/EditorManager';\n\nconst Editor: React.FC<{\n  className?: string;\n}> = ({ className }) => {\n  const el = useRef<HTMLDivElement | null>(null);\n  const editorManager = useContext(EditorManagerContext);\n\n  useEffect(() => {\n    if (!el.current) {\n      return;\n    }\n\n    const editor = editorManager.mount(el.current);\n\n    return () => {\n      editor.dispose();\n    };\n  }, [editorManager, el]);\n\n  return (\n    <div className={className} ref={el}>\n      <div></div>\n    </div>\n  );\n};\n\nexport default styled(Editor)``;\n","import styled from '@emotion/styled/macro';\nimport * as Monaco from 'monaco-editor';\nimport React, { useContext, useRef } from 'react';\nimport { Button } from 'reakit/Button';\nimport { Tooltip, TooltipReference, useTooltipState } from 'reakit/Tooltip';\nimport { useDirectory, EntryKind } from '../lib/hooks';\nimport { useActiveModel, EditorManagerContext } from '../lib/EditorManager';\n\nconst Entry = styled.div<{ modelFocused: boolean }>`\n  background-color: ${props => (props.modelFocused ? '#008cba' : 'inherit')};\n  text-decoration: none;\n  color: ${props => (props.modelFocused ? '#fff' : '#262626')};\n\n  height: 25px;\n  padding: 0 0 0 8px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  & > span {\n    flex: 1;\n  }\n\n  & > button {\n    display: none;\n  }\n\n  &:hover > button {\n    display: block;\n  }\n\n  ${props =>\n    props.modelFocused\n      ? {\n          ':hover': {\n            color: '#f5f5f5',\n            cursor: 'pointer',\n          },\n        }\n      : {\n          ':hover': {\n            backgroundColor: '#eee',\n            color: '#262626',\n            cursor: 'pointer',\n          },\n        }}\n`;\n\nconst CreateEntry = styled.div`\n  text-decoration: none;\n  color: '#262626';\n\n  height: 25px;\n  padding: 0 0 0 8px;\n  display: flex;\n  align-items: center;\n\n  :hover {\n    background-color: #eee;\n    cursor: pointer;\n  }\n`;\n\nconst SidebarFileDelete = styled(Button)`\n  border: none;\n  background: none;\n\n  :hover {\n    cursor: pointer;\n  }\n`;\n\nconst StyledTooltip = styled.div`\n  font-family: Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.4;\n  background-color: #333;\n  color: #fff;\n  border-radius: 4px;\n  opacity: 0.9;\n  padding: 0.2em 0.4em;\n`;\n\nconst SidebarFile: React.FC<{ className?: string; model: Monaco.editor.ITextModel }> = ({ className, model }) => {\n  const activeModel = useActiveModel();\n  const editorManager = useContext(EditorManagerContext);\n  const tooltip = useTooltipState({ gutter: 0 });\n\n  const onClickDelete = () => {\n    model.dispose();\n  };\n\n  return (\n    <Entry className={className} modelFocused={model === activeModel}>\n      <span onClick={() => editorManager.focusModel(model)}>{model.uri.fsPath.slice(1)}</span>\n      <TooltipReference {...tooltip} as={SidebarFileDelete} onClick={() => onClickDelete()}>\n        <span role=\"img\" aria-label=\"Delete file\">\n          ❌\n        </span>\n      </TooltipReference>\n      <Tooltip {...tooltip} as={StyledTooltip}>\n        Delete file\n      </Tooltip>\n    </Entry>\n  );\n};\n\nconst Sidebar: React.FC<{ className?: string }> = props => {\n  const rootDir = useRef(Monaco.Uri.file('/'));\n  const entries = useDirectory(rootDir.current);\n  const editorManager = useContext(EditorManagerContext);\n\n  const onClickCreate = () => {\n    const filename = prompt('Filename?');\n\n    if (filename) {\n      editorManager.createModel(filename);\n    }\n  };\n\n  return (\n    <div className={props.className}>\n      {entries.map(entry =>\n        entry.type === EntryKind.Directory ? (\n          <div>{entry.uri.fsPath.slice(1)}</div>\n        ) : (\n          <SidebarFile key={entry.uri.toString(true)} model={entry.model}></SidebarFile>\n        )\n      )}\n      <CreateEntry onClick={() => onClickCreate()}>Create...</CreateEntry>\n    </div>\n  );\n};\n\nexport default styled(Sidebar)`\n  display: flex;\n  flex-direction: column;\n`;\n","import styled from '@emotion/styled/macro';\nimport React from 'react';\n\nimport Editor from './Editor';\nimport Preview from './Preview';\nimport Sidebar from './Sidebar';\nimport { EditorManager, EditorManagerContext } from '../lib/EditorManager';\n\nconst PlaygroundCmp: React.FC<{ className?: string; initialPath: string; project: Record<string, string> }> = ({\n  className,\n  initialPath,\n  project,\n}) => {\n  const editorManager = new EditorManager({ files: project, initialPath: initialPath });\n\n  return (\n    <div className={className}>\n      <EditorManagerContext.Provider value={editorManager}>\n        <Sidebar></Sidebar>\n        <Editor></Editor>\n        <Preview></Preview>\n      </EditorManagerContext.Provider>\n    </div>\n  );\n};\n\nexport const Playground = styled(PlaygroundCmp)`\n  display: flex;\n  flex-direction: row;\n\n  font-family: Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.4;\n\n  color: #222;\n\n  ${Sidebar} {\n    flex: 1 1 100px;\n    min-width: 100px;\n    max-width: 400px;\n    border-right: 1px solid #ccc;\n  }\n\n  ${Editor} {\n    border-right: 1px solid #ccc;\n  }\n\n  ${Editor}, ${Preview} {\n    flex: 10;\n  }\n`;\n","export const files = {\n  'package.json':\n    JSON.stringify(\n      {\n        dependencies: {\n          'github-markdown-css': '^3.0.1',\n          react: '^16.9.0',\n          'react-dom': '^16.9.0',\n        },\n      },\n      null,\n      2\n    ) + '\\n',\n  'app.jsx': `\nimport React, { Component } from 'react';\nimport 'github-markdown-css';\n\nimport { Explanation } from './explanation';\nimport { name } from './name';\nimport './style.css';\n\nclass Hello extends Component {\n  render() {\n    return <div className=\"markdown-body\">\n      <h1>Hello {name}</h1>\n      <blockquote>There is no <del>spoon</del> server</blockquote>\n      <Explanation/>\n    </div>;\n  }\n}\n\nexport default Hello\n  `.trim(),\n  'explanation.jsx':\n    `\nimport React from 'react';\n\nexport const Explanation = () => <>\n  <section>\n    <h2>What is this?</h2>\n    <p>\n      This is a demo of bundling and serving a browser-based sandbox fully from the browser. <strong>There are <em>no</em> servers involved</strong> except the static server hosting this demo and <a href=\"https://unpkg.com\" target=\"_blank\" rel=\"noopener\">unpkg.com</a>. All module resolution, transpilation and bundling is happening in the browser.\n    </p>\n    <p>\n      Try it. Go offline, and reload...\n    </p>\n    <p>\n      <strong>I dare you.</strong>\n    </p>\n  </section>\n  <section>\n    <h2>Features</h2>\n    <ul>\n      <li>Full offline support. Once your cache is seeded, you can cut the cord.</li>\n      <li>Fully browser-based bundling.</li>\n      <li>Add (almost) any node module and no server is involved.</li>\n      <li>If you want to add another module, make sure to add it to <code>package.json</code> first.</li>\n      <li>Automatic type acquisition for full typings support in the browser, in JavaScript!</li>\n      <li>Resolve source locations in stack traces</li>\n      <li>Hot module reloading</li>\n    </ul>\n  </section>\n</>;\n    `.trim() + '\\n',\n  'index.jsx':\n    `\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './app';\n  \nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n);\n      `.trim() + '\\n',\n  'name.js':\n    `\nexport const name = 'Velcro';\n    `.trim() + '\\n',\n  'style.css':\n    `\n.markdown-body {\n  box-sizing: border-box;\n  min-width: 200px;\n  max-width: 980px;\n  margin: 0 auto;\n  padding: 45px;\n}\n\n@media (max-width: 767px) {\n  .markdown-body {\n    padding: 15px;\n  }\n}\n    `.trim() + '\\n',\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n\n      navigator.serviceWorker.ready.then(registration => {\n        config && config.onSuccess && config.onSuccess(registration);\n      });\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\n\nimport * as serviceWorker from './serviceWorker';\n\ninterface ServiceWorkerEvent extends Event {\n  target: Partial<ServiceWorker> & EventTarget | null;\n}\n\ninterface ServiceWorkerContextValue {\n  assetsUpdateReady: boolean;\n  assetsCached: boolean;\n  updateAssets(): void;\n}\n\nconst ServiceWorkerContext = React.createContext<ServiceWorkerContextValue | undefined>(undefined);\n\nexport function ServiceWorkerProvider(props: React.PropsWithChildren<{}>) {\n  const [waitingServiceWorker, setWaitingServiceWorker] = React.useState<ServiceWorker | null>(null);\n  const [assetsUpdateReady, setAssetsUpdateReady] = React.useState(false);\n  const [assetsCached, setAssetsCached] = React.useState(false);\n\n  const value = React.useMemo(() => {\n    return {\n      assetsUpdateReady,\n      assetsCached,\n      // Call when the user confirm update of application and reload page\n      updateAssets: () => {\n        if (waitingServiceWorker) {\n          waitingServiceWorker.addEventListener('statechange', (event: ServiceWorkerEvent) => {\n            if (event.target && event.target.state === 'activated') {\n              window.location.reload();\n            }\n          });\n\n          waitingServiceWorker.postMessage({ type: 'SKIP_WAITING' });\n        }\n      },\n    };\n  }, [assetsUpdateReady, assetsCached, waitingServiceWorker]);\n\n  // Once on component mounted subscribe to Update and Succes events in\n  // CRA's service worker wrapper\n  React.useEffect(() => {\n    serviceWorker.register({\n      onUpdate: registration => {\n        setWaitingServiceWorker(registration.waiting);\n        setAssetsUpdateReady(true);\n      },\n      onSuccess: registration => {\n        setAssetsCached(true);\n\n        if (registration.active) {\n          registration.active.addEventListener('statechange', (event: ServiceWorkerEvent) => {\n            if (!navigator.serviceWorker.controller) {\n              setAssetsCached(false);\n            }\n          });\n        }\n      },\n    });\n  }, []);\n\n  return <ServiceWorkerContext.Provider value={value} {...props} />;\n}\n\nexport function useServiceWorker() {\n  const context = React.useContext(ServiceWorkerContext);\n\n  if (!context) {\n    throw new Error('useServiceWorker must be used within a ServiceWorkerProvider');\n  }\n\n  return context;\n}\n","import { Global, css } from '@emotion/core';\nimport styled from '@emotion/styled/macro';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { OfflineBolt, Update } from '@material-ui/icons';\nimport React from 'react';\nimport { Tooltip, TooltipReference, useTooltipState } from 'reakit/Tooltip';\n\nimport { Playground } from './playground';\nimport { files } from './templates/react';\nimport { useServiceWorker, ServiceWorkerProvider } from './useServiceWorker';\nimport { Button } from 'reakit/Button';\n\nconst PlaygroundWrapper = styled.div`\n  background: white;\n  color: #666;\n  display: flex;\n  flex-direction: column;\n\n  ${Playground} {\n    border-bottom: 1px solid #ccc;\n    flex: 1;\n  }\n`;\n\nconst StatusBarItem = styled.span`\n  display: inline-flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst ReloadButton = styled(Button)`\n  border: 0;\n  background: #008cba;\n  margin: 0 0.5em;\n  color: white;\n  border-radius: 2px;\n  font-weight: 600;\n\n  :hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`;\n\nconst StyledTooltip = styled.div`\n  font-family: Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.4;\n  background-color: #333;\n  color: #fff;\n  border-radius: 4px;\n  opacity: 0.9;\n  padding: 0.2em 0.4em;\n`;\n\nconst StatusBar: React.FC = () => {\n  const serviceWorker = useServiceWorker();\n  const offlineTooltip = useTooltipState({ gutter: 0 });\n  const reloadTooltip = useTooltipState({ gutter: 0 });\n\n  return (\n    <StatusBarStyles>\n      {serviceWorker.assetsCached ? (\n        <TooltipReference {...offlineTooltip} as={StatusBarItem}>\n          <OfflineBolt color=\"inherit\" fontSize=\"small\" />\n          &nbsp;Offline ready\n        </TooltipReference>\n      ) : null}\n      <Tooltip {...offlineTooltip} as={StyledTooltip}>\n        This application has been fully cached and can now be used offline.\n      </Tooltip>\n\n      {serviceWorker.assetsUpdateReady ? (\n        <TooltipReference {...reloadTooltip} as={StatusBarItem}>\n          <Update color=\"inherit\" fontSize=\"small\" />\n          &nbsp;Update ready:\n          <ReloadButton onClick={() => serviceWorker.updateAssets()}>Reload</ReloadButton>\n        </TooltipReference>\n      ) : null}\n      <Tooltip {...reloadTooltip} as={StyledTooltip}>\n        There is an update of this application ready to install. Click install reload to install the update and reload\n        the page.\n      </Tooltip>\n    </StatusBarStyles>\n  );\n};\n\nconst StatusBarStyles = styled.div`\n  display: flex;\n  flex-direction: row;\n\n  font-size: 90%;\n\n  height: 24px;\n  padding: 0 0.5em;\n\n  ${StatusBarItem} {\n    margin-left: 0.5em;\n    margin-right: 0.5em;\n  }\n`;\n\nconst AppWrapper = styled.div`\n  width: 100%;\n  min-width: 200px;\n  max-width: 80vw;\n  margin: 0 auto;\n  padding: 0 0 45px 0;\n\n  @media (max-width: 960px) {\n    padding: 0 15px 15px 15px;\n    max-width: initial;\n  }\n\n  display: flex;\n  flex-direction: column;\n\n  ${PlaygroundWrapper} {\n    flex: 1;\n    background: #f5f5f5;\n    border-radius: 2px;\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);\n\n    ${StatusBarStyles} {\n    }\n  }\n`;\n\nconst Title = styled.div`\n  font-family: 'Raleway', sans-serif;\n  font-size: 250%;\n  font-weight: 800;\n  font-variant: small-caps;\n  font-variant-caps: small-caps;\n  color: #00bfff;\n`;\n\nconst Subtitle = styled.div`\n  color: #ddd;\n  font-size: 120%;\n  font-weight: 400;\n`;\n\nconst Link = styled.a`\n  color: white;\n  text-decoration: none;\n\n  :hover {\n    text-decoration: underline;\n  }\n`;\n\nconst Links = styled.div`\n  display: flex;\n  flex-direction: row;\n\n  & > *:not(:last-child):after {\n    padding: 0 0.5em;\n    content: '｜';\n    color: #aaa;\n    text-decoration: none;\n  }\n\n  ${Link} {\n    color: #ccc;\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n  padding: 0.8em 0 0.3em 0;\n  text-shadow: #000 1px 1px 5px;\n\n  ${Title} {\n    margin-right: 0.5em;\n  }\n\n  ${Subtitle} {\n    margin-right: 0.5em;\n  }\n\n  ${Links} {\n    flex: 1;\n    justify-content: flex-end;\n  }\n`;\n\nconst globalCss = css`\n  @import url('https://fonts.googleapis.com/css?family=Raleway:900&display=swap');\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  html,\n  body {\n    margin: 0;\n    padding: 0;\n    min-height: 100vh;\n\n    font-family: Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif;\n    font-size: 14px;\n    line-height: 1.4;\n\n    background: #333;\n    color: #fff;\n\n    display: flex;\n    flex-direction: column;\n\n    #root {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n\n      ${AppWrapper} {\n        flex: 1;\n      }\n    }\n  }\n`;\n\nexport const App: React.FC = () => {\n  return (\n    <ServiceWorkerProvider>\n      <CssBaseline />\n      <AppWrapper>\n        <Global styles={globalCss}></Global>\n        <Header>\n          <Title>Velcro</Title>\n          <Subtitle>The client-side bundler and playground</Subtitle>\n          <Links>\n            <div>\n              <Link href=\"https://twitter.com/filearts\" target=\"_blank\" rel=\"nofollow noreferrer\">\n                @filearts\n              </Link>\n            </div>\n            <div>\n              <Link href=\"https://github.com/ggoodman/velcro\" target=\"_blank\" rel=\"nofollow noreferrer\">\n                View on GitHub\n              </Link>\n            </div>\n          </Links>\n        </Header>\n        <PlaygroundWrapper>\n          <Playground project={files} initialPath=\"index.jsx\"></Playground>\n          <StatusBar></StatusBar>\n        </PlaygroundWrapper>\n      </AppWrapper>\n    </ServiceWorkerProvider>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}