{"version":3,"sources":["../../resolver-host-memory/dist/dist-browser/index.js","../../resolver/dist/dist-module/index.js","../../bundler/dist/dist-module/index.js","../../resolver-host-compound/dist/dist-module/index.js","../../resolver-host-unpkg/dist/dist-module/index.js","lib/typeAcquisition.ts","lib/error.ts","lib/ResolverHostMonaco.ts","lib/ResolverHostWithCache.ts","lib/ResolverHostWithInflightCache.ts","lib/previewRuntime.ts","lib/EditorManager.ts","playground/Editor.tsx","lib/hooks.ts","playground/Preview.tsx","playground/Sidebar.tsx","playground/Playground.tsx","templates/react.ts","serviceWorker.ts","useServiceWorker.tsx","App.tsx","index.tsx"],"names":["_regeneratorRuntime","_asyncToGenerator","_slicedToArray","_toConsumableArray","_possibleConstructorReturn","_getPrototypeOf","_assertThisInitialized","_inherits","_wrapNativeSuper","_classCallCheck","_createClass","exports","errorHandler","ErrorHandler","this","listeners","unexpectedErrorHandler","e","setTimeout","stack","Error","message","key","value","listener","_this","push","_removeListener","forEach","splice","indexOf","newUnexpectedErrorHandler","emit","onUnexpectedError","CanceledError","_ExtendableError","apply","arguments","_Error","ExtendableError","_this2","call","name","constructor","captureStackTrace","combinedDisposable","_len2","length","disposables","Array","_key2","dispose","_dispose","first","_len","rest","_key","isArray","d","DisposableStore","_toDispose","Set","_isDisposed","clear","item","t","console","warn","add","Disposable","_store","None","Object","freeze","FIN","done","undefined","Node","element","next","Undefined","prev","Event","LinkedList","_first","_last","_size","_insert","atTheEnd","_this3","newNode","oldLast","oldFirst","didRemove","_remove","res","node","anchor","result","get","_disposable","_once","event","thisArgs","didFire","_map","map","snapshot","i","_forEach","each","_filter","filter","_reduce","merge","initial","output","emitter","Emitter","onFirstListenerAdd","fire","onLastListenerRemove","_latch","cache","firstCall","shouldEmit","once","signal","any","_len3","events","_key3","reduce","debounce","subscription","delay","leading","leakWarningThreshold","handle","numDebouncedCalls","cur","clearTimeout","_output","stopwatch","start","Date","getTime","_","latch","buffer","nextTick","slice","flush","onFirstListenerDidAdd","ChainableEvent","fn","chain","fromNodeEventEmitter","eventName","id","on","removeListener","fromPromise","promise","then","toPromise","Promise","c","_globalLeakWarningThreshold","LeakageMonitor","customThreshold","Math","random","toString","_warnCountdown","_stacks","listenerCount","_this4","threshold","Map","split","join","count","set","topStack","topCount","concat","options","_disposed","_options","_leakageMon","_listeners","_deliveryQueue","iter","iterator","size","_this$_deliveryQueue$","shift","_this$_deliveryQueue$2","_event","_this5","firstListener","isEmpty","removeMonitor","remove","onListenerDidAdd","check","_noop","CancellationToken","shortcutEvent","callback","context","bind","isCancellationToken","thing","Cancelled","MutableToken","isCancellationRequested","onCancellationRequested","ResolvedEntryKind","_isCancelled","_emitter","hasInvalidOptionalStringField","json","field","hasInvalidDependenciesField","keys","every","requestIdleCallback","cancelIdleCallback","didTimeout","timeRemaining","CHAR_DOT","CHAR_FORWARD_SLASH","TRAILING_SLASH_RX","validateString","TypeError","isPathSeparator","code","FileEncoding","util","__proto__","ensureTrailingSlash","pathname","replace","parseBufferAsPackageJson","decoder","content","spec","text","JSON","parse","err","error","browser","hasInvalidBrowserField","isValidPackageJson","parseTextAsPackageJson","decode","getFirstPathSegmentAfterPrefix","child","parent","childHref","parentHref","parentOffset","charAt","href","basename","path","ext","end","matchedSlash","extIdx","firstNonSlashEnd","charCodeAt","extname","startDot","startPart","preDotState","dirname","len","rootEnd","offset","j","last","initialSegment","segment","startsWith","endsWith","resolve","resolvedPath","resolvedAbsolute","allowAboveRoot","separator","lastSegmentLength","lastSlash","dots","lastSlashIndex","lastIndexOf","normalizeString","AbstractResolverHost","_resolver","url","ResolverHostMemory","_AbstractResolverHost","files","_this6","basePath","now","root","type","Directory","children","textEncoder","TextEncoder","baseUrl","URL","file","addFile","encoding","segments","Boolean","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","return","UTF8","filename","pop","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","dir","entry","File","_getResolveRoot","mark","_callee","wrap","_context","abrupt","stop","_listEntries","_callee2","urlPathname","basePathname","fsPathname","_this7","_context2","getEntryAtPath","urlFromPath","_x","_x2","_readFileContent","_callee3","binSting","binArray","_context3","t0","Base64","atob","Uint8Array","prototype","_el","idx","arr","encode","_x3","_x4","defineProperty","factory","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","source","getOwnPropertyDescriptors","defineProperties","Decoder","TextDecoder","buf","str","Buffer","from","EntryNotFoundError","TRAILING_SLASH_RX$1","Resolver","host","extensions","defaultExtensions","packageMain","_resolve","_options$invalidatedB","invalidatedBy","token","tokenSource","optionsWithDefaults","canonicalUrlPromise","_ref","_ref2","canonicalUrl","rootUrl","rootHref","rootHrefWithoutTrailingSlash","canonicalHref","resolvedUrl","_args","ignoreBrowserOverrides","getCanonicalUrl","all","getResolveRoot","sent","resolveAsDirectory","t1","resolveAsFile","ignored","_resolveAsDirectory","_ref3","_ref4","entries","mainPathname","packageJsonHref","packageJsonEntry","packageJsonContent","packageJson","mainUrl","listEntries","find","readFileContent","finish","_resolveAsFile","parentPackageJson","browserOverrides","browserMap","packageJsonDir","impliedUrl","targetSpec","containingUrl","entryDirectoryMap","entryFileMap","_entry","childFilename","_childFilename","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","hrefWithExtension","mapping","_match","match","includes","readParentPackageJson","t2","t3","t4","_x5","_readParentPackageJson","_callee5","_options$invalidatedB2","hostRootUrl","hostRootHref","containingDirUrl","readPackageJsonOrRecurse","_args5","_context5","_ref5","_callee4","parentPackageJsonContent","parentDir","_context4","_x7","_x6","traverse","ast","ctx","visit","enter","leave","prop","index","_shouldSkip","shouldSkip","skipped","childKeys","skip","isArrowFunctionExpression","isFunctionDeclaration","isFunctionExpression","isIdentifier","isMemberExpression","isNodeWithStartAndEnd","isStringLiteral","isLiteral","parseFile","uri","magicString","unboundSymbols","locals","nodeEnv","replacements","requires","requireResolves","original","onComment","_isBlock","_test","onToken","addSourcemapLocation","allowReturnOutsideFunction","sourceType","scopingAndRequiresVisitor","collectGlobalsVisitor","requireDependencies","callee","requireResolveDependencies","_node","symbolName","symbolNodes","has","_parent","isVariableDeclaration","nextParent","kind","isScope","isBlockScope","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","declarations","declarePattern","_parent2","_nextParent2","_locals","declareFunction","isFunction","_locals2","isClassDeclaration","_parent3","_nextParent3","_locals3","isTryStatement","handler","_locals4","param","visitAndCaptureScoping","isIfStatement","isBinaryExpression","test","l","r","operator","left","right","memberExpressionMatches","replacement","stringify","alternate","consequent","visitAndSkipBranches","isCallExpression","firstArg","property","_firstArg","visitRequires","isPropertyOfMemberExpression","isProperty","isKeyOfProperty","isBindingIdentifier","foundBinding","declaresArguments","isThisExpression","_foundBinding","_nextParent","declaresThis","_unboundSymbols","params","isObjectPattern","properties","isArrayPattern","elements","isRestElement","argument","isAssignmentPattern","isProgram","isBlockStatement","pattern","memberParts","RELATE_PATH_RX","SPEC_RX","Deferred","internalState","promiseResolve","promiseReject","reject","reason","parseBareModuleSpec","parsed","matches","nameSpec","maybeParseBareModuleSpec","DependencyKind","Asset","MapSet","m","valueSet","deleted","delete","DEFAULT_SHIM_GLOBALS","export","global","process","dependencies","indentExclusionRanges","sourceMappingUrl","re","lastMatch","exec","getSourceMappingUrl","asset","_href","cssCode","BACKSLASH","SINGLE_QUOTE","NL","CR","escaped","char","overwrite","prependRight","prepend","append","getParserForAsset","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","dep","Require","references","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_dep","RequireResolve","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_ref7","_ref6","shim","InjectedGlobal","exportName","setCode","InvariantViolation","_ExtendableError2","NotSupportedError","_ExtendableError3","ResolveError","fromHref","NODE_CORE_SHIMS","shims","coreLibName","assign","_resolveBareModuleReference2","_resolveBareModuleReference","_callee11","resolver","bareModuleReference","_ref22","_ref22$invalidatedBy","_parseBareModuleSpec","resolvedSpec","parentUrl","parentPackageInfo","consolidatedDependencies","dependencySpec","_resolvedSpec","builtIn","_parseBareModuleSpec2","_name","_pathname","_spec","_resolvedSpec2","_args11","_context11","peerDependencies","devDependencies","createRuntime","manifest","aliases","create","mappings","modules","registry","Runtime","Module","HotModule","module","runtime","dependents","acceptCallbacks","disposeCallbacks","seal","hot","toStringTag","configurable","alias","dependency","fromId","toId","mappingsForId","getId","init","executeEntrypoints","register","_alias","entrypoint","entrypoints","require","dependent","accept","cb","window","Bundle","assets","entrypointsToAssets","dependenciesToAssets","assetsByHref","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","bundle","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","addSource","buildAssetForImmediateExecution","aliasMap","acc","_ref8","_ref9","entrypointMap","_ref10","_ref11","runtimeOptions","sourceMap","generateSourceMap","_this$buildForImmedia","buildForImmediateExecution","toDataUri","inputMap","generateMap","includeContent","hires","seen","remapping","SourceMap","input","sourceRoot","names","sources","sourcesContent","version","_buildAssetAndCollect","indent","clone","trim","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","resolveDetails","resolvedHref","buildAssetAndCollectDependencies","ResolveDetailsKind","Bundler","EMPTY_MODULE_URL","resolutionCache","resolutionInvalidations","onAssetAddedEmitter","onAssetRemovedEmitter","resolveBareModule","_ref12","_generateBundle","_callee6","pendingOperations","dfd","enqueue","resolveHref","resolveAsset","resolveDependency","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_iterator13","_step13","invalidation","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_iterator14","_step14","resolutionCacheKey","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_loop","_iterator15","_step15","_args6","_context6","cancel","_ref13","op","onEnqueueAsset","onCompleteAsset","isSettled","catch","_ref14","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_iterator11","_step11","resolveWithDetails","_ref15","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_iterator12","_step12","getOrCreateAsset","readCode","_x8","invalidations","getValues","deleteAll","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_iterator16","_step16","_readCode","_callee7","_ref18","_context7","_x9","_x10","_resolveBareModuleReference3","_callee8","_ref19","_ref19$invalidatedBy","resolvedArg","resolvedUri","_args8","_context8","fetchSpec","resolveRelativeModuleReference","_x11","_x12","_resolveRelativeModuleReference","_callee9","_ref20","combinedUri","resolveResult","_context9","Relative","stableHref","stableRootHref","_x13","_x14","_x15","_resolveWithDetails","_callee10","fromUri","_ref21","_ref21$invalidatedBy","_context10","resolveBareModuleReference","_x16","_x17","_x18","ResolverHostCompound","hosts","prefix","FetchError","isValidEntry","isValidFile","isValidDirectory","signalFromCancellationToken","AbortControllerConstructor","abortController","abort","UnpkgCdn","UNPKG_SPEC_RX","protocol","hostname","JSDelivrCdn","specRx","gh","npm","mapChildEntry","_files","dataHost","ResolverHostUnpkg","contentCache","byteLength","max","inflightContentRequests","packageLock","packageEntriesCache","packageJsonCache","fetch","AbortController","cdn","_getCanonicalUrl","unresolvedSpec","isValidUrl","parseUrl","readPackageJsonWithCache","urlForPackageFile","_args2","parentEntry","traversalSegments","_args3","readPackageEntriesWithCache","cached","inflight","_args4","redirect","ok","status","arrayBuffer","aborted","_readPackageEntriesWithCache","lockKey","lock","range","packageEntriesCacheForModule","exactMatch","_packageEntries","packageEntries","readPackageEntries","_readPackageJsonWithCache","packageJsonCacheForModule","_packageJson","readPackageJson","_readPackageJson","_args7","_readPackageEntries","urlForPackageList","normalizePackageListing","PackageEntryKind","HAS_D_TS_EXTENSION","getTypingsModuleSpec","pkgJson","typingsName","typingsRange","major","TypeAcquirer","_onTypeFile","typingsFiles","parentPath","moduleRoot","_listFiles","imported","promises","normalizedMain","main","contents","filePath","typingsModuleSpec","_import","unresolvedUrl","queue","entriesAtPath","pkgJsonPathname","bareModuleUrl","resolvedPkgJson","pkgJsonText","resolvedName","_importAdjacentTypings","_importTypingsFromDefinitelyTyped","specs","importTypesForSpec","importResults","InvariantError","TimeoutError","TranspileError","diagnostics","ResolverHostMonaco","rootUri","Monaco","getModels","model","modelHref","seenDirs","nestedPath","nextDirIdx","getModel","encoder","getTranspiledValue","getModeId","tryLoadFromWorker","a","typescript","getTypeScriptWorker","workerFactory","workerClient","getEmitOutput","getSyntacticDiagnostics","emitOutput","syntacticDiagnostics","emitSkipped","fsPath","diagnostic","startPosition","getPositionAt","endPosition","flattenDiagnosticMessageText","messageText","lineNumber","column","outputFiles","attempt","timeoutMs","race","timeout","pow","getValue","diag","newLine","ResolverHostWithCache","idbTimeout","hostConcurrency","hostTimeout","namespace","idbPromise","limiter","inflightGetCanonicalUrl","inflightGetResolveRoot","inflightListEntries","inflightReadFileContent","getCanonicalUrlCache","getResolveRootCache","listEntriesCache","readFileContentCache","Limiter","openDB","schemaVersion","upgrade","db","oldVersion","newVersion","transaction","createObjectStore","objectStore","loadFn","inflightMap","storeName","serialize","deserialize","withInflightGrouping","withIdbCache","idb","withTimeout","put","withMemoryCache","withCache","duration","ResolverHostWithInflightCache","operationName","createBundleRuntime","ReactErrorOverlay","velcroRequire","channel","MessageChannel","setEditorHandler","postMessage","payload","startReportingRuntimeErrors","onError","port2","onmessage","data","dismissRuntimeErrors","reportBuildError","val","isString","isValidReload","dismissBuildError","reload","__velcroRuntime","potentialOrphans","requireReload","acceptCallbackQueue","disposeCallbackQueue","disposeCallback","acceptCallback","script","document","createElement","src","onerror","onload","toReload","potentialOrphan","potentialOrphanModule","head","appendChild","port1","EditorManager","unpkgCdn","forNpmFromUnpkg","githubCdn","forGithubFromJsdelivr","cachingUnpkgHost","getRoot","previewRuntimeHost","inflightCachingHost","previewBundler","bundler","editor","disposableStore","initialPath","typeAcquirer","viewState","WeakMap","onWillFocusModelEmitter","onDidChangeEmitter","typescriptDefaults","setEagerModelSync","setMaximumWorkerIdleTime","setCompilerOptions","allowJs","allowNonTsExtensions","allowSyntheticDefaultImports","checkJs","esModuleInterop","experimentalDecorators","inlineSourceMap","inlineSources","isolatedModules","jsx","JsxEmit","React","lib","ModuleKind","CommonJS","moduleResolution","ModuleResolutionKind","NodeJs","noEmit","outDir","resolveJsonModule","rootDir","ScriptTarget","ES2015","typeRoots","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","createModel","onDidCreateModel","onDidChangePackageJson","typescriptVersion","importTypesForSpecs","throttler","ThrottledDelayer","trigger","onDidChangeContent","onTypeFile","addExtraLib","language","inferLanguage","getModelByHref","focusModel","setModel","revealLineInCenter","ScrollType","Smooth","setPosition","columnNumber","markers","setModelMarkers","focus","getModelByPath","el","automaticLayout","minimap","enabled","showUnused","scrollBeyondLastLine","theme","wordWrap","wrappingIndent","onDidDispose","onDidChangeModel","newModelUrl","restoreViewState","onDidBlurEditorText","saveViewState","focusPath","npmSpec","resolveNpmSpec","hosted","user","project","gitRange","gitCommittish","log","EditorManagerContext","createContext","EntryKind","Editor","className","useRef","editorManager","useContext","useEffect","current","mount","ref","PreviewProgress","props","total","round","completed","PreviewIframeWrap","PreviewWrap","PreviewMessageError","PreviewMessageErrorText","isInternal","PreviewMessages","PreviewMessageLine","line","PreviewMessage","lines","Preview","previewWrapRef","hmrClientRef","previewIframeRef","useState","messages","setMessages","buildProgress","setBuildProgress","runtimeBundleString","disposable","delayer","Delayer","Throttler","CancellationTokenSource","queueRefreshPreview","uris","refreshPreview","toInvalidate","building","generateBundle","runtimeBundle","unresolvedEntrypointHref","resolvedEntrypoint","resolvedEntrypointHref","build","send","updatedBundleFile","updatedBundleHref","createObjectURL","onReload","bundledCode","runtimeFile","bundleFile","markup","htmlUrl","iframe","style","display","onWillDisposeModel","onMessage","contentWindow","fileName","row","getLineContent","MessagePort","HmrClient","debug","addEventListener","removeEventListener","port","onReloadEmitter","close","Entry","modelFocused","color","cursor","backgroundColor","CreateEntry","SidebarFileDelete","Button","StyledTooltip","SidebarFile","activeModel","workbench","setActiveModel","trackEditor","onDidFocusEditorText","hasTextFocus","onDidCreateEditor","useActiveModel","tooltip","useTooltipState","gutter","onClick","TooltipReference","as","role","aria-label","Tooltip","Sidebar","sortEntries","models","sort","b","initialEntries","modelUri","setEntries","findIndex","useDirectory","prompt","onClickCreate","PlaygroundCmp","Provider","Playground","react","isLocalhost","location","config","navigator","origin","swUrl","headers","response","contentType","serviceWorker","ready","registration","unregister","registerValidSW","checkValidServiceWorker","onSuccess","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","ServiceWorkerContext","ServiceWorkerProvider","waitingServiceWorker","setWaitingServiceWorker","assetsUpdateReady","setAssetsUpdateReady","assetsCached","setAssetsCached","useMemo","updateAssets","waiting","active","PlaygroundWrapper","StatusBarItem","ReloadButton","StatusBar","useServiceWorker","offlineTooltip","reloadTooltip","StatusBarStyles","OfflineBolt","fontSize","Update","AppWrapper","Title","Subtitle","Link","Links","Header","globalCss","css","ReactDOM","render","CssBaseline","styles","rel","getElementById"],"mappings":"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","file":"static/js/main.bbcc7d27.chunk.js","sourcesContent":["var _regeneratorRuntime = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _slicedToArray = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _toConsumableArray = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _possibleConstructorReturn = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _assertThisInitialized = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _wrapNativeSuper = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nvar _classCallCheck = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) : typeof define === 'function' && define.amd ? define(['exports'], factory) : (global = global || self, factory(global.Velcro = global.Velcro || {}));\n})(this, function (exports) {\n  'use strict';\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n  // Avoid circular dependency on EventEmitter by implementing a subset of the interface.\n\n  var ErrorHandler =\n  /*#__PURE__*/\n  function () {\n    function ErrorHandler() {\n      _classCallCheck(this, ErrorHandler);\n\n      this.listeners = [];\n\n      this.unexpectedErrorHandler = function (e) {\n        setTimeout(function () {\n          if (e.stack) {\n            throw new Error(e.message + '\\n\\n' + e.stack);\n          }\n\n          throw e;\n        }, 0);\n      };\n    }\n\n    _createClass(ErrorHandler, [{\n      key: \"addListener\",\n      value: function addListener(listener) {\n        var _this = this;\n\n        this.listeners.push(listener);\n        return function () {\n          _this._removeListener(listener);\n        };\n      }\n    }, {\n      key: \"emit\",\n      value: function emit(e) {\n        this.listeners.forEach(function (listener) {\n          listener(e);\n        });\n      }\n    }, {\n      key: \"_removeListener\",\n      value: function _removeListener(listener) {\n        this.listeners.splice(this.listeners.indexOf(listener), 1);\n      }\n    }, {\n      key: \"setUnexpectedErrorHandler\",\n      value: function setUnexpectedErrorHandler(newUnexpectedErrorHandler) {\n        this.unexpectedErrorHandler = newUnexpectedErrorHandler;\n      }\n    }, {\n      key: \"getUnexpectedErrorHandler\",\n      value: function getUnexpectedErrorHandler() {\n        return this.unexpectedErrorHandler;\n      }\n    }, {\n      key: \"onUnexpectedError\",\n      value: function onUnexpectedError(e) {\n        this.unexpectedErrorHandler(e);\n        this.emit(e);\n      } // For external errors, we don't want the listeners to be called\n\n    }, {\n      key: \"onUnexpectedExternalError\",\n      value: function onUnexpectedExternalError(e) {\n        this.unexpectedErrorHandler(e);\n      }\n    }]);\n\n    return ErrorHandler;\n  }();\n\n  var errorHandler = new ErrorHandler();\n\n  function onUnexpectedError(e) {\n    // ignore errors from cancelled promises\n    if (!isPromiseCanceledError(e)) {\n      errorHandler.onUnexpectedError(e);\n    }\n\n    return undefined;\n  }\n\n  var ExtendableError =\n  /*#__PURE__*/\n  function (_Error) {\n    _inherits(ExtendableError, _Error);\n\n    function ExtendableError(message) {\n      var _this2;\n\n      _classCallCheck(this, ExtendableError);\n\n      _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ExtendableError).call(this, message));\n      _this2.name = _this2.constructor.name;\n\n      if (typeof Error.captureStackTrace === 'function') {\n        Error.captureStackTrace(_assertThisInitialized(_this2), _this2.constructor);\n      } else {\n        _this2.stack = new Error(message).stack;\n      }\n\n      return _this2;\n    }\n\n    return ExtendableError;\n  }(_wrapNativeSuper(Error));\n\n  var CanceledError =\n  /*#__PURE__*/\n  function (_ExtendableError) {\n    _inherits(CanceledError, _ExtendableError);\n\n    function CanceledError() {\n      _classCallCheck(this, CanceledError);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(CanceledError).apply(this, arguments));\n    }\n\n    return CanceledError;\n  }(ExtendableError);\n  /**\r\n   * Checks if the given error is a promise in canceled state\r\n   */\n\n\n  function isPromiseCanceledError(error) {\n    return error instanceof CanceledError;\n  }\n\n  function _dispose(first) {\n    for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      rest[_key - 1] = arguments[_key];\n    }\n\n    if (Array.isArray(first)) {\n      first.forEach(function (d) {\n        return d && d.dispose();\n      });\n      return [];\n    } else if (rest.length === 0) {\n      if (first) {\n        first.dispose();\n        return first;\n      }\n\n      return undefined;\n    } else {\n      _dispose(first);\n\n      _dispose(rest);\n\n      return [];\n    }\n  }\n\n  function combinedDisposable() {\n    for (var _len2 = arguments.length, disposables = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      disposables[_key2] = arguments[_key2];\n    }\n\n    return {\n      dispose: function dispose() {\n        return _dispose(disposables);\n      }\n    };\n  }\n\n  var DisposableStore =\n  /*#__PURE__*/\n  function () {\n    function DisposableStore() {\n      _classCallCheck(this, DisposableStore);\n\n      this._toDispose = new Set();\n      this._isDisposed = false;\n    }\n    /**\r\n     * Dispose of all registered disposables and mark this object as disposed.\r\n     *\r\n     * Any future disposables added to this object will be disposed of on `add`.\r\n     */\n\n\n    _createClass(DisposableStore, [{\n      key: \"dispose\",\n      value: function dispose() {\n        this._isDisposed = true;\n        this.clear();\n      }\n      /**\r\n       * Dispose of all registered disposables but do not mark this object as disposed.\r\n       */\n\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        this._toDispose.forEach(function (item) {\n          return item.dispose();\n        });\n\n        this._toDispose.clear();\n      }\n    }, {\n      key: \"add\",\n      value: function add(t) {\n        if (this._isDisposed) {\n          console.warn('Registering disposable on object that has already been disposed.');\n          t.dispose();\n        } else {\n          this._toDispose.add(t);\n        }\n\n        return t;\n      }\n    }]);\n\n    return DisposableStore;\n  }();\n\n  var Disposable =\n  /*#__PURE__*/\n  function () {\n    function Disposable() {\n      _classCallCheck(this, Disposable);\n\n      this._store = new DisposableStore();\n    }\n\n    _createClass(Disposable, [{\n      key: \"dispose\",\n      value: function dispose() {\n        this._store.dispose();\n      }\n    }, {\n      key: \"_register\",\n      value: function _register(t) {\n        return this._store.add(t);\n      }\n    }]);\n\n    return Disposable;\n  }();\n\n  Disposable.None = Object.freeze({\n    dispose: function dispose() {}\n  });\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n\n  var FIN = {\n    done: true,\n    value: undefined\n  };\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n\n  var Node = function Node(element) {\n    _classCallCheck(this, Node);\n\n    this.element = element;\n    this.next = Node.Undefined;\n    this.prev = Node.Undefined;\n  };\n\n  Node.Undefined = new Node(undefined);\n\n  var LinkedList =\n  /*#__PURE__*/\n  function () {\n    function LinkedList() {\n      _classCallCheck(this, LinkedList);\n\n      this._first = Node.Undefined;\n      this._last = Node.Undefined;\n      this._size = 0;\n    }\n\n    _createClass(LinkedList, [{\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return this._first === Node.Undefined;\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        this._first = Node.Undefined;\n        this._last = Node.Undefined;\n        this._size = 0;\n      }\n    }, {\n      key: \"unshift\",\n      value: function unshift(element) {\n        return this._insert(element, false);\n      }\n    }, {\n      key: \"push\",\n      value: function push(element) {\n        return this._insert(element, true);\n      }\n    }, {\n      key: \"_insert\",\n      value: function _insert(element, atTheEnd) {\n        var _this3 = this;\n\n        var newNode = new Node(element);\n\n        if (this._first === Node.Undefined) {\n          this._first = newNode;\n          this._last = newNode;\n        } else if (atTheEnd) {\n          // push\n          var oldLast = this._last;\n          this._last = newNode;\n          newNode.prev = oldLast;\n          oldLast.next = newNode;\n        } else {\n          // unshift\n          var oldFirst = this._first;\n          this._first = newNode;\n          newNode.next = oldFirst;\n          oldFirst.prev = newNode;\n        }\n\n        this._size += 1;\n        var didRemove = false;\n        return function () {\n          if (!didRemove) {\n            didRemove = true;\n\n            _this3._remove(newNode);\n          }\n        };\n      }\n    }, {\n      key: \"shift\",\n      value: function shift() {\n        if (this._first === Node.Undefined) {\n          return undefined;\n        } else {\n          var res = this._first.element;\n\n          this._remove(this._first);\n\n          return res;\n        }\n      }\n    }, {\n      key: \"pop\",\n      value: function pop() {\n        if (this._last === Node.Undefined) {\n          return undefined;\n        } else {\n          var res = this._last.element;\n\n          this._remove(this._last);\n\n          return res;\n        }\n      }\n    }, {\n      key: \"_remove\",\n      value: function _remove(node) {\n        if (node.prev !== Node.Undefined && node.next !== Node.Undefined) {\n          // middle\n          var anchor = node.prev;\n          anchor.next = node.next;\n          node.next.prev = anchor;\n        } else if (node.prev === Node.Undefined && node.next === Node.Undefined) {\n          // only node\n          this._first = Node.Undefined;\n          this._last = Node.Undefined;\n        } else if (node.next === Node.Undefined) {\n          // last\n          this._last = this._last.prev;\n          this._last.next = Node.Undefined;\n        } else if (node.prev === Node.Undefined) {\n          // first\n          this._first = this._first.next;\n          this._first.prev = Node.Undefined;\n        } // done\n\n\n        this._size -= 1;\n      }\n    }, {\n      key: \"iterator\",\n      value: function iterator() {\n        var element;\n        var node = this._first;\n        return {\n          next: function next() {\n            if (node === Node.Undefined) {\n              return FIN;\n            }\n\n            if (!element) {\n              element = {\n                done: false,\n                value: node.element\n              };\n            } else {\n              element.value = node.element;\n            }\n\n            node = node.next;\n            return element;\n          }\n        };\n      }\n    }, {\n      key: \"toArray\",\n      value: function toArray() {\n        var result = [];\n\n        for (var node = this._first; node !== Node.Undefined; node = node.next) {\n          result.push(node.element);\n        }\n\n        return result;\n      }\n    }, {\n      key: \"size\",\n      get: function get() {\n        return this._size;\n      }\n    }]);\n\n    return LinkedList;\n  }();\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n\n\n  var Event;\n\n  (function (Event) {\n    var _disposable = {\n      dispose: function dispose() {}\n    };\n\n    Event.None = function () {\n      return _disposable;\n    };\n    /**\r\n     * Given an event, returns another event which only fires once.\r\n     */\n\n\n    function _once(event) {\n      return function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        // we need this, in case the event fires during the listener call\n        var didFire = false;\n        var result;\n        result = event(function (e) {\n          if (didFire) {\n            return;\n          } else if (result) {\n            result.dispose();\n          } else {\n            didFire = true;\n          }\n\n          return listener.call(thisArgs, e);\n        }, null, disposables);\n\n        if (didFire) {\n          result.dispose();\n        }\n\n        return result;\n      };\n    }\n\n    Event.once = _once;\n    /**\r\n     * Given an event and a `map` function, returns another event which maps each element\r\n     * throught the mapping function.\r\n     */\n\n    function _map(event, map) {\n      return snapshot(function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        return event(function (i) {\n          return listener.call(thisArgs, map(i));\n        }, null, disposables);\n      });\n    }\n\n    Event.map = _map;\n    /**\r\n     * Given an event and an `each` function, returns another identical event and calls\r\n     * the `each` function per each element.\r\n     */\n\n    function _forEach(event, each) {\n      return snapshot(function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        return event(function (i) {\n          each(i);\n          listener.call(thisArgs, i);\n        }, null, disposables);\n      });\n    }\n\n    Event.forEach = _forEach;\n\n    function _filter(event, filter) {\n      return snapshot(function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        return event(function (e) {\n          return filter(e) && listener.call(thisArgs, e);\n        }, null, disposables);\n      });\n    }\n\n    Event.filter = _filter;\n    /**\r\n     * Given an event, returns the same event but typed as `Event<void>`.\r\n     */\n\n    function signal(event) {\n      return event;\n    }\n\n    Event.signal = signal;\n    /**\r\n     * Given a collection of events, returns a single event which emits\r\n     * whenever any of the provided events emit.\r\n     */\n\n    function any() {\n      for (var _len3 = arguments.length, events = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        events[_key3] = arguments[_key3];\n      }\n\n      return function (listener) {\n        var thisArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var disposables = arguments.length > 2 ? arguments[2] : undefined;\n        return combinedDisposable.apply(void 0, _toConsumableArray(events.map(function (event) {\n          return event(function (e) {\n            return listener.call(thisArgs, e);\n          }, null, disposables);\n        })));\n      };\n    }\n\n    Event.any = any;\n    /**\r\n     * Given an event and a `merge` function, returns another event which maps each element\r\n     * and the cummulative result throught the `merge` function. Similar to `map`, but with memory.\r\n     */\n\n    function _reduce(event, merge, initial) {\n      var output = initial;\n      return _map(event, function (e) {\n        output = merge(output, e);\n        return output;\n      });\n    }\n\n    Event.reduce = _reduce;\n    /**\r\n     * Given a chain of event processing functions (filter, map, etc), each\r\n     * function will be invoked per event & per listener. Snapshotting an event\r\n     * chain allows each function to be invoked just once per event.\r\n     */\n\n    function snapshot(event) {\n      var listener;\n      var emitter = new Emitter({\n        onFirstListenerAdd: function onFirstListenerAdd() {\n          listener = event(emitter.fire, emitter);\n        },\n        onLastListenerRemove: function onLastListenerRemove() {\n          listener.dispose();\n        }\n      });\n      return emitter.event;\n    }\n\n    Event.snapshot = snapshot;\n\n    function debounce(event, merge) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n      var leading = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var leakWarningThreshold = arguments.length > 4 ? arguments[4] : undefined;\n      var subscription;\n      var output = undefined;\n      var handle = undefined;\n      var numDebouncedCalls = 0;\n      var emitter = new Emitter({\n        leakWarningThreshold: leakWarningThreshold,\n        onFirstListenerAdd: function onFirstListenerAdd() {\n          subscription = event(function (cur) {\n            numDebouncedCalls++;\n            output = merge(output, cur);\n\n            if (leading && !handle) {\n              emitter.fire(output);\n            }\n\n            clearTimeout(handle);\n            handle = setTimeout(function () {\n              var _output = output;\n              output = undefined;\n              handle = undefined;\n\n              if (!leading || numDebouncedCalls > 1) {\n                emitter.fire(_output);\n              }\n\n              numDebouncedCalls = 0;\n            }, delay);\n          });\n        },\n        onLastListenerRemove: function onLastListenerRemove() {\n          subscription.dispose();\n        }\n      });\n      return emitter.event;\n    }\n\n    Event.debounce = debounce;\n    /**\r\n     * Given an event, it returns another event which fires only once and as soon as\r\n     * the input event emits. The event data is the number of millis it took for the\r\n     * event to fire.\r\n     */\n\n    function stopwatch(event) {\n      var start = new Date().getTime();\n      return _map(_once(event), function (_) {\n        return new Date().getTime() - start;\n      });\n    }\n\n    Event.stopwatch = stopwatch;\n    /**\r\n     * Given an event, it returns another event which fires only when the event\r\n     * element changes.\r\n     */\n\n    function _latch(event) {\n      var firstCall = true;\n      var cache;\n      return _filter(event, function (value) {\n        var shouldEmit = firstCall || value !== cache;\n        firstCall = false;\n        cache = value;\n        return shouldEmit;\n      });\n    }\n\n    Event.latch = _latch;\n    /**\r\n     * Buffers the provided event until a first listener comes\r\n     * along, at which point fire all the events at once and\r\n     * pipe the event from then on.\r\n     *\r\n     * ```typescript\r\n     * const emitter = new Emitter<number>();\r\n     * const event = emitter.event;\r\n     * const bufferedEvent = buffer(event);\r\n     *\r\n     * emitter.fire(1);\r\n     * emitter.fire(2);\r\n     * emitter.fire(3);\r\n     * // nothing...\r\n     *\r\n     * const listener = bufferedEvent(num => console.log(num));\r\n     * // 1, 2, 3\r\n     *\r\n     * emitter.fire(4);\r\n     * // 4\r\n     * ```\r\n     */\n\n    function buffer(event) {\n      var nextTick = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _buffer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n      var buffer = _buffer.slice();\n\n      var listener = event(function (e) {\n        if (buffer) {\n          buffer.push(e);\n        } else {\n          emitter.fire(e);\n        }\n      });\n\n      var flush = function flush() {\n        if (buffer) {\n          buffer.forEach(function (e) {\n            return emitter.fire(e);\n          });\n        }\n\n        buffer = null;\n      };\n\n      var emitter = new Emitter({\n        onFirstListenerAdd: function onFirstListenerAdd() {\n          if (!listener) {\n            listener = event(function (e) {\n              return emitter.fire(e);\n            });\n          }\n        },\n        onFirstListenerDidAdd: function onFirstListenerDidAdd() {\n          if (buffer) {\n            if (nextTick) {\n              setTimeout(flush, 0);\n            } else {\n              flush();\n            }\n          }\n        },\n        onLastListenerRemove: function onLastListenerRemove() {\n          if (listener) {\n            listener.dispose();\n          }\n\n          listener = null;\n        }\n      });\n      return emitter.event;\n    }\n\n    Event.buffer = buffer;\n\n    var ChainableEvent =\n    /*#__PURE__*/\n    function () {\n      function ChainableEvent(event) {\n        _classCallCheck(this, ChainableEvent);\n\n        this.event = event;\n      }\n\n      _createClass(ChainableEvent, [{\n        key: \"map\",\n        value: function map(fn) {\n          return new ChainableEvent(_map(this.event, fn));\n        }\n      }, {\n        key: \"forEach\",\n        value: function forEach(fn) {\n          return new ChainableEvent(_forEach(this.event, fn));\n        }\n      }, {\n        key: \"filter\",\n        value: function filter(fn) {\n          return new ChainableEvent(_filter(this.event, fn));\n        }\n      }, {\n        key: \"reduce\",\n        value: function reduce(merge, initial) {\n          return new ChainableEvent(_reduce(this.event, merge, initial));\n        }\n      }, {\n        key: \"latch\",\n        value: function latch() {\n          return new ChainableEvent(_latch(this.event));\n        }\n      }, {\n        key: \"on\",\n        value: function on(listener, thisArgs, disposables) {\n          return this.event(listener, thisArgs, disposables);\n        }\n      }, {\n        key: \"once\",\n        value: function once(listener, thisArgs, disposables) {\n          return _once(this.event)(listener, thisArgs, disposables);\n        }\n      }]);\n\n      return ChainableEvent;\n    }();\n\n    function chain(event) {\n      return new ChainableEvent(event);\n    }\n\n    Event.chain = chain;\n\n    function fromNodeEventEmitter(emitter, eventName) {\n      var map = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (id) {\n        return id;\n      };\n\n      var fn = function fn() {\n        return result.fire(map.apply(void 0, arguments));\n      };\n\n      var onFirstListenerAdd = function onFirstListenerAdd() {\n        return emitter.on(eventName, fn);\n      };\n\n      var onLastListenerRemove = function onLastListenerRemove() {\n        return emitter.removeListener(eventName, fn);\n      };\n\n      var result = new Emitter({\n        onFirstListenerAdd: onFirstListenerAdd,\n        onLastListenerRemove: onLastListenerRemove\n      });\n      return result.event;\n    }\n\n    Event.fromNodeEventEmitter = fromNodeEventEmitter;\n\n    function fromPromise(promise) {\n      var emitter = new Emitter();\n      var shouldEmit = false;\n      promise.then(undefined, function () {\n        return null;\n      }).then(function () {\n        if (!shouldEmit) {\n          setTimeout(function () {\n            return emitter.fire(undefined);\n          }, 0);\n        } else {\n          emitter.fire(undefined);\n        }\n      });\n      shouldEmit = true;\n      return emitter.event;\n    }\n\n    Event.fromPromise = fromPromise;\n\n    function toPromise(event) {\n      return new Promise(function (c) {\n        return _once(event)(c);\n      });\n    }\n\n    Event.toPromise = toPromise;\n  })(Event || (Event = {}));\n\n  var _globalLeakWarningThreshold = -1;\n\n  var LeakageMonitor =\n  /*#__PURE__*/\n  function () {\n    function LeakageMonitor(customThreshold) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Math.random().toString(18).slice(2, 5);\n\n      _classCallCheck(this, LeakageMonitor);\n\n      this.customThreshold = customThreshold;\n      this.name = name;\n      this._warnCountdown = 0;\n    }\n\n    _createClass(LeakageMonitor, [{\n      key: \"dispose\",\n      value: function dispose() {\n        if (this._stacks) {\n          this._stacks.clear();\n        }\n      }\n    }, {\n      key: \"check\",\n      value: function check(listenerCount) {\n        var _this4 = this;\n\n        var threshold = _globalLeakWarningThreshold;\n\n        if (typeof this.customThreshold === 'number') {\n          threshold = this.customThreshold;\n        }\n\n        if (threshold <= 0 || listenerCount < threshold) {\n          return undefined;\n        }\n\n        if (!this._stacks) {\n          this._stacks = new Map();\n        }\n\n        var stack = new Error().stack.split('\\n').slice(3).join('\\n');\n        var count = this._stacks.get(stack) || 0;\n\n        this._stacks.set(stack, count + 1);\n\n        this._warnCountdown -= 1;\n\n        if (this._warnCountdown <= 0) {\n          // only warn on first exceed and then every time the limit\n          // is exceeded by 50% again\n          this._warnCountdown = threshold * 0.5; // find most frequent listener and print warning\n\n          var topStack;\n          var topCount = 0;\n\n          this._stacks.forEach(function (count, stack) {\n            if (!topStack || topCount < count) {\n              topStack = stack;\n              topCount = count;\n            }\n          });\n\n          console.warn(\"[\".concat(this.name, \"] potential listener LEAK detected, having \").concat(listenerCount, \" listeners already. MOST frequent listener (\").concat(topCount, \"):\"));\n          console.warn(topStack);\n        }\n\n        return function () {\n          var count = _this4._stacks.get(stack) || 0;\n\n          _this4._stacks.set(stack, count - 1);\n        };\n      }\n    }]);\n\n    return LeakageMonitor;\n  }();\n  /**\r\n   * The Emitter can be used to expose an Event to the public\r\n   * to fire it from the insides.\r\n   * Sample:\r\n      class Document {\r\n          private _onDidChange = new Emitter<(value:string)=>any>();\r\n          public onDidChange = this._onDidChange.event;\r\n          // getter-style\r\n          // get onDidChange(): Event<(value:string)=>any> {\r\n          // \treturn this._onDidChange.event;\r\n          // }\r\n          private _doIt() {\r\n              //...\r\n              this._onDidChange.fire(value);\r\n          }\r\n      }\r\n   */\n\n\n  var Emitter =\n  /*#__PURE__*/\n  function () {\n    function Emitter(options) {\n      _classCallCheck(this, Emitter);\n\n      this._disposed = false;\n      this._options = options;\n      this._leakageMon = _globalLeakWarningThreshold > 0 ? new LeakageMonitor(this._options && this._options.leakWarningThreshold) : undefined;\n    }\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\n\n\n    _createClass(Emitter, [{\n      key: \"fire\",\n\n      /**\r\n       * To be kept private to fire an event to\r\n       * subscribers\r\n       */\n      value: function fire(event) {\n        if (this._listeners) {\n          // put all [listener,event]-pairs into delivery queue\n          // then emit all event. an inner/nested event might be\n          // the driver of this\n          if (!this._deliveryQueue) {\n            this._deliveryQueue = new LinkedList();\n          }\n\n          for (var iter = this._listeners.iterator(), e = iter.next(); !e.done; e = iter.next()) {\n            this._deliveryQueue.push([e.value, event]);\n          }\n\n          while (this._deliveryQueue.size > 0) {\n            var _this$_deliveryQueue$ = this._deliveryQueue.shift(),\n                _this$_deliveryQueue$2 = _slicedToArray(_this$_deliveryQueue$, 2),\n                listener = _this$_deliveryQueue$2[0],\n                _event = _this$_deliveryQueue$2[1];\n\n            try {\n              if (typeof listener === 'function') {\n                listener.call(undefined, _event);\n              } else {\n                listener[0].call(listener[1], _event);\n              }\n            } catch (e) {\n              onUnexpectedError(e);\n            }\n          }\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        if (this._listeners) {\n          this._listeners.clear();\n        }\n\n        if (this._deliveryQueue) {\n          this._deliveryQueue.clear();\n        }\n\n        if (this._leakageMon) {\n          this._leakageMon.dispose();\n        }\n\n        this._disposed = true;\n      }\n    }, {\n      key: \"event\",\n      get: function get() {\n        var _this5 = this;\n\n        if (!this._event) {\n          this._event = function (listener, thisArgs, disposables) {\n            if (!_this5._listeners) {\n              _this5._listeners = new LinkedList();\n            }\n\n            var firstListener = _this5._listeners.isEmpty();\n\n            if (firstListener && _this5._options && _this5._options.onFirstListenerAdd) {\n              _this5._options.onFirstListenerAdd(_this5);\n            }\n\n            var remove = _this5._listeners.push(!thisArgs ? listener : [listener, thisArgs]);\n\n            if (firstListener && _this5._options && _this5._options.onFirstListenerDidAdd) {\n              _this5._options.onFirstListenerDidAdd(_this5);\n            }\n\n            if (_this5._options && _this5._options.onListenerDidAdd) {\n              _this5._options.onListenerDidAdd(_this5, listener, thisArgs);\n            } // check and record this emitter for potential leakage\n\n\n            var removeMonitor;\n\n            if (_this5._leakageMon) {\n              removeMonitor = _this5._leakageMon.check(_this5._listeners.size);\n            }\n\n            var result;\n            result = {\n              dispose: function dispose() {\n                if (removeMonitor) {\n                  removeMonitor();\n                }\n\n                result.dispose = Emitter._noop;\n\n                if (!_this5._disposed) {\n                  remove();\n\n                  if (_this5._options && _this5._options.onLastListenerRemove) {\n                    var hasListeners = _this5._listeners && !_this5._listeners.isEmpty();\n\n                    if (!hasListeners) {\n                      _this5._options.onLastListenerRemove(_this5);\n                    }\n                  }\n                }\n              }\n            };\n\n            if (Array.isArray(disposables)) {\n              disposables.push(result);\n            }\n\n            return result;\n          };\n        }\n\n        return this._event;\n      }\n    }]);\n\n    return Emitter;\n  }();\n\n  Emitter._noop = function () {};\n  /*---------------------------------------------------------------------------------------------\r\n   *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n   *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n   *--------------------------------------------------------------------------------------------*/\n\n\n  var shortcutEvent = Object.freeze(function (callback, context) {\n    var handle = setTimeout(callback.bind(context), 0);\n    return {\n      dispose: function dispose() {\n        clearTimeout(handle);\n      }\n    };\n  });\n  var CancellationToken;\n\n  (function (CancellationToken) {\n    function isCancellationToken(thing) {\n      if (thing === CancellationToken.None || thing === CancellationToken.Cancelled) {\n        return true;\n      }\n\n      if (thing instanceof MutableToken) {\n        return true;\n      }\n\n      if (!thing || typeof thing !== 'object') {\n        return false;\n      }\n\n      return typeof thing.isCancellationRequested === 'boolean' && typeof thing.onCancellationRequested === 'function';\n    }\n\n    CancellationToken.isCancellationToken = isCancellationToken;\n    CancellationToken.None = Object.freeze({\n      isCancellationRequested: false,\n      onCancellationRequested: Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n      isCancellationRequested: true,\n      onCancellationRequested: shortcutEvent\n    });\n  })(CancellationToken || (CancellationToken = {}));\n\n  var MutableToken =\n  /*#__PURE__*/\n  function () {\n    function MutableToken() {\n      _classCallCheck(this, MutableToken);\n\n      this._isCancelled = false;\n      this._emitter = null;\n    }\n\n    _createClass(MutableToken, [{\n      key: \"cancel\",\n      value: function cancel() {\n        if (!this._isCancelled) {\n          this._isCancelled = true;\n\n          if (this._emitter) {\n            this._emitter.fire(undefined);\n\n            this.dispose();\n          }\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        if (this._emitter) {\n          this._emitter.dispose();\n\n          this._emitter = null;\n        }\n      }\n    }, {\n      key: \"isCancellationRequested\",\n      get: function get() {\n        return this._isCancelled;\n      }\n    }, {\n      key: \"onCancellationRequested\",\n      get: function get() {\n        if (this._isCancelled) {\n          return shortcutEvent;\n        }\n\n        if (!this._emitter) {\n          this._emitter = new Emitter();\n        }\n\n        return this._emitter.event;\n      }\n    }]);\n\n    return MutableToken;\n  }();\n\n  (function () {\n    if (typeof requestIdleCallback !== 'function' || typeof cancelIdleCallback !== 'function') {\n      var dummyIdle = Object.freeze({\n        didTimeout: true,\n        timeRemaining: function timeRemaining() {\n          return 15;\n        }\n      });\n    }\n  })();\n\n  var ResolvedEntryKind;\n\n  (function (ResolvedEntryKind) {\n    ResolvedEntryKind[\"Directory\"] = \"directory\";\n    ResolvedEntryKind[\"File\"] = \"file\";\n  })(ResolvedEntryKind || (ResolvedEntryKind = {}));\n\n  function isValidPackageJson(json) {\n    return typeof json === 'object' && json !== null && !hasInvalidOptionalStringField(json, 'name') && !hasInvalidOptionalStringField(json, 'version') && !hasInvalidBrowserField(json) && !hasInvalidOptionalStringField(json, 'main') && !hasInvalidOptionalStringField(json, 'module') && !hasInvalidOptionalStringField(json, 'jsnext:main') && !hasInvalidOptionalStringField(json, 'unpkg') && !hasInvalidDependenciesField(json, 'dependencies') && !hasInvalidDependenciesField(json, 'devDependencies') && !hasInvalidDependenciesField(json, 'peerDependencies');\n  }\n\n  function hasInvalidBrowserField(json) {\n    var error = '';\n    var browser = json.browser;\n\n    if (browser) {\n      if (typeof browser === 'object') {\n        for (var key in browser) {\n          if (typeof key !== 'string') {\n            error = \"The key \".concat(key, \" of .browser must be a string\");\n            break;\n          }\n\n          if (typeof browser[key] !== 'string' && browser[key] !== false) {\n            error = \"The value \".concat(key, \" of .browser must be a string or false\");\n            break;\n          }\n        }\n      }\n    }\n\n    return error;\n  }\n\n  function hasInvalidOptionalStringField(json, field) {\n    return json[field] !== undefined && typeof json[field] !== 'string';\n  }\n\n  function hasInvalidDependenciesField(json, field) {\n    return json[field] !== undefined && typeof json[field] === 'object' && json[field] !== null && !Object.keys(json[field]).every(function (key) {\n      return typeof key === 'string' && typeof json[field][key] === 'string';\n    });\n  }\n\n  var CHAR_DOT = 46;\n  /* . */\n\n  var CHAR_FORWARD_SLASH = 47;\n  /* / */\n\n  var TRAILING_SLASH_RX = /\\/?$/;\n\n  function ensureTrailingSlash(pathname) {\n    return pathname.replace(TRAILING_SLASH_RX, '/');\n  }\n\n  function parseBufferAsPackageJson(decoder, content, spec) {\n    try {\n      var text = decoder.decode(content);\n      return parseTextAsPackageJson(text, spec);\n    } catch (err) {\n      throw new Error(\"Error decoding manifest buffer for package \".concat(spec, \": \").concat(err.message));\n    }\n  }\n\n  function parseTextAsPackageJson(text, spec) {\n    var json;\n\n    try {\n      json = JSON.parse(text);\n    } catch (err) {\n      throw new Error(\"Error parsing manifest as json for package \".concat(spec, \": \").concat(err.message));\n    }\n\n    if (!isValidPackageJson(json)) {\n      throw new Error(\"Invalid manifest for the package \".concat(spec));\n    }\n\n    return json;\n  }\n\n  function getFirstPathSegmentAfterPrefix(child, parent) {\n    var childHref = child.pathname;\n    var parentHref = parent.pathname;\n    var parentOffset = parentHref.charAt(parentHref.length - 1) === '/' ? -1 : 0;\n\n    for (var i = 0; i <= childHref.length; i++) {\n      if (i < parentHref.length) {\n        if (childHref.charAt(i) !== parentHref.charAt(i)) {\n          throw new Error(\"The child entry \".concat(child.href, \" does not have the pathname of \").concat(parent.href, \" as a prefix\"));\n        }\n      } else if (i === parentHref.length + parentOffset) {\n        if (childHref.charAt(i) !== '/') {\n          throw new Error(\"The child entry \".concat(child.href, \" does not have the pathname of \").concat(parent.href, \" as a prefix\"));\n        }\n      } else if (childHref.charAt(i) === '/') {\n        return childHref.slice(parentHref.length + 1 + parentOffset, i);\n      }\n    }\n\n    return childHref.slice(parentHref.length + 1 + parentOffset);\n  }\n\n  function validateString(value, name) {\n    if (typeof value !== 'string') {\n      throw new TypeError(\"The '\".concat(name, \"' argument must be of type string but got \").concat(typeof value));\n    }\n  }\n\n  function basename(path, ext) {\n    if (ext !== undefined) {\n      validateString(ext, 'ext');\n    }\n\n    validateString(path, 'path');\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) {\n        return '';\n      }\n\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n\n      for (i = path.length - 1; i >= start; --i) {\n        var code = path.charCodeAt(i);\n\n        if (isPathSeparator(code)) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) {\n        end = firstNonSlashEnd;\n      } else if (end === -1) {\n        end = path.length;\n      }\n\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= start; --i) {\n        if (isPathSeparator(path.charCodeAt(i))) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) {\n        return '';\n      }\n\n      return path.slice(start, end);\n    }\n  }\n\n  function extname(path) {\n    validateString(path, 'path');\n    var start = 0;\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true; // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n\n    var preDotState = 0;\n\n    for (var i = path.length - 1; i >= start; --i) {\n      var code = path.charCodeAt(i);\n\n      if (isPathSeparator(code)) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n\n        continue;\n      }\n\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n\n      if (code === CHAR_DOT) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) {\n          startDot = i;\n        } else if (preDotState !== 1) {\n          preDotState = 1;\n        }\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 || // We saw a non-dot character immediately before the dot\n    preDotState === 0 || // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n\n    return path.slice(startDot, end);\n  }\n\n  function dirname(path) {\n    validateString(path, 'path');\n    var len = path.length;\n\n    if (len === 0) {\n      return '.';\n    }\n\n    var rootEnd = -1;\n    var end = -1;\n    var matchedSlash = true;\n    var offset = 0;\n    var code = path.charCodeAt(0); // Try to match a root\n\n    if (len > 1) {\n      if (isPathSeparator(code)) {\n        // Possible UNC root\n        rootEnd = offset = 1;\n\n        if (isPathSeparator(path.charCodeAt(1))) {\n          // Matched double path separator at beginning\n          var j = 2;\n          var last = j; // Match 1 or more non-path separators\n\n          for (; j < len; ++j) {\n            if (isPathSeparator(path.charCodeAt(j))) {\n              break;\n            }\n          }\n\n          if (j < len && j !== last) {\n            // Matched!\n            last = j; // Match 1 or more path separators\n\n            for (; j < len; ++j) {\n              if (!isPathSeparator(path.charCodeAt(j))) {\n                break;\n              }\n            }\n\n            if (j < len && j !== last) {\n              // Matched!\n              last = j; // Match 1 or more non-path separators\n\n              for (; j < len; ++j) {\n                if (isPathSeparator(path.charCodeAt(j))) {\n                  break;\n                }\n              }\n\n              if (j === len) {\n                // We matched a UNC root only\n                return path;\n              }\n\n              if (j !== last) {\n                // We matched a UNC root with leftovers\n                // Offset by 1 to include the separator after the UNC root to\n                // treat it as a \"normal root\" on top of a (UNC) root\n                rootEnd = offset = j + 1;\n              }\n            }\n          }\n        }\n      }\n    } else if (isPathSeparator(code)) {\n      // `path` contains just a path separator, exit early to avoid\n      // unnecessary work\n      return path;\n    }\n\n    for (var i = len - 1; i >= offset; --i) {\n      if (isPathSeparator(path.charCodeAt(i))) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) {\n      if (rootEnd === -1) {\n        return '.';\n      } else {\n        end = rootEnd;\n      }\n    }\n\n    return path.slice(0, end);\n  }\n\n  function join(initialSegment) {\n    var pathname = initialSegment;\n\n    for (var i = 0; i < (arguments.length <= 1 ? 0 : arguments.length - 1); i++) {\n      var segment = i + 1 < 1 || arguments.length <= i + 1 ? undefined : arguments[i + 1];\n\n      if (segment.startsWith('/')) {\n        segment = segment.slice(1);\n      }\n\n      if (pathname.endsWith('/')) {\n        pathname += segment;\n      } else {\n        pathname += \"/\".concat(segment);\n      }\n    }\n\n    return pathname;\n  }\n\n  function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path = void 0;\n\n      if (i >= 0) {\n        path = i < 0 || arguments.length <= i ? undefined : arguments[i];\n      } else {\n        break;\n      }\n\n      validateString(path, 'path'); // Skip empty entries\n\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n    } // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n    // Normalize the path\n\n\n    resolvedPath = normalizeString(resolvedPath, !resolvedAbsolute, '/', isPathSeparator);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0) {\n        return '/' + resolvedPath;\n      } else {\n        return '/';\n      }\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  }\n\n  function isPathSeparator(code) {\n    return code === CHAR_FORWARD_SLASH;\n  }\n\n  function normalizeString(path, allowAboveRoot, separator, isPathSeparator) {\n    var res = '';\n    var lastSegmentLength = 0;\n    var lastSlash = -1;\n    var dots = 0;\n    var code = -1;\n\n    for (var i = 0; i <= path.length; ++i) {\n      if (i < path.length) {\n        code = path.charCodeAt(i);\n      } else if (isPathSeparator(code)) {\n        break;\n      } else {\n        code = CHAR_FORWARD_SLASH;\n      }\n\n      if (isPathSeparator(code)) {\n        if (lastSlash === i - 1 || dots === 1) ;else if (lastSlash !== i - 1 && dots === 2) {\n          if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== CHAR_DOT || res.charCodeAt(res.length - 2) !== CHAR_DOT) {\n            if (res.length > 2) {\n              var lastSlashIndex = res.lastIndexOf(separator);\n\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf(separator);\n              }\n\n              lastSlash = i;\n              dots = 0;\n              continue;\n            } else if (res.length === 2 || res.length === 1) {\n              res = '';\n              lastSegmentLength = 0;\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          }\n\n          if (allowAboveRoot) {\n            if (res.length > 0) {\n              res += \"\".concat(separator, \"..\");\n            } else {\n              res = '..';\n            }\n\n            lastSegmentLength = 2;\n          }\n        } else {\n          if (res.length > 0) {\n            res += separator + path.slice(lastSlash + 1, i);\n          } else {\n            res = path.slice(lastSlash + 1, i);\n          }\n\n          lastSegmentLength = i - lastSlash - 1;\n        }\n        lastSlash = i;\n        dots = 0;\n      } else if (code === CHAR_DOT && dots !== -1) {\n        ++dots;\n      } else {\n        dots = -1;\n      }\n    }\n\n    return res;\n  }\n\n  var util =\n  /*#__PURE__*/\n  Object.freeze({\n    __proto__: null,\n    ensureTrailingSlash: ensureTrailingSlash,\n    parseBufferAsPackageJson: parseBufferAsPackageJson,\n    getFirstPathSegmentAfterPrefix: getFirstPathSegmentAfterPrefix,\n    basename: basename,\n    extname: extname,\n    dirname: dirname,\n    join: join,\n    resolve: resolve\n  });\n\n  var AbstractResolverHost =\n  /*#__PURE__*/\n  function () {\n    function AbstractResolverHost() {\n      _classCallCheck(this, AbstractResolverHost);\n    }\n\n    _createClass(AbstractResolverHost, [{\n      key: \"getCanonicalUrl\",\n      value: function getCanonicalUrl(_resolver, url) {\n        return Promise.resolve(url);\n      }\n    }]);\n\n    return AbstractResolverHost;\n  }();\n\n  var FileEncoding;\n\n  (function (FileEncoding) {\n    FileEncoding[\"Base64\"] = \"base64\";\n    FileEncoding[\"UTF8\"] = \"utf-8\";\n  })(FileEncoding || (FileEncoding = {}));\n\n  var ResolverHostMemory =\n  /*#__PURE__*/\n  function (_AbstractResolverHost) {\n    _inherits(ResolverHostMemory, _AbstractResolverHost);\n\n    function ResolverHostMemory(files) {\n      var _this6;\n\n      var basePath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\".concat(Date.now());\n\n      _classCallCheck(this, ResolverHostMemory);\n\n      _this6 = _possibleConstructorReturn(this, _getPrototypeOf(ResolverHostMemory).call(this));\n      _this6.root = {\n        type: ResolvedEntryKind.Directory,\n        children: {}\n      };\n      _this6.textEncoder = new TextEncoder();\n      _this6.baseUrl = new URL(util.ensureTrailingSlash(basePath), 'memory:/');\n\n      for (var pathname in files) {\n        var file = files[pathname];\n\n        if (typeof file === 'string') {\n          _this6.addFile(pathname, file);\n        } else {\n          _this6.addFile(pathname, file.content, file.encoding);\n        }\n      }\n\n      return _this6;\n    }\n\n    _createClass(ResolverHostMemory, [{\n      key: \"getEntryAtPath\",\n      value: function getEntryAtPath(pathname) {\n        var segments = Array.isArray(pathname) ? pathname.slice() : pathname.split('/').filter(Boolean);\n        var parent = this.root;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = segments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var segment = _step.value;\n\n            if (!parent || parent.type !== ResolvedEntryKind.Directory) {\n              throw new Error(\"Failed to add \".concat(pathname));\n            }\n\n            parent = parent.children[segment];\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return parent;\n      }\n    }, {\n      key: \"addFile\",\n      value: function addFile(pathname, content) {\n        var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : FileEncoding.UTF8;\n        var segments = pathname.split('/').filter(Boolean);\n        var filename = segments.pop();\n\n        if (!filename) {\n          throw new Error(\"Unable to add a file without a filename '\".concat(pathname, \"'\"));\n        }\n\n        var parent = this.root;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = segments[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var segment = _step2.value;\n\n            if (!parent || parent.type !== ResolvedEntryKind.Directory) {\n              throw new Error(\"Failed to add \".concat(pathname));\n            }\n\n            var dir = parent.children[segment];\n\n            if (!dir) {\n              dir = {\n                type: ResolvedEntryKind.Directory,\n                children: {}\n              };\n              parent.children[segment] = dir;\n            }\n\n            parent = dir;\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        if (parent.type !== ResolvedEntryKind.Directory) {\n          throw new Error(\"Cannot add file to a non directory entry \".concat(pathname));\n        }\n\n        if (parent.children[filename]) {\n          throw new Error(\"Entry already exists at \".concat(pathname));\n        }\n\n        var entry = {\n          type: ResolvedEntryKind.File,\n          content: content,\n          encoding: encoding\n        };\n        parent.children[filename] = entry;\n        return entry;\n      }\n    }, {\n      key: \"getResolveRoot\",\n      value: function () {\n        var _getResolveRoot = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  return _context.abrupt(\"return\", this.baseUrl);\n\n                case 1:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function getResolveRoot() {\n          return _getResolveRoot.apply(this, arguments);\n        }\n\n        return getResolveRoot;\n      }()\n    }, {\n      key: \"getRoot\",\n      value: function getRoot() {\n        return this.baseUrl;\n      }\n    }, {\n      key: \"listEntries\",\n      value: function () {\n        var _listEntries = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2(_resolver, url) {\n          var _this7 = this;\n\n          var urlPathname, basePathname, fsPathname, parent;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  urlPathname = util.ensureTrailingSlash(url.pathname);\n                  basePathname = this.baseUrl.pathname;\n                  fsPathname = urlPathname.startsWith(basePathname) ? urlPathname.slice(basePathname.length - 1) : urlPathname;\n                  parent = this.getEntryAtPath(fsPathname);\n\n                  if (parent) {\n                    _context2.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"No such directory \".concat(url.href));\n\n                case 6:\n                  if (!(parent.type !== ResolvedEntryKind.Directory)) {\n                    _context2.next = 8;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot list entries under a file at \".concat(url.href));\n\n                case 8:\n                  return _context2.abrupt(\"return\", Object.keys(parent.children).map(function (filename) {\n                    var entry = parent.children[filename];\n                    return {\n                      url: _this7.urlFromPath(util.join(fsPathname, filename)),\n                      type: entry.type\n                    };\n                  }));\n\n                case 9:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function listEntries(_x, _x2) {\n          return _listEntries.apply(this, arguments);\n        }\n\n        return listEntries;\n      }()\n    }, {\n      key: \"readFileContent\",\n      value: function () {\n        var _readFileContent = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3(_resolver, url) {\n          var urlPathname, basePathname, fsPathname, entry, binSting, binArray;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  urlPathname = util.ensureTrailingSlash(url.pathname);\n                  basePathname = this.baseUrl.pathname;\n                  fsPathname = urlPathname.startsWith(basePathname) ? urlPathname.slice(basePathname.length - 1) : urlPathname;\n                  entry = this.getEntryAtPath(fsPathname);\n\n                  if (entry) {\n                    _context3.next = 6;\n                    break;\n                  }\n\n                  throw new Error(\"No such file \".concat(url.href));\n\n                case 6:\n                  if (!(entry.type !== 'file')) {\n                    _context3.next = 8;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot read content of a non-file at \".concat(url.href));\n\n                case 8:\n                  _context3.t0 = entry.encoding;\n                  _context3.next = _context3.t0 === FileEncoding.Base64 ? 11 : _context3.t0 === FileEncoding.UTF8 ? 15 : 16;\n                  break;\n\n                case 11:\n                  binSting = atob(entry.content);\n                  binArray = new Uint8Array(binSting.length);\n                  Array.prototype.forEach.call(binArray, function (_el, idx, arr) {\n                    arr[idx] = binSting.charCodeAt(idx);\n                  });\n                  return _context3.abrupt(\"return\", binArray.buffer);\n\n                case 15:\n                  return _context3.abrupt(\"return\", this.textEncoder.encode(entry.content).buffer);\n\n                case 16:\n                  throw new Error(\"Unsupported encoding for \".concat(url.href, \": \").concat(entry.encoding));\n\n                case 17:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n\n        function readFileContent(_x3, _x4) {\n          return _readFileContent.apply(this, arguments);\n        }\n\n        return readFileContent;\n      }()\n    }, {\n      key: \"urlFromPath\",\n      value: function urlFromPath(pathname) {\n        return new URL(util.join(this.baseUrl.pathname, pathname), this.baseUrl);\n      }\n    }]);\n\n    return ResolverHostMemory;\n  }(AbstractResolverHost);\n\n  exports.ResolverHostMemory = ResolverHostMemory;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","import _defineProperty from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _possibleConstructorReturn from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _classCallCheck from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { CancellationTokenSource, CanceledError } from 'ts-primitives';\nexport { CanceledError, CancellationToken, CancellationTokenSource } from 'ts-primitives';\nvar ResolvedEntryKind;\n\n(function (ResolvedEntryKind) {\n  ResolvedEntryKind[\"Directory\"] = \"directory\";\n  ResolvedEntryKind[\"File\"] = \"file\";\n})(ResolvedEntryKind || (ResolvedEntryKind = {}));\n\nfunction isValidPackageJson(json) {\n  return typeof json === 'object' && json !== null && !hasInvalidOptionalStringField(json, 'name') && !hasInvalidOptionalStringField(json, 'version') && !hasInvalidBrowserField(json) && !hasInvalidOptionalStringField(json, 'main') && !hasInvalidOptionalStringField(json, 'module') && !hasInvalidOptionalStringField(json, 'jsnext:main') && !hasInvalidOptionalStringField(json, 'unpkg') && !hasInvalidDependenciesField(json, 'dependencies') && !hasInvalidDependenciesField(json, 'devDependencies') && !hasInvalidDependenciesField(json, 'peerDependencies');\n}\n\nfunction hasInvalidBrowserField(json) {\n  var error = '';\n  var browser = json.browser;\n\n  if (browser) {\n    if (typeof browser === 'object') {\n      for (var key in browser) {\n        if (typeof key !== 'string') {\n          error = \"The key \".concat(key, \" of .browser must be a string\");\n          break;\n        }\n\n        if (typeof browser[key] !== 'string' && browser[key] !== false) {\n          error = \"The value \".concat(key, \" of .browser must be a string or false\");\n          break;\n        }\n      }\n    }\n  }\n\n  return error;\n}\n\nfunction hasInvalidOptionalStringField(json, field) {\n  return json[field] !== undefined && typeof json[field] !== 'string';\n}\n\nfunction hasInvalidDependenciesField(json, field) {\n  return json[field] !== undefined && typeof json[field] === 'object' && json[field] !== null && !Object.keys(json[field]).every(function (key) {\n    return typeof key === 'string' && typeof json[field][key] === 'string';\n  });\n}\n\nvar CHAR_DOT = 46;\n/* . */\n\nvar CHAR_FORWARD_SLASH = 47;\n/* / */\n\nvar TRAILING_SLASH_RX = /\\/?$/;\n\nfunction ensureTrailingSlash(pathname) {\n  return pathname.replace(TRAILING_SLASH_RX, '/');\n}\n\nfunction parseBufferAsPackageJson(decoder, content, spec) {\n  try {\n    var text = decoder.decode(content);\n    return parseTextAsPackageJson(text, spec);\n  } catch (err) {\n    throw new Error(\"Error decoding manifest buffer for package \".concat(spec, \": \").concat(err.message));\n  }\n}\n\nfunction parseTextAsPackageJson(text, spec) {\n  var json;\n\n  try {\n    json = JSON.parse(text);\n  } catch (err) {\n    throw new Error(\"Error parsing manifest as json for package \".concat(spec, \": \").concat(err.message));\n  }\n\n  if (!isValidPackageJson(json)) {\n    throw new Error(\"Invalid manifest for the package \".concat(spec));\n  }\n\n  return json;\n}\n\nfunction getFirstPathSegmentAfterPrefix(child, parent) {\n  var childHref = child.pathname;\n  var parentHref = parent.pathname;\n  var parentOffset = parentHref.charAt(parentHref.length - 1) === '/' ? -1 : 0;\n\n  for (var i = 0; i <= childHref.length; i++) {\n    if (i < parentHref.length) {\n      if (childHref.charAt(i) !== parentHref.charAt(i)) {\n        throw new Error(\"The child entry \".concat(child.href, \" does not have the pathname of \").concat(parent.href, \" as a prefix\"));\n      }\n    } else if (i === parentHref.length + parentOffset) {\n      if (childHref.charAt(i) !== '/') {\n        throw new Error(\"The child entry \".concat(child.href, \" does not have the pathname of \").concat(parent.href, \" as a prefix\"));\n      }\n    } else if (childHref.charAt(i) === '/') {\n      return childHref.slice(parentHref.length + 1 + parentOffset, i);\n    }\n  }\n\n  return childHref.slice(parentHref.length + 1 + parentOffset);\n}\n\nfunction validateString(value, name) {\n  if (typeof value !== 'string') {\n    throw new TypeError(\"The '\".concat(name, \"' argument must be of type string but got \").concat(typeof value));\n  }\n}\n\nfunction basename(path, ext) {\n  if (ext !== undefined) {\n    validateString(ext, 'ext');\n  }\n\n  validateString(path, 'path');\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n    if (ext.length === path.length && ext === path) {\n      return '';\n    }\n\n    var extIdx = ext.length - 1;\n    var firstNonSlashEnd = -1;\n\n    for (i = path.length - 1; i >= start; --i) {\n      var code = path.charCodeAt(i);\n\n      if (isPathSeparator(code)) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else {\n        if (firstNonSlashEnd === -1) {\n          // We saw the first non-path separator, remember this index in case\n          // we need it if the extension ends up not matching\n          matchedSlash = false;\n          firstNonSlashEnd = i + 1;\n        }\n\n        if (extIdx >= 0) {\n          // Try to match the explicit extension\n          if (code === ext.charCodeAt(extIdx)) {\n            if (--extIdx === -1) {\n              // We matched the extension, so mark this as the end of our path\n              // component\n              end = i;\n            }\n          } else {\n            // Extension does not match, so our result is the entire path\n            // component\n            extIdx = -1;\n            end = firstNonSlashEnd;\n          }\n        }\n      }\n    }\n\n    if (start === end) {\n      end = firstNonSlashEnd;\n    } else if (end === -1) {\n      end = path.length;\n    }\n\n    return path.slice(start, end);\n  } else {\n    for (i = path.length - 1; i >= start; --i) {\n      if (isPathSeparator(path.charCodeAt(i))) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // path component\n        matchedSlash = false;\n        end = i + 1;\n      }\n    }\n\n    if (end === -1) {\n      return '';\n    }\n\n    return path.slice(start, end);\n  }\n}\n\nfunction extname(path) {\n  validateString(path, 'path');\n  var start = 0;\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true; // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n\n  var preDotState = 0;\n\n  for (var i = path.length - 1; i >= start; --i) {\n    var code = path.charCodeAt(i);\n\n    if (isPathSeparator(code)) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now\n      if (!matchedSlash) {\n        startPart = i + 1;\n        break;\n      }\n\n      continue;\n    }\n\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n\n    if (code === CHAR_DOT) {\n      // If this is our first dot, mark it as the start of our extension\n      if (startDot === -1) {\n        startDot = i;\n      } else if (preDotState !== 1) {\n        preDotState = 1;\n      }\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 || // We saw a non-dot character immediately before the dot\n  preDotState === 0 || // The (right-most) trimmed path component is exactly '..'\n  preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n\n  return path.slice(startDot, end);\n}\n\nfunction dirname(path) {\n  validateString(path, 'path');\n  var len = path.length;\n\n  if (len === 0) {\n    return '.';\n  }\n\n  var rootEnd = -1;\n  var end = -1;\n  var matchedSlash = true;\n  var offset = 0;\n  var code = path.charCodeAt(0); // Try to match a root\n\n  if (len > 1) {\n    if (isPathSeparator(code)) {\n      // Possible UNC root\n      rootEnd = offset = 1;\n\n      if (isPathSeparator(path.charCodeAt(1))) {\n        // Matched double path separator at beginning\n        var j = 2;\n        var last = j; // Match 1 or more non-path separators\n\n        for (; j < len; ++j) {\n          if (isPathSeparator(path.charCodeAt(j))) {\n            break;\n          }\n        }\n\n        if (j < len && j !== last) {\n          // Matched!\n          last = j; // Match 1 or more path separators\n\n          for (; j < len; ++j) {\n            if (!isPathSeparator(path.charCodeAt(j))) {\n              break;\n            }\n          }\n\n          if (j < len && j !== last) {\n            // Matched!\n            last = j; // Match 1 or more non-path separators\n\n            for (; j < len; ++j) {\n              if (isPathSeparator(path.charCodeAt(j))) {\n                break;\n              }\n            }\n\n            if (j === len) {\n              // We matched a UNC root only\n              return path;\n            }\n\n            if (j !== last) {\n              // We matched a UNC root with leftovers\n              // Offset by 1 to include the separator after the UNC root to\n              // treat it as a \"normal root\" on top of a (UNC) root\n              rootEnd = offset = j + 1;\n            }\n          }\n        }\n      }\n    }\n  } else if (isPathSeparator(code)) {\n    // `path` contains just a path separator, exit early to avoid\n    // unnecessary work\n    return path;\n  }\n\n  for (var i = len - 1; i >= offset; --i) {\n    if (isPathSeparator(path.charCodeAt(i))) {\n      if (!matchedSlash) {\n        end = i;\n        break;\n      }\n    } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) {\n    if (rootEnd === -1) {\n      return '.';\n    } else {\n      end = rootEnd;\n    }\n  }\n\n  return path.slice(0, end);\n}\n\nfunction join(initialSegment) {\n  var pathname = initialSegment;\n\n  for (var i = 0; i < (arguments.length <= 1 ? 0 : arguments.length - 1); i++) {\n    var segment = i + 1 < 1 || arguments.length <= i + 1 ? undefined : arguments[i + 1];\n\n    if (segment.startsWith('/')) {\n      segment = segment.slice(1);\n    }\n\n    if (pathname.endsWith('/')) {\n      pathname += segment;\n    } else {\n      pathname += \"/\".concat(segment);\n    }\n  }\n\n  return pathname;\n}\n\nfunction resolve() {\n  var resolvedPath = '';\n  var resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = void 0;\n\n    if (i >= 0) {\n      path = i < 0 || arguments.length <= i ? undefined : arguments[i];\n    } else {\n      break;\n    }\n\n    validateString(path, 'path'); // Skip empty entries\n\n    if (path.length === 0) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n  } // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n  // Normalize the path\n\n\n  resolvedPath = normalizeString(resolvedPath, !resolvedAbsolute, '/', isPathSeparator);\n\n  if (resolvedAbsolute) {\n    if (resolvedPath.length > 0) {\n      return '/' + resolvedPath;\n    } else {\n      return '/';\n    }\n  } else if (resolvedPath.length > 0) {\n    return resolvedPath;\n  } else {\n    return '.';\n  }\n}\n\nfunction isPathSeparator(code) {\n  return code === CHAR_FORWARD_SLASH;\n}\n\nfunction normalizeString(path, allowAboveRoot, separator, isPathSeparator) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code = -1;\n\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length) {\n      code = path.charCodeAt(i);\n    } else if (isPathSeparator(code)) {\n      break;\n    } else {\n      code = CHAR_FORWARD_SLASH;\n    }\n\n    if (isPathSeparator(code)) {\n      if (lastSlash === i - 1 || dots === 1) ;else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== CHAR_DOT || res.charCodeAt(res.length - 2) !== CHAR_DOT) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf(separator);\n\n            if (lastSlashIndex === -1) {\n              res = '';\n              lastSegmentLength = 0;\n            } else {\n              res = res.slice(0, lastSlashIndex);\n              lastSegmentLength = res.length - 1 - res.lastIndexOf(separator);\n            }\n\n            lastSlash = i;\n            dots = 0;\n            continue;\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n\n        if (allowAboveRoot) {\n          if (res.length > 0) {\n            res += \"\".concat(separator, \"..\");\n          } else {\n            res = '..';\n          }\n\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0) {\n          res += separator + path.slice(lastSlash + 1, i);\n        } else {\n          res = path.slice(lastSlash + 1, i);\n        }\n\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === CHAR_DOT && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n\n  return res;\n}\n\nvar util =\n/*#__PURE__*/\nObject.freeze({\n  __proto__: null,\n  ensureTrailingSlash: ensureTrailingSlash,\n  parseBufferAsPackageJson: parseBufferAsPackageJson,\n  getFirstPathSegmentAfterPrefix: getFirstPathSegmentAfterPrefix,\n  basename: basename,\n  extname: extname,\n  dirname: dirname,\n  join: join,\n  resolve: resolve\n});\n\nvar Decoder =\n/*#__PURE__*/\nfunction () {\n  function Decoder() {\n    _classCallCheck(this, Decoder);\n\n    if (typeof TextDecoder !== 'undefined') {\n      this.decoder = new TextDecoder();\n    }\n  }\n\n  _createClass(Decoder, [{\n    key: \"decode\",\n    value: function decode(buf) {\n      var str = this.decoder ? this.decoder.decode(buf) : Buffer.from(buf).toString('utf-8');\n      return str.charCodeAt(0) === 0xfeff ? str.slice(1) : str;\n    }\n  }]);\n\n  return Decoder;\n}();\n\nvar ExtendableError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(ExtendableError, _Error);\n\n  function ExtendableError(message) {\n    var _this;\n\n    _classCallCheck(this, ExtendableError);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ExtendableError).call(this, message));\n    _this.name = _this.constructor.name;\n\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(_assertThisInitialized(_this), _this.constructor);\n    } else {\n      _this.stack = new Error(message).stack;\n    }\n\n    return _this;\n  }\n\n  return ExtendableError;\n}(_wrapNativeSuper(Error));\n\nvar EntryNotFoundError =\n/*#__PURE__*/\nfunction (_ExtendableError) {\n  _inherits(EntryNotFoundError, _ExtendableError);\n\n  function EntryNotFoundError(url) {\n    var _this2;\n\n    _classCallCheck(this, EntryNotFoundError);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(EntryNotFoundError).call(this, \"Not found \".concat(url.toString())));\n    _this2.url = url;\n    return _this2;\n  }\n\n  return EntryNotFoundError;\n}(ExtendableError);\n\nvar AbstractResolverHost =\n/*#__PURE__*/\nfunction () {\n  function AbstractResolverHost() {\n    _classCallCheck(this, AbstractResolverHost);\n  }\n\n  _createClass(AbstractResolverHost, [{\n    key: \"getCanonicalUrl\",\n    value: function getCanonicalUrl(_resolver, url) {\n      return Promise.resolve(url);\n    }\n  }]);\n\n  return AbstractResolverHost;\n}();\n\nvar TRAILING_SLASH_RX$1 = /\\/?$/;\n\nvar Resolver =\n/*#__PURE__*/\nfunction () {\n  function Resolver(host) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Resolver);\n\n    this.host = host;\n    this.decoder = new Decoder();\n    this.extensions = Array.from(options.extensions || Resolver.defaultExtensions);\n    this.packageMain = options.packageMain || ['main'];\n  }\n\n  _createClass(Resolver, [{\n    key: \"resolve\",\n    value: function () {\n      var _resolve = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(url) {\n        var options,\n            _options$invalidatedB,\n            invalidatedBy,\n            token,\n            tokenSource,\n            optionsWithDefaults,\n            canonicalUrlPromise,\n            _ref,\n            _ref2,\n            canonicalUrl,\n            rootUrl,\n            rootHref,\n            rootHrefWithoutTrailingSlash,\n            canonicalHref,\n            resolvedUrl,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n                if (url instanceof URL) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.prev = 2;\n                url = new URL(url);\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](2);\n                throw new Error(\"Invalid URL: \".concat(url, \": \").concat(_context.t0.message));\n\n              case 9:\n                _options$invalidatedB = options.invalidatedBy, invalidatedBy = _options$invalidatedB === void 0 ? new Set() : _options$invalidatedB;\n                token = options.token;\n\n                if (!token) {\n                  tokenSource = new CancellationTokenSource();\n                  token = tokenSource.token;\n                }\n\n                optionsWithDefaults = {\n                  extensions: options.extensions || this.extensions,\n                  ignoreBrowserOverrides: typeof options.ignoreBrowserOverrides === 'undefined' ? false : options.ignoreBrowserOverrides,\n                  invalidatedBy: invalidatedBy,\n                  packageMain: options.packageMain || this.packageMain,\n                  token: token\n                };\n                canonicalUrlPromise = this.host.getCanonicalUrl(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }); // To figure out if the url should be resolved as a file or as a directory, we need to first canonicalize the url\n                // if the host supports this and resolve the root url for the given asset.\n\n                _context.next = 16;\n                return Promise.all([canonicalUrlPromise, this.host.getResolveRoot(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                })]);\n\n              case 16:\n                _ref = _context.sent;\n                _ref2 = _slicedToArray(_ref, 2);\n                canonicalUrl = _ref2[0];\n                rootUrl = _ref2[1];\n\n                if (!token.isCancellationRequested) {\n                  _context.next = 22;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 22:\n                rootHref = rootUrl.href;\n                rootHrefWithoutTrailingSlash = rootHref.replace(TRAILING_SLASH_RX$1, '');\n                canonicalHref = canonicalUrl.href;\n\n                if (canonicalHref.startsWith(rootHrefWithoutTrailingSlash)) {\n                  _context.next = 27;\n                  break;\n                }\n\n                throw new Error(\"Unable to resolve a module whose path \".concat(canonicalHref, \" is above the host's root \").concat(rootHref));\n\n              case 27:\n                if (!(rootHrefWithoutTrailingSlash === canonicalHref || rootHref == canonicalHref)) {\n                  _context.next = 33;\n                  break;\n                }\n\n                _context.next = 30;\n                return this.resolveAsDirectory(canonicalUrl, optionsWithDefaults);\n\n              case 30:\n                _context.t1 = _context.sent;\n                _context.next = 36;\n                break;\n\n              case 33:\n                _context.next = 35;\n                return this.resolveAsFile(canonicalUrl, optionsWithDefaults);\n\n              case 35:\n                _context.t1 = _context.sent;\n\n              case 36:\n                resolvedUrl = _context.t1;\n\n                if (!token.isCancellationRequested) {\n                  _context.next = 39;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 39:\n                return _context.abrupt(\"return\", {\n                  ignored: resolvedUrl === false,\n                  invalidatedBy: invalidatedBy,\n                  resolvedUrl: resolvedUrl || undefined,\n                  rootUrl: rootUrl\n                });\n\n              case 40:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 6]]);\n      }));\n\n      function resolve(_x) {\n        return _resolve.apply(this, arguments);\n      }\n\n      return resolve;\n    }()\n    /**\r\n     * Resolve a reference treating it as a directory\r\n     *\r\n     * 1. If there is a `package.json` file and this has a `main` entry, use that\r\n     * 2. Assume `index` if no main file is found in the `package.json` manifest\r\n     *\r\n     * The outcome of this process will then be resolved as if it were a file.\r\n     */\n\n  }, {\n    key: \"resolveAsDirectory\",\n    value: function () {\n      var _resolveAsDirectory = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(url, options) {\n        var invalidatedBy, token, _ref3, _ref4, rootUrl, entries, mainPathname, packageJsonHref, packageJsonEntry, packageJsonContent, packageJson, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, packageMain, pathname, mainUrl;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                invalidatedBy = options.invalidatedBy, token = options.token; // If the enclosing directory is removed, then this file should be invalidated\n\n                invalidatedBy.add(url.href);\n                _context2.next = 4;\n                return Promise.all([this.host.getResolveRoot(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }), this.host.listEntries(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                })]);\n\n              case 4:\n                _ref3 = _context2.sent;\n                _ref4 = _slicedToArray(_ref3, 2);\n                rootUrl = _ref4[0];\n                entries = _ref4[1];\n\n                if (!token.isCancellationRequested) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 10:\n                mainPathname = 'index'; // Step 1: Look for a package.json with an main field\n\n                packageJsonHref = new URL(resolve(url.pathname, './package.json'), url).href;\n                packageJsonEntry = entries.find(function (entry) {\n                  return entry.type === ResolvedEntryKind.File && entry.url.href === packageJsonHref;\n                }); // If the package.json file changes (or is created), invalidate the resolution\n\n                invalidatedBy.add(packageJsonHref);\n\n                if (!packageJsonEntry) {\n                  _context2.next = 49;\n                  break;\n                }\n\n                _context2.next = 17;\n                return this.host.readFileContent(this, packageJsonEntry.url, {\n                  token: token\n                });\n\n              case 17:\n                packageJsonContent = _context2.sent;\n\n                if (!token.isCancellationRequested) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 20:\n                packageJson = parseBufferAsPackageJson(this.decoder, packageJsonContent, url.href);\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context2.prev = 24;\n                _iterator = this.packageMain[Symbol.iterator]();\n\n              case 26:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  _context2.next = 35;\n                  break;\n                }\n\n                packageMain = _step.value;\n                pathname = packageJson[packageMain];\n\n                if (!(typeof pathname === 'string')) {\n                  _context2.next = 32;\n                  break;\n                }\n\n                mainPathname = pathname;\n                return _context2.abrupt(\"break\", 35);\n\n              case 32:\n                _iteratorNormalCompletion = true;\n                _context2.next = 26;\n                break;\n\n              case 35:\n                _context2.next = 41;\n                break;\n\n              case 37:\n                _context2.prev = 37;\n                _context2.t0 = _context2[\"catch\"](24);\n                _didIteratorError = true;\n                _iteratorError = _context2.t0;\n\n              case 41:\n                _context2.prev = 41;\n                _context2.prev = 42;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 44:\n                _context2.prev = 44;\n\n                if (!_didIteratorError) {\n                  _context2.next = 47;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 47:\n                return _context2.finish(44);\n\n              case 48:\n                return _context2.finish(41);\n\n              case 49:\n                mainUrl = new URL(resolve(url.pathname, mainPathname), rootUrl);\n                return _context2.abrupt(\"return\", this.resolveAsFile(mainUrl, options));\n\n              case 51:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[24, 37, 41, 49], [42,, 44, 48]]);\n      }));\n\n      function resolveAsDirectory(_x2, _x3) {\n        return _resolveAsDirectory.apply(this, arguments);\n      }\n\n      return resolveAsDirectory;\n    }()\n    /**\r\n     * Resolve a reference treating it as a file\r\n     *\r\n     * 1. List entries in the containing directory\r\n     * 2. Look for an exact file match or a file match with one of the supplied extensions\r\n     * 3. Look for a matching child directory and attempt to resolve that as a directory\r\n     */\n\n  }, {\n    key: \"resolveAsFile\",\n    value: function () {\n      var _resolveAsFile = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(url, options) {\n        var invalidatedBy, token, rootUrl, parentPackageJson, browserOverrides, browserMap, packageJsonDir, entry, impliedUrl, targetSpec, target, containingUrl, filename, entries, entryDirectoryMap, entryFileMap, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _entry, childFilename, _childFilename, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, ext, hrefWithExtension, mapping, _match, match;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(url.pathname === '' || url.pathname === '/')) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                throw new TypeError(\"Unable to resolve the root as a file: \".concat(url.href));\n\n              case 2:\n                invalidatedBy = options.invalidatedBy, token = options.token;\n                invalidatedBy.add(url.href);\n                _context3.next = 6;\n                return this.host.getResolveRoot(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 6:\n                rootUrl = _context3.sent;\n\n                if (!token.isCancellationRequested) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 9:\n                if (!(this.packageMain.includes('browser') && !options.ignoreBrowserOverrides)) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                _context3.next = 12;\n                return this.readParentPackageJson(url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 12:\n                _context3.t0 = _context3.sent;\n                _context3.next = 16;\n                break;\n\n              case 15:\n                _context3.t0 = undefined;\n\n              case 16:\n                parentPackageJson = _context3.t0;\n\n                if (!token.isCancellationRequested) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 19:\n                browserOverrides = new Map();\n\n                if (parentPackageJson) {\n                  invalidatedBy.add(parentPackageJson.url.href);\n                }\n\n                if (!(parentPackageJson && typeof parentPackageJson.packageJson.browser === 'object')) {\n                  _context3.next = 37;\n                  break;\n                }\n\n                browserMap = parentPackageJson.packageJson.browser;\n                packageJsonDir = dirname(parentPackageJson.url.pathname);\n                _context3.t1 = _regeneratorRuntime.keys(browserMap);\n\n              case 25:\n                if ((_context3.t2 = _context3.t1()).done) {\n                  _context3.next = 37;\n                  break;\n                }\n\n                entry = _context3.t2.value;\n                impliedUrl = new URL(resolve(packageJsonDir, entry), parentPackageJson.url);\n                targetSpec = browserMap[entry];\n                target = targetSpec === false ? false : new URL(resolve(packageJsonDir, targetSpec), parentPackageJson.url);\n\n                if (!(impliedUrl.href === url.href)) {\n                  _context3.next = 34;\n                  break;\n                }\n\n                if (!(target === false)) {\n                  _context3.next = 33;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", false);\n\n              case 33:\n                return _context3.abrupt(\"return\", this.resolveAsFile(target, _objectSpread({}, options, {\n                  ignoreBrowserOverrides: true\n                })));\n\n              case 34:\n                browserOverrides.set(impliedUrl.href, target);\n                _context3.next = 25;\n                break;\n\n              case 37:\n                containingUrl = new URL(ensureTrailingSlash(dirname(url.pathname)), rootUrl);\n                invalidatedBy.add(containingUrl.href);\n                filename = basename(url.pathname);\n                _context3.next = 42;\n                return this.host.listEntries(this, containingUrl, {\n                  token: token\n                });\n\n              case 42:\n                entries = _context3.sent;\n\n                if (!token.isCancellationRequested) {\n                  _context3.next = 45;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 45:\n                entryDirectoryMap = new Map();\n                entryFileMap = new Map();\n                _iteratorNormalCompletion2 = true;\n                _didIteratorError2 = false;\n                _iteratorError2 = undefined;\n                _context3.prev = 50;\n                _iterator2 = entries[Symbol.iterator]();\n\n              case 52:\n                if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n                  _context3.next = 60;\n                  break;\n                }\n\n                _entry = _step2.value;\n\n                if (!(_entry.url.href === url.href && _entry.type == ResolvedEntryKind.File)) {\n                  _context3.next = 56;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _entry.url);\n\n              case 56:\n                if (_entry.type === ResolvedEntryKind.Directory) {\n                  childFilename = getFirstPathSegmentAfterPrefix(_entry.url, containingUrl);\n                  entryDirectoryMap.set(childFilename, _entry);\n                } else if (_entry.type === ResolvedEntryKind.File) {\n                  _childFilename = basename(_entry.url.pathname);\n                  entryFileMap.set(_childFilename, _entry);\n                }\n\n              case 57:\n                _iteratorNormalCompletion2 = true;\n                _context3.next = 52;\n                break;\n\n              case 60:\n                _context3.next = 66;\n                break;\n\n              case 62:\n                _context3.prev = 62;\n                _context3.t3 = _context3[\"catch\"](50);\n                _didIteratorError2 = true;\n                _iteratorError2 = _context3.t3;\n\n              case 66:\n                _context3.prev = 66;\n                _context3.prev = 67;\n\n                if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                  _iterator2.return();\n                }\n\n              case 69:\n                _context3.prev = 69;\n\n                if (!_didIteratorError2) {\n                  _context3.next = 72;\n                  break;\n                }\n\n                throw _iteratorError2;\n\n              case 72:\n                return _context3.finish(69);\n\n              case 73:\n                return _context3.finish(66);\n\n              case 74:\n                // Look for browser overrides\n                _iteratorNormalCompletion3 = true;\n                _didIteratorError3 = false;\n                _iteratorError3 = undefined;\n                _context3.prev = 77;\n                _iterator3 = options.extensions[Symbol.iterator]();\n\n              case 79:\n                if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n                  _context3.next = 98;\n                  break;\n                }\n\n                ext = _step3.value;\n                hrefWithExtension = \"\".concat(url.href).concat(ext);\n                mapping = browserOverrides.get(hrefWithExtension);\n                invalidatedBy.add(hrefWithExtension);\n\n                if (!(mapping === false)) {\n                  _context3.next = 88;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", false);\n\n              case 88:\n                if (!mapping) {\n                  _context3.next = 90;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", this.resolveAsFile(mapping, _objectSpread({}, options, {\n                  ignoreBrowserOverrides: true\n                })));\n\n              case 90:\n                _match = entryFileMap.get(\"\".concat(filename).concat(ext));\n\n                if (!_match) {\n                  _context3.next = 95;\n                  break;\n                }\n\n                if (!(_match.type !== ResolvedEntryKind.File)) {\n                  _context3.next = 94;\n                  break;\n                }\n\n                return _context3.abrupt(\"continue\", 95);\n\n              case 94:\n                return _context3.abrupt(\"return\", _match.url);\n\n              case 95:\n                _iteratorNormalCompletion3 = true;\n                _context3.next = 79;\n                break;\n\n              case 98:\n                _context3.next = 104;\n                break;\n\n              case 100:\n                _context3.prev = 100;\n                _context3.t4 = _context3[\"catch\"](77);\n                _didIteratorError3 = true;\n                _iteratorError3 = _context3.t4;\n\n              case 104:\n                _context3.prev = 104;\n                _context3.prev = 105;\n\n                if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                  _iterator3.return();\n                }\n\n              case 107:\n                _context3.prev = 107;\n\n                if (!_didIteratorError3) {\n                  _context3.next = 110;\n                  break;\n                }\n\n                throw _iteratorError3;\n\n              case 110:\n                return _context3.finish(107);\n\n              case 111:\n                return _context3.finish(104);\n\n              case 112:\n                // First, attempt to find a matching file or directory\n                match = entryDirectoryMap.get(filename);\n\n                if (!match) {\n                  _context3.next = 117;\n                  break;\n                }\n\n                if (!(match.type !== ResolvedEntryKind.Directory)) {\n                  _context3.next = 116;\n                  break;\n                }\n\n                throw new Error(\"Invariant violation \".concat(match.type, \" is unexpected\"));\n\n              case 116:\n                return _context3.abrupt(\"return\", this.resolveAsDirectory(match.url, options));\n\n              case 117:\n                throw new EntryNotFoundError(url);\n\n              case 118:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[50, 62, 66, 74], [67,, 69, 73], [77, 100, 104, 112], [105,, 107, 111]]);\n      }));\n\n      function resolveAsFile(_x4, _x5) {\n        return _resolveAsFile.apply(this, arguments);\n      }\n\n      return resolveAsFile;\n    }()\n  }, {\n    key: \"readParentPackageJson\",\n    value: function () {\n      var _readParentPackageJson = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(url) {\n        var _this3 = this;\n\n        var options,\n            _options$invalidatedB2,\n            invalidatedBy,\n            token,\n            hostRootUrl,\n            hostRootHref,\n            containingDirUrl,\n            readPackageJsonOrRecurse,\n            _args5 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                options = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : {};\n                _options$invalidatedB2 = options.invalidatedBy, invalidatedBy = _options$invalidatedB2 === void 0 ? new Set() : _options$invalidatedB2, token = options.token;\n                _context5.next = 4;\n                return this.host.getCanonicalUrl(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 4:\n                url = _context5.sent;\n\n                if (!(token && token.isCancellationRequested)) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 7:\n                _context5.next = 9;\n                return this.host.getResolveRoot(this, url, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 9:\n                hostRootUrl = _context5.sent;\n\n                if (!(token && token.isCancellationRequested)) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 12:\n                hostRootHref = ensureTrailingSlash(hostRootUrl.href);\n                containingDirUrl = new URL(ensureTrailingSlash(dirname(url.pathname)), url);\n\n                readPackageJsonOrRecurse =\n                /*#__PURE__*/\n                function () {\n                  var _ref5 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee4(dir) {\n                    var entries, packageJsonHref, packageJsonEntry, parentPackageJsonContent, packageJson, parentDir;\n                    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            if (dir.href.startsWith(hostRootHref)) {\n                              _context4.next = 2;\n                              break;\n                            }\n\n                            return _context4.abrupt(\"return\", undefined);\n\n                          case 2:\n                            invalidatedBy.add(dir.href);\n                            _context4.next = 5;\n                            return _this3.host.listEntries(_this3, dir, {\n                              invalidatedBy: invalidatedBy,\n                              token: token\n                            });\n\n                          case 5:\n                            entries = _context4.sent;\n\n                            if (!(token && token.isCancellationRequested)) {\n                              _context4.next = 8;\n                              break;\n                            }\n\n                            throw new CanceledError('Canceled');\n\n                          case 8:\n                            packageJsonHref = new URL(resolve(dir.pathname, './package.json'), url).href;\n                            packageJsonEntry = entries.find(function (entry) {\n                              return entry.type === ResolvedEntryKind.File && entry.url.href === packageJsonHref;\n                            });\n                            invalidatedBy.add(packageJsonHref);\n\n                            if (!packageJsonEntry) {\n                              _context4.next = 27;\n                              break;\n                            }\n\n                            _context4.prev = 12;\n                            _context4.next = 15;\n                            return _this3.host.readFileContent(_this3, packageJsonEntry.url, {\n                              invalidatedBy: invalidatedBy,\n                              token: token\n                            });\n\n                          case 15:\n                            parentPackageJsonContent = _context4.sent;\n\n                            if (!(token && token.isCancellationRequested)) {\n                              _context4.next = 18;\n                              break;\n                            }\n\n                            throw new CanceledError('Canceled');\n\n                          case 18:\n                            packageJson = parseBufferAsPackageJson(_this3.decoder, parentPackageJsonContent, packageJsonEntry.url.href);\n                            return _context4.abrupt(\"return\", {\n                              packageJson: packageJson,\n                              url: packageJsonEntry.url\n                            });\n\n                          case 22:\n                            _context4.prev = 22;\n                            _context4.t0 = _context4[\"catch\"](12);\n\n                            if (!(_context4.t0 instanceof CanceledError || _context4.t0 && _context4.t0.name === 'CanceledError')) {\n                              _context4.next = 26;\n                              break;\n                            }\n\n                            throw _context4.t0;\n\n                          case 26:\n                            console.warn(\"Error reading the parent package manifest for \".concat(url.href, \" from \").concat(packageJsonEntry.url.href, \": \").concat(_context4.t0.message));\n\n                          case 27:\n                            // Not found here, let's try one up\n                            parentDir = new URL(ensureTrailingSlash(dirname(dir.pathname)), dir); // Skip infinite recursion\n\n                            if (!(parentDir.href === dir.href)) {\n                              _context4.next = 30;\n                              break;\n                            }\n\n                            return _context4.abrupt(\"return\", undefined);\n\n                          case 30:\n                            return _context4.abrupt(\"return\", readPackageJsonOrRecurse(parentDir));\n\n                          case 31:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4, null, [[12, 22]]);\n                  }));\n\n                  return function readPackageJsonOrRecurse(_x7) {\n                    return _ref5.apply(this, arguments);\n                  };\n                }();\n\n                return _context5.abrupt(\"return\", readPackageJsonOrRecurse(containingDirUrl));\n\n              case 16:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function readParentPackageJson(_x6) {\n        return _readParentPackageJson.apply(this, arguments);\n      }\n\n      return readParentPackageJson;\n    }()\n  }]);\n\n  return Resolver;\n}();\n\nResolver.defaultExtensions = ['.js', '.jsx', '.es6', '.es', '.mjs', '.ts', '.tsx', '.json'];\nResolver.path = {\n  basename: basename,\n  dirname: dirname,\n  extname: extname,\n  resolve: resolve\n};\nexport { AbstractResolverHost, Decoder, EntryNotFoundError, ResolvedEntryKind, Resolver, isValidPackageJson, util };","import _regeneratorRuntime from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _possibleConstructorReturn from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _classCallCheck from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _slicedToArray from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Emitter } from 'ts-primitives';\nexport { CancellationToken, CancellationTokenSource } from 'ts-primitives';\nimport MagicString, { Bundle as Bundle$1 } from 'magic-string';\nimport { parse as parse$1 } from 'acorn';\nimport { CanceledError, CancellationTokenSource } from '@velcro/resolver';\nimport { resolve } from 'npm-package-arg';\nimport remapping from '@ampproject/remapping';\nimport { Base64 } from 'js-base64';\nvar version = \"0.26.0\";\n\nfunction traverse(ast, ctx, _ref) {\n  var enter = _ref.enter,\n      leave = _ref.leave;\n  visit(ast, null, ctx, enter, leave);\n}\n\nvar shouldSkip = false;\nvar context = {\n  skip: function skip() {\n    return shouldSkip = true;\n  }\n};\nvar childKeys = {};\n\nfunction visit(node, parent, ctx, enter, leave, prop, index) {\n  if (!node) return;\n  node.parent = parent;\n\n  if (enter) {\n    var _shouldSkip = shouldSkip;\n    shouldSkip = false;\n    enter.call(context, node, parent, ctx, prop, index);\n    var skipped = shouldSkip;\n    shouldSkip = _shouldSkip;\n    if (skipped) return;\n  }\n\n  var keys = childKeys[node.type] || (childKeys[node.type] = Object.keys(node).filter(function (key) {\n    return key !== 'parent' && typeof node[key] === 'object';\n  }));\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = node[key];\n\n    if (Array.isArray(value)) {\n      for (var j = 0; j < value.length; j++) {\n        visit(value[j], node, ctx, enter, leave, key, j);\n      }\n    } else if (value && value.type) {\n      visit(value, node, ctx, enter, leave, key);\n    }\n  }\n\n  if (leave) {\n    leave(node, parent, ctx, prop, index);\n  }\n}\n\nfunction isArrowFunctionExpression(node) {\n  return node.type === 'ArrowFunctionExpression';\n}\n\nfunction isArrayPattern(node) {\n  return node.type === 'ArrayPattern';\n}\n\nfunction isAssignmentPattern(node) {\n  return node.type === 'AssignmentPattern';\n}\n\nfunction isBinaryExpression(node) {\n  return node.type === 'BinaryExpression';\n}\n\nfunction isBlockStatement(node) {\n  return node.type === 'BlockStatement';\n}\n\nfunction isCallExpression(node) {\n  return node.type === 'CallExpression';\n}\n\nfunction isClassDeclaration(node) {\n  return node.type === 'ClassDeclaration';\n}\n\nfunction isFunctionDeclaration(node) {\n  return node.type === 'FunctionDeclaration';\n}\n\nfunction isFunctionExpression(node) {\n  return node.type === 'FunctionExpression';\n}\n\nfunction isIdentifier(node) {\n  return node.type === 'Identifier';\n}\n\nfunction isIfStatement(node) {\n  return node.type === 'IfStatement';\n}\n\nfunction isLiteral(node) {\n  return node.type === 'Literal';\n}\n\nfunction isMemberExpression(node) {\n  return node.type === 'MemberExpression';\n}\n\nfunction isNodeWithStartAndEnd(node) {\n  return typeof node.start === 'number' && typeof node.end === 'number';\n}\n\nfunction isObjectPattern(node) {\n  return node.type === 'ObjectPattern';\n}\n\nfunction isProperty(node) {\n  return node.type === 'Property';\n}\n\nfunction isRestElement(node) {\n  return node.type === 'RestElement';\n}\n\nfunction isProgram(node) {\n  return node.type === 'Program';\n}\n\nfunction isThisExpression(node) {\n  return node.type === 'ThisExpression';\n}\n\nfunction isTryStatement(node) {\n  return node.type === 'TryStatement';\n}\n\nfunction isVariableDeclaration(node) {\n  return node.type === 'VariableDeclaration';\n} // Refinements or groups\n\n\nfunction isFunction(node) {\n  return isFunctionDeclaration(node) || isFunctionExpression(node) || isArrowFunctionExpression(node);\n}\n\nfunction isStringLiteral(node) {\n  return isLiteral(node) && typeof node.value === 'string';\n}\n\nfunction parse(code, options) {\n  return parse$1(code, _objectSpread({}, options, {\n    allowReturnOutsideFunction: true,\n    sourceType: 'script'\n  }));\n}\n\nfunction parseFile(uri, magicString) {\n  var ctx = {\n    unboundSymbols: new Map(),\n    locals: new Map(),\n    nodeEnv: 'development',\n    replacements: [],\n    requires: [],\n    requireResolves: [],\n    skip: new Set()\n  };\n\n  try {\n    // let lastToken: acorn.Token | undefined = undefined;\n    var ast = parse(magicString.original, {\n      onComment: function onComment(_isBlock, _test, start, end) {\n        magicString.remove(start, end);\n      },\n      onToken: function onToken(token) {\n        magicString.addSourcemapLocation(token.start); // const wsStart = lastToken ? lastToken.end : 0;\n        // if (wsStart < token.start - 1) {\n        //   const between = magicString.original.substring(wsStart, token.start);\n        //   if (whitespaceRx.test(between)) {\n        //     magicString.overwrite(wsStart, token.start - 1, ' ');\n        //   }\n        // }\n        // lastToken = token;\n      }\n    });\n    traverse(ast, ctx, scopingAndRequiresVisitor);\n    traverse(ast, ctx, collectGlobalsVisitor);\n  } catch (err) {\n    throw new Error(\"Error parsing \".concat(uri, \": \").concat(err.message));\n  }\n\n  var requireDependencies = [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = ctx.requires[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      requireDependencies.push({\n        callee: _objectSpread({}, node.callee),\n        spec: _objectSpread({}, node.spec)\n      });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var requireResolveDependencies = [];\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = ctx.requireResolves[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _node = _step2.value;\n      requireResolveDependencies.push({\n        callee: _objectSpread({}, _node.callee),\n        spec: _objectSpread({}, _node.spec)\n      });\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var unboundSymbols = new Map();\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = ctx.unboundSymbols[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _ref4 = _step3.value;\n\n      var _ref3 = _slicedToArray(_ref4, 2);\n\n      var symbolName = _ref3[0];\n      var symbolNodes = _ref3[1];\n      unboundSymbols.set(symbolName, symbolNodes.map(function (node) {\n        return {\n          start: node.start,\n          end: node.end\n        };\n      }));\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return {\n    requireDependencies: requireDependencies,\n    requireResolveDependencies: requireResolveDependencies,\n    unboundSymbols: unboundSymbols\n  };\n}\n\nvar scopingAndRequiresVisitor = {\n  enter: function enter(node, parent, ctx) {\n    if (ctx.skip.has(node)) {\n      return this.skip();\n    }\n\n    visitAndCaptureScoping(node, parent, ctx);\n    visitAndSkipBranches(node, parent, ctx);\n    visitRequires(node, parent, ctx);\n  }\n};\nvar collectGlobalsVisitor = {\n  enter: function enter(node, _parent, ctx) {\n    if (isBindingIdentifier(node) && isIdentifier(node)) {\n      var name = node.name;\n      if (name === 'undefined') return;\n      var foundBinding = false;\n      var nextParent = node.parent;\n\n      while (nextParent) {\n        if (name === 'arguments' && declaresArguments(nextParent)) {\n          foundBinding = true;\n          break;\n        }\n\n        var locals = ctx.locals.get(nextParent);\n\n        if (locals && locals[name]) {\n          foundBinding = true;\n          break;\n        }\n\n        nextParent = nextParent.parent;\n      }\n\n      if (!foundBinding && isNodeWithStartAndEnd(node)) {\n        var unboundSymbols = ctx.unboundSymbols.get(name);\n\n        if (!unboundSymbols) {\n          unboundSymbols = [];\n          ctx.unboundSymbols.set(name, unboundSymbols);\n        }\n\n        unboundSymbols.push(node);\n      }\n    } else if (isThisExpression(node)) {\n      var _foundBinding = false;\n      var _nextParent = node.parent;\n\n      while (_nextParent) {\n        if (declaresThis(_nextParent)) {\n          _foundBinding = true;\n          break;\n        }\n\n        _nextParent = _nextParent.parent;\n      }\n\n      if (!_foundBinding && isNodeWithStartAndEnd(node)) {\n        var _unboundSymbols = ctx.unboundSymbols.get('this');\n\n        if (!_unboundSymbols) {\n          _unboundSymbols = [];\n          ctx.unboundSymbols.set('this', _unboundSymbols);\n        }\n\n        _unboundSymbols.push(node);\n      }\n    }\n  }\n};\n\nfunction visitAndCaptureScoping(node, _parent, ctx) {\n  if (isVariableDeclaration(node)) {\n    var parent;\n    var nextParent = node.parent;\n\n    while (nextParent) {\n      if (node.kind === 'var' ? isScope(nextParent) : isBlockScope(nextParent)) {\n        parent = nextParent;\n        break;\n      }\n\n      nextParent = nextParent.parent;\n    }\n\n    if (!parent) {\n      throw new Error(\"Invariant violation: Failed to find a parent\");\n    }\n\n    var locals = ctx.locals.get(parent);\n\n    if (!locals) {\n      locals = {};\n      ctx.locals.set(parent, locals);\n    }\n\n    var _iteratorNormalCompletion4 = true;\n    var _didIteratorError4 = false;\n    var _iteratorError4 = undefined;\n\n    try {\n      for (var _iterator4 = node.declarations[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n        var declaration = _step4.value;\n        declarePattern(declaration.id, locals);\n      }\n    } catch (err) {\n      _didIteratorError4 = true;\n      _iteratorError4 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n          _iterator4.return();\n        }\n      } finally {\n        if (_didIteratorError4) {\n          throw _iteratorError4;\n        }\n      }\n    }\n  } else if (isFunctionDeclaration(node)) {\n    var _parent2;\n\n    var _nextParent2 = node.parent;\n\n    if (_nextParent2 && _nextParent2.parent) {\n      _nextParent2 = _nextParent2.parent;\n    }\n\n    while (_nextParent2) {\n      if (isScope(_nextParent2)) {\n        _parent2 = _nextParent2;\n        break;\n      }\n\n      _nextParent2 = _nextParent2.parent;\n    }\n\n    if (!_parent2) {\n      throw new Error(\"Invariant violation: Failed to find a parent\");\n    }\n\n    var _locals = ctx.locals.get(_parent2);\n\n    if (!_locals) {\n      _locals = {};\n      ctx.locals.set(_parent2, _locals);\n    }\n\n    declareFunction(node, _locals);\n  } else if (isFunction(node)) {\n    var _locals2 = ctx.locals.get(node);\n\n    if (!_locals2) {\n      _locals2 = {};\n      ctx.locals.set(node, _locals2);\n    }\n\n    declareFunction(node, _locals2);\n  } else if (isClassDeclaration(node) && node.id) {\n    var _parent3;\n\n    var _nextParent3 = node.parent;\n\n    if (_nextParent3 && _nextParent3.parent) {\n      _nextParent3 = _nextParent3.parent;\n    }\n\n    while (_nextParent3) {\n      if (isScope(_nextParent3)) {\n        _parent3 = _nextParent3;\n        break;\n      }\n\n      _nextParent3 = _nextParent3.parent;\n    }\n\n    if (!_parent3) {\n      throw new Error(\"Invariant violation: Failed to find a parent\");\n    }\n\n    var _locals3 = ctx.locals.get(_parent3);\n\n    if (!_locals3) {\n      _locals3 = {};\n      ctx.locals.set(_parent3, _locals3);\n    }\n\n    _locals3[node.id.name] = true;\n  } else if (isTryStatement(node)) {\n    if (node.handler) {\n      var _locals4 = ctx.locals.get(node.handler);\n\n      if (!_locals4) {\n        _locals4 = {};\n        ctx.locals.set(node.handler, _locals4);\n      }\n\n      declarePattern(node.handler.param, _locals4);\n    }\n  }\n}\n\nfunction visitAndSkipBranches(node, _parent, ctx) {\n  if (isIfStatement(node) && isBinaryExpression(node.test)) {\n    var tests = {\n      '!=': function _(l, r) {\n        return l != r;\n      },\n      '!==': function _(l, r) {\n        return l !== r;\n      },\n      '==': function _(l, r) {\n        return l == r;\n      },\n      '===': function _(l, r) {\n        return l === r;\n      }\n    };\n    var test = tests[node.test.operator];\n\n    if (test) {\n      if (isStringLiteral(node.test.left) && isMemberExpression(node.test.right) && memberExpressionMatches(node.test.right, 'process.env.NODE_ENV')) {\n        // if ('development' === process.env.NODE_ENV) {}\n        ctx.replacements.push({\n          start: node.test.right.start,\n          end: node.test.right.end,\n          replacement: JSON.stringify(ctx.nodeEnv)\n        });\n\n        if (!test(node.test.left.value, ctx.nodeEnv)) {\n          ctx.skip.add(node.consequent);\n        } else if (node.alternate) {\n          ctx.skip.add(node.alternate);\n        }\n      } else if (isStringLiteral(node.test.right) && isMemberExpression(node.test.left) && memberExpressionMatches(node.test.left, 'process.env.NODE_ENV')) {\n        // if (process.env.NODE_ENV === 'development') {}\n        ctx.replacements.push({\n          start: node.test.left.start,\n          end: node.test.left.end,\n          replacement: JSON.stringify(ctx.nodeEnv)\n        });\n\n        if (!test(node.test.right.value, ctx.nodeEnv)) {\n          ctx.skip.add(node.consequent);\n        } else if (node.alternate) {\n          ctx.skip.add(node.alternate);\n        }\n      }\n    }\n  }\n}\n\nfunction visitRequires(node, _parent, ctx) {\n  if (isCallExpression(node) && isNodeWithStartAndEnd(node.callee)) {\n    var callee = node.callee;\n\n    if (isIdentifier(callee) && isNodeWithStartAndEnd(callee) && callee.name === 'require') {\n      var firstArg = node.arguments[0];\n\n      if (isStringLiteral(firstArg) && isNodeWithStartAndEnd(firstArg)) {\n        ctx.requires.push({\n          spec: {\n            start: firstArg.start,\n            end: firstArg.end,\n            value: firstArg.value\n          },\n          callee: {\n            start: callee.start,\n            end: callee.end\n          }\n        });\n      } else {\n        console.warn('Non string-literal first arg to require', firstArg);\n      }\n    } else if (isMemberExpression(callee) && isIdentifier(callee.object) && callee.object.name === 'require' && isIdentifier(callee.property) && callee.property.name === 'resolve') {\n      var _firstArg = node.arguments[0];\n\n      if (isStringLiteral(_firstArg) && isNodeWithStartAndEnd(_firstArg)) {\n        ctx.requireResolves.push({\n          spec: {\n            start: _firstArg.start,\n            end: _firstArg.end,\n            value: _firstArg.value\n          },\n          callee: {\n            start: callee.start,\n            end: callee.end\n          }\n        });\n      } else {\n        console.warn('Non string-literal first arg to require.resolve', _firstArg);\n      }\n    }\n  }\n}\n\nfunction declareFunction(node, locals) {\n  node.params.forEach(function (node) {\n    declarePattern(node, locals);\n  });\n\n  if (node.id) {\n    locals[node.id.name] = true;\n  }\n}\n\nfunction declarePattern(node, locals) {\n  if (isIdentifier(node)) {\n    locals[node.name] = true;\n  } else if (isObjectPattern(node)) {\n    node.properties.forEach(function (node) {\n      return declarePattern(node.value, locals);\n    });\n  } else if (isArrayPattern(node)) {\n    node.elements.forEach(function (node) {\n      return node && declarePattern(node, locals);\n    });\n  } else if (isRestElement(node)) {\n    declarePattern(node.argument, locals);\n  } else if (isAssignmentPattern(node)) {\n    declarePattern(node.left, locals);\n  } else {\n    throw new Error(\"Invariant violation: Unexpected pattern type: \".concat(node.type));\n  }\n}\n\nfunction isBindingIdentifier(node) {\n  return isIdentifier(node) && !isPropertyOfMemberExpression(node) && !isKeyOfProperty(node);\n}\n\nfunction isKeyOfProperty(node) {\n  return node.parent && isProperty(node.parent) && node.parent.key === node;\n}\n\nfunction isPropertyOfMemberExpression(node) {\n  return node.parent && isMemberExpression(node.parent) && node.parent.object !== node;\n}\n\nfunction isScope(node) {\n  return isFunctionDeclaration(node) || isFunctionExpression(node) || isArrowFunctionExpression(node) || isProgram(node);\n}\n\nfunction isBlockScope(node) {\n  return isBlockStatement(node) || isScope(node);\n}\n\nfunction declaresArguments(node) {\n  return isFunctionDeclaration(node) || isFunctionExpression(node);\n}\n\nfunction declaresThis(node) {\n  return isFunctionDeclaration(node) || isFunctionExpression(node);\n}\n\nfunction memberExpressionMatches(node, pattern) {\n  var memberParts = pattern.split('.');\n\n  if (memberParts.length < 2) {\n    return false;\n  }\n\n  var object = memberParts.shift();\n  var property = memberParts.shift();\n\n  for (var i = memberParts.length - 1; i >= 0; i--) {\n    if (!isIdentifier(node.property) || node.property.name !== memberParts[i]) {\n      return false;\n    }\n\n    if (!isMemberExpression(node.object)) {\n      return false;\n    }\n\n    node = node.object;\n  }\n\n  if (!isIdentifier(node.object) || !isIdentifier(node.property)) {\n    return false;\n  }\n\n  return node.object.name === object && node.property.name === property;\n}\n\nvar RELATE_PATH_RX = /^[./]|^[a-z_-]+:/;\nvar SPEC_RX = /^((@[^/]+\\/[^/@]+|[^./@][^/@]*)(?:@([^/]+))?)(.*)?$/;\n\nvar Deferred =\n/*#__PURE__*/\nfunction () {\n  function Deferred(token) {\n    var _this = this;\n\n    _classCallCheck(this, Deferred);\n\n    this.internalState = 'pending';\n    this.promise = new Promise(function (promiseResolve, promiseReject) {\n      _this.promiseResolve = promiseResolve;\n      _this.promiseReject = promiseReject;\n    });\n\n    if (token) {\n      if (token.isCancellationRequested) {\n        this.reject(new CanceledError('Canceled'));\n      } else {\n        token.onCancellationRequested(function () {\n          _this.reject(new CanceledError('Canceled'));\n        });\n      }\n    }\n  }\n\n  _createClass(Deferred, [{\n    key: \"resolve\",\n    value: function resolve(value) {\n      this.internalState = 'resolved';\n      this.promiseResolve(value);\n    }\n  }, {\n    key: \"reject\",\n    value: function reject(reason) {\n      this.internalState = 'rejected';\n      this.promiseReject(reason);\n    }\n  }, {\n    key: \"isSettled\",\n    get: function get() {\n      return this.internalState !== 'pending';\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return this.internalState;\n    }\n  }]);\n\n  return Deferred;\n}();\n\nfunction isBareModuleSpecifier(spec) {\n  return !RELATE_PATH_RX.test(spec);\n}\n\nfunction maybeParseBareModuleSpec(spec) {\n  /**\r\n   * 1: scope + name + version\r\n   * 2: scope + name\r\n   * 3: version?\r\n   * 4: pathname\r\n   */\n  var matches = spec.match(SPEC_RX);\n\n  if (!matches) {\n    return undefined;\n  }\n\n  return {\n    nameSpec: matches[1],\n    name: matches[2],\n    spec: matches[3] || '',\n    pathname: matches[4] || ''\n  };\n}\n\nfunction parseBareModuleSpec(spec) {\n  var parsed = maybeParseBareModuleSpec(spec);\n\n  if (!parsed) {\n    throw new Error(\"Unable to parse unexpected unpkg url: '\".concat(spec, \"'\"));\n  }\n\n  return parsed;\n} // this looks ridiculous, but it prevents sourcemap tooling from mistaking\n// this for an actual sourceMappingURL\n\n\nfunction getSourceMappingUrl(str) {\n  var re = /(?:\\/\\/[@#][\\s]*(?:source)MappingURL=([^\\s'\"]+)[\\s]*$)|(?:\\/\\*[@#][\\s]*(?:source)MappingURL=([^\\s*'\"]+)[\\s]*(?:\\*\\/)[\\s]*$)/gm; // Keep executing the search to find the *last* sourceMappingURL to avoid\n  // picking up sourceMappingURLs from comments, strings, etc.\n\n  var lastMatch = null;\n  var match;\n\n  while (match = re.exec(str)) {\n    lastMatch = match;\n  }\n\n  if (!lastMatch) return null;\n  return lastMatch[1];\n}\n\nvar MapSet =\n/*#__PURE__*/\nfunction () {\n  function MapSet() {\n    _classCallCheck(this, MapSet);\n\n    this.m = new Map();\n  }\n\n  _createClass(MapSet, [{\n    key: \"add\",\n    value: function add(key, value) {\n      var valueSet = this.m.get(key);\n\n      if (!valueSet) {\n        valueSet = new Set();\n        this.m.set(key, valueSet);\n      }\n\n      valueSet.add(value);\n      return this;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key, value) {\n      var valueSet = this.m.get(key);\n      var deleted = false;\n\n      if (valueSet) {\n        deleted = valueSet.delete(value);\n\n        if (deleted && !valueSet.size) {\n          this.m.delete(key);\n        }\n      }\n\n      return deleted;\n    }\n  }, {\n    key: \"deleteAll\",\n    value: function deleteAll(key) {\n      return this.m.delete(key);\n    }\n  }, {\n    key: \"getValues\",\n    value: function getValues(key) {\n      return new Set(this.m.get(key));\n    }\n  }, {\n    key: \"has\",\n    value: function has(key, value) {\n      var valueSet = this.m.get(key);\n      return valueSet ? valueSet.has(value) : false;\n    }\n  }]);\n\n  return MapSet;\n}();\n\nvar DEFAULT_SHIM_GLOBALS = {\n  Buffer: {\n    spec: \"@velcro/node-libs@\".concat(version, \"/lib/buffer.js\"),\n    export: 'Buffer'\n  },\n  global: {\n    spec: \"@velcro/node-libs@\".concat(version, \"/lib/global.js\")\n  },\n  process: {\n    spec: \"@velcro/node-libs@\".concat(version, \"/lib/process.js\")\n  }\n};\n\nvar Asset =\n/*#__PURE__*/\nfunction () {\n  function Asset(href, rootHref) {\n    _classCallCheck(this, Asset);\n\n    this.href = href;\n    this.rootHref = rootHref;\n    this.dependencies = undefined;\n  }\n\n  _createClass(Asset, [{\n    key: \"setCode\",\n    value: function setCode(code) {\n      this.magicString = new MagicString(code, {\n        filename: this.href,\n        indentExclusionRanges: []\n      });\n      this.sourceMappingUrl = getSourceMappingUrl(code);\n      var parser = getParserForAsset(this);\n      var dependencies = parser.parse(this.href, this.magicString);\n      this.dependencies = [];\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = dependencies.requireDependencies[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var dep = _step5.value;\n          this.dependencies.push({\n            type: Asset.DependencyKind.Require,\n            callee: dep.callee,\n            references: [{\n              start: dep.spec.start,\n              end: dep.spec.end\n            }],\n            value: dep.spec.value\n          });\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = dependencies.requireResolveDependencies[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var _dep = _step6.value;\n          this.dependencies.push({\n            type: Asset.DependencyKind.RequireResolve,\n            callee: _dep.callee,\n            references: [{\n              start: _dep.spec.start,\n              end: _dep.spec.end\n            }],\n            value: _dep.spec.value\n          });\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6.return != null) {\n            _iterator6.return();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion7 = true;\n      var _didIteratorError7 = false;\n      var _iteratorError7 = undefined;\n\n      try {\n        for (var _iterator7 = dependencies.unboundSymbols[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n          var _ref7 = _step7.value;\n\n          var _ref6 = _slicedToArray(_ref7, 2);\n\n          var symbolName = _ref6[0];\n          var references = _ref6[1];\n          var shim = DEFAULT_SHIM_GLOBALS[symbolName];\n\n          if (shim) {\n            this.dependencies.push({\n              type: Asset.DependencyKind.InjectedGlobal,\n              exportName: shim.export,\n              references: references,\n              symbolName: symbolName,\n              value: \"\".concat(shim.spec).concat(shim.export ? \"[\".concat(JSON.stringify(shim.export), \"]\") : '')\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError7 = true;\n        _iteratorError7 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion7 && _iterator7.return != null) {\n            _iterator7.return();\n          }\n        } finally {\n          if (_didIteratorError7) {\n            throw _iteratorError7;\n          }\n        }\n      }\n\n      return this.dependencies;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        href: this.href,\n        rootHref: this.rootHref,\n        dependencies: this.dependencies,\n        sourceMappingUrl: this.sourceMappingUrl,\n        code: this.magicString ? this.magicString.original : ''\n      };\n    }\n  }], [{\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      var asset = new Asset(json.href, json.rootHref);\n      asset.dependencies = json.dependencies;\n      asset.sourceMappingUrl = json.sourceMappingUrl;\n      asset.setCode(json.code);\n      return asset;\n    }\n  }]);\n\n  return Asset;\n}();\n\n(function (Asset) {\n  var DependencyKind;\n\n  (function (DependencyKind) {\n    DependencyKind[\"Require\"] = \"require\";\n    DependencyKind[\"RequireResolve\"] = \"require.resolve\";\n    DependencyKind[\"InjectedGlobal\"] = \"injected_global\";\n  })(DependencyKind = Asset.DependencyKind || (Asset.DependencyKind = {}));\n})(Asset || (Asset = {}));\n\nfunction getParserForAsset(asset) {\n  if (asset.href.endsWith('.css')) {\n    return {\n      parse: function parse(_href, magicString) {\n        var cssCode = magicString.original;\n        var BACKSLASH = '\\\\'.charCodeAt(0);\n        var SINGLE_QUOTE = \"'\".charCodeAt(0);\n        var NL = '\\n'.charCodeAt(0);\n        var CR = '\\r'.charCodeAt(0);\n        var escaped = false;\n\n        for (var i = 0; i < cssCode.length; i++) {\n          var char = cssCode.charCodeAt(i);\n\n          if (char === BACKSLASH) {\n            escaped = !escaped;\n            continue;\n          }\n\n          if (!escaped) {\n            // Escape certain characters (if not already escaped)\n            switch (char) {\n              case CR:\n              case NL:\n                magicString.overwrite(i, i + 1, ' ');\n                break;\n\n              case SINGLE_QUOTE:\n                magicString.prependRight(i, '\\\\');\n                break;\n            }\n          }\n\n          escaped = false;\n        }\n\n        magicString.prepend(\"\\n          function reload(){\\n            var styleTag = document.createElement(\\\"style\\\");\\n            styleTag.type = \\\"text/css\\\";\\n            styleTag.innerHTML = '\");\n        magicString.append(\"';\\n            document.head.appendChild(styleTag);\\n\\n            return function() {    \\n              if (styleTag && styleTag.parentElement) {\\n                styleTag.parentElement.removeChild(styleTag);\\n              }\\n            };\\n          };\\n\\n          var remove = reload();\\n\\n          if (module.hot && module.hot.dispose) {\\n            module.hot.dispose(function() {\\n              remove();\\n            });\\n          }\\n        \");\n        return {\n          requireDependencies: [],\n          requireResolveDependencies: [],\n          unboundSymbols: new Map()\n        };\n      }\n    };\n  }\n\n  if (asset.href.endsWith('.json')) {\n    return {\n      parse: function parse(_href, magicString) {\n        magicString.prepend('module.exports = ');\n        return {\n          requireDependencies: [],\n          requireResolveDependencies: [],\n          unboundSymbols: new Map()\n        };\n      }\n    };\n  }\n\n  return {\n    parse: parseFile\n  };\n}\n\nvar ExtendableError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(ExtendableError, _Error);\n\n  function ExtendableError(message) {\n    var _this2;\n\n    _classCallCheck(this, ExtendableError);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ExtendableError).call(this, message));\n    _this2.name = _this2.constructor.name;\n\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(_assertThisInitialized(_this2), _this2.constructor);\n    } else {\n      _this2.stack = new Error(message).stack;\n    }\n\n    return _this2;\n  }\n\n  return ExtendableError;\n}(_wrapNativeSuper(Error));\n\nvar InvariantViolation =\n/*#__PURE__*/\nfunction (_ExtendableError) {\n  _inherits(InvariantViolation, _ExtendableError);\n\n  function InvariantViolation() {\n    _classCallCheck(this, InvariantViolation);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(InvariantViolation).apply(this, arguments));\n  }\n\n  return InvariantViolation;\n}(ExtendableError);\n\nvar NotSupportedError =\n/*#__PURE__*/\nfunction (_ExtendableError2) {\n  _inherits(NotSupportedError, _ExtendableError2);\n\n  function NotSupportedError() {\n    _classCallCheck(this, NotSupportedError);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NotSupportedError).apply(this, arguments));\n  }\n\n  return NotSupportedError;\n}(ExtendableError);\n\nvar ResolveError =\n/*#__PURE__*/\nfunction (_ExtendableError3) {\n  _inherits(ResolveError, _ExtendableError3);\n\n  function ResolveError(href, fromHref) {\n    var _this3;\n\n    _classCallCheck(this, ResolveError);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(ResolveError).call(this, \"Unable to resolve '\".concat(href, \"'\").concat(fromHref ? \" from '\".concat(fromHref, \"'\") : '')));\n    _this3.href = href;\n    _this3.fromHref = fromHref;\n    return _this3;\n  }\n\n  return ResolveError;\n}(ExtendableError);\n\nvar NODE_CORE_SHIMS = ['assert', 'buffer', 'constants', 'crypto', 'events', 'fs', 'http', 'https', 'net', 'os', 'path', 'process', 'querystring', 'stream', 'tls', 'url', 'util', 'vm', 'zlib'].reduce(function (shims, coreLibName) {\n  return Object.assign(shims, _defineProperty({}, coreLibName, \"@velcro/node-libs@\".concat(version, \"/lib/\").concat(coreLibName, \".js\")));\n}, {});\nNODE_CORE_SHIMS['string_decoder'] = 'string_decoder@1.2.0';\nNODE_CORE_SHIMS['punycode'] = 'punycode@2.1.1';\n\nfunction _resolveBareModuleReference2(_x, _x2, _x3) {\n  return _resolveBareModuleReference.apply(this, arguments);\n} //@ts-check\n\n/**\n *\n * @param {import('./types').ImmediateExecutionManifest} manifest\n * @param {import('./types').RuntimeOptions} [options]\n * @returns {import('./types').IRuntime}\n */\n\n\nfunction _resolveBareModuleReference() {\n  _resolveBareModuleReference = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee11(resolver, bareModuleReference, parentHref) {\n    var _ref22,\n        _ref22$invalidatedBy,\n        invalidatedBy,\n        token,\n        _parseBareModuleSpec,\n        name,\n        pathname,\n        spec,\n        resolvedSpec,\n        parentUrl,\n        parentPackageInfo,\n        consolidatedDependencies,\n        dependencySpec,\n        _resolvedSpec,\n        builtIn,\n        _parseBareModuleSpec2,\n        _name,\n        _pathname,\n        _spec,\n        _resolvedSpec2,\n        _args11 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _ref22 = _args11.length > 3 && _args11[3] !== undefined ? _args11[3] : {}, _ref22$invalidatedBy = _ref22.invalidatedBy, invalidatedBy = _ref22$invalidatedBy === void 0 ? new Set() : _ref22$invalidatedBy, token = _ref22.token;\n\n            if (bareModuleReference) {\n              _context11.next = 3;\n              break;\n            }\n\n            throw new TypeError(\"Impossible to import an empty package name\".concat(parentHref ? \" from \".concat(parentHref) : ''));\n\n          case 3:\n            _parseBareModuleSpec = parseBareModuleSpec(bareModuleReference), name = _parseBareModuleSpec.name, pathname = _parseBareModuleSpec.pathname, spec = _parseBareModuleSpec.spec;\n\n            if (!spec) {\n              _context11.next = 13;\n              break;\n            }\n\n            _context11.prev = 5;\n            resolvedSpec = resolve(name, spec, parentHref);\n            return _context11.abrupt(\"return\", {\n              name: name,\n              pathname: pathname,\n              resolvedSpec: resolvedSpec,\n              spec: spec\n            });\n\n          case 10:\n            _context11.prev = 10;\n            _context11.t0 = _context11[\"catch\"](5);\n            throw _context11.t0;\n\n          case 13:\n            if (parentHref) {\n              _context11.next = 15;\n              break;\n            }\n\n            throw new ResolveError(spec, parentHref);\n\n          case 15:\n            _context11.prev = 15;\n            parentUrl = new URL(parentHref);\n            _context11.next = 22;\n            break;\n\n          case 19:\n            _context11.prev = 19;\n            _context11.t1 = _context11[\"catch\"](15);\n            throw new Error(\"Error loading bare module \".concat(spec, \" because the parent module \").concat(parentHref, \" could not be resolved to a URL\"));\n\n          case 22:\n            _context11.next = 24;\n            return resolver.readParentPackageJson(parentUrl, {\n              invalidatedBy: invalidatedBy,\n              token: token\n            });\n\n          case 24:\n            parentPackageInfo = _context11.sent;\n\n            if (!parentPackageInfo) {\n              _context11.next = 38;\n              break;\n            }\n\n            invalidatedBy.add(parentPackageInfo.url.href);\n            consolidatedDependencies = _objectSpread({}, parentPackageInfo.packageJson.peerDependencies || {}, {}, parentPackageInfo.packageJson.devDependencies || {}, {}, parentPackageInfo.packageJson.dependencies || {});\n            dependencySpec = consolidatedDependencies[name];\n\n            if (!dependencySpec) {\n              _context11.next = 38;\n              break;\n            }\n\n            _context11.prev = 30;\n            _resolvedSpec = resolve(name, dependencySpec, parentHref);\n            return _context11.abrupt(\"return\", {\n              name: name,\n              pathname: pathname,\n              resolvedSpec: _resolvedSpec,\n              spec: spec\n            });\n\n          case 35:\n            _context11.prev = 35;\n            _context11.t2 = _context11[\"catch\"](30);\n            throw _context11.t2;\n\n          case 38:\n            // That failed, let's try a NODE_SHIM\n            builtIn = NODE_CORE_SHIMS[bareModuleReference];\n\n            if (!builtIn) {\n              _context11.next = 51;\n              break;\n            }\n\n            _parseBareModuleSpec2 = parseBareModuleSpec(builtIn), _name = _parseBareModuleSpec2.name, _pathname = _parseBareModuleSpec2.pathname, _spec = _parseBareModuleSpec2.spec;\n\n            if (_spec) {\n              _context11.next = 43;\n              break;\n            }\n\n            throw new InvariantViolation(\"Found a node core shim '\".concat(builtIn, \"' for '\").concat(bareModuleReference, \"' that didn't include a version specifier\"));\n\n          case 43:\n            _context11.prev = 43;\n            _resolvedSpec2 = resolve(_name, _spec, parentHref);\n            return _context11.abrupt(\"return\", {\n              name: _name,\n              pathname: _pathname,\n              resolvedSpec: _resolvedSpec2,\n              spec: _spec\n            });\n\n          case 48:\n            _context11.prev = 48;\n            _context11.t3 = _context11[\"catch\"](43);\n            throw _context11.t3;\n\n          case 51:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11, null, [[5, 10], [15, 19], [30, 35], [43, 48]]);\n  }));\n  return _resolveBareModuleReference.apply(this, arguments);\n}\n\nfunction createRuntime(manifest, options) {\n  /** @type {Record<string, string | undefined>} */\n  var aliases = Object.create(null);\n  /** @type {Record<string, Record<string, string | undefined> | undefined> } */\n\n  var mappings = Object.create(null);\n  /** @type {Record<string, Module | undefined>} */\n\n  var modules = Object.create(null);\n  /** @type {Record<string, import('./types').ModuleFactory | undefined>} */\n\n  var registry = Object.create(null);\n  /**\n   * @class\n   * @implements {import('./types').IRuntime}\n   * @property {Module} root\n   */\n\n  function Runtime() {\n    /**\n     * @readonly\n     */\n    this.root = new Module('velcro://root', this);\n  }\n  /**\n   * @param {string} name\n   * @param {string} id\n   */\n\n\n  Runtime.prototype.alias = function (name, id) {\n    aliases[name] = id;\n  };\n  /**\n   * @param {string} fromId\n   * @param {string} spec\n   * @param {string} toId\n   */\n\n\n  Runtime.prototype.dependency = function (fromId, spec, toId) {\n    var mappingsForId = mappings[fromId];\n\n    if (!mappingsForId) {\n      mappingsForId = {};\n      mappings[fromId] = mappingsForId;\n    }\n\n    mappingsForId[spec] = toId;\n  };\n  /**\n   * @param {string} id\n   */\n\n\n  Runtime.prototype.get = function (id) {\n    id = aliases[id] || id;\n    return modules[id];\n  };\n  /**\n   * @param {string} fromId\n   * @param {string} spec\n   * @returns {string}\n   */\n\n\n  Runtime.prototype.getId = function (fromId, spec) {\n    var alias = aliases[spec];\n\n    if (alias) {\n      return alias;\n    }\n\n    var mappingsForId = mappings[fromId];\n    return mappingsForId && mappingsForId[spec] || spec;\n  };\n  /**\n   * @param {import('./types').ImmediateExecutionManifest} manifest\n   * @param {boolean} [executeEntrypoints]\n   */\n\n\n  Runtime.prototype.init = function (manifest, executeEntrypoints) {\n    for (var href in manifest.modules) {\n      var module = manifest.modules[href];\n\n      for (var alias in module.dependencies) {\n        this.dependency(href, alias, module.dependencies[alias]);\n      }\n\n      this.register(href, module.factory);\n    }\n\n    for (var _alias in manifest.aliases) {\n      this.alias(_alias, manifest.aliases[_alias]);\n    }\n\n    for (var entrypoint in manifest.entrypoints) {\n      this.alias(entrypoint, manifest.entrypoints[entrypoint]);\n\n      if (executeEntrypoints) {\n        this.require(entrypoint);\n      }\n    }\n  };\n  /**\n   * @param {string} id\n   * @param {import('./types').ModuleFactory} factory\n   */\n\n\n  Runtime.prototype.register = function (id, factory) {\n    registry[id] = factory;\n  };\n  /**\n   * @param {string} id\n   * @returns {Module | undefined}\n   */\n\n\n  Runtime.prototype.remove = function (id) {\n    var module = this.get(id);\n\n    if (!module) {\n      return;\n    }\n\n    module.dependents.forEach(function (dependent) {\n      dependent.dependencies.delete(module);\n    });\n    module.dependencies.forEach(function (dependency) {\n      dependency.dependents.delete(module);\n    });\n    delete modules[module.id];\n    delete mappings[module.id];\n    delete registry[module.id];\n    return module;\n  };\n  /**\n   * @param {string} id\n   */\n\n\n  Runtime.prototype.require = function (id) {\n    return this.root.require(aliases[id] || id);\n  };\n  /**\n   * @class\n   * @param {Module} module\n   */\n\n\n  function HotModule(module) {\n    /** @private */\n    this.module = module;\n  }\n  /**\n   * @param {() => void} cb\n   */\n\n\n  HotModule.prototype.accept = function (cb) {\n    this.module.acceptCallbacks.push({\n      cb: cb\n    });\n  };\n  /**\n   * @param {() => void} cb\n   */\n\n\n  HotModule.prototype.dispose = function (cb) {\n    this.module.disposeCallbacks.push({\n      cb: cb\n    });\n  };\n  /**\n   * @class\n   * @param {string} id\n   * @param {Runtime} runtime\n   */\n\n\n  function Module(id, runtime) {\n    /** @type {Set<Module>} */\n    this.dependencies = new Set();\n    /** @type {Set<Module>} */\n\n    this.dependents = new Set();\n    this.id = id;\n    /** @type {import('./types').AcceptCallback[]} */\n\n    this.acceptCallbacks = [];\n    /** @type {import('./types').DisposeCallback[]} */\n\n    this.disposeCallbacks = [];\n    /** @readonly */\n\n    this.module = Object.seal({\n      exports: {},\n      id: id,\n      hot: new HotModule(this)\n    });\n    /** @readonly */\n\n    this.runtime = runtime;\n    Object.defineProperty(this, Symbol.toStringTag, {\n      configurable: false,\n      enumerable: false,\n      get: function get() {\n        return 'Module';\n      }\n    });\n  }\n  /**\n   * @param {string} id\n   */\n\n\n  Module.prototype.require = function (id) {\n    id = this.runtime.getId(this.id, id);\n    /** @type {Module | undefined} */\n\n    var module = modules[id];\n\n    if (!module) {\n      var factory = registry[id];\n\n      if (!factory) {\n        throw new Error(\"Factory missing for \".concat(id));\n      }\n\n      module = new Module(id, this.runtime);\n      modules[id] = module; // Free up the registry entry and release any refs for GC\n\n      delete registry[id];\n      var dirname = id;\n      var filename = id;\n      factory.call(module.module.exports, module.module, module.module.exports, module.require.bind(module), dirname, filename);\n    } // In a hot reload scenario there may be two generations\n    // of the same module. Don't record these dependencies.\n\n\n    if (module.id !== this.id) {\n      module.dependents.add(this);\n      this.dependencies.add(module);\n    }\n\n    return module.module.exports;\n  }; //@ts-ignore\n\n\n  var runtime = options && options.runtime && window[options.runtime] || new Runtime();\n  runtime.init(manifest, options && options.executeEntrypoints);\n  return runtime;\n}\n\nvar Bundle =\n/*#__PURE__*/\nfunction () {\n  function Bundle(assets, entrypointsToAssets, dependenciesToAssets) {\n    _classCallCheck(this, Bundle);\n\n    this.assets = assets;\n    this.entrypointsToAssets = entrypointsToAssets;\n    this.dependenciesToAssets = dependenciesToAssets;\n    this.assetsByHref = new Map();\n    var _iteratorNormalCompletion8 = true;\n    var _didIteratorError8 = false;\n    var _iteratorError8 = undefined;\n\n    try {\n      for (var _iterator8 = assets[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n        var asset = _step8.value;\n        this.assetsByHref.set(asset.href, asset);\n      }\n    } catch (err) {\n      _didIteratorError8 = true;\n      _iteratorError8 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion8 && _iterator8.return != null) {\n          _iterator8.return();\n        }\n      } finally {\n        if (_didIteratorError8) {\n          throw _iteratorError8;\n        }\n      }\n    }\n  }\n\n  _createClass(Bundle, [{\n    key: \"buildForImmediateExecution\",\n    value: function buildForImmediateExecution() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var bundle = new Bundle$1({\n        separator: '\\n\\t\\t,\\n'\n      });\n      var _iteratorNormalCompletion9 = true;\n      var _didIteratorError9 = false;\n      var _iteratorError9 = undefined;\n\n      try {\n        for (var _iterator9 = this.assets[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n          var asset = _step9.value;\n          bundle.addSource(buildAssetForImmediateExecution(asset));\n        }\n      } catch (err) {\n        _didIteratorError9 = true;\n        _iteratorError9 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion9 && _iterator9.return != null) {\n            _iterator9.return();\n          }\n        } finally {\n          if (_didIteratorError9) {\n            throw _iteratorError9;\n          }\n        }\n      }\n\n      var aliasMap = Array.from(this.dependenciesToAssets).reduce(function (acc, _ref8) {\n        var _ref9 = _slicedToArray(_ref8, 2),\n            name = _ref9[0],\n            asset = _ref9[1];\n\n        acc[name] = asset.href;\n        return acc;\n      }, {});\n      var entrypointMap = Array.from(this.entrypointsToAssets).reduce(function (acc, _ref10) {\n        var _ref11 = _slicedToArray(_ref10, 2),\n            name = _ref11[0],\n            asset = _ref11[1];\n\n        acc[name] = asset.href;\n        return acc;\n      }, {});\n      var runtimeOptions = {\n        executeEntrypoints: options.executeEntrypoints,\n        runtime: options.runtime\n      };\n      bundle.prepend(\"(\".concat(createRuntime.toString(), \")({\\n\\taliases:\").concat(JSON.stringify(aliasMap), \",\\n\\tentrypoints:\").concat(JSON.stringify(entrypointMap), \",\\n\\tmodules:{\\n\"));\n      bundle.append(\"\\n\\t}\\n}, \".concat(JSON.stringify(runtimeOptions), \");\"));\n      var code = bundle.toString();\n      var sourceMap = options.sourceMap ? this.generateSourceMap(bundle, '') : undefined;\n      return {\n        code: code,\n        sourceMap: sourceMap\n      };\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var _this$buildForImmedia = this.buildForImmediateExecution(options),\n          code = _this$buildForImmedia.code,\n          sourceMap = _this$buildForImmedia.sourceMap;\n\n      return code + (sourceMap ? \"\\n//# sourceMappingURL=\".concat(sourceMap.toDataUri()) : '');\n    }\n  }, {\n    key: \"generateSourceMap\",\n    value: function generateSourceMap(bundle, href) {\n      var _this4 = this;\n\n      var inputMap = bundle.generateMap({\n        includeContent: true,\n        hires: false,\n        source: href\n      }); // In case a source map seems to be self-referential, avoid crashing\n\n      var seen = new Set();\n      return new SourceMap(remapping(inputMap.toString(), function (uri) {\n        var asset = _this4.assetsByHref.get(uri);\n\n        if (asset && asset.sourceMappingUrl) {\n          if (seen.has(asset)) {\n            return null;\n          }\n\n          seen.add(asset);\n          var match = asset.sourceMappingUrl.match(/^data:application\\/json;(?:charset=([^;]+);)?base64,(.*)$/);\n\n          if (match) {\n            if (match[1] && match[1] !== 'utf-8') {\n              return null;\n            }\n\n            try {\n              var decoded = JSON.parse(Base64.decode(match[2]));\n              return decoded;\n            } catch (err) {\n              return null;\n            }\n          }\n        }\n\n        return null;\n      }, false));\n    }\n  }]);\n\n  return Bundle;\n}();\n\nvar SourceMap =\n/*#__PURE__*/\nfunction () {\n  function SourceMap(input) {\n    _classCallCheck(this, SourceMap);\n\n    this.file = input.file;\n    this.mappings = input.mappings;\n    this.sourceRoot = input.sourceRoot;\n    this.names = input.names;\n    this.sources = input.sources;\n    this.sourcesContent = input.sourcesContent;\n    this.version = input.version;\n  }\n\n  _createClass(SourceMap, [{\n    key: \"toString\",\n    value: function toString() {\n      return JSON.stringify(this);\n    }\n  }, {\n    key: \"toDataUri\",\n    value: function toDataUri() {\n      return \"data:application/json;charset=utf-8;base64,\".concat(Base64.encode(this.toString()));\n    }\n  }]);\n\n  return SourceMap;\n}();\n\nfunction buildAssetAndCollectDependencies(asset) {\n  var indent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '\\t';\n\n  if (!asset.magicString) {\n    throw new InvariantViolation(\"Invariant violation: asset is not loaded '\".concat(asset.href, \"'\"));\n  }\n\n  var dependencies = {};\n  var magicString = asset.magicString.clone();\n  magicString.trim();\n  magicString.indent(indent);\n\n  if (!asset.dependencies) {\n    throw new InvariantViolation(\"Asset '\".concat(asset.href, \"' scheduled for build is missing its dependencies array\"));\n  } // We'll replace each dependency string with the resolved stable href. The stable href doesn't require any\n  // information about where it is being resolved from, so it is useful as a long-term pointer whose target\n  // can change over time\n\n\n  var _iteratorNormalCompletion10 = true;\n  var _didIteratorError10 = false;\n  var _iteratorError10 = undefined;\n\n  try {\n    for (var _iterator10 = asset.dependencies[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n      var dependency = _step10.value;\n\n      if (!dependency.resolveDetails) {\n        throw new InvariantViolation(\"Asset '\".concat(asset.href, \"' has an unresolved dependency of type '\").concat(dependency.type, \"' with spec '\").concat(dependency.value, \"'\"));\n      }\n\n      switch (dependency.type) {\n        case Asset.DependencyKind.Require:\n          {\n            dependencies[dependency.value] = dependency.resolveDetails.resolvedHref;\n            break;\n          }\n\n        case Asset.DependencyKind.RequireResolve:\n          {\n            dependencies[dependency.value] = dependency.resolveDetails.resolvedHref;\n            break;\n          }\n\n        case Asset.DependencyKind.InjectedGlobal:\n          {\n            magicString.prepend(\"\\n\".concat(indent, \"const \").concat(dependency.symbolName, \" = require(\").concat(JSON.stringify(dependency.symbolName), \")\").concat(dependency.exportName ? \".\".concat(dependency.exportName) : '', \";\\n\"));\n            dependencies[dependency.symbolName] = dependency.resolveDetails.resolvedHref;\n            break;\n          }\n\n        default:\n          throw new Error(\"Invariant violation: Encountered unexpected dependency kind '\".concat(dependency.type, \"'\"));\n      }\n    }\n  } catch (err) {\n    _didIteratorError10 = true;\n    _iteratorError10 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion10 && _iterator10.return != null) {\n        _iterator10.return();\n      }\n    } finally {\n      if (_didIteratorError10) {\n        throw _iteratorError10;\n      }\n    }\n  }\n\n  return {\n    dependencies: dependencies,\n    magicString: magicString\n  };\n}\n\nfunction buildAssetForImmediateExecution(asset) {\n  var _buildAssetAndCollect = buildAssetAndCollectDependencies(asset, '\\t\\t\\t\\t'),\n      dependencies = _buildAssetAndCollect.dependencies,\n      magicString = _buildAssetAndCollect.magicString;\n\n  magicString.prepend(\"\\t\\t\".concat(JSON.stringify(asset.href), \": {\\n\\t\\t\\tdependencies: \").concat(JSON.stringify(dependencies), \",\\n\\t\\t\\tfactory: function(module, exports, require, __dirname, __filename){\\n\"));\n  magicString.append('\\n\\t\\t}}');\n  return magicString;\n}\n\nvar EMPTY_MODULE_URL = new URL('velcro://@empty');\nvar EMPTY_MODULE_CODE = 'module.exports = function(){};';\n\nvar Bundler =\n/*#__PURE__*/\nfunction () {\n  function Bundler(options) {\n    _classCallCheck(this, Bundler);\n\n    this.assetsByHref = new Map();\n    this.resolutionCache = new Map();\n    this.resolutionInvalidations = new MapSet();\n    this.onAssetAddedEmitter = new Emitter();\n    this.onAssetRemovedEmitter = new Emitter();\n    this.resolveBareModule = options.resolveBareModule;\n    this.resolver = options.resolver;\n  }\n\n  _createClass(Bundler, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this.onAssetAddedEmitter.dispose();\n      this.onAssetRemovedEmitter.dispose();\n      this.assetsByHref.clear();\n    }\n  }, {\n    key: \"getOrCreateAsset\",\n    value: function getOrCreateAsset(_ref12) {\n      var href = _ref12.resolvedHref,\n          rootHref = _ref12.rootHref;\n      var asset = this.assetsByHref.get(href);\n\n      if (!asset) {\n        asset = new Asset(href, rootHref);\n        this.assetsByHref.set(href, asset);\n        this.onAssetAddedEmitter.fire(asset);\n      }\n\n      return asset;\n    }\n  }, {\n    key: \"generateBundle\",\n    value: function () {\n      var _generateBundle = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(entrypoints) {\n        var _this5 = this;\n\n        var options,\n            tokenSource,\n            token,\n            pendingOperations,\n            assets,\n            dfd,\n            dependenciesToAssets,\n            entrypointsToAssets,\n            enqueue,\n            resolveHref,\n            resolveAsset,\n            resolveDependency,\n            _iteratorNormalCompletion13,\n            _didIteratorError13,\n            _iteratorError13,\n            _iterator13,\n            _step13,\n            invalidation,\n            _iteratorNormalCompletion14,\n            _didIteratorError14,\n            _iteratorError14,\n            _iterator14,\n            _step14,\n            resolutionCacheKey,\n            _iteratorNormalCompletion15,\n            _didIteratorError15,\n            _iteratorError15,\n            _loop,\n            _iterator15,\n            _step15,\n            _args6 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                options = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : {};\n\n                if (Array.isArray(entrypoints)) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                throw new Error('Generating a bundle requires passing in an array of entrypoints');\n\n              case 3:\n                tokenSource = new CancellationTokenSource();\n                token = tokenSource.token;\n\n                if (options.token) {\n                  if (options.token.isCancellationRequested) {\n                    tokenSource.cancel();\n                    tokenSource.dispose();\n                  }\n\n                  options.token.onCancellationRequested(function () {\n                    tokenSource.cancel();\n                    tokenSource.dispose();\n                  });\n                }\n\n                pendingOperations = 0;\n                assets = new Set();\n                dfd = new Deferred(token);\n                dependenciesToAssets = new Map();\n                entrypointsToAssets = new Map();\n\n                enqueue =\n                /*#__PURE__*/\n                function () {\n                  var _ref13 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee(op) {\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.prev = 0;\n                            pendingOperations++;\n\n                            if (options.onEnqueueAsset) {\n                              options.onEnqueueAsset();\n                            }\n\n                            _context.next = 5;\n                            return op();\n\n                          case 5:\n                            if (options.onCompleteAsset) {\n                              options.onCompleteAsset();\n                            }\n\n                            pendingOperations--;\n\n                            if (!(pendingOperations < 0)) {\n                              _context.next = 9;\n                              break;\n                            }\n\n                            throw new InvariantViolation('Pending operations fell below zero');\n\n                          case 9:\n                            if (pendingOperations === 0) {\n                              // Let's make sure this happens after the current microtask.\n                              setTimeout(function () {\n                                return dfd.resolve();\n                              }, 0);\n                            }\n\n                            _context.next = 15;\n                            break;\n\n                          case 12:\n                            _context.prev = 12;\n                            _context.t0 = _context[\"catch\"](0);\n\n                            // Let's make sure this happens 'later'.\n                            if (!dfd.isSettled) {\n                              Promise.resolve().then(function () {\n                                return dfd.reject(_context.t0);\n                              }).catch(function (_) {\n                                return undefined;\n                              });\n                            }\n\n                          case 15:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee, null, [[0, 12]]);\n                  }));\n\n                  return function enqueue(_x5) {\n                    return _ref13.apply(this, arguments);\n                  };\n                }();\n\n                resolveHref =\n                /*#__PURE__*/\n                function () {\n                  var _ref14 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee2(spec, fromHref) {\n                    var resolutionCacheKey, resolveDetails, _iteratorNormalCompletion11, _didIteratorError11, _iteratorError11, _iterator11, _step11, invalidatedBy;\n\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            resolutionCacheKey = JSON.stringify([spec, fromHref]);\n                            resolveDetails = _this5.resolutionCache.get(resolutionCacheKey);\n\n                            if (resolveDetails) {\n                              _context2.next = 26;\n                              break;\n                            }\n\n                            _context2.next = 5;\n                            return _this5.resolveWithDetails(spec, fromHref, {\n                              token: token\n                            });\n\n                          case 5:\n                            resolveDetails = _context2.sent;\n\n                            _this5.resolutionCache.set(resolutionCacheKey, resolveDetails);\n\n                            _iteratorNormalCompletion11 = true;\n                            _didIteratorError11 = false;\n                            _iteratorError11 = undefined;\n                            _context2.prev = 10;\n\n                            for (_iterator11 = resolveDetails.invalidatedBy[Symbol.iterator](); !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {\n                              invalidatedBy = _step11.value;\n\n                              if (invalidatedBy !== resolveDetails.resolvedHref) {\n                                _this5.resolutionInvalidations.add(invalidatedBy, resolutionCacheKey);\n                              }\n                            }\n\n                            _context2.next = 18;\n                            break;\n\n                          case 14:\n                            _context2.prev = 14;\n                            _context2.t0 = _context2[\"catch\"](10);\n                            _didIteratorError11 = true;\n                            _iteratorError11 = _context2.t0;\n\n                          case 18:\n                            _context2.prev = 18;\n                            _context2.prev = 19;\n\n                            if (!_iteratorNormalCompletion11 && _iterator11.return != null) {\n                              _iterator11.return();\n                            }\n\n                          case 21:\n                            _context2.prev = 21;\n\n                            if (!_didIteratorError11) {\n                              _context2.next = 24;\n                              break;\n                            }\n\n                            throw _iteratorError11;\n\n                          case 24:\n                            return _context2.finish(21);\n\n                          case 25:\n                            return _context2.finish(18);\n\n                          case 26:\n                            return _context2.abrupt(\"return\", resolveDetails);\n\n                          case 27:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, null, [[10, 14, 18, 26], [19,, 21, 25]]);\n                  }));\n\n                  return function resolveHref(_x6, _x7) {\n                    return _ref14.apply(this, arguments);\n                  };\n                }();\n\n                resolveAsset =\n                /*#__PURE__*/\n                function () {\n                  var _ref15 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee3(resolveDetails) {\n                    var asset, code, _iteratorNormalCompletion12, _didIteratorError12, _iteratorError12, _iterator12, _step12, dependency;\n\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            asset = _this5.getOrCreateAsset(resolveDetails); // Already enqueued in this bundle, no need to re-enqueue\n\n                            if (assets.has(asset)) {\n                              _context3.next = 27;\n                              break;\n                            }\n\n                            assets.add(asset);\n\n                            if (!(!asset.magicString || !asset.dependencies)) {\n                              _context3.next = 8;\n                              break;\n                            }\n\n                            _context3.next = 6;\n                            return _this5.readCode(asset, {\n                              token: token\n                            });\n\n                          case 6:\n                            code = _context3.sent;\n                            asset.setCode(code);\n\n                          case 8:\n                            _iteratorNormalCompletion12 = true;\n                            _didIteratorError12 = false;\n                            _iteratorError12 = undefined;\n                            _context3.prev = 11;\n\n                            for (_iterator12 = asset.dependencies[Symbol.iterator](); !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {\n                              dependency = _step12.value;\n                              resolveDependency(asset, dependency);\n                            }\n\n                            _context3.next = 19;\n                            break;\n\n                          case 15:\n                            _context3.prev = 15;\n                            _context3.t0 = _context3[\"catch\"](11);\n                            _didIteratorError12 = true;\n                            _iteratorError12 = _context3.t0;\n\n                          case 19:\n                            _context3.prev = 19;\n                            _context3.prev = 20;\n\n                            if (!_iteratorNormalCompletion12 && _iterator12.return != null) {\n                              _iterator12.return();\n                            }\n\n                          case 22:\n                            _context3.prev = 22;\n\n                            if (!_didIteratorError12) {\n                              _context3.next = 25;\n                              break;\n                            }\n\n                            throw _iteratorError12;\n\n                          case 25:\n                            return _context3.finish(22);\n\n                          case 26:\n                            return _context3.finish(19);\n\n                          case 27:\n                            return _context3.abrupt(\"return\", asset);\n\n                          case 28:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3, null, [[11, 15, 19, 27], [20,, 22, 26]]);\n                  }));\n\n                  return function resolveAsset(_x8) {\n                    return _ref15.apply(this, arguments);\n                  };\n                }();\n\n                resolveDependency = function resolveDependency(asset, dependency) {\n                  enqueue(\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee4() {\n                    var resolveDetails;\n                    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            resolveDetails = dependency.resolveDetails;\n\n                            if (resolveDetails) {\n                              _context4.next = 8;\n                              break;\n                            }\n\n                            _context4.next = 4;\n                            return resolveHref(dependency.value, asset.href);\n\n                          case 4:\n                            resolveDetails = _context4.sent;\n                            dependency.resolveDetails = resolveDetails;\n                            _context4.next = 8;\n                            break;\n\n                          case 8:\n                            return _context4.abrupt(\"return\", resolveAsset(resolveDetails));\n\n                          case 9:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  })));\n                };\n\n                if (!options.invalidations) {\n                  _context6.next = 60;\n                  break;\n                }\n\n                _iteratorNormalCompletion13 = true;\n                _didIteratorError13 = false;\n                _iteratorError13 = undefined;\n                _context6.prev = 19;\n                _iterator13 = options.invalidations[Symbol.iterator]();\n\n              case 21:\n                if (_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done) {\n                  _context6.next = 46;\n                  break;\n                }\n\n                invalidation = _step13.value;\n                _iteratorNormalCompletion14 = true;\n                _didIteratorError14 = false;\n                _iteratorError14 = undefined;\n                _context6.prev = 26;\n\n                for (_iterator14 = this.resolutionInvalidations.getValues(invalidation)[Symbol.iterator](); !(_iteratorNormalCompletion14 = (_step14 = _iterator14.next()).done); _iteratorNormalCompletion14 = true) {\n                  resolutionCacheKey = _step14.value;\n                  this.resolutionInvalidations.deleteAll(invalidation);\n                  if (this.resolutionCache.delete(resolutionCacheKey)) ;\n                }\n\n                _context6.next = 34;\n                break;\n\n              case 30:\n                _context6.prev = 30;\n                _context6.t0 = _context6[\"catch\"](26);\n                _didIteratorError14 = true;\n                _iteratorError14 = _context6.t0;\n\n              case 34:\n                _context6.prev = 34;\n                _context6.prev = 35;\n\n                if (!_iteratorNormalCompletion14 && _iterator14.return != null) {\n                  _iterator14.return();\n                }\n\n              case 37:\n                _context6.prev = 37;\n\n                if (!_didIteratorError14) {\n                  _context6.next = 40;\n                  break;\n                }\n\n                throw _iteratorError14;\n\n              case 40:\n                return _context6.finish(37);\n\n              case 41:\n                return _context6.finish(34);\n\n              case 42:\n                if (this.assetsByHref.delete(invalidation)) ;\n\n              case 43:\n                _iteratorNormalCompletion13 = true;\n                _context6.next = 21;\n                break;\n\n              case 46:\n                _context6.next = 52;\n                break;\n\n              case 48:\n                _context6.prev = 48;\n                _context6.t1 = _context6[\"catch\"](19);\n                _didIteratorError13 = true;\n                _iteratorError13 = _context6.t1;\n\n              case 52:\n                _context6.prev = 52;\n                _context6.prev = 53;\n\n                if (!_iteratorNormalCompletion13 && _iterator13.return != null) {\n                  _iterator13.return();\n                }\n\n              case 55:\n                _context6.prev = 55;\n\n                if (!_didIteratorError13) {\n                  _context6.next = 58;\n                  break;\n                }\n\n                throw _iteratorError13;\n\n              case 58:\n                return _context6.finish(55);\n\n              case 59:\n                return _context6.finish(52);\n\n              case 60:\n                _iteratorNormalCompletion15 = true;\n                _didIteratorError15 = false;\n                _iteratorError15 = undefined;\n                _context6.prev = 63;\n\n                _loop = function _loop() {\n                  var entrypoint = _step15.value;\n                  enqueue(\n                  /*#__PURE__*/\n                  _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee5() {\n                    var resolveDetails, asset, code, dependencies, _iteratorNormalCompletion16, _didIteratorError16, _iteratorError16, _iterator16, _step16, dependency;\n\n                    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            _context5.next = 2;\n                            return resolveHref(entrypoint);\n\n                          case 2:\n                            resolveDetails = _context5.sent;\n                            _context5.next = 5;\n                            return resolveAsset(resolveDetails);\n\n                          case 5:\n                            asset = _context5.sent;\n                            entrypointsToAssets.set(entrypoint, asset);\n\n                            if (!(!asset.magicString || !asset.dependencies)) {\n                              _context5.next = 31;\n                              break;\n                            }\n\n                            _context5.next = 10;\n                            return _this5.readCode(asset, {\n                              token: token\n                            });\n\n                          case 10:\n                            code = _context5.sent;\n                            dependencies = asset.setCode(code);\n                            _iteratorNormalCompletion16 = true;\n                            _didIteratorError16 = false;\n                            _iteratorError16 = undefined;\n                            _context5.prev = 15;\n\n                            for (_iterator16 = dependencies[Symbol.iterator](); !(_iteratorNormalCompletion16 = (_step16 = _iterator16.next()).done); _iteratorNormalCompletion16 = true) {\n                              dependency = _step16.value;\n                              resolveDependency(asset, dependency);\n                            }\n\n                            _context5.next = 23;\n                            break;\n\n                          case 19:\n                            _context5.prev = 19;\n                            _context5.t0 = _context5[\"catch\"](15);\n                            _didIteratorError16 = true;\n                            _iteratorError16 = _context5.t0;\n\n                          case 23:\n                            _context5.prev = 23;\n                            _context5.prev = 24;\n\n                            if (!_iteratorNormalCompletion16 && _iterator16.return != null) {\n                              _iterator16.return();\n                            }\n\n                          case 26:\n                            _context5.prev = 26;\n\n                            if (!_didIteratorError16) {\n                              _context5.next = 29;\n                              break;\n                            }\n\n                            throw _iteratorError16;\n\n                          case 29:\n                            return _context5.finish(26);\n\n                          case 30:\n                            return _context5.finish(23);\n\n                          case 31:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5, null, [[15, 19, 23, 31], [24,, 26, 30]]);\n                  })));\n                };\n\n                for (_iterator15 = entrypoints[Symbol.iterator](); !(_iteratorNormalCompletion15 = (_step15 = _iterator15.next()).done); _iteratorNormalCompletion15 = true) {\n                  _loop();\n                }\n\n                _context6.next = 72;\n                break;\n\n              case 68:\n                _context6.prev = 68;\n                _context6.t2 = _context6[\"catch\"](63);\n                _didIteratorError15 = true;\n                _iteratorError15 = _context6.t2;\n\n              case 72:\n                _context6.prev = 72;\n                _context6.prev = 73;\n\n                if (!_iteratorNormalCompletion15 && _iterator15.return != null) {\n                  _iterator15.return();\n                }\n\n              case 75:\n                _context6.prev = 75;\n\n                if (!_didIteratorError15) {\n                  _context6.next = 78;\n                  break;\n                }\n\n                throw _iteratorError15;\n\n              case 78:\n                return _context6.finish(75);\n\n              case 79:\n                return _context6.finish(72);\n\n              case 80:\n                _context6.next = 82;\n                return dfd.promise;\n\n              case 82:\n                return _context6.abrupt(\"return\", new Bundle(assets, entrypointsToAssets, dependenciesToAssets));\n\n              case 83:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[19, 48, 52, 60], [26, 30, 34, 42], [35,, 37, 41], [53,, 55, 59], [63, 68, 72, 80], [73,, 75, 79]]);\n      }));\n\n      function generateBundle(_x4) {\n        return _generateBundle.apply(this, arguments);\n      }\n\n      return generateBundle;\n    }()\n  }, {\n    key: \"readCode\",\n    value: function () {\n      var _readCode = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(asset, _ref18) {\n        var token, buf, code;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                token = _ref18.token;\n\n                if (!(asset.href === EMPTY_MODULE_URL.href)) {\n                  _context7.next = 3;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", EMPTY_MODULE_CODE);\n\n              case 3:\n                _context7.next = 5;\n                return this.resolver.host.readFileContent(this.resolver, new URL(asset.href), {\n                  token: token\n                });\n\n              case 5:\n                buf = _context7.sent;\n                code = this.resolver.decoder.decode(buf);\n                return _context7.abrupt(\"return\", code);\n\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function readCode(_x9, _x10) {\n        return _readCode.apply(this, arguments);\n      }\n\n      return readCode;\n    }()\n  }, {\n    key: \"resolveBareModuleReference\",\n    value: function () {\n      var _resolveBareModuleReference3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(href, fromHref) {\n        var _ref19,\n            _ref19$invalidatedBy,\n            invalidatedBy,\n            token,\n            resolvedArg,\n            resolvedUri,\n            _args8 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _ref19 = _args8.length > 2 && _args8[2] !== undefined ? _args8[2] : {}, _ref19$invalidatedBy = _ref19.invalidatedBy, invalidatedBy = _ref19$invalidatedBy === void 0 ? new Set() : _ref19$invalidatedBy, token = _ref19.token;\n                _context8.next = 3;\n                return _resolveBareModuleReference2(this.resolver, href, fromHref, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 3:\n                resolvedArg = _context8.sent;\n\n                if (resolvedArg) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                throw new ResolveError(href, fromHref);\n\n              case 6:\n                _context8.t0 = resolvedArg.resolvedSpec.type;\n                _context8.next = _context8.t0 === 'range' ? 9 : _context8.t0 === 'tag' ? 9 : _context8.t0 === 'version' ? 9 : 11;\n                break;\n\n              case 9:\n                resolvedUri = this.resolveBareModule(\"\".concat(resolvedArg.name, \"@\").concat(resolvedArg.resolvedSpec.fetchSpec), resolvedArg.pathname);\n                return _context8.abrupt(\"return\", this.resolveRelativeModuleReference(resolvedUri.href, fromHref, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }));\n\n              case 11:\n                throw new NotSupportedError(\"Unsupported dependency type '\".concat(resolvedArg.resolvedSpec.type, \"' for '\").concat(href, \"'\").concat(fromHref ? \" from \".concat(fromHref) : ''));\n\n              case 12:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function resolveBareModuleReference(_x11, _x12) {\n        return _resolveBareModuleReference3.apply(this, arguments);\n      }\n\n      return resolveBareModuleReference;\n    }()\n  }, {\n    key: \"resolveRelativeModuleReference\",\n    value: function () {\n      var _resolveRelativeModuleReference = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9(href, fromHref, _ref20) {\n        var invalidatedBy, token, combinedUri, resolveResult, resolvedUri, resolvedHref, rootHref;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                invalidatedBy = _ref20.invalidatedBy, token = _ref20.token;\n                combinedUri = new URL(href, fromHref);\n                _context9.next = 4;\n                return this.resolver.resolve(combinedUri, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                });\n\n              case 4:\n                resolveResult = _context9.sent;\n\n                if (!resolveResult.resolvedUrl) {\n                  resolvedUri = EMPTY_MODULE_URL;\n                } else {\n                  resolvedUri = resolveResult.resolvedUrl;\n                }\n\n                resolvedHref = resolvedUri.href;\n                rootHref = resolveResult.rootUrl.href;\n                return _context9.abrupt(\"return\", {\n                  type: Bundler.ResolveDetailsKind.Relative,\n                  ignored: resolveResult.ignored,\n                  invalidatedBy: invalidatedBy,\n                  resolvedHref: resolvedHref,\n                  rootHref: rootHref,\n                  stableHref: resolvedHref,\n                  stableRootHref: rootHref\n                });\n\n              case 9:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function resolveRelativeModuleReference(_x13, _x14, _x15) {\n        return _resolveRelativeModuleReference.apply(this, arguments);\n      }\n\n      return resolveRelativeModuleReference;\n    }()\n  }, {\n    key: \"resolveWithDetails\",\n    value: function () {\n      var _resolveWithDetails = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee10(uri, fromUri, _ref21) {\n        var _ref21$invalidatedBy, invalidatedBy, token;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _ref21$invalidatedBy = _ref21.invalidatedBy, invalidatedBy = _ref21$invalidatedBy === void 0 ? new Set() : _ref21$invalidatedBy, token = _ref21.token;\n\n                if (!isBareModuleSpecifier(uri)) {\n                  _context10.next = 3;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\", this.resolveBareModuleReference(uri, fromUri, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }));\n\n              case 3:\n                return _context10.abrupt(\"return\", this.resolveRelativeModuleReference(uri, fromUri, {\n                  invalidatedBy: invalidatedBy,\n                  token: token\n                }));\n\n              case 4:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function resolveWithDetails(_x16, _x17, _x18) {\n        return _resolveWithDetails.apply(this, arguments);\n      }\n\n      return resolveWithDetails;\n    }()\n  }, {\n    key: \"onAssetAdded\",\n    get: function get() {\n      return this.onAssetAddedEmitter.event;\n    }\n  }, {\n    key: \"onAssetRemoved\",\n    get: function get() {\n      return this.onAssetRemovedEmitter.event;\n    }\n  }]);\n\n  return Bundler;\n}();\n\n(function (Bundler) {\n  var ResolveDetailsKind;\n\n  (function (ResolveDetailsKind) {\n    ResolveDetailsKind[\"BareModule\"] = \"bare_module\";\n    ResolveDetailsKind[\"Relative\"] = \"relative\";\n  })(ResolveDetailsKind = Bundler.ResolveDetailsKind || (Bundler.ResolveDetailsKind = {}));\n})(Bundler || (Bundler = {}));\n\nvar base64 = {\n  decode: Base64.decode,\n  encode: Base64.encode\n};\nexport { Asset, Bundle, Bundler, InvariantViolation, NotSupportedError, ResolveError, base64, getSourceMappingUrl };","import _slicedToArray from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { AbstractResolverHost } from '@velcro/resolver';\n\nvar ResolverHostCompound =\n/*#__PURE__*/\nfunction (_AbstractResolverHost) {\n  _inherits(ResolverHostCompound, _AbstractResolverHost);\n\n  function ResolverHostCompound(hosts) {\n    var _this;\n\n    _classCallCheck(this, ResolverHostCompound);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResolverHostCompound).call(this));\n    _this.hosts = new Map();\n\n    for (var prefix in hosts) {\n      _this.hosts.set(prefix, hosts[prefix]);\n    }\n\n    return _this;\n  }\n\n  _createClass(ResolverHostCompound, [{\n    key: \"getCanonicalUrl\",\n    value: function getCanonicalUrl(resolver, url) {\n      var href = url.href; // TODO: Decide whether a more efficient solution is needed\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.hosts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ref3 = _step.value;\n\n          var _ref2 = _slicedToArray(_ref3, 2);\n\n          var prefix = _ref2[0];\n          var child = _ref2[1];\n\n          if (href.startsWith(prefix)) {\n            if (typeof child.getCanonicalUrl === 'function') {\n              // console.error(`getCanonicalUrl(%s): %s`, url.href, prefix);\n              return child.getCanonicalUrl(resolver, url);\n            }\n\n            break;\n          }\n        } // If the resolved child doesn't have this method, treat it as an identity function\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return Promise.resolve(url);\n    }\n  }, {\n    key: \"getResolveRoot\",\n    value: function getResolveRoot(resolver, url) {\n      var href = url.href; // TODO: Decide whether a more efficient solution is needed\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.hosts[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _ref6 = _step2.value;\n\n          var _ref5 = _slicedToArray(_ref6, 2);\n\n          var prefix = _ref5[0];\n          var child = _ref5[1];\n\n          if (href.startsWith(prefix)) {\n            // console.error(`getResolveRoot(%s): %s`, url.href, prefix);\n            return child.getResolveRoot(resolver, url);\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return Promise.reject(new Error(\"No suitable host found for url \".concat(href)));\n    }\n  }, {\n    key: \"listEntries\",\n    value: function listEntries(resolver, url) {\n      var href = url.href; // TODO: Decide whether a more efficient solution is needed\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.hosts[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _ref9 = _step3.value;\n\n          var _ref8 = _slicedToArray(_ref9, 2);\n\n          var prefix = _ref8[0];\n          var child = _ref8[1];\n\n          if (href.startsWith(prefix)) {\n            // console.error(`listEntries(%s): %s`, url.href, prefix);\n            return child.listEntries(resolver, url);\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      return Promise.reject(new Error(\"No suitable host found for url \".concat(href)));\n    }\n  }, {\n    key: \"readFileContent\",\n    value: function readFileContent(resolver, url) {\n      var href = url.href; // TODO: Decide whether a more efficient solution is needed\n\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.hosts[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var _ref12 = _step4.value;\n\n          var _ref11 = _slicedToArray(_ref12, 2);\n\n          var prefix = _ref11[0];\n          var child = _ref11[1];\n\n          if (href.startsWith(prefix)) {\n            // console.error(`readFileContent(%s): %s`, url.href, prefix);\n            return child.readFileContent(resolver, url);\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return Promise.reject(new Error(\"No suitable host found for url \".concat(href)));\n    }\n  }]);\n\n  return ResolverHostCompound;\n}(AbstractResolverHost);\n\nexport { ResolverHostCompound };","import _defineProperty from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _createClass from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"/Users/ggoodman/Projects/velcro/packages/playground/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { ResolvedEntryKind, AbstractResolverHost, CanceledError, EntryNotFoundError, Resolver, util } from '@velcro/resolver';\nimport LRU from 'lru-cache';\nimport { validRange, satisfies } from 'semver';\n\nvar ExtendableError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(ExtendableError, _Error);\n\n  function ExtendableError(message) {\n    var _this;\n\n    _classCallCheck(this, ExtendableError);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ExtendableError).call(this, message));\n    _this.name = _this.constructor.name;\n\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(_assertThisInitialized(_this), _this.constructor);\n    } else {\n      _this.stack = new Error(message).stack;\n    }\n\n    return _this;\n  }\n\n  return ExtendableError;\n}(_wrapNativeSuper(Error));\n\nvar FetchError =\n/*#__PURE__*/\nfunction (_ExtendableError) {\n  _inherits(FetchError, _ExtendableError);\n\n  function FetchError(href, err) {\n    _classCallCheck(this, FetchError);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FetchError).call(this, \"Error while fetching \".concat(href, \": \").concat(err.name || Error, \": \").concat(err.message)));\n  }\n\n  return FetchError;\n}(ExtendableError);\n\nfunction isValidEntry(entry) {\n  if (!entry || typeof entry !== 'object') return false;\n  return isValidFile(entry) || isValidDirectory(entry);\n}\n\nfunction isValidDirectory(entry) {\n  return typeof entry === 'object' && entry && entry.type === ResolvedEntryKind.Directory && typeof entry.path === 'string' && entry.path && (typeof entry.files === 'undefined' || Array.isArray(entry.files) && entry.files.every(isValidEntry));\n}\n\nfunction isValidFile(entry) {\n  return typeof entry === 'object' && entry && entry.type === ResolvedEntryKind.File && typeof entry.path === 'string' && entry.path;\n}\n\nfunction signalFromCancellationToken(token, AbortControllerConstructor) {\n  if (!token || !AbortControllerConstructor) {\n    return;\n  }\n\n  var abortController = new AbortControllerConstructor();\n\n  if (token.isCancellationRequested) {\n    abortController.abort();\n  } else {\n    token.onCancellationRequested(function () {\n      return abortController.abort();\n    });\n  }\n\n  return abortController.signal;\n}\n\nvar UnpkgCdn =\n/*#__PURE__*/\nfunction () {\n  function UnpkgCdn() {\n    _classCallCheck(this, UnpkgCdn);\n\n    this.name = 'unpkg';\n    this.UNPKG_SPEC_RX = /^\\/((@[^/]+\\/[^/@]+|[^/@]+)(?:@([^/]+))?)(.*)?$/;\n  }\n\n  _createClass(UnpkgCdn, [{\n    key: \"isValidUrl\",\n    value: function isValidUrl(url) {\n      return url.protocol !== UnpkgCdn.protocol || url.hostname !== UnpkgCdn.host;\n    }\n  }, {\n    key: \"normalizePackageListing\",\n    value: function normalizePackageListing(result) {\n      if (!isValidDirectory(result)) {\n        throw new Error(\"Error normalizing directory listing\");\n      }\n\n      return result;\n    }\n  }, {\n    key: \"parseUrl\",\n    value: function parseUrl(url) {\n      if (url instanceof URL) {\n        url = url.pathname;\n      }\n      /**\r\n       * 1: scope + name + version\r\n       * 2: scope + name\r\n       * 3: version?\r\n       * 4: pathname\r\n       */\n\n\n      var matches = url.match(this.UNPKG_SPEC_RX);\n\n      if (!matches) {\n        throw new Error(\"Unable to parse unexpected unpkg url: \".concat(url));\n      }\n\n      return {\n        spec: matches[1],\n        name: matches[2],\n        version: matches[3] || '',\n        pathname: matches[4] || ''\n      };\n    }\n  }, {\n    key: \"urlForPackageFile\",\n    value: function urlForPackageFile(spec, pathname) {\n      return new URL(\"\".concat(UnpkgCdn.protocol, \"//\").concat(UnpkgCdn.host, \"/\").concat(spec).concat(pathname));\n    }\n  }, {\n    key: \"urlForPackageList\",\n    value: function urlForPackageList(spec) {\n      return new URL(\"\".concat(UnpkgCdn.protocol, \"//\").concat(UnpkgCdn.host, \"/\").concat(spec, \"/?meta\"));\n    }\n  }]);\n\n  return UnpkgCdn;\n}();\n\nUnpkgCdn.protocol = 'https:';\nUnpkgCdn.host = 'unpkg.com';\n\nvar JSDelivrCdn =\n/*#__PURE__*/\nfunction () {\n  function JSDelivrCdn() {\n    var kind = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'npm';\n\n    _classCallCheck(this, JSDelivrCdn);\n\n    this.kind = kind;\n    this.name = 'jsdelivr';\n    this.specRx = {\n      gh: /^\\/(([^/]+\\/[^/@]+)(?:@([^/]+))?)(.*)?$/,\n      npm: /^\\/((@[^/]+\\/[^/@]+|[^/@]+)(?:@([^/]+))?)(.*)?$/\n    };\n  }\n\n  _createClass(JSDelivrCdn, [{\n    key: \"isValidUrl\",\n    value: function isValidUrl(url) {\n      return url.protocol !== JSDelivrCdn.protocol || url.hostname !== JSDelivrCdn.host;\n    }\n  }, {\n    key: \"normalizePackageListing\",\n    value: function normalizePackageListing(result) {\n      if (!result || typeof result !== 'object') {\n        throw new Error(\"Unexpected package listing contents\");\n      }\n\n      var files = result.files;\n\n      if (!Array.isArray(files)) {\n        throw new Error(\"Unexpected package listing contents\");\n      }\n\n      var mapChildEntry = function mapChildEntry(parent, child) {\n        if (!child || typeof child !== 'object') {\n          throw new Error(\"Unexpected entry in package listing contents\");\n        }\n\n        var name = child.name;\n\n        if (typeof name !== 'string') {\n          throw new Error(\"Unexpected entry in package listing contents\");\n        }\n\n        var path = \"\".concat(parent, \"/\").concat(name);\n\n        if (child.type === ResolvedEntryKind.Directory) {\n          var _files = child.files;\n\n          if (!Array.isArray(_files)) {\n            throw new Error(\"Unexpected entry in package listing contents\");\n          }\n\n          return {\n            type: ResolvedEntryKind.Directory,\n            path: path,\n            files: _files.map(function (file) {\n              return mapChildEntry(path, file);\n            })\n          };\n        } else if (child.type === ResolvedEntryKind.File) {\n          return {\n            type: ResolvedEntryKind.File,\n            path: path\n          };\n        }\n\n        throw new Error(\"Error mapping child entry in package file listing\");\n      };\n\n      return {\n        type: ResolvedEntryKind.Directory,\n        path: '/',\n        files: files.map(function (file) {\n          return mapChildEntry('', file);\n        })\n      };\n    }\n  }, {\n    key: \"parseUrl\",\n    value: function parseUrl(url) {\n      if (url instanceof URL) {\n        url = url.pathname;\n      }\n\n      var prefix = \"/\".concat(this.kind);\n\n      if (!url.startsWith(prefix)) {\n        throw new Error(\"Unable to parse unexpected \".concat(this.name, \" url: \").concat(url));\n      }\n\n      url = url.slice(prefix.length);\n      /**\r\n       * 1: scope + name + version\r\n       * 2: scope + name\r\n       * 3: version?\r\n       * 4: pathname\r\n       */\n\n      var matches = url.match(this.specRx[this.kind]);\n\n      if (!matches) {\n        throw new Error(\"Unable to parse unexpected unpkg url: \".concat(url));\n      }\n\n      return {\n        spec: matches[1],\n        name: matches[2],\n        version: matches[3] || '',\n        pathname: matches[4] || ''\n      };\n    }\n  }, {\n    key: \"urlForPackageFile\",\n    value: function urlForPackageFile(spec, pathname) {\n      return new URL(\"\".concat(JSDelivrCdn.protocol, \"//\").concat(JSDelivrCdn.host, \"/\").concat(this.kind, \"/\").concat(spec).concat(pathname));\n    }\n  }, {\n    key: \"urlForPackageList\",\n    value: function urlForPackageList(spec) {\n      return new URL(\"\".concat(JSDelivrCdn.protocol, \"//\").concat(JSDelivrCdn.dataHost, \"/v1/package/\").concat(this.kind, \"/\").concat(spec, \"/tree\"));\n    }\n  }]);\n\n  return JSDelivrCdn;\n}();\n\nJSDelivrCdn.protocol = 'https:';\nJSDelivrCdn.host = 'cdn.jsdelivr.net';\nJSDelivrCdn.dataHost = 'data.jsdelivr.com';\n\nvar ResolverHostUnpkg =\n/*#__PURE__*/\nfunction (_AbstractResolverHost) {\n  _inherits(ResolverHostUnpkg, _AbstractResolverHost);\n\n  function ResolverHostUnpkg() {\n    var _this2;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ResolverHostUnpkg);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ResolverHostUnpkg).call(this));\n    _this2.contentCache = new LRU({\n      length: function length(buf) {\n        return buf.byteLength;\n      },\n      max: 1024 * 1024 * 5\n    });\n    _this2.inflightContentRequests = new Map();\n    _this2.packageLock = new Map();\n    _this2.packageEntriesCache = new Map();\n    _this2.packageJsonCache = new Map();\n\n    if (!options.fetch && typeof fetch !== 'function') {\n      throw new TypeError(\"A fetch function must be provided to the \".concat(_this2.constructor.name, \" if the environment doesn't provide one\"));\n    }\n\n    _this2.AbortController = options.AbortController;\n\n    _this2.fetch = options.fetch || function (input, init) {\n      return fetch(input, init);\n    };\n\n    _this2.cdn = options.cdn || new UnpkgCdn();\n    return _this2;\n  }\n\n  _createClass(ResolverHostUnpkg, [{\n    key: \"getCanonicalUrl\",\n    value: function () {\n      var _getCanonicalUrl = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(resolver, url) {\n        var _ref,\n            token,\n            unresolvedSpec,\n            packageJson,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ref = _args.length > 2 && _args[2] !== undefined ? _args[2] : {}, token = _ref.token;\n\n                if (!this.cdn.isValidUrl(url)) {\n                  _context.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Unable to list non-\".concat(this.cdn.name, \" entries for \").concat(url.href));\n\n              case 3:\n                unresolvedSpec = this.cdn.parseUrl(url);\n                _context.next = 6;\n                return this.readPackageJsonWithCache(resolver, unresolvedSpec, {\n                  token: token\n                });\n\n              case 6:\n                packageJson = _context.sent;\n\n                if (packageJson.name) {\n                  _context.next = 9;\n                  break;\n                }\n\n                throw new Error(\"Missing name property in package.json for '\".concat(url.href, \"'\"));\n\n              case 9:\n                if (packageJson.version) {\n                  _context.next = 11;\n                  break;\n                }\n\n                throw new Error(\"Missing version property in package.json for '\".concat(url.href, \"'\"));\n\n              case 11:\n                return _context.abrupt(\"return\", this.cdn.urlForPackageFile(\"\".concat(packageJson.name, \"@\").concat(packageJson.version), unresolvedSpec.pathname));\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getCanonicalUrl(_x, _x2) {\n        return _getCanonicalUrl.apply(this, arguments);\n      }\n\n      return getCanonicalUrl;\n    }()\n  }, {\n    key: \"getResolveRoot\",\n    value: function () {\n      var _getResolveRoot = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(resolver, url) {\n        var _ref2,\n            token,\n            unresolvedSpec,\n            packageJson,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref2 = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {}, token = _ref2.token;\n\n                if (!this.cdn.isValidUrl(url)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Unable to list non-\".concat(this.cdn.name, \" entries for \").concat(url.href));\n\n              case 3:\n                unresolvedSpec = this.cdn.parseUrl(url);\n                _context2.next = 6;\n                return this.readPackageJsonWithCache(resolver, unresolvedSpec, {\n                  token: token\n                });\n\n              case 6:\n                packageJson = _context2.sent;\n\n                if (packageJson.name) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                throw new Error(\"Missing name property in package.json for '\".concat(url.href, \"'\"));\n\n              case 9:\n                if (packageJson.version) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                throw new Error(\"Missing version property in package.json for '\".concat(url.href, \"'\"));\n\n              case 11:\n                return _context2.abrupt(\"return\", this.cdn.urlForPackageFile(\"\".concat(packageJson.name, \"@\").concat(packageJson.version), '/'));\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getResolveRoot(_x3, _x4) {\n        return _getResolveRoot.apply(this, arguments);\n      }\n\n      return getResolveRoot;\n    }()\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this.cdn.urlForPackageFile('', '');\n    }\n  }, {\n    key: \"listEntries\",\n    value: function () {\n      var _listEntries = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(resolver, url) {\n        var _ref3,\n            token,\n            rootUrl,\n            unresolvedSpec,\n            packageJson,\n            parentEntry,\n            traversalSegments,\n            _loop,\n            _args3 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _ref3 = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : {}, token = _ref3.token;\n\n                if (!this.cdn.isValidUrl(url)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Unable to list non-\".concat(this.cdn.name, \" entries for \").concat(url.href));\n\n              case 3:\n                _context3.next = 5;\n                return resolver.host.getResolveRoot(resolver, url, {\n                  token: token\n                });\n\n              case 5:\n                rootUrl = _context3.sent;\n                unresolvedSpec = this.cdn.parseUrl(url);\n                _context3.next = 9;\n                return this.readPackageJsonWithCache(resolver, unresolvedSpec, {\n                  token: token\n                });\n\n              case 9:\n                packageJson = _context3.sent;\n                url = this.cdn.urlForPackageFile(\"\".concat(packageJson.name, \"@\").concat(packageJson.version), unresolvedSpec.pathname);\n                _context3.next = 13;\n                return this.readPackageEntriesWithCache(this.cdn.parseUrl(url), {\n                  token: token\n                });\n\n              case 13:\n                parentEntry = _context3.sent;\n\n                if (!(token && token.isCancellationRequested)) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                throw new CanceledError('Canceled');\n\n              case 16:\n                traversalSegments = unresolvedSpec.pathname.split('/').filter(Boolean);\n\n                _loop = function _loop() {\n                  var segment = traversalSegments.shift();\n\n                  if (parentEntry.type !== ResolvedEntryKind.Directory || !parentEntry.files) {\n                    throw new EntryNotFoundError(url);\n                  }\n\n                  parentEntry = parentEntry.files.find(function (file) {\n                    return file.type === ResolvedEntryKind.Directory && Resolver.path.basename(file.path) === segment;\n                  });\n                };\n\n                while (parentEntry && traversalSegments.length) {\n                  _loop();\n                }\n\n                if (parentEntry) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                throw new EntryNotFoundError(url);\n\n              case 21:\n                if (parentEntry.files) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", []);\n\n              case 23:\n                return _context3.abrupt(\"return\", parentEntry.files.map(function (entry) {\n                  return {\n                    type: entry.type,\n                    url: new URL(\".\".concat(entry.path), rootUrl)\n                  };\n                }));\n\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function listEntries(_x5, _x6) {\n        return _listEntries.apply(this, arguments);\n      }\n\n      return listEntries;\n    }()\n  }, {\n    key: \"readFileContent\",\n    value: function () {\n      var _readFileContent = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(_, url) {\n        var _ref4,\n            token,\n            href,\n            cached,\n            inflight,\n            signal,\n            fetch,\n            promise,\n            buf,\n            _args4 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref4 = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {}, token = _ref4.token;\n\n                if (!this.cdn.isValidUrl(url)) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Unable to read file contents for non-\".concat(this.cdn.name, \" entries for \").concat(url.href));\n\n              case 3:\n                href = url.href;\n                cached = this.contentCache.get(href);\n\n                if (!cached) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", cached);\n\n              case 7:\n                inflight = this.inflightContentRequests.get(href);\n\n                if (!inflight) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", inflight);\n\n              case 10:\n                // console.log('[MISS] readFileContent(%s)', href);\n                signal = signalFromCancellationToken(token, this.AbortController);\n                fetch = this.fetch;\n                promise = fetch(href, {\n                  redirect: 'follow',\n                  signal: signal\n                }).then(function (res) {\n                  if (!res.ok) {\n                    if (res.status === 404) {\n                      throw new EntryNotFoundError(href);\n                    }\n\n                    throw new Error(\"Error reading file content for \".concat(href, \": \").concat(res.status));\n                  }\n\n                  return res.arrayBuffer();\n                }, function (err) {\n                  throw new FetchError(href, err);\n                }).catch(function (err) {\n                  if (signal && signal.aborted) {\n                    throw new CanceledError('Canceled');\n                  }\n\n                  throw err;\n                });\n                this.inflightContentRequests.set(href, promise);\n                _context4.prev = 14;\n                _context4.next = 17;\n                return promise;\n\n              case 17:\n                buf = _context4.sent;\n                this.contentCache.set(href, buf);\n                return _context4.abrupt(\"return\", buf);\n\n              case 20:\n                _context4.prev = 20;\n                this.inflightContentRequests.delete(href);\n                return _context4.finish(20);\n\n              case 23:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[14,, 20, 23]]);\n      }));\n\n      function readFileContent(_x7, _x8) {\n        return _readFileContent.apply(this, arguments);\n      }\n\n      return readFileContent;\n    }()\n  }, {\n    key: \"resolveBareModule\",\n    value: function resolveBareModule(spec) {\n      var pathname = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      return this.cdn.urlForPackageFile(spec, pathname);\n    }\n  }, {\n    key: \"readPackageEntriesWithCache\",\n    value: function () {\n      var _readPackageEntriesWithCache = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(spec) {\n        var _ref5,\n            token,\n            lockKey,\n            lock,\n            range,\n            packageEntriesCacheForModule,\n            exactMatch,\n            _iteratorNormalCompletion,\n            _didIteratorError,\n            _iteratorError,\n            _iterator,\n            _step,\n            _ref8,\n            _ref7,\n            version,\n            _packageEntries,\n            promise,\n            packageEntries,\n            _args5 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref5 = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : {}, token = _ref5.token;\n                lockKey = \"entries:\".concat(spec.name);\n                lock = this.packageLock.get(lockKey);\n\n                if (!lock) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                _context5.next = 6;\n                return lock;\n\n              case 6:\n                range = validRange(spec.version);\n\n                if (range) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                throw new Error(\"Invalid SemVer range for spec \".concat(spec.spec));\n\n              case 9:\n                packageEntriesCacheForModule = this.packageEntriesCache.get(spec.name);\n\n                if (!packageEntriesCacheForModule) {\n                  _context5.next = 45;\n                  break;\n                }\n\n                exactMatch = packageEntriesCacheForModule.get(spec.version);\n\n                if (!exactMatch) {\n                  _context5.next = 14;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", exactMatch);\n\n              case 14:\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context5.prev = 17;\n                _iterator = packageEntriesCacheForModule[Symbol.iterator]();\n\n              case 19:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  _context5.next = 29;\n                  break;\n                }\n\n                _ref8 = _step.value;\n                _ref7 = _slicedToArray(_ref8, 2);\n                version = _ref7[0];\n                _packageEntries = _ref7[1];\n\n                if (!satisfies(version, range)) {\n                  _context5.next = 26;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", _packageEntries);\n\n              case 26:\n                _iteratorNormalCompletion = true;\n                _context5.next = 19;\n                break;\n\n              case 29:\n                _context5.next = 35;\n                break;\n\n              case 31:\n                _context5.prev = 31;\n                _context5.t0 = _context5[\"catch\"](17);\n                _didIteratorError = true;\n                _iteratorError = _context5.t0;\n\n              case 35:\n                _context5.prev = 35;\n                _context5.prev = 36;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 38:\n                _context5.prev = 38;\n\n                if (!_didIteratorError) {\n                  _context5.next = 41;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 41:\n                return _context5.finish(38);\n\n              case 42:\n                return _context5.finish(35);\n\n              case 43:\n                _context5.next = 47;\n                break;\n\n              case 45:\n                packageEntriesCacheForModule = new Map();\n                this.packageEntriesCache.set(spec.name, packageEntriesCacheForModule);\n\n              case 47:\n                // console.log('[MISS] readPackageEntriesWithCache(%s)', spec.spec);\n                promise = this.readPackageEntries(spec.spec, {\n                  token: token\n                });\n                this.packageLock.set(lockKey, promise);\n                _context5.next = 51;\n                return promise;\n\n              case 51:\n                packageEntries = _context5.sent;\n                this.packageLock.delete(lockKey);\n                packageEntriesCacheForModule.set(spec.version, packageEntries);\n                return _context5.abrupt(\"return\", packageEntries);\n\n              case 55:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[17, 31, 35, 43], [36,, 38, 42]]);\n      }));\n\n      function readPackageEntriesWithCache(_x9) {\n        return _readPackageEntriesWithCache.apply(this, arguments);\n      }\n\n      return readPackageEntriesWithCache;\n    }()\n  }, {\n    key: \"readPackageJsonWithCache\",\n    value: function () {\n      var _readPackageJsonWithCache = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(resolver, spec) {\n        var _ref9,\n            token,\n            lockKey,\n            lock,\n            packageJsonCacheForModule,\n            exactMatch,\n            range,\n            _iteratorNormalCompletion2,\n            _didIteratorError2,\n            _iteratorError2,\n            _iterator2,\n            _step2,\n            _ref12,\n            _ref11,\n            version,\n            _packageJson,\n            promise,\n            packageJson,\n            _args6 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _ref9 = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : {}, token = _ref9.token;\n                lockKey = \"packageJson:\".concat(spec.spec);\n                lock = this.packageLock.get(lockKey);\n\n                if (!lock) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                _context6.next = 6;\n                return lock;\n\n              case 6:\n                packageJsonCacheForModule = this.packageJsonCache.get(spec.name);\n\n                if (!packageJsonCacheForModule) {\n                  _context6.next = 44;\n                  break;\n                }\n\n                exactMatch = packageJsonCacheForModule.get(spec.version);\n\n                if (!exactMatch) {\n                  _context6.next = 11;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", exactMatch);\n\n              case 11:\n                range = validRange(spec.version);\n\n                if (!range) {\n                  _context6.next = 42;\n                  break;\n                }\n\n                _iteratorNormalCompletion2 = true;\n                _didIteratorError2 = false;\n                _iteratorError2 = undefined;\n                _context6.prev = 16;\n                _iterator2 = packageJsonCacheForModule[Symbol.iterator]();\n\n              case 18:\n                if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n                  _context6.next = 28;\n                  break;\n                }\n\n                _ref12 = _step2.value;\n                _ref11 = _slicedToArray(_ref12, 2);\n                version = _ref11[0];\n                _packageJson = _ref11[1];\n\n                if (!satisfies(version, range)) {\n                  _context6.next = 25;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", _packageJson);\n\n              case 25:\n                _iteratorNormalCompletion2 = true;\n                _context6.next = 18;\n                break;\n\n              case 28:\n                _context6.next = 34;\n                break;\n\n              case 30:\n                _context6.prev = 30;\n                _context6.t0 = _context6[\"catch\"](16);\n                _didIteratorError2 = true;\n                _iteratorError2 = _context6.t0;\n\n              case 34:\n                _context6.prev = 34;\n                _context6.prev = 35;\n\n                if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                  _iterator2.return();\n                }\n\n              case 37:\n                _context6.prev = 37;\n\n                if (!_didIteratorError2) {\n                  _context6.next = 40;\n                  break;\n                }\n\n                throw _iteratorError2;\n\n              case 40:\n                return _context6.finish(37);\n\n              case 41:\n                return _context6.finish(34);\n\n              case 42:\n                _context6.next = 46;\n                break;\n\n              case 44:\n                packageJsonCacheForModule = new Map();\n                this.packageJsonCache.set(spec.name, packageJsonCacheForModule);\n\n              case 46:\n                // console.log('[MISS] readPackageJsonWithCache(%s)', spec.spec);\n                promise = this.readPackageJson(resolver, spec.spec, {\n                  token: token\n                });\n                this.packageLock.set(lockKey, promise);\n                _context6.next = 50;\n                return promise;\n\n              case 50:\n                packageJson = _context6.sent;\n                this.packageLock.delete(lockKey);\n\n                if (packageJson.version) {\n                  _context6.next = 54;\n                  break;\n                }\n\n                throw new Error(\"Manifest missing a version identifier for \".concat(spec));\n\n              case 54:\n                packageJsonCacheForModule.set(packageJson.version, packageJson);\n                return _context6.abrupt(\"return\", packageJson);\n\n              case 56:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[16, 30, 34, 42], [35,, 37, 41]]);\n      }));\n\n      function readPackageJsonWithCache(_x10, _x11) {\n        return _readPackageJsonWithCache.apply(this, arguments);\n      }\n\n      return readPackageJsonWithCache;\n    }()\n  }, {\n    key: \"readPackageJson\",\n    value: function () {\n      var _readPackageJson = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(resolver, spec) {\n        var _ref13,\n            token,\n            url,\n            content,\n            manifest,\n            _args7 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _ref13 = _args7.length > 2 && _args7[2] !== undefined ? _args7[2] : {}, token = _ref13.token;\n                // console.log('readPackageJson(%s)', spec);\n                url = this.cdn.urlForPackageFile(spec, '/package.json');\n                _context7.next = 4;\n                return this.readFileContent(resolver, url, {\n                  token: token\n                });\n\n              case 4:\n                content = _context7.sent;\n                _context7.prev = 5;\n                manifest = util.parseBufferAsPackageJson(resolver.decoder, content, spec);\n                _context7.next = 12;\n                break;\n\n              case 9:\n                _context7.prev = 9;\n                _context7.t0 = _context7[\"catch\"](5);\n                throw new Error(\"Error parsing manifest as json for package \".concat(spec, \": \").concat(_context7.t0.message));\n\n              case 12:\n                return _context7.abrupt(\"return\", manifest);\n\n              case 13:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[5, 9]]);\n      }));\n\n      function readPackageJson(_x12, _x13) {\n        return _readPackageJson.apply(this, arguments);\n      }\n\n      return readPackageJson;\n    }()\n  }, {\n    key: \"readPackageEntries\",\n    value: function () {\n      var _readPackageEntries = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(spec) {\n        var _ref14,\n            token,\n            url,\n            href,\n            signal,\n            fetch,\n            res,\n            json,\n            _args8 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _ref14 = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : {}, token = _ref14.token;\n                // console.log('readPackageEntries(%s)', spec);\n                url = this.cdn.urlForPackageList(spec);\n                href = url.href;\n                signal = signalFromCancellationToken(token, this.AbortController);\n                fetch = this.fetch;\n                _context8.next = 7;\n                return fetch(href, {\n                  signal: signal\n                }).catch(function (err) {\n                  if (signal && signal.aborted) {\n                    throw new CanceledError('Canceled');\n                  }\n\n                  throw new FetchError(href, err);\n                });\n\n              case 7:\n                res = _context8.sent;\n\n                if (res.ok) {\n                  _context8.next = 12;\n                  break;\n                }\n\n                if (!(res.status === 404)) {\n                  _context8.next = 11;\n                  break;\n                }\n\n                throw new EntryNotFoundError(href);\n\n              case 11:\n                throw new Error(\"Error listing package contents for \".concat(spec, \": \").concat(res.status));\n\n              case 12:\n                _context8.next = 14;\n                return res.json();\n\n              case 14:\n                json = _context8.sent;\n                return _context8.abrupt(\"return\", this.cdn.normalizePackageListing(json));\n\n              case 16:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function readPackageEntries(_x14) {\n        return _readPackageEntries.apply(this, arguments);\n      }\n\n      return readPackageEntries;\n    }()\n  }], [{\n    key: \"forNpmFromUnpkg\",\n    value: function forNpmFromUnpkg() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return new ResolverHostUnpkg(_objectSpread({}, options, {\n        cdn: new UnpkgCdn()\n      }));\n    }\n  }, {\n    key: \"forNpmFromJsdelivr\",\n    value: function forNpmFromJsdelivr() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return new ResolverHostUnpkg(_objectSpread({}, options, {\n        cdn: new JSDelivrCdn('npm')\n      }));\n    }\n  }, {\n    key: \"forGithubFromJsdelivr\",\n    value: function forGithubFromJsdelivr() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return new ResolverHostUnpkg(_objectSpread({}, options, {\n        cdn: new JSDelivrCdn('gh')\n      }));\n    }\n  }]);\n\n  return ResolverHostUnpkg;\n}(AbstractResolverHost);\n\nexport { ResolverHostUnpkg, isValidDirectory, isValidEntry, isValidFile };","import { util, Resolver, PackageJson, ResolvedEntryKind } from '@velcro/resolver';\n\nimport { Emitter, Event } from 'ts-primitives';\n\nconst HAS_D_TS_EXTENSION = /\\.d\\.ts$/;\n\nenum PackageEntryKind {\n  Directory = 'directory',\n  File = 'file',\n}\n\ninterface PackageDirectoryEntry {\n  type: PackageEntryKind.Directory;\n  path: string;\n  files: PackageEntry[];\n}\n\ninterface PackageFileEntry {\n  type: PackageEntryKind.File;\n  path: string;\n}\n\ninterface TypingsFiles {\n  [fileName: string]: string;\n}\n\ntype PackageEntry = PackageDirectoryEntry | PackageFileEntry;\n\nfunction getTypingsModuleSpec(pkgJson: { name: string; version?: string }): { name: string; range: string } {\n  const typingsName = pkgJson.name.charAt(0) === '@' ? pkgJson.name.slice(1).replace('/', '__') : pkgJson.name;\n\n  let typingsRange = '*';\n\n  if (pkgJson.version) {\n    const major = pkgJson.version.split('.')[0];\n    typingsRange = `${major}.x`;\n  }\n\n  return {\n    name: `@types/${typingsName}`,\n    range: typingsRange,\n  };\n}\n\ninterface TypeFile {\n  pathname: string;\n  content: string;\n}\n\nexport class TypeAcquirer {\n  private _onTypeFile = new Emitter<TypeFile>();\n\n  constructor(\n    private readonly resolver: Resolver,\n    private readonly resolveBareModule: (spec: string, pathname?: string) => URL\n  ) {}\n\n  private _importAdjacentTypings(\n    typingsFiles: TypingsFiles,\n    pkgJson: PackageJson,\n    parentPath: string\n  ): Promise<boolean> {\n    // console.log('_importAdjacentTypings', pkgJson.name, pkgJson.version, parentPath);\n    const moduleRoot = util.join(parentPath, `node_modules/${pkgJson.name}/`);\n\n    if (!pkgJson.name) {\n      return Promise.resolve(false);\n    }\n\n    return this._listFiles(pkgJson.name, pkgJson.version).then(files => {\n      let imported = false;\n      const promises: Promise<void>[] = [];\n      const normalizedMain = util.resolve('/', pkgJson.main || 'index.js');\n\n      for (const pathname in files) {\n        if (!(normalizedMain === pathname || HAS_D_TS_EXTENSION.test(pathname))) {\n          continue;\n        }\n\n        promises.push(\n          this.resolver.host\n            .readFileContent(this.resolver, this.resolveBareModule(`${pkgJson.name}@${pkgJson.version}`, pathname))\n            .then(\n              // eslint-disable-next-line no-loop-func\n              buf => {\n                const contents = this.resolver.decoder.decode(buf);\n                const filePath = util.join(moduleRoot, pathname);\n                typingsFiles[filePath] = contents;\n\n                this._onTypeFile.fire({\n                  pathname: filePath,\n                  content: contents,\n                });\n\n                if (normalizedMain !== pathname) {\n                  imported = true;\n                }\n              },\n              e => {\n                console.warn(e);\n              }\n            )\n        );\n      }\n\n      if (!promises.length) {\n        return imported;\n      }\n\n      return Promise.all(promises).then(() => imported);\n    });\n  }\n\n  // private async _importEmbeddedTypings(\n  //   typingsFiles: TypingsFiles,\n  //   pkgJson: PackageJsonWithTypings,\n  //   parentPath: string\n  // ) {\n  //   let filesPromise: Promise<{ [fileName: string]: PackageFileEntry }> | undefined;\n  //   const readFiles = () => {\n  //     if (!filesPromise) {\n  //       filesPromise = this._listFiles(pkgJson.name, pkgJson.version);\n  //     }\n  //     return filesPromise;\n  //   };\n  //   const visitTypingsFile = async (fileName: string) => {\n  //     if (seen.has(fileName)) return;\n  //     seen.add(fileName);\n  //     console.log('visiting', fileName);\n  //     // Load the contents and add it to the known models\n  //     const sourceText = await this._readUnpkgFile(pkgJson.name, pkgJson.version, pkgJson.typings);\n  //     console.log('addExtraLib', sourceText, fileName);\n  //     typingsFiles[join(parentPath, fileName)] = sourceText;\n  //     const sourceFile = typescript.createSourceFile(fileName, sourceText, typescript.ScriptTarget.Latest, true);\n  //     const children: string[] = [];\n  //     typescript.forEachChild(sourceFile, child => {\n  //       if (typescript.isImportDeclaration(child) && typescript.isStringLiteral(child.moduleSpecifier)) {\n  //         children.push(child.moduleSpecifier.text);\n  //       } else if (\n  //         typescript.isExportDeclaration(child) &&\n  //         child.moduleSpecifier &&\n  //         child.moduleSpecifier &&\n  //         typescript.isStringLiteral(child.moduleSpecifier)\n  //       ) {\n  //         children.push(child.moduleSpecifier.text);\n  //       }\n  //     });\n  //     // We will figure out dependencies outside this module by building the optimized npm\n  //     // dependency tree\n  //     const relativeChildren = children.filter(ref => ref.charAt(0) === '.');\n  //     if (relativeChildren.length) {\n  //       const currentDir = dirname(fileName);\n  //       const files = await readFiles();\n  //       await Promise.all(\n  //         relativeChildren.map(ref => {\n  //           const childPathReference = resolve(currentDir, ref);\n  //           const childPath = resolveImportPath(files, childPathReference);\n  //           if (childPath) {\n  //             return visitTypingsFile(childPath);\n  //           }\n  //         })\n  //       );\n  //     }\n  //   };\n  //   const seen = new Set<string>();\n  //   const typescript = await import('typescript');\n  //   await visitTypingsFile(pkgJson.typings);\n  // }\n\n  private async _importTypingsFromDefinitelyTyped(\n    files: TypingsFiles,\n    pkgJson: PackageJson,\n    parentPath: string\n  ): Promise<void> {\n    // console.log('_importTypingsFromDefinitelyTyped', pkgJson.name, pkgJson.version, parentPath);\n    if (!pkgJson.name) {\n      return undefined;\n    }\n\n    const typingsModuleSpec = getTypingsModuleSpec({ name: pkgJson.name, version: pkgJson.version });\n\n    try {\n      const pkgJson = await this._import(files, typingsModuleSpec.name, typingsModuleSpec.range, parentPath);\n\n      if (pkgJson.dependencies) {\n        for (const name in pkgJson.dependencies) {\n          await this._import(files, name, pkgJson.dependencies[name], parentPath);\n        }\n      }\n    } catch (e) {\n      return undefined;\n    }\n  }\n\n  private async _listFiles(\n    name: string,\n    version: string = 'latest'\n  ): Promise<{ [pathname: string]: PackageFileEntry }> {\n    const unresolvedUrl = await this.resolver.host.getCanonicalUrl(\n      this.resolver,\n      this.resolveBareModule(`${name}@${version}`, '/')\n    );\n    const resolvedUrl = await this.resolver.host.getCanonicalUrl(this.resolver, unresolvedUrl);\n    const entries: { [pathname: string]: PackageFileEntry } = {};\n    const queue = [resolvedUrl];\n\n    while (queue.length) {\n      const next = queue.shift()!;\n      const entriesAtPath = await this.resolver.host.listEntries(this.resolver, next);\n\n      for (const entry of entriesAtPath) {\n        if (entry.type === ResolvedEntryKind.Directory) {\n          queue.push(entry.url);\n        } else {\n          const path = entry.url.href.slice(resolvedUrl.href.length - 1);\n          entries[path] = { type: PackageEntryKind.File, path };\n        }\n      }\n    }\n\n    return entries;\n  }\n\n  private async _import(\n    files: TypingsFiles,\n    name: string,\n    range: string,\n    parentPath: string = ''\n  ): Promise<PackageJson> {\n    // console.log('_import', name, range, parentPath);\n\n    const pkgJsonPathname = util.join(parentPath, 'node_modules', name, 'package.json');\n    const bareModuleUrl = this.resolveBareModule(`${name}@${range}`, '/package.json');\n    const resolvedPkgJson = await this.resolver.readParentPackageJson(bareModuleUrl);\n\n    if (!resolvedPkgJson) {\n      throw new Error(`Unable to load package.json for ${name}@${range}`);\n    }\n\n    const pkgJsonText = JSON.stringify(resolvedPkgJson.packageJson);\n    const resolvedName = resolvedPkgJson.packageJson.name || name;\n\n    files[pkgJsonPathname] = pkgJsonText;\n\n    this._onTypeFile.fire({\n      pathname: pkgJsonPathname,\n      content: pkgJsonText,\n    });\n\n    // if (isPackageJsonWithTypings(pkgJson)) {\n    //   await this._importEmbeddedTypings(files, pkgJson, parentPath);\n    // } else {\n    try {\n      const hasAdjacentTypings = await this._importAdjacentTypings(files, resolvedPkgJson.packageJson!, parentPath);\n\n      // console.log('hasAdjacentTypings', hasAdjacentTypings);\n\n      if (!hasAdjacentTypings && resolvedName.indexOf('@types/') !== 0) {\n        await this._importTypingsFromDefinitelyTyped(files, resolvedPkgJson.packageJson, parentPath);\n      }\n    } catch (err) {\n      console.error('error', err);\n    }\n    // }\n\n    return resolvedPkgJson.packageJson;\n  }\n\n  get onTypeFile(): Event<TypeFile> {\n    return this._onTypeFile.event;\n  }\n\n  async importTypesForSpec(name: string, range: string = 'latest', parentPath: string = ''): Promise<TypingsFiles> {\n    const files: TypingsFiles = {};\n\n    try {\n      await this._import(files, name, range, parentPath);\n    } catch (err) {\n      console.warn(err, `Type acquisition failed for ${name}@${range}`);\n    }\n\n    return files;\n  }\n\n  async importTypesForSpecs(specs: { [name: string]: string }, parentPath: string = ''): Promise<TypingsFiles> {\n    const promises = Object.keys(specs).map(name => this.importTypesForSpec(name, specs[name], parentPath));\n    const importResults = promises.length ? await Promise.all(promises) : [];\n\n    return importResults.reduce((files, result) => ({ ...files, ...result }), {} as TypingsFiles);\n  }\n}\n","export interface Diagnostic {\n  message: string;\n  start?: { lineNumber: number; column: number };\n  end?: { lineNumber: number; column: number };\n  href?: string;\n}\n\nexport class ExtendableError extends Error {\n  constructor(message?: string) {\n    super(message);\n\n    this.name = this.constructor.name;\n  }\n}\n\nexport class InvariantError extends ExtendableError {}\n\nexport class NotSupportedError extends ExtendableError {}\n\nexport class TimeoutError extends ExtendableError {}\n\nexport class TranspileError extends ExtendableError {\n  constructor(message: string, readonly diagnostics: Diagnostic[]) {\n    super(message);\n  }\n}\n","import { Resolver, ResolvedEntryKind, AbstractResolverHost, ResolvedEntry } from '@velcro/resolver';\nimport * as Monaco from 'monaco-editor';\nimport { timeout } from 'ts-primitives';\n\nimport { InvariantError, TimeoutError, TranspileError, Diagnostic } from './error';\n\nconst LANGUAGE_TYPESCRIPT = 'typescript';\nconst MAX_TRANSPILE_ATTEMPTS = 3;\nconst TRANSPILE_TIMEOUT = 2000;\nconst TRANSPILE_TIMEOUT_BACKOFF = 500;\n\ntype Model = Monaco.editor.ITextModel;\n\nexport class ResolverHostMonaco extends AbstractResolverHost {\n  constructor(private readonly rootUri: Monaco.Uri = Monaco.Uri.file('/')) {\n    super();\n  }\n\n  get rootHref() {\n    return this.rootUri.toString(true);\n  }\n\n  async getResolveRoot() {\n    return new URL(this.rootUri.toString(true));\n  }\n\n  async listEntries(_resolver: Resolver, url: URL) {\n    const href = url.href.replace(/\\/?$/, '/');\n    const rootHref = this.rootUri.toString(true);\n\n    if (!href.startsWith(rootHref)) {\n      return [];\n    }\n\n    return Monaco.editor.getModels().reduce(\n      (entries, model) => {\n        const modelHref = model.uri.toString(true);\n        const seenDirs = new Set<string>();\n\n        if (modelHref.startsWith(href)) {\n          const nestedPath = modelHref.slice(href.length);\n          const nextDirIdx = nestedPath.indexOf('/');\n\n          if (nextDirIdx === 0) {\n            throw new Error('Invariant error: WAT?');\n          }\n\n          if (nextDirIdx > 0) {\n            // This is an intermediate directory\n            const url = new URL(nestedPath.slice(0, nextDirIdx + 1), href);\n\n            if (!seenDirs.has(url.href)) {\n              entries.push({\n                type: ResolvedEntryKind.Directory,\n                url,\n              });\n            }\n          } else {\n            entries.push({\n              type: ResolvedEntryKind.File,\n              url: new URL(modelHref),\n            });\n          }\n        }\n\n        return entries;\n      },\n      [] as ResolvedEntry[]\n    );\n  }\n\n  async readFileContent(_resolver: Resolver, url: URL) {\n    const href = url.href;\n\n    if (!href.startsWith(this.rootHref)) {\n      throw new InvariantError(\n        `Attempting to read file content for a model at '${href}' outside of this host's root '${this.rootHref}'`\n      );\n    }\n\n    const pathname = href.slice(this.rootHref.length);\n    const model = Monaco.editor.getModel(Monaco.Uri.file(pathname));\n\n    if (!model) {\n      throw new InvariantError(`Attempting to read file content for a model that doesn't exist at '${href}'`);\n    }\n\n    const encoder = new TextEncoder();\n    const output = await this.getTranspiledValue(model);\n\n    return encoder.encode(output);\n  }\n\n  private async getTranspiledValue(model: Monaco.editor.ITextModel) {\n    if (model.getModeId() === LANGUAGE_TYPESCRIPT) {\n      const href = model.uri.toString(true);\n\n      const tryLoadFromWorker = async () => {\n        const workerFactory = await Monaco.languages.typescript.getTypeScriptWorker();\n        const workerClient = await workerFactory(model.uri);\n        const [emitOutput, syntacticDiagnostics] = (await Promise.all([\n          workerClient.getEmitOutput(href),\n          workerClient.getSyntacticDiagnostics(href),\n        ])) as [import('typescript').EmitOutput, import('typescript').Diagnostic[]];\n\n        if (emitOutput.emitSkipped) {\n          throw new InvariantError(`Emit skipped when trying to read '${model.uri.fsPath}'`);\n        }\n\n        if (syntacticDiagnostics.length) {\n          const diagnostics: Diagnostic[] = syntacticDiagnostics.map(diagnostic => {\n            const startPosition =\n              typeof diagnostic.start === 'number' ? model.getPositionAt(diagnostic.start) : undefined;\n            const endPosition =\n              typeof diagnostic.start === 'number' && typeof diagnostic.length === 'number'\n                ? model.getPositionAt(diagnostic.start + diagnostic.length)\n                : undefined;\n\n            return {\n              message: flattenDiagnosticMessageText(diagnostic.messageText),\n              start: startPosition ? { lineNumber: startPosition.lineNumber, column: startPosition.column } : undefined,\n              end: endPosition ? { lineNumber: endPosition.lineNumber, column: endPosition.column } : undefined,\n              href: diagnostic.source,\n            };\n          });\n          throw new TranspileError(`${syntacticDiagnostics[0].messageText} at ${model.uri.fsPath}`, diagnostics);\n        }\n\n        return emitOutput.outputFiles[0].text;\n      };\n\n      let attempt = 0;\n\n      while (attempt++ < MAX_TRANSPILE_ATTEMPTS) {\n        try {\n          const code = await raceTimeout(tryLoadFromWorker(), TRANSPILE_TIMEOUT);\n\n          return code;\n        } catch (err) {\n          if (err instanceof TimeoutError) {\n            await timeout(TRANSPILE_TIMEOUT_BACKOFF * Math.pow(2, attempt));\n            continue;\n          }\n\n          throw err;\n        }\n      }\n\n      throw new TimeoutError(`Timed out while trying to transpile '${href}'`);\n    }\n\n    return model.getValue();\n  }\n}\n\nexport function flattenDiagnosticMessageText(\n  diag: string | import('typescript').DiagnosticMessageChain | undefined,\n  newLine: string = '\\n',\n  indent = 0\n): string {\n  if (typeof diag === 'string') {\n    return diag;\n  } else if (diag === undefined) {\n    return '';\n  }\n  let result = '';\n  if (indent) {\n    result += newLine;\n\n    for (let i = 0; i < indent; i++) {\n      result += '  ';\n    }\n  }\n  result += diag.messageText;\n  indent++;\n  if (diag.next) {\n    for (const kid of diag.next) {\n      result += flattenDiagnosticMessageText(kid, newLine, indent);\n    }\n  }\n  return result;\n}\n\nfunction raceTimeout<T>(promise: Promise<T>, timeoutMs: number): Promise<T> {\n  return Promise.race([\n    promise,\n    timeout(timeoutMs).then(() => {\n      return Promise.reject(new TimeoutError());\n    }),\n  ]);\n}\n","import { Bundler } from '@velcro/bundler';\nimport { Resolver, AbstractResolverHost, ResolverHost } from '@velcro/resolver';\nimport { openDB, IDBPDatabase } from 'idb';\nimport { timeout, Limiter } from 'ts-primitives';\nimport { TimeoutError } from './error';\n\ntype ThenArg<T> = T extends Promise<infer U> ? U : T;\n\nexport class ResolverHostWithCache extends AbstractResolverHost {\n  private idbPromise: Promise<IDBPDatabase<unknown> | null>;\n\n  private readonly hostTimeout: number;\n  private readonly idbTimeout: number;\n  private readonly namespace: string;\n  private readonly limiter: Limiter<unknown>;\n\n  private readonly inflightGetCanonicalUrl = new Map<string, ReturnType<ResolverHost['getCanonicalUrl']>>();\n  private readonly inflightGetResolveRoot = new Map<string, ReturnType<ResolverHost['getResolveRoot']>>();\n  private readonly inflightListEntries = new Map<string, ReturnType<ResolverHost['listEntries']>>();\n  private readonly inflightReadFileContent = new Map<string, ReturnType<ResolverHost['readFileContent']>>();\n\n  private readonly getCanonicalUrlCache = new Map<string, ThenArg<ReturnType<ResolverHost['getCanonicalUrl']>>>();\n  private readonly getResolveRootCache = new Map<string, ThenArg<ReturnType<ResolverHost['getResolveRoot']>>>();\n  private readonly listEntriesCache = new Map<string, ThenArg<ReturnType<ResolverHost['listEntries']>>>();\n  private readonly readFileContentCache = new Map<string, ThenArg<ReturnType<ResolverHost['readFileContent']>>>();\n\n  constructor(\n    readonly host: ResolverHost,\n    { idbTimeout = 5000, hostConcurrency = 8, hostTimeout = 10000, namespace = 'default' } = {}\n  ) {\n    super();\n\n    this.hostTimeout = hostTimeout;\n    this.idbTimeout = idbTimeout;\n    this.namespace = namespace;\n    this.limiter = new Limiter(hostConcurrency);\n\n    this.idbPromise = openDB(`velcro:rhwc:${this.namespace}`, Bundler.schemaVersion, {\n      async upgrade(db, oldVersion, newVersion, transaction) {\n        if (!oldVersion) {\n          db.createObjectStore('getCanonicalUrl');\n          db.createObjectStore('getResolveRoot');\n          db.createObjectStore('listEntries');\n          db.createObjectStore('readFileContent');\n        }\n\n        await transaction.objectStore('getCanonicalUrl').clear();\n        await transaction.objectStore('getResolveRoot').clear();\n        await transaction.objectStore('listEntries').clear();\n        await transaction.objectStore('readFileContent').clear();\n      },\n    }).catch(err => {\n      console.error(err, 'error opening IndexedDB');\n\n      return null;\n    });\n  }\n\n  private async withMemoryCache<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    cache: Map<string, T>,\n    inflightMap: Map<string, Promise<T>>,\n    storeName: string,\n    serialize?: (result: T) => C,\n    deserialize?: (cached: C) => T\n  ): Promise<T> {\n    if (cache.has(href)) {\n      return cache.get(href)!;\n    }\n\n    const result = await this.withInflightGrouping(href, loadFn, inflightMap, storeName, serialize, deserialize);\n\n    cache.set(href, result);\n\n    return result;\n  }\n\n  private withInflightGrouping<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    inflightMap: Map<string, Promise<T>>,\n    storeName: string,\n    serialize?: (result: T) => C,\n    deserialize?: (cached: C) => T\n  ): Promise<T> {\n    let inflight = inflightMap.get(href);\n\n    if (!inflight) {\n      inflight = this.withIdbCache(href, loadFn, storeName, serialize, deserialize);\n\n      inflightMap.set(href, inflight);\n    }\n\n    Promise.resolve(inflight)\n      .catch(_ => undefined)\n      .then(() => inflightMap.delete(href));\n\n    return inflight;\n  }\n\n  private async withIdbCache<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    storeName: string,\n    serialize?: (result: T) => C,\n    deserialize?: (cached: C) => T\n  ): Promise<T> {\n    const idb = await this.idbPromise.catch(_ => undefined);\n\n    if (idb) {\n      const cached = await withTimeout(\n        this.idbTimeout,\n        idb.get(storeName, href),\n        `idb.get(${storeName}, ${href})`\n      ).catch(_ => {\n        // console.debug('[ResolverHostWithCache] %d MISS: timeout %s(%s)', this.limiter.size, storeName, href);\n      });\n\n      if (cached) {\n        const result = (deserialize ? deserialize(cached as any) : cached) as T;\n\n        return result;\n      }\n    }\n\n    const result = await withTimeout(this.hostTimeout, loadFn(), `Timed out on operation '${storeName}' for '${href}'`);\n\n    if (idb) {\n      idb.put(storeName, serialize ? serialize(result) : result, href).catch(_ => undefined);\n    }\n\n    return result;\n  }\n\n  private withCache<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    cache: Map<string, T>,\n    inflightMap: Map<string, Promise<T>>,\n    storeName: string,\n    serialize?: (result: T) => C,\n    deserialize?: (cached: C) => T\n  ): Promise<T> {\n    return this.withMemoryCache(href, loadFn, cache, inflightMap, storeName, serialize, deserialize);\n  }\n\n  async getCanonicalUrl(resolver: Resolver, url: URL) {\n    const result = await this.withCache(\n      url.href,\n      () => this.host.getCanonicalUrl(resolver, url),\n      this.getCanonicalUrlCache,\n      this.inflightGetCanonicalUrl,\n      'getCanonicalUrl',\n      url => url.href,\n      href => new URL(href)\n    );\n\n    return result;\n  }\n\n  async getResolveRoot(resolver: Resolver, url: URL) {\n    const result = await this.withCache(\n      url.href,\n      () => this.host.getResolveRoot(resolver, url),\n      this.getResolveRootCache,\n      this.inflightGetResolveRoot,\n      'getResolveRoot',\n      url => url.href,\n      href => new URL(href)\n    );\n\n    return result;\n  }\n\n  async listEntries(resolver: Resolver, url: URL) {\n    const result = await this.withCache(\n      url.href,\n      () => this.host.listEntries(resolver, url),\n      this.listEntriesCache,\n      this.inflightListEntries,\n      'listEntries',\n      entries =>\n        entries.map(entry => ({\n          type: entry.type,\n          href: entry.url.href,\n        })),\n      cached =>\n        cached.map(entry => ({\n          type: entry.type,\n          url: new URL(entry.href),\n        }))\n    );\n\n    return result;\n  }\n\n  async readFileContent(resolver: Resolver, url: URL) {\n    try {\n      const result = await this.withCache(\n        url.href,\n        () => this.host.readFileContent(resolver, url),\n        this.readFileContentCache,\n        this.inflightReadFileContent,\n        'readFileContent'\n      );\n\n      return result;\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nfunction withTimeout<T>(duration: number, promise: Promise<T>, message: string) {\n  return Promise.race([\n    promise,\n    timeout(duration * 10).then(() => {\n      // console.debug('[ResolverHostWithCache] TIMEOUT(%d): %s', duration, message);\n      return Promise.reject(new TimeoutError(message));\n    }),\n  ]);\n}\n","import { Resolver, AbstractResolverHost, ResolverHost } from '@velcro/resolver';\nimport { timeout } from 'ts-primitives';\nimport { TimeoutError } from './error';\n\nexport class ResolverHostWithInflightCache extends AbstractResolverHost {\n  private readonly hostTimeout: number;\n\n  private readonly inflightGetCanonicalUrl = new Map<string, ReturnType<ResolverHost['getCanonicalUrl']>>();\n  private readonly inflightGetResolveRoot = new Map<string, ReturnType<ResolverHost['getResolveRoot']>>();\n  private readonly inflightListEntries = new Map<string, ReturnType<ResolverHost['listEntries']>>();\n  private readonly inflightReadFileContent = new Map<string, ReturnType<ResolverHost['readFileContent']>>();\n\n  constructor(readonly host: ResolverHost, { hostTimeout = 10000 } = {}) {\n    super();\n\n    this.hostTimeout = hostTimeout;\n  }\n\n  private withInflightGrouping<T, C = unknown>(\n    href: string,\n    loadFn: () => Promise<T>,\n    inflightMap: Map<string, Promise<T>>,\n    operationName: string\n  ): Promise<T> {\n    let inflight = inflightMap.get(href);\n\n    if (!inflight) {\n      inflight = withTimeout(\n        this.hostTimeout,\n        loadFn(),\n        `Timed out while calling ${operationName}(${JSON.stringify(href)})`\n      );\n\n      inflightMap.set(href, inflight);\n    }\n\n    inflight.catch(_ => undefined).then(() => inflightMap.delete(href));\n\n    return inflight;\n  }\n\n  async getCanonicalUrl(resolver: Resolver, url: URL) {\n    const result = await this.withInflightGrouping(\n      url.href,\n      () => this.host.getCanonicalUrl(resolver, url),\n      this.inflightGetCanonicalUrl,\n      'getCanonicalUrl'\n    );\n\n    return result;\n  }\n\n  async getResolveRoot(resolver: Resolver, url: URL) {\n    const result = await this.withInflightGrouping(\n      url.href,\n      () => this.host.getResolveRoot(resolver, url),\n      this.inflightGetResolveRoot,\n      'getResolveRoot'\n    );\n\n    return result;\n  }\n\n  async listEntries(resolver: Resolver, url: URL) {\n    const result = await this.withInflightGrouping(\n      url.href,\n      () => this.host.listEntries(resolver, url),\n      this.inflightListEntries,\n      'listEntries'\n    );\n\n    return result;\n  }\n\n  async readFileContent(resolver: Resolver, url: URL) {\n    try {\n      const result = await this.withInflightGrouping(\n        url.href,\n        () => this.host.readFileContent(resolver, url),\n        this.inflightReadFileContent,\n        'readFileContent'\n      );\n\n      return result;\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nfunction withTimeout<T>(duration: number, promise: Promise<T>, message: string) {\n  return Promise.race([\n    promise,\n    timeout(duration * 10).then(() => {\n      // console.debug('[ResolverHostWithCache] TIMEOUT(%d): %s', duration, message);\n      return Promise.reject(new TimeoutError(message));\n    }),\n  ]);\n}\n","import { Runtime } from '@velcro/bundler';\n\nexport interface HmrBuildErrorRequest {\n  type: 'build_error';\n  message?: string;\n  stack?: string;\n}\nexport interface HmrReloadRequest {\n  type: 'reload';\n  href: string;\n  invalidations: string[];\n}\n\nexport interface HmrReloadResponse {}\n\ndeclare var velcroRequire: NodeRequire;\ndeclare var __velcroRuntime: Runtime;\n\n/**\n * Important: This function needs to be fully self-contained because it will be stringified.\n * @param filename\n */\nexport function createBundleRuntime() {\n  const ReactErrorOverlay = velcroRequire('react-error-overlay') as typeof import('react-error-overlay');\n  const channel = new MessageChannel();\n\n  //@ts-ignore\n  window.ReactErrorOverlay = ReactErrorOverlay;\n\n  ReactErrorOverlay.setEditorHandler(err => {\n    window.parent.postMessage({ type: 'error_open', payload: err }, '*');\n  });\n  ReactErrorOverlay.startReportingRuntimeErrors({\n    onError: () => undefined,\n  });\n\n  channel.port2.onmessage = function(e) {\n    if (!e.data || typeof e.data !== 'object') {\n      throw new Error(`Unexpected message received by HMR server`);\n    }\n\n    switch (e.data.type) {\n      case 'build_error': {\n        ReactErrorOverlay.dismissRuntimeErrors();\n        ReactErrorOverlay.reportBuildError(e.data.message || e.data);\n\n        channel.port2.postMessage({\n          type: 'reload',\n        });\n        break;\n      }\n      case 'reload': {\n        if (isValidReload(e.data)) {\n          ReactErrorOverlay.dismissBuildError();\n          ReactErrorOverlay.dismissRuntimeErrors();\n          const reload = e.data;\n          const runtime = __velcroRuntime;\n          const queue = reload.invalidations.slice();\n          const seen = new Set<string>();\n          const potentialOrphans = new Set<string>();\n          const requireReload = [] as string[];\n          const acceptCallbackQueue = [] as ({ module: typeof runtime.root; cb: () => void })[];\n          const disposeCallbackQueue = [] as ({ module: typeof runtime.root; cb: () => void })[];\n\n          while (queue.length) {\n            const href = queue.shift()!;\n\n            if (seen.has(href)) continue;\n            seen.add(href);\n\n            const module = runtime.get(href);\n\n            if (!module) {\n              continue;\n            }\n\n            module.dependencies.forEach(dependency => {\n              potentialOrphans.add(dependency.id);\n            });\n\n            potentialOrphans.delete(module.id);\n\n            for (const disposeCallback of module.disposeCallbacks) {\n              disposeCallbackQueue.push({ module, cb: disposeCallback.cb });\n            }\n\n            if (module.acceptCallbacks.length) {\n              for (const acceptCallback of module.acceptCallbacks) {\n                acceptCallbackQueue.push({ module, cb: acceptCallback.cb });\n              }\n            } else {\n              const isEntrypoint = module.dependents.has(runtime.root);\n\n              if (isEntrypoint) {\n                requireReload.push(module.id);\n              } else {\n                module.dependents.forEach(dependent => {\n                  if (!seen.has(dependent.id)) {\n                    queue.push(dependent.id);\n                  }\n                });\n              }\n            }\n          }\n\n          seen.forEach(href => {\n            runtime.remove(href);\n          });\n\n          const script = document.createElement('script');\n          script.src = reload.href;\n          script.onerror = function(err) {\n            channel.port2.postMessage({\n              type: 'reload',\n              err,\n            });\n          };\n          script.onload = function() {\n            disposeCallbackQueue.forEach(({ cb, module }) => {\n              cb();\n            });\n            acceptCallbackQueue.forEach(({ cb, module }) => {\n              cb();\n            });\n\n            for (const toReload of requireReload) {\n              runtime.require(toReload);\n            }\n\n            // Find any module that will become orphaned by this change and\n            // dispose it\n            potentialOrphans.forEach(potentialOrphan => {\n              const potentialOrphanModule = runtime.get(potentialOrphan);\n\n              if (potentialOrphanModule && potentialOrphanModule.dependents.size === 0) {\n                for (const disposeCallback of potentialOrphanModule.disposeCallbacks) {\n                  disposeCallback.cb();\n                }\n\n                runtime.remove(potentialOrphan);\n              }\n            });\n\n            channel.port2.postMessage({\n              type: 'reload',\n            });\n          };\n\n          document.head.appendChild(script);\n        }\n      }\n    }\n  };\n\n  window.parent.postMessage({ type: 'hmr_ready', payload: channel.port1 }, '*', [channel.port1]);\n\n  //#region Type Guards\n\n  function isObject(val: unknown): val is Record<string | number, unknown> {\n    return val && typeof val === 'object';\n  }\n\n  function isString(val: unknown): val is string {\n    return typeof val === 'string';\n  }\n\n  function isValidReload(message: unknown): message is HmrReloadRequest {\n    if (!isObject(message)) return false;\n\n    if (message.type !== 'reload') return false;\n\n    if (!Array.isArray(message.invalidations) || message.invalidations.find(entry => typeof entry !== 'string')) {\n      return false;\n    }\n\n    return isString(message.href);\n  }\n  //#endregion\n}\n","import { Bundler } from '@velcro/bundler';\nimport { Resolver } from '@velcro/resolver';\nimport { ResolverHostCompound } from '@velcro/resolver-host-compound';\nimport { ResolverHostMemory } from '@velcro/resolver-host-memory';\nimport { ResolverHostUnpkg } from '@velcro/resolver-host-unpkg';\nimport * as Monaco from 'monaco-editor';\nimport resolveNpmSpec from 'npm-package-arg';\nimport { useState, useEffect, useContext, createContext } from 'react';\nimport { Emitter, IDisposable, DisposableStore, ThrottledDelayer } from 'ts-primitives';\n\nimport { TypeAcquirer } from './typeAcquisition';\nimport { ResolverHostMonaco } from '../lib/ResolverHostMonaco';\nimport { ResolverHostWithCache } from '../lib/ResolverHostWithCache';\nimport { ResolverHostWithInflightCache } from '../lib/ResolverHostWithInflightCache';\nimport { NotSupportedError } from './error';\nimport { createBundleRuntime } from './previewRuntime';\n\nconst rootUri = Monaco.Uri.file('/');\n\nexport class EditorManager implements IDisposable {\n  readonly unpkgCdn = ResolverHostUnpkg.forNpmFromUnpkg();\n  readonly githubCdn = ResolverHostUnpkg.forGithubFromJsdelivr();\n  readonly cachingUnpkgHost = new ResolverHostWithCache(this.unpkgCdn, {\n    namespace: this.unpkgCdn.getRoot().href,\n  });\n\n  readonly previewRuntimeHost = new ResolverHostMemory(\n    {\n      'index.js': `(${createBundleRuntime.toString().replace(/velcroRequire/g, 'require')})();`,\n      'package.json': JSON.stringify({\n        dependencies: {\n          'react-error-overlay': '^6.0.3',\n        },\n      }),\n    },\n    'preview'\n  );\n  readonly inflightCachingHost = new ResolverHostWithInflightCache(\n    new ResolverHostCompound({\n      [this.unpkgCdn.getRoot().href]: this.cachingUnpkgHost,\n      [this.previewRuntimeHost.getRoot().href]: this.previewRuntimeHost,\n      [rootUri.toString(true)]: new ResolverHostMonaco(rootUri),\n    })\n  );\n\n  readonly previewBundler = new Bundler({\n    resolveBareModule: this.resolveBareModule.bind(this),\n    resolver: new Resolver(this.inflightCachingHost, {\n      extensions: ['.js'],\n      packageMain: ['browser', 'main'],\n    }),\n  });\n\n  readonly bundler = new Bundler({\n    resolveBareModule: this.resolveBareModule.bind(this),\n    resolver: new Resolver(this.inflightCachingHost, {\n      extensions: ['.js', '.jsx', '.ts', '.tsx'],\n      packageMain: ['browser', 'main'],\n    }),\n  });\n\n  editor: Monaco.editor.IStandaloneCodeEditor | null = null;\n\n  private readonly disposableStore = new DisposableStore();\n  private readonly initialPath: string | undefined;\n\n  private readonly typeAcquirer = new TypeAcquirer(\n    this.bundler.resolver,\n    this.unpkgCdn.resolveBareModule.bind(this.unpkgCdn)\n  );\n  private readonly viewState = new WeakMap<Monaco.editor.ITextModel, Monaco.editor.ICodeEditorViewState>();\n\n  private readonly onWillFocusModelEmitter = new Emitter<Monaco.editor.ITextModel>();\n  private readonly onDidChangeEmitter = new Emitter<{ model: Monaco.editor.ITextModel }>();\n\n  constructor(options: { files?: Record<string, string>; initialPath?: string } = {}) {\n    this.disposableStore.add(this.onWillFocusModelEmitter);\n    this.disposableStore.add(this.onDidChangeEmitter);\n\n    Monaco.languages.typescript.typescriptDefaults.setEagerModelSync(true);\n    Monaco.languages.typescript.typescriptDefaults.setMaximumWorkerIdleTime(-1);\n    Monaco.languages.typescript.typescriptDefaults.setCompilerOptions({\n      allowJs: true,\n      allowNonTsExtensions: true,\n      allowSyntheticDefaultImports: true,\n      baseUrl: '.',\n      checkJs: true,\n      esModuleInterop: true,\n      experimentalDecorators: true,\n      inlineSourceMap: true,\n      inlineSources: true,\n      isolatedModules: false,\n      jsx: Monaco.languages.typescript.JsxEmit.React,\n      lib: ['dom'],\n      module: Monaco.languages.typescript.ModuleKind.CommonJS,\n      moduleResolution: Monaco.languages.typescript.ModuleResolutionKind.NodeJs,\n      noEmit: false,\n      outDir: `dist`,\n      resolveJsonModule: true,\n      rootDir: '/',\n      sourceMap: true,\n      target: Monaco.languages.typescript.ScriptTarget.ES2015,\n      typeRoots: ['node_modules/@types'],\n    });\n    Monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\n      noSemanticValidation: true,\n      noSyntaxValidation: false,\n    });\n\n    if (options.files) {\n      for (const pathname in options.files) {\n        const content = options.files[pathname];\n\n        this.createModel(pathname, content);\n      }\n    }\n\n    Monaco.editor.onDidCreateModel(model => {\n      const onDidChangePackageJson = async () => {\n        const value = model.getValue();\n\n        let dependencies = {\n          typescript: Monaco.languages.typescript.typescriptVersion,\n        };\n\n        try {\n          const pkgJson = JSON.parse(value);\n\n          if (pkgJson.dependencies) {\n            dependencies = { ...dependencies, ...pkgJson.dependencies };\n          }\n        } catch (_) {\n          // Ignore\n        }\n\n        Monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({ noSemanticValidation: true });\n        await this.typeAcquirer.importTypesForSpecs(dependencies);\n        Monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({ noSemanticValidation: false });\n      };\n\n      if (model.uri.toString(true) === `${rootUri.toString(true)}package.json`) {\n        const throttler = new ThrottledDelayer(1500);\n        throttler.trigger(onDidChangePackageJson);\n\n        this.disposableStore.add(model.onDidChangeContent(() => throttler.trigger(onDidChangePackageJson)));\n        this.disposableStore.add(throttler);\n      }\n    });\n\n    this.disposableStore.add(\n      this.typeAcquirer.onTypeFile(file => {\n        this.disposableStore.add(\n          Monaco.languages.typescript.typescriptDefaults.addExtraLib(\n            file.content,\n            Monaco.Uri.file(file.pathname).toString(true)\n          )\n        );\n      })\n    );\n\n    this.initialPath = options.initialPath;\n  }\n\n  get dispose() {\n    return this.disposableStore.dispose;\n  }\n\n  get onDidChange() {\n    return this.onDidChangeEmitter.event;\n  }\n\n  get onWillFocusModel() {\n    return this.onWillFocusModelEmitter.event;\n  }\n\n  createModel(pathname: string, content = '') {\n    const language = this.inferLanguage(pathname);\n\n    let uri: Monaco.Uri;\n\n    try {\n      uri = Monaco.Uri.file(pathname);\n    } catch (err) {\n      throw new Error(`Invalid path '${pathname}': ${err && err.message}`);\n    }\n\n    if (Monaco.editor.getModel(uri)) {\n      throw new Error(`Cannot create file because it exists '${pathname}'`);\n    }\n\n    return Monaco.editor.createModel(content, language, uri);\n  }\n\n  focusHref(\n    href: string,\n    options: { lineNumber?: number; columnNumber?: number; markers?: Monaco.editor.IMarkerData[] } = {}\n  ) {\n    const model = this.getModelByHref(href);\n\n    if (model) {\n      this.focusModel(model, options);\n    }\n  }\n\n  focusModel(\n    model: Monaco.editor.ITextModel,\n    options: { lineNumber?: number; columnNumber?: number; markers?: Monaco.editor.IMarkerData[] } = {}\n  ) {\n    if (this.editor) {\n      this.editor.setModel(model);\n      if (options.lineNumber) {\n        this.editor.revealLineInCenter(options.lineNumber, Monaco.editor.ScrollType.Smooth);\n        this.editor.setPosition({\n          column: options.columnNumber || 0,\n          lineNumber: options.lineNumber,\n        });\n      }\n      if (options.markers) {\n        Monaco.editor.setModelMarkers(model, 'editorManager', options.markers);\n      }\n      this.editor.focus();\n    }\n  }\n\n  focusPath(\n    path: string,\n    options: { lineNumber?: number; columnNumber?: number; markers?: Monaco.editor.IMarkerData[] } = {}\n  ) {\n    const model = this.getModelByPath(path);\n\n    if (model) {\n      this.focusModel(model, options);\n    }\n  }\n\n  getModelByHref(href: string) {\n    try {\n      const uri = Monaco.Uri.parse(href);\n      return Monaco.editor.getModel(uri);\n    } catch (_) {\n      return null;\n    }\n  }\n\n  getModelByPath(path: string) {\n    return Monaco.editor.getModel(Monaco.Uri.file(path));\n  }\n\n  mount(el: HTMLElement) {\n    if (this.editor) {\n      throw new Error('Invariant violation: Editor already mounted');\n    }\n\n    this.editor = Monaco.editor.create(el, {\n      model: null,\n      automaticLayout: true,\n      minimap: {\n        enabled: false,\n      },\n      showUnused: true,\n      scrollBeyondLastLine: false,\n      theme: 'vs',\n      wordWrap: 'bounded',\n      wrappingIndent: 'same',\n    });\n\n    this.editor.onDidDispose(() => {\n      this.editor = null;\n    });\n\n    this.editor.onDidChangeModel(e => {\n      if (e.newModelUrl && this.editor) {\n        const model = Monaco.editor.getModel(e.newModelUrl)!;\n        const viewState = this.viewState.get(model);\n\n        if (viewState) {\n          this.editor.restoreViewState(viewState);\n        }\n      }\n    });\n\n    this.editor.onDidBlurEditorText(() => {\n      if (this.editor) {\n        const model = this.editor.getModel();\n        const viewState = this.editor.saveViewState();\n\n        if (model && viewState) {\n          this.viewState.set(model, viewState);\n        }\n      }\n    });\n\n    this.disposableStore.add(this.editor);\n\n    if (this.initialPath) {\n      this.focusPath(this.initialPath);\n    }\n\n    return this.editor;\n  }\n\n  inferLanguage(pathname: string) {\n    return pathname.match(/\\.(?:tsx?|jsx?)$/) ? 'typescript' : undefined;\n  }\n\n  private resolveBareModule(spec: string, pathname?: string) {\n    const npmSpec = resolveNpmSpec(spec);\n\n    switch (npmSpec.type) {\n      case 'range':\n      case 'version': {\n        return this.unpkgCdn.resolveBareModule(spec, pathname);\n      }\n      case 'git': {\n        if (npmSpec.hosted && npmSpec.hosted.type === 'github') {\n          const resolvedSpec = `${npmSpec.hosted.user}/${npmSpec.hosted.project}@${npmSpec.gitRange ||\n            npmSpec.gitCommittish}`;\n          console.log({ resolvedSpec, npmSpec });\n          return this.githubCdn.resolveBareModule(resolvedSpec, pathname);\n        }\n\n        throw new NotSupportedError(\n          `Unable to resolve '${spec}' because dependencies of type '${npmSpec.type}' are not yet supported`\n        );\n      }\n      default: {\n        debugger;\n        throw new NotSupportedError(\n          `Unable to resolve '${spec}' because dependencies of type '${npmSpec.type}' are not yet supported`\n        );\n      }\n    }\n  }\n}\n\nexport const EditorManagerContext = createContext(new EditorManager());\n\nexport function useActiveModel() {\n  const workbench = useContext(EditorManagerContext);\n  const [activeModel, setActiveModel] = useState<Monaco.editor.ITextModel | null>(\n    workbench.editor ? workbench.editor.getModel() : null\n  );\n\n  useEffect(() => {\n    const disposable = new DisposableStore();\n\n    const trackEditor = (editor: Monaco.editor.ICodeEditor) => {\n      editor.onDidChangeModel(e => {\n        const model = e.newModelUrl ? Monaco.editor.getModel(e.newModelUrl) : null;\n\n        setActiveModel(model);\n      });\n\n      disposable.add(\n        editor.onDidBlurEditorText(() => {\n          setActiveModel(null);\n        })\n      );\n\n      disposable.add(\n        editor.onDidFocusEditorText(() => {\n          setActiveModel(editor.getModel());\n        })\n      );\n\n      if (editor.hasTextFocus()) {\n        setActiveModel(editor.getModel());\n      }\n    };\n\n    disposable.add(Monaco.editor.onDidCreateEditor(trackEditor));\n    if (workbench.editor) {\n      trackEditor(workbench.editor);\n    }\n\n    return () => disposable.dispose();\n  }, [workbench.editor, activeModel]);\n\n  return activeModel;\n}\n","import styled from '@emotion/styled/macro';\nimport React, { useRef, useEffect, useContext } from 'react';\nimport { EditorManagerContext } from '../lib/EditorManager';\n\nconst Editor: React.FC<{\n  className?: string;\n}> = ({ className }) => {\n  const el = useRef<HTMLDivElement | null>(null);\n  const editorManager = useContext(EditorManagerContext);\n\n  useEffect(() => {\n    if (!el.current) {\n      return;\n    }\n\n    const editor = editorManager.mount(el.current);\n\n    return () => {\n      editor.dispose();\n    };\n  }, [editorManager, el]);\n\n  return (\n    <div className={className} ref={el}>\n      <div></div>\n    </div>\n  );\n};\n\nexport default styled(Editor)``;\n","import * as Monaco from 'monaco-editor';\nimport { useEffect, useState } from 'react';\nimport { DisposableStore } from 'ts-primitives';\n\n// import { EditorContext } from './context';\n\nexport enum EntryKind {\n  Directory = 'directory',\n  File = 'file',\n}\n\nexport interface IDirectory {\n  type: EntryKind.Directory;\n  uri: Monaco.Uri;\n}\nexport interface IFile {\n  type: EntryKind.File;\n  uri: Monaco.Uri;\n  model: Monaco.editor.ITextModel;\n}\n\nexport type DirectoryEntry = IDirectory | IFile;\n\nexport function useDirectory(uri: Monaco.Uri) {\n  // Make sure the URI always ends with a trailing slash\n  const prefix = uri.toString(true).replace(/\\/?$/, '/');\n  const sortEntries = (models: (DirectoryEntry)[]) => {\n    return [...models].sort((a, b) => (a.uri.fsPath > b.uri.fsPath ? 1 : -1));\n  };\n\n  const initialEntries = sortEntries(\n    Monaco.editor.getModels().reduce(\n      (entries, model) => {\n        const modelUri = model.uri.toString(true);\n\n        if (modelUri.startsWith(prefix)) {\n          const nestedPath = modelUri.slice(prefix.length);\n          const nextDirIdx = nestedPath.indexOf('/');\n\n          if (nextDirIdx === 0) {\n            throw new Error('Invariant error: WAT?');\n          }\n\n          if (nextDirIdx > 0) {\n            // This is an intermediate directory\n            const uri = Monaco.Uri.parse(`${prefix}${nestedPath.slice(0, nextDirIdx + 1)}`);\n\n            entries.push({\n              type: EntryKind.Directory,\n              uri,\n            });\n          } else {\n            entries.push({\n              type: EntryKind.File,\n              uri: model.uri,\n              model,\n            });\n          }\n        }\n\n        return entries;\n      },\n      [] as DirectoryEntry[]\n    )\n  );\n  const [entries, setEntries] = useState(initialEntries);\n\n  useEffect(() => {\n    const disposable = new DisposableStore();\n    const prefix = uri.toString(true).replace(/\\/?$/, '/');\n\n    disposable.add(\n      Monaco.editor.onDidCreateModel((model: Monaco.editor.ITextModel) => {\n        const modelUri = model.uri.toString(true);\n\n        if (modelUri.startsWith(prefix)) {\n          const nestedPath = modelUri.slice(prefix.length);\n          const nextDirIdx = nestedPath.indexOf('/');\n\n          if (nextDirIdx === 0) {\n            throw new Error('Invariant error: WAT?');\n          }\n\n          if (nextDirIdx > 0) {\n            // This is an intermediate directory\n            const uri = Monaco.Uri.parse(`${prefix}${nestedPath.slice(0, nextDirIdx)}`);\n\n            // It is possible that we already have this directory\n            const entry = entries.find(entry => entry.uri.toString(true) === uri.toString(true));\n\n            if (entry) {\n              if (entry.type !== EntryKind.Directory) {\n                throw new Error(\n                  `Invariant violation: A file in '${prefix}' conflicts with the path of the new file '${modelUri}'`\n                );\n              }\n\n              return;\n            }\n\n            entries.push({ type: EntryKind.Directory, uri });\n\n            return setEntries(sortEntries(entries));\n          }\n\n          if (\n            !entries.find(\n              entry => entry.type === EntryKind.File && entry.uri.toString(true) === model.uri.toString(true)\n            )\n          ) {\n            entries.push({ type: EntryKind.File, uri: model.uri, model });\n\n            setEntries(sortEntries(entries));\n          }\n        }\n      })\n    );\n\n    disposable.add(\n      Monaco.editor.onWillDisposeModel(model => {\n        const idx = entries.findIndex(entry => entry.type === EntryKind.File && entry.model === model);\n\n        if (idx === -1) {\n          throw new Error(`Invariant violation: Removing an untracked model: '${model.uri.fsPath}'`);\n        }\n\n        entries.splice(idx, 1);\n\n        setEntries(sortEntries(entries));\n      })\n    );\n\n    return () => disposable.dispose();\n  }, [entries, uri]);\n\n  return entries;\n}\n","import styled from '@emotion/styled/macro';\nimport { Bundle, InvariantViolation } from '@velcro/bundler';\nimport { CanceledError } from '@velcro/resolver';\nimport * as Monaco from 'monaco-editor';\nimport React, { useEffect, useRef, useContext, useState } from 'react';\nimport {\n  Delayer,\n  Throttler,\n  DisposableStore,\n  CancellationTokenSource,\n  IDisposable,\n  Emitter,\n  Event,\n  timeout,\n} from 'ts-primitives';\n\nimport { EditorManagerContext } from '../lib/EditorManager';\nimport { TimeoutError } from '../lib/error';\nimport { HmrBuildErrorRequest, HmrReloadRequest, HmrReloadResponse } from '../lib/previewRuntime';\n\nexport interface DeferredExecutionModuleRecord {\n  code: string;\n  dependencies: Record<string, string>;\n}\n\nexport interface DeferredExecutionManifest {\n  aliases: Record<string, string>;\n  entrypoints: Record<string, string>;\n  modules: Record<string, DeferredExecutionModuleRecord>;\n}\n\ninterface MessageLine {\n  isInternal: boolean;\n  text: string;\n}\ninterface Message {\n  lines: MessageLine[];\n}\n\nconst PreviewProgress = styled.div<{ completed: number; total: number }>`\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  width: ${props => (props.total ? `${Math.round((100 * props.completed) / props.total)}%` : 0)};\n  left: 0;\n  height: ${props => (props.total ? '2px' : '0')};\n  background-color: #008cba;\n  transition: width 0.5s 0s cubic-bezier(0.455, 0.03, 0.515, 0.955);\n`;\nconst PreviewIframeWrap = styled.div`\n  position: relative;\n  overflow: hidden;\n\n  & > iframe {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: none;\n    width: 100%;\n    height: 100%;\n  }\n`;\nconst PreviewWrap = styled.div`\n  position: relative;\n  background: white;\n\n  ${PreviewIframeWrap} {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n`;\nconst PreviewMessageError = styled.ul`\n  margin: 0;\n  padding: 1em 2em;\n  font-family: monospace;\n  font-size: 16px;\n  background-color: rgba(255, 0, 0, 0.5);\n  backdrop-filter: brightness(50%);\n  color: white;\n  list-style: none;\n`;\nconst PreviewMessageErrorText = styled.li<{ isInternal: boolean }>`\n  white-space: pre-wrap;\n  opacity: ${props => (props.isInternal ? 0.7 : 1.0)};\n`;\nconst PreviewMessages = styled.div`\n  z-index: 1;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column-reverse;\n`;\nconst PreviewMessageLine: React.FC<{ line: MessageLine }> = ({ line }) => {\n  return <PreviewMessageErrorText isInternal={line.isInternal}>{line.text}</PreviewMessageErrorText>;\n};\nconst PreviewMessage: React.FC<{ message: Message }> = ({ message }) => {\n  return message.lines.length ? (\n    <PreviewMessageError>\n      {message.lines.map((line, i) => (\n        <PreviewMessageLine key={i} line={line}></PreviewMessageLine>\n      ))}\n    </PreviewMessageError>\n  ) : null;\n};\n\nconst Preview: React.FC<{ className?: string }> = props => {\n  const invalidations = useRef(new Set<string>());\n  const previewWrapRef = useRef<HTMLDivElement | null>(null);\n  const hmrClientRef = useRef<HmrClient | null>(null);\n  const previewIframeRef = useRef<HTMLIFrameElement | null>(null);\n  const editorManager = useContext(EditorManagerContext);\n  const [messages, setMessages] = useState([] as Message[]);\n  const [buildProgress, setBuildProgress] = useState({ completed: 0, total: 0 });\n  const runtimeBundleString = useRef('');\n\n  useEffect(() => {\n    const disposable = new DisposableStore();\n    const delayer = new Delayer(500);\n    const throttler = new Throttler();\n\n    let tokenSource = new CancellationTokenSource();\n\n    const queueRefreshPreview = (uris: string[]) => {\n      tokenSource.cancel();\n      tokenSource.dispose();\n\n      tokenSource = new CancellationTokenSource();\n\n      for (const uri of uris) {\n        invalidations.current.add(uri);\n      }\n\n      delayer.trigger(() => throttler.queue(() => refreshPreview(tokenSource.token)));\n    };\n\n    const refreshPreview = async (token: Monaco.CancellationToken) => {\n      const toInvalidate = Array.from(invalidations.current);\n\n      setMessages([]);\n\n      invalidations.current.clear();\n\n      setBuildProgress({ completed: 0, total: 0 });\n\n      let building = true;\n\n      try {\n        if (!runtimeBundleString.current) {\n          const runtimeBundle = await editorManager.previewBundler.generateBundle(\n            [`${editorManager.previewRuntimeHost.getRoot()}index.js`],\n            {\n              onCompleteAsset: () => {\n                if (building) {\n                  setBuildProgress(buildProgress => {\n                    return {\n                      completed: buildProgress.completed + 1,\n                      total: buildProgress.total,\n                    };\n                  });\n                }\n              },\n              onEnqueueAsset: () => {\n                if (building) {\n                  setBuildProgress(buildProgress => {\n                    return {\n                      completed: buildProgress.completed,\n                      total: buildProgress.total + 1,\n                    };\n                  });\n                }\n              },\n              token,\n            }\n          );\n\n          runtimeBundleString.current = runtimeBundle.toString({ executeEntrypoints: true, sourceMap: false });\n        }\n\n        let build: Bundle | Error;\n\n        try {\n          const unresolvedEntrypointHref = Monaco.Uri.file('/').toString(true);\n          const resolvedEntrypoint = await editorManager.bundler.resolver.resolve(unresolvedEntrypointHref);\n\n          if (!resolvedEntrypoint.resolvedUrl) {\n            throw new Error(`Unable to determine the entrypoing to your code`);\n          }\n\n          const resolvedEntrypointHref = resolvedEntrypoint.resolvedUrl.href;\n\n          build = await editorManager.bundler.generateBundle([resolvedEntrypointHref], {\n            invalidations: toInvalidate,\n            onCompleteAsset: () => {\n              if (building) {\n                setBuildProgress(buildProgress => {\n                  return {\n                    completed: buildProgress.completed + 1,\n                    total: buildProgress.total,\n                  };\n                });\n              }\n            },\n            onEnqueueAsset: () => {\n              if (building) {\n                setBuildProgress(buildProgress => {\n                  return {\n                    completed: buildProgress.completed,\n                    total: buildProgress.total + 1,\n                  };\n                });\n              }\n            },\n            token,\n          });\n        } catch (err) {\n          build = err;\n        }\n\n        if (hmrClientRef.current) {\n          if (build instanceof CanceledError || (build instanceof Error && build.name === 'CanceledError')) {\n            return;\n          } else if (build instanceof Error) {\n            hmrClientRef.current.send({\n              type: 'build_error',\n              message: build.message,\n              stack: build.stack,\n            });\n          } else {\n            const updatedBundleFile = new File(\n              [build.toString({ executeEntrypoints: false, runtime: '__velcroRuntime', sourceMap: true })],\n              'playground:///runtime.js',\n              {\n                type: 'text/javascript',\n              }\n            );\n            const updatedBundleHref = URL.createObjectURL(updatedBundleFile);\n\n            hmrClientRef.current.send({\n              type: 'reload',\n              invalidations: toInvalidate,\n              href: updatedBundleHref,\n            });\n          }\n\n          await Promise.race([\n            Event.toPromise(hmrClientRef.current.onReload),\n            timeout(5000).then(() => {\n              throw new TimeoutError(`HMR refresh timed out`);\n            }),\n          ]);\n        } else {\n          let bundledCode: string;\n\n          if (build instanceof Error) {\n            bundledCode = `ReactErrorOverlay.reportBuildError(${JSON.stringify(build.message)});\\n`;\n          } else {\n            bundledCode = `__velcroRuntime = ${build.toString({ executeEntrypoints: true, sourceMap: true })}`;\n          }\n\n          const runtimeFile = new File([runtimeBundleString.current], 'playground:///runtime.js', {\n            type: 'text/javascript',\n          });\n          const bundleFile = new File([bundledCode], 'playground:///index.js', {\n            type: 'text/javascript',\n          });\n          const markup = new File(\n            [\n              `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n<title>Document</title>\n<script src=\"${URL.createObjectURL(runtimeFile)}\"></script>\n</head>\n<body>\n<div id=\"root\"></div>\n<script src=\"${URL.createObjectURL(bundleFile)}\"></script>\n</body>\n</html>`,\n            ],\n            Monaco.Uri.file('/index.html').toString(true),\n            {\n              type: 'text/html',\n            }\n          );\n          const htmlUrl = URL.createObjectURL(markup);\n          const iframe = document.createElement('iframe');\n          iframe.style.display = 'none';\n          iframe.src = htmlUrl;\n\n          if (previewWrapRef.current) {\n            previewWrapRef.current.appendChild(iframe);\n          }\n\n          try {\n            await new Promise((resolve, reject) => {\n              iframe.onload = () => resolve();\n              iframe.onerror = reject;\n            });\n\n            if (previewIframeRef.current) {\n              previewIframeRef.current.remove();\n            }\n\n            iframe.style.display = '';\n\n            previewIframeRef.current = iframe;\n          } catch (err) {\n            iframe.remove();\n\n            throw err;\n          }\n        }\n      } catch (err) {\n        tokenSource.cancel();\n\n        if (!(err instanceof CanceledError) && (err && err.name !== 'CanceledError')) {\n          setMessages(messages => [...messages, { lines: [{ isInternal: false, text: err.message }] }]);\n        }\n      } finally {\n        if (tokenSource) {\n          tokenSource.dispose();\n        }\n\n        building = false;\n\n        setBuildProgress({ completed: 0, total: 0 });\n      }\n    };\n\n    disposable.add(delayer);\n\n    for (const model of Monaco.editor.getModels()) {\n      disposable.add(\n        model.onDidChangeContent(() => {\n          queueRefreshPreview([model.uri.toString(true)]);\n        })\n      );\n    }\n\n    disposable.add(\n      Monaco.editor.onDidCreateModel(model => {\n        queueRefreshPreview([model.uri.toString(true)]);\n\n        disposable.add(\n          model.onDidChangeContent(() => {\n            queueRefreshPreview([model.uri.toString(true)]);\n          })\n        );\n      })\n    );\n\n    disposable.add(\n      Monaco.editor.onWillDisposeModel(model => {\n        queueRefreshPreview([model.uri.toString(true)]);\n      })\n    );\n\n    disposable.add(\n      (() => {\n        const onMessage = async (e: MessageEvent) => {\n          if (\n            (previewIframeRef.current && e.source !== previewIframeRef.current.contentWindow) ||\n            !e.data ||\n            typeof e.data.type !== 'string' ||\n            !e.data.payload\n          ) {\n            return;\n          }\n\n          switch (e.data.type) {\n            case 'error_open': {\n              if (!editorManager.editor) {\n                return;\n              }\n\n              const model = editorManager.getModelByHref(e.data.payload.fileName);\n\n              if (model) {\n                let lineNumber: number | undefined = e.data.payload.lineNumber;\n                let columnNumber: number | undefined = undefined;\n\n                if (lineNumber !== undefined) {\n                  const row = model.getLineContent(lineNumber);\n                  const matches = row.match(/^(\\s*)/);\n\n                  columnNumber = matches ? matches[1].length + 1 : undefined;\n                }\n\n                editorManager.focusModel(model, {\n                  lineNumber,\n                  columnNumber,\n                });\n              }\n\n              break;\n            }\n            case 'hmr_ready': {\n              if (!(e.data.payload instanceof MessagePort)) {\n                console.warn(\n                  'Received \"hmr_ready\" message from preview but did not receive the expected MessagePort payload',\n                  e.data\n                );\n                return;\n              }\n\n              hmrClientRef.current = new HmrClient(e.data.payload);\n              break;\n            }\n            default: {\n              console.debug({ message: e.data }, 'Unknown message received from preview iframe');\n            }\n          }\n        };\n\n        window.addEventListener('message', onMessage);\n        return {\n          dispose() {\n            window.removeEventListener('message', onMessage);\n          },\n        };\n      })()\n    );\n\n    disposable.add({\n      dispose() {\n        if (hmrClientRef.current) {\n          hmrClientRef.current.dispose();\n        }\n      },\n    });\n\n    queueRefreshPreview([]);\n\n    return () => disposable.dispose();\n  }, [editorManager.bundler, editorManager, invalidations]);\n\n  return (\n    <PreviewWrap className={props.className}>\n      <PreviewProgress completed={buildProgress.completed} total={buildProgress.total}></PreviewProgress>\n      {previewIframeRef.current ? null : 'Building the preview...'}\n      <PreviewIframeWrap ref={previewWrapRef}></PreviewIframeWrap>\n      <PreviewMessages>\n        {messages.map((message, idx) => (\n          <PreviewMessage key={idx} message={message}></PreviewMessage>\n        ))}\n      </PreviewMessages>\n    </PreviewWrap>\n  );\n};\n\nexport default styled(Preview)``;\n\nclass HmrClient implements IDisposable {\n  private readonly onReloadEmitter = new Emitter<HmrReloadResponse>();\n\n  constructor(private readonly port: MessagePort) {\n    port.onmessage = e => {\n      if (!e.data || typeof e.data !== 'object') {\n        throw new InvariantViolation('Unexpected message received from HMR client');\n      }\n\n      switch (e.data.type) {\n        case 'reload': {\n          this.onReloadEmitter.fire(e.data);\n          break;\n        }\n        default: {\n          throw new InvariantViolation(`Unexpected message with type '${e.data.type}' received from HMR client`);\n        }\n      }\n    };\n  }\n\n  get onReload() {\n    return this.onReloadEmitter.event;\n  }\n\n  dispose() {\n    this.port.close();\n  }\n\n  send(message: HmrBuildErrorRequest | HmrReloadRequest) {\n    this.port.postMessage(message);\n  }\n}\n","import styled from '@emotion/styled/macro';\nimport * as Monaco from 'monaco-editor';\nimport React, { useContext, useRef } from 'react';\nimport { Button } from 'reakit/Button';\nimport { Tooltip, TooltipReference, useTooltipState } from 'reakit/Tooltip';\nimport { useDirectory, EntryKind } from '../lib/hooks';\nimport { useActiveModel, EditorManagerContext } from '../lib/EditorManager';\n\nconst Entry = styled.div<{ modelFocused: boolean }>`\n  background-color: ${props => (props.modelFocused ? '#008cba' : 'inherit')};\n  text-decoration: none;\n  color: ${props => (props.modelFocused ? '#fff' : '#262626')};\n\n  height: 25px;\n  padding: 0 0 0 8px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  & > span {\n    flex: 1;\n  }\n\n  & > button {\n    display: none;\n  }\n\n  &:hover > button {\n    display: block;\n  }\n\n  ${props =>\n    props.modelFocused\n      ? {\n          ':hover': {\n            color: '#f5f5f5',\n            cursor: 'pointer',\n          },\n        }\n      : {\n          ':hover': {\n            backgroundColor: '#eee',\n            color: '#262626',\n            cursor: 'pointer',\n          },\n        }}\n`;\n\nconst CreateEntry = styled.div`\n  text-decoration: none;\n  color: '#262626';\n\n  height: 25px;\n  padding: 0 0 0 8px;\n  display: flex;\n  align-items: center;\n\n  :hover {\n    background-color: #eee;\n    cursor: pointer;\n  }\n`;\n\nconst SidebarFileDelete = styled(Button)`\n  border: none;\n  background: none;\n\n  :hover {\n    cursor: pointer;\n  }\n`;\n\nconst StyledTooltip = styled.div`\n  font-family: Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.4;\n  background-color: #333;\n  color: #fff;\n  border-radius: 4px;\n  opacity: 0.9;\n  padding: 0.2em 0.4em;\n`;\n\nconst SidebarFile: React.FC<{ className?: string; model: Monaco.editor.ITextModel }> = ({ className, model }) => {\n  const activeModel = useActiveModel();\n  const editorManager = useContext(EditorManagerContext);\n  const tooltip = useTooltipState({ gutter: 0 });\n\n  const onClickDelete = () => {\n    model.dispose();\n  };\n\n  return (\n    <Entry className={className} modelFocused={model === activeModel}>\n      <span onClick={() => editorManager.focusModel(model)}>{model.uri.fsPath.slice(1)}</span>\n      <TooltipReference {...tooltip} as={SidebarFileDelete} onClick={() => onClickDelete()}>\n        <span role=\"img\" aria-label=\"Delete file\">\n          ❌\n        </span>\n      </TooltipReference>\n      <Tooltip {...tooltip} as={StyledTooltip}>\n        Delete file\n      </Tooltip>\n    </Entry>\n  );\n};\n\nconst Sidebar: React.FC<{ className?: string }> = props => {\n  const rootDir = useRef(Monaco.Uri.file('/'));\n  const entries = useDirectory(rootDir.current);\n  const editorManager = useContext(EditorManagerContext);\n\n  const onClickCreate = () => {\n    const filename = prompt('Filename?');\n\n    if (filename) {\n      editorManager.createModel(filename);\n    }\n  };\n\n  return (\n    <div className={props.className}>\n      {entries.map(entry =>\n        entry.type === EntryKind.Directory ? (\n          <div>{entry.uri.fsPath.slice(1)}</div>\n        ) : (\n          <SidebarFile key={entry.uri.toString(true)} model={entry.model}></SidebarFile>\n        )\n      )}\n      <CreateEntry onClick={() => onClickCreate()}>Create...</CreateEntry>\n    </div>\n  );\n};\n\nexport default styled(Sidebar)`\n  display: flex;\n  flex-direction: column;\n`;\n","import styled from '@emotion/styled/macro';\nimport React from 'react';\n\nimport Editor from './Editor';\nimport Preview from './Preview';\nimport Sidebar from './Sidebar';\nimport { EditorManager, EditorManagerContext } from '../lib/EditorManager';\n\nconst PlaygroundCmp: React.FC<{ className?: string; initialPath: string; project: Record<string, string> }> = ({\n  className,\n  initialPath,\n  project,\n}) => {\n  const editorManager = new EditorManager({ files: project, initialPath: initialPath });\n\n  return (\n    <div className={className}>\n      <EditorManagerContext.Provider value={editorManager}>\n        <Sidebar></Sidebar>\n        <Editor></Editor>\n        <Preview></Preview>\n      </EditorManagerContext.Provider>\n    </div>\n  );\n};\n\nexport const Playground = styled(PlaygroundCmp)`\n  display: flex;\n  flex-direction: row;\n\n  font-family: Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.4;\n\n  color: #222;\n\n  ${Sidebar} {\n    flex: 1 1 100px;\n    min-width: 100px;\n    max-width: 400px;\n    border-right: 1px solid #ccc;\n  }\n\n  ${Editor} {\n    border-right: 1px solid #ccc;\n  }\n\n  ${Editor}, ${Preview} {\n    flex: 10;\n  }\n`;\n","export const files = {\n  'package.json':\n    JSON.stringify(\n      {\n        dependencies: {\n          'github-markdown-css': '^3.0.1',\n          react: '^16.9.0',\n          'react-dom': '^16.9.0',\n        },\n      },\n      null,\n      2\n    ) + '\\n',\n  'app.jsx': `\nimport React, { Component } from 'react';\nimport 'github-markdown-css';\n\nimport { Explanation } from './explanation';\nimport { name } from './name';\nimport './style.css';\n\nclass Hello extends Component {\n  render() {\n    return <div className=\"markdown-body\">\n      <h1>Hello {name}</h1>\n      <blockquote>There is no <del>spoon</del> server</blockquote>\n      <Explanation/>\n    </div>;\n  }\n}\n\nexport default Hello\n  `.trim(),\n  'explanation.jsx':\n    `\nimport React from 'react';\n\nexport const Explanation = () => <>\n  <section>\n    <h2>What is this?</h2>\n    <p>\n      This is a demo of bundling and serving a browser-based sandbox fully from the browser. <strong>There are <em>no</em> servers involved</strong> except the static server hosting this demo and <a href=\"https://unpkg.com\" target=\"_blank\" rel=\"noopener\">unpkg.com</a>. All module resolution, transpilation and bundling is happening in the browser.\n    </p>\n    <p>\n      Try it. Go offline, and reload...\n    </p>\n    <p>\n      <strong>I dare you.</strong>\n    </p>\n  </section>\n  <section>\n    <h2>Features</h2>\n    <ul>\n      <li>Full offline support. Once your cache is seeded, you can cut the cord.</li>\n      <li>Fully browser-based bundling.</li>\n      <li>Add (almost) any node module and no server is involved.</li>\n      <li>If you want to add another module, make sure to add it to <code>package.json</code> first.</li>\n      <li>Automatic type acquisition for full typings support in the browser, in JavaScript!</li>\n      <li>Resolve source locations in stack traces</li>\n      <li>Hot module reloading</li>\n    </ul>\n  </section>\n</>;\n    `.trim() + '\\n',\n  'index.jsx':\n    `\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './app';\n  \nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n);\n      `.trim() + '\\n',\n  'name.js':\n    `\nexport const name = 'Velcro';\n    `.trim() + '\\n',\n  'style.css':\n    `\n.markdown-body {\n  box-sizing: border-box;\n  min-width: 200px;\n  max-width: 980px;\n  margin: 0 auto;\n  padding: 45px;\n}\n\n@media (max-width: 767px) {\n  .markdown-body {\n    padding: 15px;\n  }\n}\n    `.trim() + '\\n',\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n\n      navigator.serviceWorker.ready.then(registration => {\n        config && config.onSuccess && config.onSuccess(registration);\n      });\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\n\nimport * as serviceWorker from './serviceWorker';\n\ninterface ServiceWorkerEvent extends Event {\n  target: Partial<ServiceWorker> & EventTarget | null;\n}\n\ninterface ServiceWorkerContextValue {\n  assetsUpdateReady: boolean;\n  assetsCached: boolean;\n  updateAssets(): void;\n}\n\nconst ServiceWorkerContext = React.createContext<ServiceWorkerContextValue | undefined>(undefined);\n\nexport function ServiceWorkerProvider(props: React.PropsWithChildren<{}>) {\n  const [waitingServiceWorker, setWaitingServiceWorker] = React.useState<ServiceWorker | null>(null);\n  const [assetsUpdateReady, setAssetsUpdateReady] = React.useState(false);\n  const [assetsCached, setAssetsCached] = React.useState(false);\n\n  const value = React.useMemo(() => {\n    return {\n      assetsUpdateReady,\n      assetsCached,\n      // Call when the user confirm update of application and reload page\n      updateAssets: () => {\n        if (waitingServiceWorker) {\n          waitingServiceWorker.addEventListener('statechange', (event: ServiceWorkerEvent) => {\n            if (event.target && event.target.state === 'activated') {\n              window.location.reload();\n            }\n          });\n\n          waitingServiceWorker.postMessage({ type: 'SKIP_WAITING' });\n        }\n      },\n    };\n  }, [assetsUpdateReady, assetsCached, waitingServiceWorker]);\n\n  // Once on component mounted subscribe to Update and Succes events in\n  // CRA's service worker wrapper\n  React.useEffect(() => {\n    serviceWorker.register({\n      onUpdate: registration => {\n        setWaitingServiceWorker(registration.waiting);\n        setAssetsUpdateReady(true);\n      },\n      onSuccess: registration => {\n        setAssetsCached(true);\n\n        if (registration.active) {\n          registration.active.addEventListener('statechange', (event: ServiceWorkerEvent) => {\n            if (!navigator.serviceWorker.controller) {\n              setAssetsCached(false);\n            }\n          });\n        }\n      },\n    });\n  }, []);\n\n  return <ServiceWorkerContext.Provider value={value} {...props} />;\n}\n\nexport function useServiceWorker() {\n  const context = React.useContext(ServiceWorkerContext);\n\n  if (!context) {\n    throw new Error('useServiceWorker must be used within a ServiceWorkerProvider');\n  }\n\n  return context;\n}\n","import { Global, css } from '@emotion/core';\nimport styled from '@emotion/styled/macro';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { OfflineBolt, Update } from '@material-ui/icons';\nimport React from 'react';\nimport { Tooltip, TooltipReference, useTooltipState } from 'reakit/Tooltip';\n\nimport { Playground } from './playground';\nimport { files } from './templates/react';\nimport { useServiceWorker, ServiceWorkerProvider } from './useServiceWorker';\nimport { Button } from 'reakit/Button';\n\nconst PlaygroundWrapper = styled.div`\n  background: white;\n  color: #666;\n  display: flex;\n  flex-direction: column;\n\n  ${Playground} {\n    border-bottom: 1px solid #ccc;\n    flex: 1;\n  }\n`;\n\nconst StatusBarItem = styled.span`\n  display: inline-flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst ReloadButton = styled(Button)`\n  border: 0;\n  background: #008cba;\n  margin: 0 0.5em;\n  color: white;\n  border-radius: 2px;\n  font-weight: 600;\n\n  :hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`;\n\nconst StyledTooltip = styled.div`\n  font-family: Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.4;\n  background-color: #333;\n  color: #fff;\n  border-radius: 4px;\n  opacity: 0.9;\n  padding: 0.2em 0.4em;\n`;\n\nconst StatusBar: React.FC = () => {\n  const serviceWorker = useServiceWorker();\n  const offlineTooltip = useTooltipState({ gutter: 0 });\n  const reloadTooltip = useTooltipState({ gutter: 0 });\n\n  return (\n    <StatusBarStyles>\n      {serviceWorker.assetsCached ? (\n        <TooltipReference {...offlineTooltip} as={StatusBarItem}>\n          <OfflineBolt color=\"inherit\" fontSize=\"small\" />\n          &nbsp;Offline ready\n        </TooltipReference>\n      ) : null}\n      <Tooltip {...offlineTooltip} as={StyledTooltip}>\n        This application has been fully cached and can now be used offline.\n      </Tooltip>\n\n      {serviceWorker.assetsUpdateReady ? (\n        <TooltipReference {...reloadTooltip} as={StatusBarItem}>\n          <Update color=\"inherit\" fontSize=\"small\" />\n          &nbsp;Update ready:\n          <ReloadButton onClick={() => serviceWorker.updateAssets()}>Reload</ReloadButton>\n        </TooltipReference>\n      ) : null}\n      <Tooltip {...reloadTooltip} as={StyledTooltip}>\n        There is an update of this application ready to install. Click install reload to install the update and reload\n        the page.\n      </Tooltip>\n    </StatusBarStyles>\n  );\n};\n\nconst StatusBarStyles = styled.div`\n  display: flex;\n  flex-direction: row;\n\n  font-size: 90%;\n\n  height: 24px;\n  padding: 0 0.5em;\n\n  ${StatusBarItem} {\n    margin-left: 0.5em;\n    margin-right: 0.5em;\n  }\n`;\n\nconst AppWrapper = styled.div`\n  width: 100%;\n  min-width: 200px;\n  max-width: 80vw;\n  margin: 0 auto;\n  padding: 0 0 45px 0;\n\n  @media (max-width: 960px) {\n    padding: 0 15px 15px 15px;\n    max-width: initial;\n  }\n\n  display: flex;\n  flex-direction: column;\n\n  ${PlaygroundWrapper} {\n    flex: 1;\n    background: #f5f5f5;\n    border-radius: 2px;\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);\n\n    ${StatusBarStyles} {\n    }\n  }\n`;\n\nconst Title = styled.div`\n  font-family: 'Raleway', sans-serif;\n  font-size: 250%;\n  font-weight: 800;\n  font-variant: small-caps;\n  font-variant-caps: small-caps;\n  color: #00bfff;\n`;\n\nconst Subtitle = styled.div`\n  color: #ddd;\n  font-size: 120%;\n  font-weight: 400;\n`;\n\nconst Link = styled.a`\n  color: white;\n  text-decoration: none;\n\n  :hover {\n    text-decoration: underline;\n  }\n`;\n\nconst Links = styled.div`\n  display: flex;\n  flex-direction: row;\n\n  & > *:not(:last-child):after {\n    padding: 0 0.5em;\n    content: '｜';\n    color: #aaa;\n    text-decoration: none;\n  }\n\n  ${Link} {\n    color: #ccc;\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n  padding: 0.8em 0 0.3em 0;\n  text-shadow: #000 1px 1px 5px;\n\n  ${Title} {\n    margin-right: 0.5em;\n  }\n\n  ${Subtitle} {\n    margin-right: 0.5em;\n  }\n\n  ${Links} {\n    flex: 1;\n    justify-content: flex-end;\n  }\n`;\n\nconst globalCss = css`\n  @import url('https://fonts.googleapis.com/css?family=Raleway:900&display=swap');\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  html,\n  body {\n    margin: 0;\n    padding: 0;\n    min-height: 100vh;\n\n    font-family: Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif;\n    font-size: 14px;\n    line-height: 1.4;\n\n    background: #333;\n    color: #fff;\n\n    display: flex;\n    flex-direction: column;\n\n    #root {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n\n      ${AppWrapper} {\n        flex: 1;\n      }\n    }\n  }\n`;\n\nexport const App: React.FC = () => {\n  return (\n    <ServiceWorkerProvider>\n      <CssBaseline />\n      <AppWrapper>\n        <Global styles={globalCss}></Global>\n        <Header>\n          <Title>Velcro</Title>\n          <Subtitle>The client-side bundler and playground</Subtitle>\n          <Links>\n            <div>\n              <Link href=\"https://twitter.com/filearts\" target=\"_blank\" rel=\"nofollow noreferrer\">\n                @filearts\n              </Link>\n            </div>\n            <div>\n              <Link href=\"https://github.com/ggoodman/velcro\" target=\"_blank\" rel=\"nofollow noreferrer\">\n                View on GitHub\n              </Link>\n            </div>\n          </Links>\n        </Header>\n        <PlaygroundWrapper>\n          <Playground project={files} initialPath=\"index.jsx\"></Playground>\n          <StatusBar></StatusBar>\n        </PlaygroundWrapper>\n      </AppWrapper>\n    </ServiceWorkerProvider>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}