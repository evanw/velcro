(this["webpackJsonp@velcro/playground"]=this["webpackJsonp@velcro/playground"]||[]).push([[1],{332:function(e,t,n){e.exports=n(415)},415:function(e,t,n){"use strict";n.r(t);var r=n(51),a=n(86),o=n(12),i=n.n(o),c=n(180),s=n.n(c),u=n(475),l=n(474),f=n(158),p=n(156),d=n(26),h=n.n(d),v=n(35),b=n(143),m=n(15),g=n(20),y=n(43),k=n(77),w=n(52);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O,E=/\.d\.ts$/;function S(e){var t="@"===e.name.charAt(0)?e.name.slice(1).replace("/","__"):e.name,n="*";if(e.version){var r=e.version.split(".")[0];n="".concat(r,".x")}return{name:"@types/".concat(t),range:n}}!function(e){e.Directory="directory",e.File="file"}(O||(O={}));var C=function(){function e(t,n){Object(m.a)(this,e),this.resolver=t,this.resolveBareModule=n,this._onTypeFile=new k.d}return Object(g.a)(e,[{key:"_importAdjacentTypings",value:function(e,t,n){var r=this,a=w.g.join(n,"node_modules/".concat(t.name,"/"));return t.name?this._listFiles(t.name,t.version).then((function(n){var o=!1,i=[],c=w.g.resolve("/",t.main||"index.js"),s=function(n){if(c!==n&&!E.test(n))return"continue";i.push(r.resolver.host.readFileContent(r.resolver,r.resolveBareModule(r.resolver.host,{name:t.name,nameSpec:"".concat(t.name,"@").concat(t.version),pathname:n,spec:t.version})).then((function(t){var i=r.resolver.decoder.decode(t),s=w.g.join(a,n);e[s]=i,r._onTypeFile.fire({pathname:s,content:i}),c!==n&&(o=!0)}),(function(e){console.warn(e)})))};for(var u in n)s(u);return i.length?Promise.all(i).then((function(){return o})):o})):Promise.resolve(!1)}},{key:"_importTypingsFromDefinitelyTyped",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n,r){var a,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.name){e.next=2;break}return e.abrupt("return",void 0);case 2:return a=S({name:n.name,version:n.version}),e.prev=3,e.next=6,this._import(t,a.name,a.range,r);case 6:if(!(o=e.sent).dependencies){e.next=15;break}e.t0=h.a.keys(o.dependencies);case 9:if((e.t1=e.t0()).done){e.next=15;break}return i=e.t1.value,e.next=13,this._import(t,i,o.dependencies[i],r);case 13:e.next=9;break;case 15:e.next=20;break;case 17:return e.prev=17,e.t2=e.catch(3),e.abrupt("return",void 0);case 20:case"end":return e.stop()}}),e,this,[[3,17]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_listFiles",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,p,d,v,b,m=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:"latest",e.next=3,this.resolver.host.getCanonicalUrl(this.resolver,this.resolveBareModule(this.resolver.host,{name:t,spec:n,nameSpec:"".concat(t,"@").concat(n),pathname:"/"}));case 3:return r=e.sent,e.next=6,this.resolver.host.getCanonicalUrl(this.resolver,r);case 6:a=e.sent,o={},i=[a];case 9:if(!i.length){e.next=35;break}return c=i.shift(),e.next=13,this.resolver.host.listEntries(this.resolver,c);case 13:for(s=e.sent,u=!0,l=!1,f=void 0,e.prev=17,p=s[Symbol.iterator]();!(u=(d=p.next()).done);u=!0)(v=d.value).type===w.e.Directory?i.push(v.url):(b=v.url.href.slice(a.href.length-1),o[b]={type:O.File,path:b});e.next=25;break;case 21:e.prev=21,e.t0=e.catch(17),l=!0,f=e.t0;case 25:e.prev=25,e.prev=26,u||null==p.return||p.return();case 28:if(e.prev=28,!l){e.next=31;break}throw f;case 31:return e.finish(28);case 32:return e.finish(25);case 33:e.next=9;break;case 35:return e.abrupt("return",o);case 36:case"end":return e.stop()}}),e,this,[[17,21,25,33],[26,,28,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_import",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n,r){var a,o,i,c,s,u,l=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:"",o=w.g.join(a,"node_modules",n,"package.json"),i=this.resolveBareModule(this.resolver.host,{name:n,spec:r,nameSpec:"".concat(n,"@").concat(r),pathname:"/package.json"}),e.next=5,this.resolver.readParentPackageJson(i);case 5:if(c=e.sent){e.next=8;break}throw new Error("Unable to load package.json for ".concat(n,"@").concat(r));case 8:return s=JSON.stringify(c.packageJson),u=c.packageJson.name||n,t[o]=s,this._onTypeFile.fire({pathname:o,content:s}),e.prev=12,e.next=15,this._importAdjacentTypings(t,c.packageJson,a);case 15:if(e.sent||0===u.indexOf("@types/")){e.next=19;break}return e.next=19,this._importTypingsFromDefinitelyTyped(t,c.packageJson,a);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(12),console.error("error",e.t0);case 24:return e.abrupt("return",c.packageJson);case 25:case"end":return e.stop()}}),e,this,[[12,21]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"importTypesForSpec",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"latest",r=o.length>2&&void 0!==o[2]?o[2]:"",a={},e.prev=3,e.next=6,this._import(a,t,n,r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.warn(e.t0,"Type acquisition failed for ".concat(t,"@").concat(n));case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"importTypesForSpecs",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,o=this,i=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:"",!(r=Object.keys(t).map((function(e){return o.importTypesForSpec(e,t[e],n)}))).length){e.next=8;break}return e.next=5,Promise.all(r);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:return a=e.t0,e.abrupt("return",a.reduce((function(e,t){return j({},e,{},t)}),{}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTypeFile",get:function(){return this._onTypeFile.event}}]),e}(),R=n(39),M=n(28),U=n(112),D=n(38),A=n(114),P=n(122),T=n(182),F=n(316),q=n(326),N=n(327),L=n(209);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=/^[./]|^[a-z_-]+:/,I=/^((@[^/]+\/[^/@]+|[^./@][^/@]*)(?:@([^/]+))?)(.*)?$/,W=function(){function e(t){var n=this;Object(m.a)(this,e),this.internalState="pending",this.promise=new Promise((function(e,t){n.promiseResolve=e,n.promiseReject=t})),t&&(t.isCancellationRequested?this.reject(new w.b("Canceled")):t.onCancellationRequested((function(){n.reject(new w.b("Canceled"))})))}return Object(g.a)(e,[{key:"resolve",value:function(e){this.internalState="resolved",this.promiseResolve(e)}},{key:"reject",value:function(e){this.internalState="rejected",this.promiseReject(e)}},{key:"isSettled",get:function(){return"pending"!==this.internalState}},{key:"state",get:function(){return this.internalState}}]),e}();function _(e){return!H.test(e)}function V(e){var t=function(e){var t=e.match(I);if(t)return{nameSpec:t[1],name:t[2],spec:t[3]||"",pathname:t[4]||""}}(e);if(!t)throw new Error("Unable to parse unexpected unpkg url: '".concat(e,"'"));return t}function z(e,t,n){!function e(t,n,r,a,o,i,c){if(!t)return;t.parent=n;if(a){var s=K;K=!1,a.call($,t,n,r,i,c);var u=K;if(K=s,u)return}var l=G[t.type]||(G[t.type]=Object.keys(t).filter((function(e){return"parent"!==e&&"object"===typeof t[e]})));for(var f=0;f<l.length;f++){var p=l[f],d=t[p];if(Array.isArray(d))for(var h=0;h<d.length;h++)e(d[h],t,r,a,o,p,h);else d&&d.type&&e(d,t,r,a,o,p)}o&&o(t,n,r,i,c)}(e,null,t,n.enter,n.leave)}var K=!1,$={skip:function(){return K=!0}},G={};function X(e){return"ArrowFunctionExpression"===e.type}function Y(e){return"FunctionDeclaration"===e.type}function Q(e){return"FunctionExpression"===e.type}function Z(e){return"Identifier"===e.type}function ee(e){return"MemberExpression"===e.type}function te(e){return"number"===typeof e.start&&"number"===typeof e.end}function ne(e){return function(e){return"Literal"===e.type}(e)&&"string"===typeof e.value}function re(e,t){var n,a,o={unboundSymbols:new Map,locals:new Map,nodeEnv:"development",replacements:[],requires:[],requireResolves:[],skip:new Set};try{var i=(n=t.original,a={onComment:function(e,n,r,a){t.remove(r,a)},onToken:function(e){t.addSourcemapLocation(e.start)}},Object(q.a)(n,J({},a,{allowReturnOutsideFunction:!0,sourceType:"script"})));z(i,o,ae),z(i,o,oe)}catch(D){throw new Error("Error parsing ".concat(e,": ").concat(D.message))}var c=[],s=!0,u=!1,l=void 0;try{for(var f,p=o.requires[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var d=f.value;c.push({callee:J({},d.callee),spec:J({},d.spec)})}}catch(D){u=!0,l=D}finally{try{s||null==p.return||p.return()}finally{if(u)throw l}}var h=[],v=!0,b=!1,m=void 0;try{for(var g,y=o.requireResolves[Symbol.iterator]();!(v=(g=y.next()).done);v=!0){var k=g.value;h.push({callee:J({},k.callee),spec:J({},k.spec)})}}catch(D){b=!0,m=D}finally{try{v||null==y.return||y.return()}finally{if(b)throw m}}var w=new Map,x=!0,j=!1,O=void 0;try{for(var E,S=o.unboundSymbols[Symbol.iterator]();!(x=(E=S.next()).done);x=!0){var C=E.value,R=Object(r.a)(C,2),M=R[0],U=R[1];w.set(M,U.map((function(e){return{start:e.start,end:e.end}})))}}catch(D){j=!0,O=D}finally{try{x||null==S.return||S.return()}finally{if(j)throw O}}return{requireDependencies:c,requireResolveDependencies:h,unboundSymbols:w}}var ae={enter:function(e,t,n){if(n.skip.has(e))return this.skip();!function(e,t,n){if(function(e){return"VariableDeclaration"===e.type}(e)){for(var r,a=e.parent;a;){if("var"===e.kind?se(a):ue(a)){r=a;break}a=a.parent}if(!r)throw new Error("Invariant violation: Failed to find a parent");var o=n.locals.get(r);o||(o={},n.locals.set(r,o));var i=!0,c=!1,s=void 0;try{for(var u,l=e.declarations[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){ce(u.value.id,o)}}catch(y){c=!0,s=y}finally{try{i||null==l.return||l.return()}finally{if(c)throw s}}}else if(Y(e)){var f,p=e.parent;for(p&&p.parent&&(p=p.parent);p;){if(se(p)){f=p;break}p=p.parent}if(!f)throw new Error("Invariant violation: Failed to find a parent");var d=n.locals.get(f);d||(d={},n.locals.set(f,d)),ie(e,d)}else if(function(e){return Y(e)||Q(e)||X(e)}(e)){var h=n.locals.get(e);h||(h={},n.locals.set(e,h)),ie(e,h)}else if(function(e){return"ClassDeclaration"===e.type}(e)&&e.id){var v,b=e.parent;for(b&&b.parent&&(b=b.parent);b;){if(se(b)){v=b;break}b=b.parent}if(!v)throw new Error("Invariant violation: Failed to find a parent");var m=n.locals.get(v);m||(m={},n.locals.set(v,m)),m[e.id.name]=!0}else if(function(e){return"TryStatement"===e.type}(e)&&e.handler){var g=n.locals.get(e.handler);g||(g={},n.locals.set(e.handler,g)),ce(e.handler.param,g)}}(e,0,n),function(e,t,n){if(function(e){return"IfStatement"===e.type}(e)&&function(e){return"BinaryExpression"===e.type}(e.test)){var r={"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},"==":function(e,t){return e==t},"===":function(e,t){return e===t}}[e.test.operator];r&&(ne(e.test.left)&&ee(e.test.right)&&pe(e.test.right,"process.env.NODE_ENV")?(n.replacements.push({start:e.test.right.start,end:e.test.right.end,replacement:JSON.stringify(n.nodeEnv)}),r(e.test.left.value,n.nodeEnv)?e.alternate&&n.skip.add(e.alternate):n.skip.add(e.consequent)):ne(e.test.right)&&ee(e.test.left)&&pe(e.test.left,"process.env.NODE_ENV")&&(n.replacements.push({start:e.test.left.start,end:e.test.left.end,replacement:JSON.stringify(n.nodeEnv)}),r(e.test.right.value,n.nodeEnv)?e.alternate&&n.skip.add(e.alternate):n.skip.add(e.consequent)))}}(e,0,n),function(e,t,n){if(function(e){return"CallExpression"===e.type}(e)&&te(e.callee)){var r=e.callee;if(Z(r)&&te(r)&&"require"===r.name){var a=e.arguments[0];ne(a)&&te(a)?n.requires.push({spec:{start:a.start,end:a.end,value:a.value},callee:{start:r.start,end:r.end}}):console.warn("Non string-literal first arg to require",a)}else if(ee(r)&&Z(r.object)&&"require"===r.object.name&&Z(r.property)&&"resolve"===r.property.name){var o=e.arguments[0];ne(o)&&te(o)?n.requireResolves.push({spec:{start:o.start,end:o.end,value:o.value},callee:{start:r.start,end:r.end}}):console.warn("Non string-literal first arg to require.resolve",o)}}}(e,0,n)}},oe={enter:function(e,t,n){if(function(e){return Z(e)&&!function(e){return e.parent&&ee(e.parent)&&e.parent.object!==e}(e)&&!function(e){return e.parent&&function(e){return"Property"===e.type}(e.parent)&&e.parent.key===e}(e)}(e)&&Z(e)){var r=e.name;if("undefined"===r)return;for(var a=!1,o=e.parent;o;){if("arguments"===r&&le(o)){a=!0;break}var i=n.locals.get(o);if(i&&i[r]){a=!0;break}o=o.parent}if(!a&&te(e)){var c=n.unboundSymbols.get(r);c||(c=[],n.unboundSymbols.set(r,c)),c.push(e)}}else if(function(e){return"ThisExpression"===e.type}(e)){for(var s=!1,u=e.parent;u;){if(fe(u)){s=!0;break}u=u.parent}if(!s&&te(e)){var l=n.unboundSymbols.get("this");l||(l=[],n.unboundSymbols.set("this",l)),l.push(e)}}}};function ie(e,t){e.params.forEach((function(e){ce(e,t)})),e.id&&(t[e.id.name]=!0)}function ce(e,t){if(Z(e))t[e.name]=!0;else if(function(e){return"ObjectPattern"===e.type}(e))e.properties.forEach((function(e){return ce(e.value,t)}));else if(function(e){return"ArrayPattern"===e.type}(e))e.elements.forEach((function(e){return e&&ce(e,t)}));else if(function(e){return"RestElement"===e.type}(e))ce(e.argument,t);else{if(!function(e){return"AssignmentPattern"===e.type}(e))throw new Error("Invariant violation: Unexpected pattern type: ".concat(e.type));ce(e.left,t)}}function se(e){return Y(e)||Q(e)||X(e)||function(e){return"Program"===e.type}(e)}function ue(e){return function(e){return"BlockStatement"===e.type}(e)||se(e)}function le(e){return Y(e)||Q(e)}function fe(e){return Y(e)||Q(e)}function pe(e,t){var n=t.split(".");if(n.length<2)return!1;for(var r=n.shift(),a=n.shift(),o=n.length-1;o>=0;o--){if(!Z(e.property)||e.property.name!==n[o])return!1;if(!ee(e.object))return!1;e=e.object}return!(!Z(e.object)||!Z(e.property))&&(e.object.name===r&&e.property.name===a)}var de,he,ve=function(){function e(t,n){Object(m.a)(this,e),this.href=t,this.rootHref=n,this.dependencies=[],this.unresolvedDependencies={},this.deps=new Map}return Object(g.a)(e,[{key:"setCode",value:function(e){this.magicString=new F.b(e,{filename:this.href,indentExclusionRanges:[]}),this.sourceMappingUrl=function(e){for(var t,n=/(?:\/\/[@#][\s]*(?:source)MappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*(?:source)MappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/gm,r=null;t=n.exec(e);)r=t;if(r)return r[1]}(e);var t=function(e){if(e.href.endsWith(".css"))return{parse:function(t,n){for(var r=n.original,a="\\".charCodeAt(0),o="'".charCodeAt(0),i="\n".charCodeAt(0),c="\r".charCodeAt(0),s=!1,u=0;u<r.length;u++){var l=r.charCodeAt(u);if(l!==a){if(!s)switch(l){case c:case i:case o:n.prependRight(u,"\\")}s=!1}else s=!s}return n.prepend('\n          function reload(){\n            var styleTag = document.createElement("style");\n            styleTag.type = "text/css";\n            styleTag.dataset.href='.concat(JSON.stringify(e.href),";\n\n            styleTag.innerHTML = '")),n.append("';\n            document.head.appendChild(styleTag);\n\n            return function() {    \n              if (styleTag && styleTag.parentElement) {\n                styleTag.parentElement.removeChild(styleTag);\n              }\n            };\n          };\n\n          var remove = reload();\n\n          if (module.hot && module.hot.accept) {\n            module.hot.accept(function() {\n              require(".concat(JSON.stringify(e.href),");\n            });\n          }\n          if (module.hot && module.hot.dispose) {\n            module.hot.dispose(function() {\n              remove();\n            });\n          }\n        ")),{requireDependencies:[],requireResolveDependencies:[],unboundSymbols:new Map}}};if(e.href.endsWith(".json"))return{parse:function(e,t){return t.prepend("module.exports = "),{requireDependencies:[],requireResolveDependencies:[],unboundSymbols:new Map}}};return{parse:re}}(this).parse(this.href,this.magicString);this.unresolvedDependencies.requireDependencies=t.requireDependencies,this.unresolvedDependencies.requireResolveDependencies=t.requireResolveDependencies,this.unresolvedDependencies.unboundSymbols=t.unboundSymbols}},{key:"toJSON",value:function(){return{href:this.href,rootHref:this.rootHref,dependencies:this.dependencies,sourceMappingUrl:this.sourceMappingUrl,code:this.magicString?this.magicString.original:""}}}],[{key:"fromJSON",value:function(t){var n,r=new e(t.href,t.rootHref);return(n=r.dependencies).push.apply(n,Object(P.a)(t.dependencies)),r.sourceMappingUrl=t.sourceMappingUrl,r.setCode(t.code),r}}]),e}();he=ve||(ve={}),(de=he.DependencyKind||(he.DependencyKind={})).Require="require",de.RequireResolve="require.resolve",de.InjectedGlobal="injected_global";var be=["assert","buffer","constants","crypto","events","fs","http","https","net","os","path","process","querystring","stream","tls","url","util","vm","zlib"].reduce((function(e,t){return Object.assign(e,Object(b.a)({},t,"@velcro/node-libs@".concat("0.24.0","/lib/").concat(t,".js")))}),{});be.string_decoder="string_decoder@1.2.0",be.punycode="punycode@2.1.1";var me=function(){var e=Object(v.a)(h.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,f,p,d,v,b,m,g,y,k,x=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=x.length>3&&void 0!==x[3]?x[3]:{},o=a.syntheticDependencies,i=a.token,c=V(n),s={bareModule:{},resolvedUrl:void 0},u=void 0,l=void 0,!c.spec){e.next=9;break}u=c.nameSpec,e.next=32;break;case 9:if(!(o&&c.name in o)){e.next=13;break}u="".concat(c.name,"@").concat(o[c.name]),e.next=32;break;case 13:if(!r){e.next=32;break}e.prev=14,f=new URL(r),e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(14),new Error("Error loading bare module ".concat(n," because the parent module ").concat(r," could not be resolved to a URL"));case 21:return e.prev=21,e.next=24,t.readParentPackageJson(f,{token:i});case 24:(p=e.sent)&&(d=J({},p.packageJson.peerDependencies||{},{},p.packageJson.devDependencies||{},{},p.packageJson.dependencies||{}),s.bareModule.versionSpec=d[c.name],s.bareModule.versionSpec&&(u="".concat(c.name,"@").concat(s.bareModule.versionSpec))),e.next=32;break;case 28:if(e.prev=28,e.t1=e.catch(21),!(e.t1 instanceof w.b||"CanceledError"===e.t1.name)){e.next=32;break}throw e.t1;case 32:if(u?(u="".concat("https://unpkg.com/").concat(u),l="".concat(u).concat(c.pathname)):r?(v=be[n])&&(b=V(v),u="".concat("https://unpkg.com/").concat(b.nameSpec),l="".concat(u).concat(b.pathname),s.bareModule.isBuiltIn=!0):(u="".concat("https://unpkg.com/").concat(c.nameSpec),l="".concat(u).concat(c.pathname)),!l||!u){e.next=44;break}return m=new URL(l),g=new URL(u),e.next=38,t.resolve(m,{token:i});case 38:y=e.sent,s.ignored=y.ignored,s.stableRootUrl=g,s.stableUrl=m,y.resolvedUrl&&(s.resolvedUrl=y.resolvedUrl),s.rootUrl=y.rootUrl;case 44:if(!s.resolvedUrl){e.next=49;break}return e.next=47,t.readParentPackageJson(s.resolvedUrl,{token:i});case 47:(k=e.sent)&&(s.bareModule.version=k.packageJson.version);case 49:return e.abrupt("return",s);case 50:case"end":return e.stop()}}),e,null,[[14,18],[21,28]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ge=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(R.a)(this,Object(M.a)(t).call(this,e))).name=n.constructor.name,"function"===typeof Error.captureStackTrace?Error.captureStackTrace(Object(U.a)(n),n.constructor):n.stack=new Error(e).stack,n}return Object(D.a)(t,e),t}(Object(A.a)(Error)),ye=function(e){function t(){return Object(m.a)(this,t),Object(R.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(D.a)(t,e),t}(ge);function ke(e,t){var n=Object.create(null),r=Object.create(null),a=Object.create(null),o=Object.create(null);function i(){this.root=new s("velcro://root",this);var e=this;this.register("@@runtime",(function(t){t.exports=e}))}function c(e){this.module=e}function s(e,t){this.dependencies=new Set,this.dependents=new Set,this.id=e,this.acceptCallbacks=[],this.disposeCallbacks=[],this.module=Object.seal({exports:{},hot:new c(this)}),this.runtime=t,Object.defineProperty(this,Symbol.toStringTag,{configurable:!1,enumerable:!1,get:function(){return"Module"}})}i.prototype.alias=function(e,t){n[e]=t},i.prototype.dependency=function(e,t,n){var a=r[e];a||(a={},r[e]=a),a[t]=n},i.prototype.get=function(e){return e=n[e]||e,a[e]},i.prototype.getId=function(e,t){var a=n[t];if(a)return a;var o=r[e];return o&&o[t]||t},i.prototype.init=function(e,t){for(var n in e.modules){var r=e.modules[n];for(var a in r.dependencies)this.dependency(n,a,r.dependencies[a]);this.register(n,r.factory)}for(var o in e.aliases)this.alias(o,e.aliases[o]);for(var i in e.entrypoints)this.alias(i,e.entrypoints[i]),t&&this.require(i)},i.prototype.register=function(e,t){o[e]||(o[e]=t)},i.prototype.remove=function(e){var t=this.get(e);if(t)return t.dependents.forEach((function(e){e.dependencies.delete(t)})),t.dependencies.forEach((function(e){e.dependents.delete(t)})),delete a[t.id],delete r[t.id],delete o[t.id],t},i.prototype.require=function(e){return this.root.require(n[e]||e)},c.prototype.accept=function(e){this.module.acceptCallbacks.push({cb:e})},c.prototype.dispose=function(e){this.module.disposeCallbacks.push({cb:e})},s.prototype.require=function(e){e=this.runtime.getId(this.id,e);var t=a[e];if(!t){var n=o[e];if(!n)throw new Error("Factory missing for ".concat(e));t=new s(e,this.runtime),a[e]=t,delete o[e];var r=e,i=e;n.call(t.module.exports,t.module,t.module.exports,t.require.bind(t),r,i)}return t.id!==this.id&&(t.dependents.add(this),this.dependencies.add(t)),t.module.exports};var u=t&&t.runtime&&window[t.runtime]||new i;return u.init(e,t&&t.executeEntrypoints),u}var we=function(){function e(t,n,r){Object(m.a)(this,e),this.assets=t,this.entrypointsToAssets=n,this.dependenciesToAssets=r,this.assetsByHref=new Map;var a=!0,o=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value;this.assetsByHref.set(u.href,u)}}catch(l){o=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}}return Object(g.a)(e,[{key:"buildForImmediateExecution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new F.a({separator:"\n\t\t,\n"}),n=!0,a=!1,o=void 0;try{for(var i,c=this.assets[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value;t.addSource(Oe(s))}}catch(h){a=!0,o=h}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}var u=Array.from(this.dependenciesToAssets).reduce((function(e,t){var n=Object(r.a)(t,2),a=n[0],o=n[1];return e[a]=o.href,e}),{}),l=Array.from(this.entrypointsToAssets).reduce((function(e,t){var n=Object(r.a)(t,2),a=n[0],o=n[1];return e[a]=o.href,e}),{}),f={executeEntrypoints:e.executeEntrypoints,runtime:e.runtime};t.prepend("(".concat(ke.toString(),")({\n\taliases:").concat(JSON.stringify(u),",\n\tentrypoints:").concat(JSON.stringify(l),",\n\tmodules:{\n")),t.append("\n\t}\n}, ".concat(JSON.stringify(f),");"));var p=t.toString(),d=e.sourceMap?this.generateSourceMap(t,""):void 0;return{code:p,sourceMap:d}}},{key:"toManifest",value:function(e){var t={aliases:{},entrypoints:{},modules:{}},n=!0,a=!1,o=void 0;try{for(var i,c=this.assets[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value;t.modules[s.href]=this.buildAssetForDeferredExecution(s,e)}}catch(C){a=!0,o=C}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}var u=!0,l=!1,f=void 0;try{for(var p,d=this.dependenciesToAssets[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var h=p.value,v=Object(r.a)(h,2),b=v[0],m=v[1];t.aliases[b]=m.href}}catch(C){l=!0,f=C}finally{try{u||null==d.return||d.return()}finally{if(l)throw f}}var g=!0,y=!1,k=void 0;try{for(var w,x=this.entrypointsToAssets[Symbol.iterator]();!(g=(w=x.next()).done);g=!0){var j=w.value,O=Object(r.a)(j,2),E=O[0],S=O[1];t.entrypoints[E]=S.href}}catch(C){y=!0,k=C}finally{try{g||null==x.return||x.return()}finally{if(y)throw k}}return t}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.buildForImmediateExecution(e),n=t.code,r=t.sourceMap;return n+(r?"\n//# sourceMappingURL=".concat(r.toDataUri()):"")}},{key:"buildAssetForDeferredExecution",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=je(e,""),r=n.dependencies,a=n.magicString,o=t.sourceMap?this.generateSourceMap(a,e.href):void 0,i=a.toString()+(o?"\n//# sourceMappingURL=".concat(o.toDataUri()):"");return{code:i,dependencies:r}}},{key:"generateSourceMap",value:function(e,t){var n=this,r=e.generateMap({includeContent:!0,hires:!1,source:t}),a=new Set;return new xe(Object(N.a)(r.toString(),(function(e){var t=n.assetsByHref.get(e);if(t&&t.sourceMappingUrl){if(a.has(t))return null;a.add(t);var r=t.sourceMappingUrl.match(/^data:application\/json;(?:charset=([^;]+);)?base64,(.*)$/);if(r){if(r[1]&&"utf-8"!==r[1])return null;try{return JSON.parse(L.Base64.decode(r[2]))}catch(o){return null}}}return null}),!1))}}]),e}(),xe=function(){function e(t){Object(m.a)(this,e),this.file=t.file,this.mappings=t.mappings,this.sourceRoot=t.sourceRoot,this.names=t.names,this.sources=t.sources,this.sourcesContent=t.sourcesContent,this.version=t.version}return Object(g.a)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"toDataUri",value:function(){return"data:application/json;charset=utf-8;base64,".concat(L.Base64.encode(this.toString()))}}]),e}();function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t";if(!e.magicString)throw new ye("Invariant violation: asset is not loaded '".concat(e.href,"'"));var n={},r=e.magicString.clone();r.trim(),r.indent(t);var a=!0,o=!1,i=void 0;try{for(var c,s=e.dependencies[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value;switch(u.type){case ve.DependencyKind.Require:case ve.DependencyKind.RequireResolve:n[u.spec.value]=u.href;break;case ve.DependencyKind.InjectedGlobal:r.prepend("\n".concat(t,"const ").concat(u.symbolName," = require(").concat(JSON.stringify(u.symbolName),")").concat(u.exportName?".".concat(u.exportName):"",";\n")),n[u.symbolName]=u.href;break;default:throw new Error("Invariant violation: Encountered unexpected dependency kind '".concat(u.type,"'"))}}}catch(l){o=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return{dependencies:n,magicString:r}}function Oe(e){var t=je(e,"\t\t\t"),n=t.dependencies,r=t.magicString;return r.prepend("\t\t".concat(JSON.stringify(e.href),": { dependencies: ").concat(JSON.stringify(n),", factory: function(module, exports, require, __dirname, __filename){\n")),r.append("\n\t\t}}"),r}var Ee,Se,Ce=new URL("velcro://@empty"),Re={Buffer:{spec:"@velcro/node-libs@".concat("0.24.0","/lib/buffer.js"),export:"Buffer"},global:{spec:"@velcro/node-libs@".concat("0.24.0","/lib/global.js")},process:{spec:"@velcro/node-libs@".concat("0.24.0","/lib/process.js")}},Me=function(){function e(t){Object(m.a)(this,e),this.assetsByHref=new Map,this.pendingResolves=new Map,this.onAssetAddedEmitter=new T.a,this.onAssetRemovedEmitter=new T.a,this.resolver=t.resolver}return Object(g.a)(e,[{key:"dispose",value:function(){this.onAssetAddedEmitter.dispose(),this.onAssetRemovedEmitter.dispose(),this.assetsByHref.clear(),this.pendingResolves.clear()}},{key:"getOrCreateAsset",value:function(e,t){var n=this.assetsByHref.get(e);return n||(n=new ve(e,t),this.assetsByHref.set(e,n),this.onAssetAddedEmitter.fire(n)),n}},{key:"generateBundle",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,a,o,i,c,s,u,l,f,p,d,b,m,g,y,k=this,x=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=x.length>1&&void 0!==x[1]?x[1]:{},Array.isArray(t)){e.next=3;break}throw new Error("Generating a bundle requires passing in an array of entrypoints");case 3:if(a=new w.c,o=a.token,n.token&&(n.token.isCancellationRequested&&(a.cancel(),a.dispose()),n.token.onCancellationRequested((function(){a.cancel(),a.dispose()}))),i=0,c=new Set,s=new W(o),u=new Map,l=new Map,f=function(){var e=Object(v.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i++,n.onEnqueueAsset&&n.onEnqueueAsset(),e.next=5,t();case 5:if(r=e.sent,n.onCompleteAsset&&n.onCompleteAsset(),!(--i<0)){e.next=10;break}throw new ye("Pending operations fell below zero");case 10:return 0===i&&setTimeout((function(){return s.resolve()}),0),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),s.isSettled||Promise.resolve().then((function(){return s.reject(e.t0)})).catch((function(e){})),e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(v.a)(h.a.mark((function e(t,n){var a,o,i,c,s,u,l,p,v,b,m,g,y,k,w,x,j,O,E,S,C,R;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setCode(n),o=[],i=!0,c=!1,s=void 0,e.prev=5,u=function(){var e=p.value;if("@@runtime"===e.spec.value)return"continue";o.push(f((function(){return d(e.spec.value,t.href)})).then((function(t){return{type:ve.DependencyKind.Require,href:t.href,rootHref:t.rootHref,callee:e.callee,spec:e.spec,value:e.spec.value}})))},l=t.unresolvedDependencies.requireDependencies[Symbol.iterator]();case 8:if(i=(p=l.next()).done){e.next=15;break}if("continue"!==u()){e.next=12;break}return e.abrupt("continue",12);case 12:i=!0,e.next=8;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),c=!0,s=e.t0;case 21:e.prev=21,e.prev=22,i||null==l.return||l.return();case 24:if(e.prev=24,!c){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(21);case 29:for(v=!0,b=!1,m=void 0,e.prev=32,g=function(){var e=k.value;o.push(f((function(){return d(e.spec.value,t.href)})).then((function(t){return{type:ve.DependencyKind.RequireResolve,href:t.href,rootHref:t.rootHref,callee:e.callee,spec:e.spec,value:e.spec.value}})))},y=t.unresolvedDependencies.requireResolveDependencies[Symbol.iterator]();!(v=(k=y.next()).done);v=!0)g();e.next=41;break;case 37:e.prev=37,e.t1=e.catch(32),b=!0,m=e.t1;case 41:e.prev=41,e.prev=42,v||null==y.return||y.return();case 44:if(e.prev=44,!b){e.next=47;break}throw m;case 47:return e.finish(44);case 48:return e.finish(41);case 49:for(w=!0,x=!1,j=void 0,e.prev=52,O=function(){var e=S.value,n=(C=Object(r.a)(e,2))[0],a=C[1],i=Re[n];i&&o.push(f((function(){return d(i.spec,t.href)})).then((function(e){return{type:ve.DependencyKind.InjectedGlobal,href:e.href,rootHref:e.rootHref,references:a,exportName:i.export,symbolName:n,value:"".concat(i.spec).concat(i.export?"[".concat(JSON.stringify(i.export),"]"):"")}})))},E=t.unresolvedDependencies.unboundSymbols[Symbol.iterator]();!(w=(S=E.next()).done);w=!0)O();e.next=61;break;case 57:e.prev=57,e.t2=e.catch(52),x=!0,j=e.t2;case 61:e.prev=61,e.prev=62,w||null==E.return||E.return();case 64:if(e.prev=64,!x){e.next=67;break}throw j;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.next=71,Promise.all(o);case 71:return R=e.sent,(a=t.dependencies).splice.apply(a,[0,t.dependencies.length].concat(Object(P.a)(R))),e.abrupt("return",t);case 74:case"end":return e.stop()}}),e,null,[[5,17,21,29],[22,,24,28],[32,37,41,49],[42,,44,48],[52,57,61,69],[62,,64,68]])})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(v.a)(h.a.mark((function e(t,r){var a,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.resolveWithDetails(t,r,{syntheticDependencies:n.dependencies,token:o});case 2:if(a=e.sent,i=k.getOrCreateAsset(a.resolvedHref,a.rootHref),c.has(i)){e.next=10;break}return c.add(i),e.next=8,k.readCode(i,{token:o});case 8:s=e.sent,p(i,s).catch((function(e){}));case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.dependencies)for(m in b=function(e){var t=n.dependencies[e];f((function(){return d("".concat(e,"@").concat(t))})).then((function(t){return u.set(e,t)}),(function(e){}))},n.dependencies)b(m);for(y in g=function(e){var n=t[e];switch(n.type){case"href":f((function(){return d(n.href)})).then((function(e){return l.set(n.href,e)}),(function(e){}));break;case"inline":f((function(){var e=k.getOrCreateAsset(n.href,"velcro:///");return c.has(e)?e:(c.add(e),p(e,n.code))})).then((function(e){return l.set(n.href,e)}),(function(e){}));break;default:throw new Error("Unexpected entrypoint type '".concat(n.type))}},t)g(y);return e.next=19,s.promise;case 19:return e.abrupt("return",new we(c,l,u));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"invalidate",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,o,i,c=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},r=n.token,a=this.assetsByHref.get(t)){e.next=25;break}if(o=void 0,e.prev=4,!_(t)){e.next=11;break}return e.next=8,me(this.resolver,t,void 0,{token:r});case 8:o=e.sent,e.next=15;break;case 11:return i=new URL(t),e.next=14,this.resolver.resolve(i,{token:r});case 14:o=e.sent;case 15:e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(4),!(e.t0 instanceof w.d)){e.next=21;break}return e.abrupt("return",!1);case 21:throw e.t0;case 22:if(o&&o.resolvedUrl){e.next=24;break}return e.abrupt("return",!1);case 24:a=this.assetsByHref.get(o.resolvedUrl.href);case 25:if(!a){e.next=28;break}return this.removeAsset(a),e.abrupt("return",!0);case 28:return e.abrupt("return",!1);case 29:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeAsset",value:function(e){this.assetsByHref.delete(e.href)&&this.onAssetRemovedEmitter.fire(e)}},{key:"readCode",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.token,t.href!==Ce.href){e.next=3;break}return e.abrupt("return","module.exports = function(){};");case 3:return e.next=5,this.resolver.host.readFileContent(this.resolver,new URL(t.href),{token:r});case 5:return a=e.sent,o=this.resolver.decoder.decode(a),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"resolveWithDetails",value:function(){var t=Object(v.a)(h.a.mark((function t(n,r,a){var o,i,c,s,u,l,f,p,d,v;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a.syntheticDependencies,i=a.token,!_(n)){t.next=13;break}return t.next=4,me(this.resolver,n,r,{syntheticDependencies:o,token:i});case 4:if((s=t.sent).stableUrl){t.next=7;break}throw new Error("Failed to resolve bare module '".concat(n,"' from '").concat(r||"@root","' to a stable url"));case 7:if(s.stableRootUrl){t.next=9;break}throw new Error("Failed to resolve bare module '".concat(n,"' from '").concat(r||"@root","' to a stable root url"));case 9:u=s.resolvedUrl?s.resolvedUrl.href:Ce.href,c={type:e.ResolveDetailsKind.BareModule,bareModule:{isBuiltIn:s.bareModule.isBuiltIn,version:s.bareModule.version,versionSpec:s.bareModule.versionSpec},ignored:s.ignored,resolvedHref:u,rootHref:s.rootUrl.href,stableHref:s.stableUrl.href,stableRootHref:s.stableRootUrl.href},t.next=21;break;case 13:return l=new URL(n,r),t.next=16,this.resolver.resolve(l);case 16:f=t.sent,p=f.resolvedUrl?f.resolvedUrl:Ce,d=p.href,v=f.rootUrl.href,c={type:e.ResolveDetailsKind.Relative,ignored:f.ignored,resolvedHref:d,rootHref:v,stableHref:d,stableRootHref:v};case 21:return t.abrupt("return",c);case 22:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"onAssetAdded",get:function(){return this.onAssetAddedEmitter.event}},{key:"onAssetRemoved",get:function(){return this.onAssetRemovedEmitter.event}}]),e}();Se=Me||(Me={}),(Ee=Se.ResolveDetailsKind||(Se.ResolveDetailsKind={})).BareModule="bare_module",Ee.Relative="relative";L.Base64.decode,L.Base64.encode;var Ue=function(e){function t(e){var n;for(var r in Object(m.a)(this,t),(n=Object(R.a)(this,Object(M.a)(t).call(this))).hosts=new Map,e)n.hosts.set(r,e[r]);return n}return Object(D.a)(t,e),Object(g.a)(t,[{key:"getCanonicalUrl",value:function(e,t){var n=t.href,a=!0,o=!1,i=void 0;try{for(var c,s=this.hosts[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,l=Object(r.a)(u,2),f=l[0],p=l[1];if(n.startsWith(f)){if("function"===typeof p.getCanonicalUrl)return p.getCanonicalUrl(e,t);break}}}catch(d){o=!0,i=d}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return Promise.resolve(t)}},{key:"getResolveRoot",value:function(e,t){var n=t.href,a=!0,o=!1,i=void 0;try{for(var c,s=this.hosts[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,l=Object(r.a)(u,2),f=l[0],p=l[1];if(n.startsWith(f))return p.getResolveRoot(e,t)}}catch(d){o=!0,i=d}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return Promise.reject(new Error("No suitable host found for url ".concat(n)))}},{key:"listEntries",value:function(e,t){var n=t.href,a=!0,o=!1,i=void 0;try{for(var c,s=this.hosts[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,l=Object(r.a)(u,2),f=l[0],p=l[1];if(n.startsWith(f))return p.listEntries(e,t)}}catch(d){o=!0,i=d}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return Promise.reject(new Error("No suitable host found for url ".concat(n)))}},{key:"readFileContent",value:function(e,t){var n=t.href,a=!0,o=!1,i=void 0;try{for(var c,s=this.hosts[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,l=Object(r.a)(u,2),f=l[0],p=l[1];if(n.startsWith(f))return p.readFileContent(e,t)}}catch(d){o=!0,i=d}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return Promise.reject(new Error("No suitable host found for url ".concat(n)))}}]),t}(w.a),De=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(R.a)(this,Object(M.a)(t).call(this,e))).name=n.constructor.name,n}return Object(D.a)(t,e),t}(Object(A.a)(Error)),Ae=function(e){function t(){return Object(m.a)(this,t),Object(R.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(D.a)(t,e),t}(De),Pe=function(e){function t(){return Object(m.a)(this,t),Object(R.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(D.a)(t,e),t}(De),Te=function(e){function t(e,n){var r;return Object(m.a)(this,t),(r=Object(R.a)(this,Object(M.a)(t).call(this,e))).diagnostics=n,r}return Object(D.a)(t,e),t}(De),Fe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.Uri.file("/");return Object(m.a)(this,t),(e=Object(R.a)(this,Object(M.a)(t).call(this))).rootUri=n,e}return Object(D.a)(t,e),Object(g.a)(t,[{key:"getResolveRoot",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new URL(this.rootUri.toString(!0)));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"listEntries",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.href.replace(/\/?$/,"/"),a=this.rootUri.toString(!0),r.startsWith(a)){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",y.editor.getModels().reduce((function(e,t){var n=t.uri.toString(!0),a=new Set;if(n.startsWith(r)){var o=n.slice(r.length),i=o.indexOf("/");if(0===i)throw new Error("Invariant error: WAT?");if(i>0){var c=new URL(o.slice(0,i+1),r);a.has(c.href)||e.push({type:w.e.Directory,url:c})}else e.push({type:w.e.File,url:new URL(n)})}return e}),[]));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readFileContent",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,o,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.href).startsWith(this.rootHref)){e.next=3;break}throw new Ae("Attempting to read file content for a model at '".concat(r,"' outside of this host's root '").concat(this.rootHref,"'"));case 3:if(a=r.slice(this.rootHref.length),o=y.editor.getModel(y.Uri.file(a))){e.next=7;break}throw new Ae("Attempting to read file content for a model that doesn't exist at '".concat(r,"'"));case 7:return i=new TextEncoder,e.next=10,this.getTranspiledValue(o);case 10:return c=e.sent,e.abrupt("return",i.encode(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTranspiledValue",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,a,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("typescript"!==t.getModeId()){e.next=22;break}n=t.uri.toString(!0),a=function(){var e=Object(v.a)(h.a.mark((function e(){var a,o,i,c,s,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.languages.typescript.getTypeScriptWorker();case 2:return a=e.sent,e.next=5,a(t.uri);case 5:return o=e.sent,e.next=8,Promise.all([o.getEmitOutput(n),o.getSyntacticDiagnostics(n)]);case 8:if(i=e.sent,c=Object(r.a)(i,2),s=c[0],u=c[1],!s.emitSkipped){e.next=14;break}throw new Ae("Emit skipped when trying to read '".concat(t.uri.fsPath,"'"));case 14:if(!u.length){e.next=17;break}throw l=u.map((function(e){var n="number"===typeof e.start?t.getPositionAt(e.start):void 0,r="number"===typeof e.start&&"number"===typeof e.length?t.getPositionAt(e.start+e.length):void 0;return{message:qe(e.messageText),start:n?{lineNumber:n.lineNumber,column:n.column}:void 0,end:r?{lineNumber:r.lineNumber,column:r.column}:void 0,href:e.source}})),new Te("".concat(u[0].messageText," at ").concat(t.uri.fsPath),l);case 17:return e.abrupt("return",s.outputFiles[0].text);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=0;case 4:if(!(o++<3)){e.next=21;break}return e.prev=5,e.next=8,c=a(),s=2e3,Promise.race([c,Object(k.h)(s).then((function(){return Promise.reject(new Pe)}))]);case 8:return i=e.sent,e.abrupt("return",i);case 12:if(e.prev=12,e.t0=e.catch(5),!(e.t0 instanceof Pe)){e.next=18;break}return e.next=17,Object(k.h)(500*Math.pow(2,o));case 17:return e.abrupt("continue",4);case 18:throw e.t0;case 19:e.next=4;break;case 21:throw new Pe("Timed out while trying to transpile '".concat(n,"'"));case 22:return e.abrupt("return",t.getValue());case 23:case"end":return e.stop()}var c,s}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"rootHref",get:function(){return this.rootUri.toString(!0)}}]),t}(w.a);function qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("string"===typeof e)return e;if(void 0===e)return"";var r="";if(n){r+=t;for(var a=0;a<n;a++)r+="  "}if(r+=e.messageText,n++,e.next){var o=!0,i=!1,c=void 0;try{for(var s,u=e.next[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){r+=qe(s.value,t,n)}}catch(l){i=!0,c=l}finally{try{o||null==u.return||u.return()}finally{if(i)throw c}}}return r}var Ne=n(328),Le=n.n(Ne),Be=n(210),Je=function(e){function t(e){return Object(m.a)(this,t),Object(R.a)(this,Object(M.a)(t).call(this,"Not found ".concat(e.href)))}return Object(D.a)(t,e),t}(function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(R.a)(this,Object(M.a)(t).call(this,e))).name=n.constructor.name,"function"===typeof Error.captureStackTrace?Error.captureStackTrace(Object(U.a)(n),n.constructor):n.stack=new Error(e).stack,n}return Object(D.a)(t,e),t}(Object(A.a)(Error)));function He(e){return!(!e||"object"!==typeof e)&&(e.type===w.e.Directory?Ie(e):e.type===w.e.File&&function(e){return"object"===typeof e&&e&&e.type===w.e.File&&"string"===typeof e.path&&e.path}(e))}function Ie(e){return"object"===typeof e&&e&&e.type===w.e.Directory&&"string"===typeof e.path&&e.path&&("undefined"===typeof e.files||Array.isArray(e.files)&&e.files.every(He))}var We=/^\/((@[^/]+\/[^/@]+|[^/@]+)(?:@([^/]+))?)(.*)?$/;function _e(e){e instanceof URL&&(e=e.pathname);var t=e.match(We);if(!t)throw new Error("Unable to parse unexpected unpkg url: ".concat(e));return{spec:t[1],name:t[2],version:t[3]||"",pathname:t[4]||""}}function Ve(e,t){if(e&&t){var n=new t;return e.isCancellationRequested?n.abort():e.onCancellationRequested((function(){return n.abort()})),n.signal}}var ze=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(m.a)(this,t),(e=Object(R.a)(this,Object(M.a)(t).call(this))).contentCache=new Le.a({length:function(e){return e.byteLength},max:5242880}),e.inflightContentRequests=new Map,e.packageLock=new Map,e.packageEntriesCache=new Map,e.packageJsonCache=new Map,!n.fetch&&"function"!==typeof fetch)throw new TypeError("A fetch function must be provided to the ".concat(e.constructor.name," if the environment doesn't provide one"));return e.AbortController=n.AbortController,e.fetch=n.fetch||function(e,t){return fetch(e,t)},e}return Object(D.a)(t,e),Object(g.a)(t,[{key:"getCanonicalUrl",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,o,i,c=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:{},a=r.token,"https:"===n.protocol&&"unpkg.com"===n.hostname){e.next=3;break}throw new Error("Unable to list non-unpkg entries for ".concat(n.href));case 3:return o=_e(n),e.next=6,this.readPackageJsonWithCache(t,o,{token:a});case 6:return i=e.sent,e.abrupt("return",new URL("".concat("https:","//").concat("unpkg.com","/").concat(i.name,"@").concat(i.version).concat(o.pathname)));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getResolveRoot",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,o,i,c=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:{},a=r.token,"https:"===n.protocol&&"unpkg.com"===n.hostname){e.next=3;break}throw new Error("Unable to list non-unpkg entries for ".concat(n.href));case 3:return o=_e(n),e.next=6,this.readPackageJsonWithCache(t,o,{token:a});case 6:return i=e.sent,e.abrupt("return",new URL("".concat("https:","//").concat("unpkg.com","/").concat(i.name,"@").concat(i.version,"/")));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"listEntries",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>2&&void 0!==f[2]?f[2]:{},a=r.token,"https:"===n.protocol&&"unpkg.com"===n.hostname){e.next=3;break}throw new Error("Unable to list non-unpkg entries for ".concat(n.href));case 3:return e.next=5,t.host.getResolveRoot(t,n,{token:a});case 5:return o=e.sent,i=_e(n),e.next=9,this.readPackageJsonWithCache(t,i,{token:a});case 9:return c=e.sent,n.pathname="/".concat(c.name,"@").concat(c.version).concat(i.pathname),e.next=13,this.readPackageEntriesWithCache(_e(n),{token:a});case 13:if(s=e.sent,!a||!a.isCancellationRequested){e.next=16;break}throw new w.b("Canceled");case 16:for(u=i.pathname.split("/").filter(Boolean),l=function(){var e=u.shift();if(s.type!==w.e.Directory||!s.files)throw new Je(n);s=s.files.find((function(t){return t.type===w.e.Directory&&w.f.path.basename(t.path)===e}))};s&&u.length;)l();if(s){e.next=21;break}throw new Je(n);case 21:if(s.files){e.next=23;break}return e.abrupt("return",[]);case 23:return e.abrupt("return",s.files.map((function(e){return{type:e.type,url:new URL(".".concat(e.path),o)}})));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readFileContent",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,p=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>2&&void 0!==p[2]?p[2]:{},a=r.token,"https:"===n.protocol&&"unpkg.com"===n.hostname){e.next=3;break}throw new Error("Unable to read file contents for non-unpkg entries for ".concat(n.href));case 3:if(o=n.href,!(i=this.contentCache.get(o))){e.next=7;break}return e.abrupt("return",i);case 7:if(!(c=this.inflightContentRequests.get(o))){e.next=10;break}return e.abrupt("return",c);case 10:return s=Ve(a,this.AbortController),u=this.fetch,l=u(o,{redirect:"follow",signal:s}).then((function(e){if(!e.ok)throw new Error("Error reading file content for ".concat(o,": ").concat(e.status));return e.arrayBuffer()})).catch((function(e){if(s&&s.aborted)throw new w.b("Canceled");throw e})),this.inflightContentRequests.set(o,l),e.prev=14,e.next=17,l;case 17:return f=e.sent,this.contentCache.set(o,f),e.abrupt("return",f);case 20:return e.prev=20,this.inflightContentRequests.delete(o),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[14,,20,23]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readPackageEntriesWithCache",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,a,o,i,c,s,u,l,f,p,d,v,b,m,g,y,k,w,x=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=x.length>1&&void 0!==x[1]?x[1]:{},a=n.token,o="entries:".concat(t.name),!(i=this.packageLock.get(o))){e.next=6;break}return e.next=6,i;case 6:if(c=Object(Be.validRange)(t.version)){e.next=9;break}throw new Error("Invalid SemVer range for spec ".concat(t.spec));case 9:if(!(s=this.packageEntriesCache.get(t.name))){e.next=45;break}if(!(u=s.get(t.version))){e.next=14;break}return e.abrupt("return",u);case 14:l=!0,f=!1,p=void 0,e.prev=17,d=s[Symbol.iterator]();case 19:if(l=(v=d.next()).done){e.next=29;break}if(b=v.value,m=Object(r.a)(b,2),g=m[0],y=m[1],!Object(Be.satisfies)(g,c)){e.next=26;break}return e.abrupt("return",y);case 26:l=!0,e.next=19;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(17),f=!0,p=e.t0;case 35:e.prev=35,e.prev=36,l||null==d.return||d.return();case 38:if(e.prev=38,!f){e.next=41;break}throw p;case 41:return e.finish(38);case 42:return e.finish(35);case 43:e.next=47;break;case 45:s=new Map,this.packageEntriesCache.set(t.name,s);case 47:return k=this.readPackageEntries(t.spec,{token:a}),this.packageLock.set(o,k),e.next=51,k;case 51:return w=e.sent,this.packageLock.delete(o),s.set(t.version,w),e.abrupt("return",w);case 55:case"end":return e.stop()}}),e,this,[[17,31,35,43],[36,,38,42]])})));return function(t){return e.apply(this,arguments)}}()},{key:"readPackageJsonWithCache",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var a,o,i,c,s,u,l,f,p,d,v,b,m,g,y,k,w,x,j=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=j.length>2&&void 0!==j[2]?j[2]:{},o=a.token,i="packageJson:".concat(n.spec),!(c=this.packageLock.get(i))){e.next=6;break}return e.next=6,c;case 6:if(!(s=this.packageJsonCache.get(n.name))){e.next=44;break}if(!(u=s.get(n.version))){e.next=11;break}return e.abrupt("return",u);case 11:if(!(l=Object(Be.validRange)(n.version))){e.next=42;break}f=!0,p=!1,d=void 0,e.prev=16,v=s[Symbol.iterator]();case 18:if(f=(b=v.next()).done){e.next=28;break}if(m=b.value,g=Object(r.a)(m,2),y=g[0],k=g[1],!Object(Be.satisfies)(y,l)){e.next=25;break}return e.abrupt("return",k);case 25:f=!0,e.next=18;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(16),p=!0,d=e.t0;case 34:e.prev=34,e.prev=35,f||null==v.return||v.return();case 37:if(e.prev=37,!p){e.next=40;break}throw d;case 40:return e.finish(37);case 41:return e.finish(34);case 42:e.next=46;break;case 44:s=new Map,this.packageJsonCache.set(n.name,s);case 46:return w=this.readPackageJson(t,n.spec,{token:o}),this.packageLock.set(i,w),e.next=50,w;case 50:if(x=e.sent,this.packageLock.delete(i),x.version){e.next=54;break}throw new Error("Manifest missing a version identifier for ".concat(n));case 54:return s.set(x.version,x),e.abrupt("return",x);case 56:case"end":return e.stop()}}),e,this,[[16,30,34,42],[35,,37,41]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readPackageJson",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,o,i,c,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},a=r.token,o="".concat("https:","//").concat("unpkg.com","/").concat(n,"/package.json"),e.next=4,this.readFileContent(t,new URL(o),{token:a});case 4:i=e.sent,e.prev=5,c=w.g.parseBufferAsPackageJson(t.decoder,i,n),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(5),new Error("Error parsing manifest as json for package ".concat(n,": ").concat(e.t0.message));case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this,[[5,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readPackageEntries",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,o,i,c,s,u=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=n.token,a="".concat("https:","//").concat("unpkg.com","/").concat(t,"/?meta"),o=Ve(r,this.AbortController),i=this.fetch,e.next=6,i(a,{signal:o}).catch((function(e){if(o&&o.aborted)throw new w.b("Canceled");throw e}));case 6:if((c=e.sent).ok){e.next=9;break}throw new Error("Error listing package contents for ".concat(t,": ").concat(c.status));case 9:return e.next=11,c.json();case 11:if(Ie(s=e.sent)){e.next=14;break}throw new Error("Unexpected response payload while listing package contents for ".concat(t));case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"resolveBareModule",value:function(e,t){return new URL("".concat("https:","//").concat("unpkg.com","/").concat(t.name,"@").concat(t.spec).concat(t.pathname))}}]),t}(w.a),Ke=n(329),$e=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.idbTimeout,o=void 0===a?1e3:a,i=r.hostTimeout,c=void 0===i?1e4:i;return Object(m.a)(this,t),(n=Object(R.a)(this,Object(M.a)(t).call(this))).host=e,n.idbPromise=Object(Ke.a)("velcro",Me.schemaVersion,{upgrade:function(){var e=Object(v.a)(h.a.mark((function e(t,n,r,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Upgrading cache from version %s to %s",n,r),n||(t.createObjectStore("getCanonicalUrl"),t.createObjectStore("getResolveRoot"),t.createObjectStore("listEntries"),t.createObjectStore("readFileContent")),e.next=4,a.objectStore("getCanonicalUrl").clear();case 4:return e.next=6,a.objectStore("getResolveRoot").clear();case 6:return e.next=8,a.objectStore("listEntries").clear();case 8:return e.next=10,a.objectStore("readFileContent").clear();case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()}).catch((function(e){return console.error(e,"error opening IndexedDB"),null})),n.hostTimeout=void 0,n.idbTimeout=void 0,n.inflightGetCanonicalUrl=new Map,n.inflightGetResolveRoot=new Map,n.inflightListEntries=new Map,n.inflightReadFileContent=new Map,n.getCanonicalUrlCache=new Map,n.getResolveRootCache=new Map,n.listEntriesCache=new Map,n.readFileContentCache=new Map,n.hostTimeout=c,n.idbTimeout=o,n}return Object(D.a)(t,e),Object(g.a)(t,[{key:"withCache",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n,r,a,o,i,c){var s,u,l,f;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.has(t)){e.next=2;break}return e.abrupt("return",r.get(t));case 2:return e.next=4,Ge(this.idbTimeout,this.idbPromise,"this.idbPromise").catch((function(e){}));case 4:if(!(s=e.sent)){e.next=13;break}return e.next=8,Ge(this.idbTimeout,s.get(o,t),"idb.get(".concat(o,", ").concat(t,")")).catch((function(e){}));case 8:if(!(u=e.sent)){e.next=13;break}return l=c?c(u):u,r.set(t,l),e.abrupt("return",l);case 13:return(f=a.get(t))||(f=Ge(this.hostTimeout,n(),"Timed out on operation '".concat(o,"' for '").concat(t,"'")),a.set(t,f),f.then((function(e){r.set(t,e),s&&s.put(o,i?i(e):e,t).catch((function(e){}))})).catch((function(e){})).then((function(){a.delete(t)}))),e.abrupt("return",f);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,o,i,c){return e.apply(this,arguments)}}()},{key:"getCanonicalUrl",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.withCache(n.href,(function(){return a.host.getCanonicalUrl(t,n)}),this.getCanonicalUrlCache,this.inflightGetCanonicalUrl,"getCanonicalUrl",(function(e){return e.href}),(function(e){return new URL(e)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getResolveRoot",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.withCache(n.href,(function(){return a.host.getResolveRoot(t,n)}),this.getResolveRootCache,this.inflightGetResolveRoot,"getResolveRoot",(function(e){return e.href}),(function(e){return new URL(e)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"listEntries",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.withCache(n.href,(function(){return a.host.listEntries(t,n)}),this.listEntriesCache,this.inflightListEntries,"listEntries",(function(e){return e.map((function(e){return{type:e.type,href:e.url.href}}))}),(function(e){return e.map((function(e){return{type:e.type,url:new URL(e.href)}}))}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readFileContent",value:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.withCache(n.href,(function(){return a.host.readFileContent(t,n)}),this.readFileContentCache,this.inflightReadFileContent,"readFileContent");case 3:return r=e.sent,e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()}]),t}(w.a);function Ge(e,t,n){return Promise.race([t,Object(k.h)(e).then((function(){return Promise.reject(new Pe(n))}))])}function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe=y.Uri.file("/"),Ze=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(m.a)(this,e),this.bundler=new Me({resolver:new w.f(new Ue(Object(b.a)({"https://unpkg.com/":new $e(new ze)},Qe.toString(!0),new Fe(Qe))),{extensions:[".js",".jsx",".ts",".tsx"],packageMain:["browser","main"]})}),this.editor=null,this.disposableStore=new k.c,this.initialPath=void 0,this.typeAcquirer=new C(this.bundler.resolver,ze.resolveBareModule),this.viewState=new WeakMap,this.onWillFocusModelEmitter=new k.d,this.onDidChangeEmitter=new k.d,this.disposableStore.add(this.onWillFocusModelEmitter),this.disposableStore.add(this.onDidChangeEmitter),y.languages.typescript.typescriptDefaults.setEagerModelSync(!0),y.languages.typescript.typescriptDefaults.setMaximumWorkerIdleTime(-1),y.languages.typescript.typescriptDefaults.setCompilerOptions({allowJs:!0,allowNonTsExtensions:!0,allowSyntheticDefaultImports:!0,baseUrl:".",checkJs:!0,esModuleInterop:!0,experimentalDecorators:!0,inlineSourceMap:!0,inlineSources:!0,isolatedModules:!1,jsx:y.languages.typescript.JsxEmit.React,lib:["dom"],module:y.languages.typescript.ModuleKind.CommonJS,moduleResolution:y.languages.typescript.ModuleResolutionKind.NodeJs,noEmit:!1,outDir:"dist",resolveJsonModule:!0,rootDir:"/",sourceMap:!0,target:y.languages.typescript.ScriptTarget.ES2015,typeRoots:["node_modules/@types"]}),y.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!1}),n.files)for(var r in n.files){var a=n.files[r];this.createModel(r,a)}y.editor.onDidCreateModel((function(e){var n=function(){var n=Object(v.a)(h.a.mark((function n(){var r,a,o;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.getValue(),a={typescript:y.languages.typescript.typescriptVersion};try{(o=JSON.parse(r)).dependencies&&(a=Ye({},a,{},o.dependencies))}catch(i){}return y.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0}),n.next=6,t.typeAcquirer.importTypesForSpecs(a);case 6:y.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1});case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();if(e.uri.toString(!0)==="".concat(Qe.toString(!0),"package.json")){var r=new k.f(1500);r.trigger(n),t.disposableStore.add(e.onDidChangeContent((function(){return r.trigger(n)}))),t.disposableStore.add(r)}})),this.disposableStore.add(this.typeAcquirer.onTypeFile((function(e){t.disposableStore.add(y.languages.typescript.typescriptDefaults.addExtraLib(e.content,y.Uri.file(e.pathname).toString(!0)))}))),this.initialPath=n.initialPath}return Object(g.a)(e,[{key:"createModel",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.inferLanguage(e);try{t=y.Uri.file(e)}catch(a){throw new Error("Invalid path '".concat(e,"': ").concat(a&&a.message))}if(y.editor.getModel(t))throw new Error("Cannot create file because it exists '".concat(e,"'"));return y.editor.createModel(n,r,t)}},{key:"focusHref",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getModelByHref(e);n&&this.focusModel(n,t)}},{key:"focusModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.editor&&(this.editor.setModel(e),t.lineNumber&&(this.editor.revealLineInCenter(t.lineNumber,y.editor.ScrollType.Smooth),this.editor.setPosition({column:t.columnNumber||0,lineNumber:t.lineNumber})),t.markers&&y.editor.setModelMarkers(e,"editorManager",t.markers),this.editor.focus())}},{key:"focusPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getModelByPath(e);n&&this.focusModel(n,t)}},{key:"getModelByHref",value:function(e){try{var t=y.Uri.parse(e);return y.editor.getModel(t)}catch(n){return null}}},{key:"getModelByPath",value:function(e){return y.editor.getModel(y.Uri.file(e))}},{key:"mount",value:function(e){var t=this;if(this.editor)throw new Error("Invariant violation: Editor already mounted");return this.editor=y.editor.create(e,{model:null,automaticLayout:!0,showUnused:!0,scrollBeyondLastLine:!1,theme:"vs",wordWrap:"bounded",wrappingIndent:"same"}),this.editor.onDidDispose((function(){t.editor=null})),this.editor.onDidChangeModel((function(e){if(e.newModelUrl&&t.editor){var n=y.editor.getModel(e.newModelUrl),r=t.viewState.get(n);r&&t.editor.restoreViewState(r)}})),this.editor.onDidBlurEditorText((function(){if(t.editor){var e=t.editor.getModel(),n=t.editor.saveViewState();e&&n&&t.viewState.set(e,n)}})),this.disposableStore.add(this.editor),this.initialPath&&this.focusPath(this.initialPath),this.editor}},{key:"inferLanguage",value:function(e){return e.match(/\.(?:tsx?|jsx?)$/)?"typescript":void 0}},{key:"dispose",get:function(){return this.disposableStore.dispose}},{key:"onDidChange",get:function(){return this.onDidChangeEmitter.event}},{key:"onWillFocusModel",get:function(){return this.onWillFocusModelEmitter.event}}]),e}(),et=Object(o.createContext)(new Ze);var tt=function(e){var t=e.className,n=Object(o.useRef)(null),r=Object(o.useContext)(et);return Object(o.useEffect)((function(){if(n.current){var e=r.mount(n.current);return function(){e.dispose()}}}),[r,n]),i.a.createElement("div",{className:t,ref:n},i.a.createElement("div",null))},nt=Object(a.a)(tt,{target:"e1kco16a0"})(""),rt=Object(a.a)("div",{target:"e16e32mx0"})("z-index:1;position:absolute;top:0;width:",(function(e){return e.total?"".concat(Math.round(100*e.completed/e.total),"%"):0}),";left:0;height:",(function(e){return e.total?"2px":"0"}),";background-color:#008cba;transition:width 0.5s 0s cubic-bezier(0.455,0.03,0.515,0.955);"),at=Object(a.a)("div",{target:"e16e32mx1"})({name:"82o815",styles:"position:relative;overflow:hidden;& > iframe{position:absolute;top:0;right:0;bottom:0;left:0;border:none;width:100%;height:100%;}"}),ot=Object(a.a)("div",{target:"e16e32mx2"})("position:relative;",at,"{position:absolute;top:0;right:0;bottom:0;left:0;}"),it=Object(a.a)("ul",{target:"e16e32mx3"})({name:"592wbr",styles:"margin:0;padding:1em 2em;font-family:monospace;font-size:16px;background-color:rgba(255,0,0,0.5);backdrop-filter:brightness(50%);color:white;list-style:none;"}),ct=Object(a.a)("li",{target:"e16e32mx4"})("white-space:pre-wrap;opacity:",(function(e){return e.isInternal?.7:1}),";"),st=Object(a.a)("div",{target:"e16e32mx5"})({name:"owwzlj",styles:"z-index:1;position:absolute;bottom:0;right:0;left:0;display:flex;flex-direction:column-reverse;"}),ut=function(e){var t=e.line;return i.a.createElement(ct,{isInternal:t.isInternal},t.text)},lt=function(e){var t=e.message;return t.lines.length?i.a.createElement(it,null,t.lines.map((function(e,t){return i.a.createElement(ut,{key:t,line:e})}))):null},ft=function(e){var t=Object(o.useRef)(new Set),n=Object(o.useRef)(null),a=Object(o.useRef)(null),c=Object(o.useRef)(null),s=Object(o.useContext)(et),u=Object(o.useState)([]),l=Object(r.a)(u,2),f=l[0],p=l[1],d=Object(o.useState)({completed:0,total:0}),b=Object(r.a)(d,2),m=b[0],g=b[1],x=Object(o.useRef)("");return Object(o.useEffect)((function(){var e=new k.c,r=new k.b(500),o=new k.g,i=new k.a,u=function(e){i.cancel(),i.dispose(),i=new k.a;var n=!0,a=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var f=s.value;t.current.add(f)}}catch(p){a=!0,c=p}finally{try{n||null==u.return||u.return()}finally{if(a)throw c}}r.trigger((function(){return o.queue((function(){return l(i.token)}))}))},l=function(){var e=Object(v.a)(h.a.mark((function e(r){var o,u,l,f,d,v,b,m,j,O,E,S,C,R,M;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Array.from(t.current),p([]),t.current.clear(),g({completed:0,total:0}),u=!0,e.prev=5,e.next=8,Promise.all(o.map((function(e){return s.bundler.invalidate(e,{token:r})})));case 8:if(x.current){e.next=13;break}return e.next=11,s.bundler.generateBundle([{type:"inline",code:"(".concat(dt.toString().replace(/velcroRequire/g,"require"),")();"),href:"playground:///runtime.js"}],{dependencies:{"react-error-overlay":"^6.0.3"},onCompleteAsset:function(){u&&g((function(e){return{completed:e.completed+1,total:e.total}}))},onEnqueueAsset:function(){u&&g((function(e){return{completed:e.completed,total:e.total+1}}))},token:r});case 11:l=e.sent,x.current=l.toString({executeEntrypoints:!0,sourceMap:!1});case 13:return e.prev=13,d=y.Uri.file("/").toString(!0),e.next=17,s.bundler.resolver.resolve(d);case 17:if((v=e.sent).resolvedUrl){e.next=20;break}throw new Error("Unable to determine the entrypoing to your code");case 20:return b=v.resolvedUrl.href,e.next=23,s.bundler.generateBundle([{type:"href",href:b}],{onCompleteAsset:function(){u&&g((function(e){return{completed:e.completed+1,total:e.total}}))},onEnqueueAsset:function(){u&&g((function(e){return{completed:e.completed,total:e.total+1}}))},token:r});case 23:f=e.sent,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f=e.t0;case 29:if(!a.current){e.next=39;break}if(!(f instanceof w.b||f instanceof Error&&"CanceledError"===f.name)){e.next=34;break}return e.abrupt("return");case 34:f instanceof Error?a.current.send({type:"build_error",message:f.message,stack:f.stack}):(m=new File([f.toString({executeEntrypoints:!0,runtime:"__velcroRuntime",sourceMap:!0})],"playground:///runtime.js",{type:"text/javascript"}),j=URL.createObjectURL(m),a.current.send({type:"reload",invalidations:o,href:j}));case 35:return e.next=37,Promise.race([k.e.toPromise(a.current.onReload),Object(k.h)(5e3).then((function(){throw new Pe("HMR refresh timed out")}))]);case 37:e.next=60;break;case 39:return O=f instanceof Error?"ReactErrorOverlay.reportBuildError(".concat(JSON.stringify(f.message),");\n"):"__velcroRuntime = ".concat(f.toString({executeEntrypoints:!0,sourceMap:!0})),E=new File([x.current],"playground:///runtime.js",{type:"text/javascript"}),S=new File([O],"playground:///index.js",{type:"text/javascript"}),C=new File(['\n<!DOCTYPE html>\n<html lang="en">\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width, initial-scale=1.0">\n<meta http-equiv="X-UA-Compatible" content="ie=edge">\n<title>Document</title>\n<script src="'.concat(URL.createObjectURL(E),'"><\/script>\n</head>\n<body>\n<div id="root"></div>\n<script src="').concat(URL.createObjectURL(S),'"><\/script>\n</body>\n</html>')],y.Uri.file("/index.html").toString(!0),{type:"text/html"}),R=URL.createObjectURL(C),(M=document.createElement("iframe")).style.display="none",M.src=R,n.current&&n.current.appendChild(M),e.prev=48,e.next=51,new Promise((function(e,t){M.onload=function(){return e()},M.onerror=t}));case 51:c.current&&c.current.remove(),M.style.display="",c.current=M,e.next=60;break;case 56:throw e.prev=56,e.t1=e.catch(48),M.remove(),e.t1;case 60:e.next=66;break;case 62:e.prev=62,e.t2=e.catch(5),i.cancel(),e.t2 instanceof w.b||!e.t2||"CanceledError"===e.t2.name||p((function(t){return[].concat(Object(P.a)(t),[{lines:[{isInternal:!1,text:e.t2.message}]}])}));case 66:return e.prev=66,i&&i.dispose(),u=!1,g({completed:0,total:0}),e.finish(66);case 71:case"end":return e.stop()}}),e,null,[[5,62,66,71],[13,26],[48,56]])})));return function(t){return e.apply(this,arguments)}}();e.add(r);var f=!0,d=!1,b=void 0;try{for(var m,j=function(){var t=m.value;e.add(t.onDidChangeContent((function(){u([t.uri.toString(!0)])})))},O=y.editor.getModels()[Symbol.iterator]();!(f=(m=O.next()).done);f=!0)j()}catch(E){d=!0,b=E}finally{try{f||null==O.return||O.return()}finally{if(d)throw b}}return e.add(y.editor.onDidCreateModel((function(t){u([t.uri.toString(!0)]),e.add(t.onDidChangeContent((function(){u([t.uri.toString(!0)])})))}))),e.add(y.editor.onWillDisposeModel((function(e){u([e.uri.toString(!0)])}))),e.add(function(){var e=function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,o,i,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((!c.current||t.source===c.current.contentWindow)&&t.data&&"string"===typeof t.data.type&&t.data.payload){e.next=2;break}return e.abrupt("return");case 2:e.t0=t.data.type,e.next="error_open"===e.t0?5:"hmr_ready"===e.t0?10:15;break;case 5:if(s.editor){e.next=7;break}return e.abrupt("return");case 7:return(n=s.getModelByHref(t.data.payload.fileName))&&(r=t.data.payload.lineNumber,o=void 0,void 0!==r&&(i=n.getLineContent(r),u=i.match(/^(\s*)/),o=u?u[1].length+1:void 0),s.focusModel(n,{lineNumber:r,columnNumber:o})),e.abrupt("break",16);case 10:if(t.data.payload instanceof MessagePort){e.next=13;break}return console.warn('Received "hmr_ready" message from preview but did not receive the expected MessagePort payload',t.data),e.abrupt("return");case 13:return a.current=new vt(t.data.payload),e.abrupt("break",16);case 15:console.debug({message:t.data},"Unknown message received from preview iframe");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("message",e),{dispose:function(){window.removeEventListener("message",e)}}}()),e.add({dispose:function(){a.current&&a.current.dispose()}}),u([]),function(){return e.dispose()}}),[s.bundler,s,t]),i.a.createElement(ot,{className:e.className},i.a.createElement(rt,{completed:m.completed,total:m.total}),c.current?null:"Building the preview...",i.a.createElement(at,{ref:n}),i.a.createElement(st,null,f.map((function(e,t){return i.a.createElement(lt,{key:t,message:e})}))))},pt=Object(a.a)(ft,{target:"e16e32mx6"})("");function dt(){var e=velcroRequire("react-error-overlay"),t=new MessageChannel;window.ReactErrorOverlay=e,e.setEditorHandler((function(e){window.parent.postMessage({type:"error_open",payload:e},"*")})),e.startReportingRuntimeErrors({onError:function(){}}),t.port2.onmessage=function(n){if(!n.data||"object"!==typeof n.data)throw new Error("Unexpected message received by HMR server");switch(n.data.type){case"build_error":e.dismissRuntimeErrors(),e.reportBuildError(n.data.stack||n.data.message),t.port2.postMessage({type:"reload"});break;case"reload":(function(e){if(t=e,!t||"object"!==typeof t)return!1;var t;if("reload"!==e.type)return!1;if(!Array.isArray(e.invalidations)||e.invalidations.find((function(e){return"string"!==typeof e})))return!1;return function(e){return"string"===typeof e}(e.href)})(n.data)&&function(){e.dismissBuildError(),e.dismissRuntimeErrors();for(var r=n.data,a=__velcroRuntime,o=r.invalidations.slice(),i=new Set,c=new Set,s=[];o.length;){var u=o.shift();if(!i.has(u)){i.add(u);var l=a.get(u);if(l){l.dependencies.forEach((function(e){c.add(e.id)})),a.remove(u),c.delete(l.id);var f=!0,p=!1,d=void 0;try{for(var h,v=l.disposeCallbacks[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var b=h.value;b.cb&&b.cb()}}catch(O){p=!0,d=O}finally{try{f||null==v.return||v.return()}finally{if(p)throw d}}if(l.acceptCallbacks.length){var m=!0,g=!1,y=void 0;try{for(var k,w=l.acceptCallbacks[Symbol.iterator]();!(m=(k=w.next()).done);m=!0){var x=k.value;x.cb&&x.cb()}}catch(O){g=!0,y=O}finally{try{m||null==w.return||w.return()}finally{if(g)throw y}}}else{l.dependents.has(a.root)?s.push(l.id):l.dependents.forEach((function(e){i.has(e.id)||o.push(e.id)}))}}}}var j=document.createElement("script");j.src=r.href,j.onerror=function(e){t.port2.postMessage({type:"reload",err:e})},j.onload=function(){var e=!0,n=!1,r=void 0;try{for(var o,i=s[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var u=o.value;a.require(u)}}catch(O){n=!0,r=O}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}c.forEach((function(e){var t=a.get(e);if(t&&0===t.dependents.size){var n=!0,r=!1,o=void 0;try{for(var i,c=t.disposeCallbacks[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value;s.cb&&s.cb()}}catch(O){r=!0,o=O}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}a.remove(e)}})),t.port2.postMessage({type:"reload"})},document.head.appendChild(j)}()}},window.parent.postMessage({type:"hmr_ready",payload:t.port1},"*",[t.port1])}var ht,vt=function(){function e(t){var n=this;Object(m.a)(this,e),this.port=t,this.onReloadEmitter=new k.d,t.onmessage=function(e){if(!e.data||"object"!==typeof e.data)throw new ye("Unexpected message received from HMR client");switch(e.data.type){case"reload":n.onReloadEmitter.fire(e.data);break;default:throw new ye("Unexpected message with type '".concat(e.data.type,"' received from HMR client"))}}}return Object(g.a)(e,[{key:"dispose",value:function(){this.port.close()}},{key:"send",value:function(e){this.port.postMessage(e)}},{key:"onReload",get:function(){return this.onReloadEmitter.event}}]),e}(),bt=n(224),mt=n(472),gt=n(473);!function(e){e.Directory="directory",e.File="file"}(ht||(ht={}));var yt=Object(a.a)("div",{target:"ec6kohx0"})("background-color:",(function(e){return e.modelFocused?"#008cba":"inherit"}),";text-decoration:none;color:",(function(e){return e.modelFocused?"#fff":"#262626"}),";height:25px;padding:0 0 0 8px;display:flex;flex-direction:row;align-items:center;& > span{flex:1;}& > button{display:none;}&:hover > button{display:block;}",(function(e){return e.modelFocused?{":hover":{color:"#f5f5f5",cursor:"pointer"}}:{":hover":{backgroundColor:"#eee",color:"#262626",cursor:"pointer"}}}),""),kt=Object(a.a)("div",{target:"ec6kohx1"})({name:"17pjlpu",styles:"text-decoration:none;color:'#262626';height:25px;padding:0 0 0 8px;display:flex;align-items:center;:hover{background-color:#eee;cursor:pointer;}"}),wt=Object(a.a)(u.a,{target:"ec6kohx2"})({name:"aa0e1b",styles:"border:none;background:none;:hover{cursor:pointer;}"}),xt=Object(a.a)("div",{target:"ec6kohx3"})({name:"1rclmj6",styles:"font-family:Open Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;line-height:1.4;background-color:#333;color:#fff;border-radius:4px;opacity:0.9;padding:0.2em 0.4em;"}),jt=function(e){var t=e.className,n=e.model,a=function(){var e=Object(o.useContext)(et),t=Object(o.useState)(e.editor?e.editor.getModel():null),n=Object(r.a)(t,2),a=n[0],i=n[1];return Object(o.useEffect)((function(){var t=new k.c,n=function(e){e.onDidChangeModel((function(e){var t=e.newModelUrl?y.editor.getModel(e.newModelUrl):null;i(t)})),t.add(e.onDidBlurEditorText((function(){i(null)}))),t.add(e.onDidFocusEditorText((function(){i(e.getModel())}))),e.hasTextFocus()&&i(e.getModel())};return t.add(y.editor.onDidCreateEditor(n)),e.editor&&n(e.editor),function(){return t.dispose()}}),[e.editor,a]),a}(),c=Object(o.useContext)(et),s=Object(bt.a)({gutter:0});return i.a.createElement(yt,{className:t,modelFocused:n===a},i.a.createElement("span",{onClick:function(){return c.focusModel(n)}},n.uri.fsPath.slice(1)),i.a.createElement(mt.a,Object.assign({},s,{as:wt,onClick:function(){n.dispose()}}),i.a.createElement("span",{role:"img","aria-label":"Delete file"},"\u274c")),i.a.createElement(gt.a,Object.assign({},s,{as:xt}),"Delete file"))},Ot=function(e){var t=function(e){var t=e.toString(!0).replace(/\/?$/,"/"),n=function(e){return Object(P.a)(e).sort((function(e,t){return e.uri.fsPath>t.uri.fsPath?1:-1}))},a=n(y.editor.getModels().reduce((function(e,n){var r=n.uri.toString(!0);if(r.startsWith(t)){var a=r.slice(t.length),o=a.indexOf("/");if(0===o)throw new Error("Invariant error: WAT?");if(o>0){var i=y.Uri.parse("".concat(t).concat(a.slice(0,o+1)));e.push({type:ht.Directory,uri:i})}else e.push({type:ht.File,uri:n.uri,model:n})}return e}),[])),i=Object(o.useState)(a),c=Object(r.a)(i,2),s=c[0],u=c[1];return Object(o.useEffect)((function(){var t=new k.c,r=e.toString(!0).replace(/\/?$/,"/");return t.add(y.editor.onDidCreateModel((function(e){var t=e.uri.toString(!0);if(t.startsWith(r)){var a=t.slice(r.length),o=a.indexOf("/");if(0===o)throw new Error("Invariant error: WAT?");if(o>0){var i=y.Uri.parse("".concat(r).concat(a.slice(0,o))),c=s.find((function(e){return e.uri.toString(!0)===i.toString(!0)}));if(c){if(c.type!==ht.Directory)throw new Error("Invariant violation: A file in '".concat(r,"' conflicts with the path of the new file '").concat(t,"'"));return}return s.push({type:ht.Directory,uri:i}),u(n(s))}s.find((function(t){return t.type===ht.File&&t.uri.toString(!0)===e.uri.toString(!0)}))||(s.push({type:ht.File,uri:e.uri,model:e}),u(n(s)))}}))),t.add(y.editor.onWillDisposeModel((function(e){var t=s.findIndex((function(t){return t.type===ht.File&&t.model===e}));if(-1===t)throw new Error("Invariant violation: Removing an untracked model: '".concat(e.uri.fsPath,"'"));s.splice(t,1),u(n(s))}))),function(){return t.dispose()}}),[s,e]),s}(Object(o.useRef)(y.Uri.file("/")).current),n=Object(o.useContext)(et);return i.a.createElement("div",{className:e.className},t.map((function(e){return e.type===ht.Directory?i.a.createElement("div",null,e.uri.fsPath.slice(1)):i.a.createElement(jt,{key:e.uri.toString(!0),model:e.model})})),i.a.createElement(kt,{onClick:function(){return function(){var e=prompt("Filename?");e&&n.createModel(e)}()}},"Create..."))},Et=Object(a.a)(Ot,{target:"ec6kohx4"})({name:"j7qwjs",styles:"display:flex;flex-direction:column;"}),St=function(e){var t=e.className,n=e.initialPath,r=e.project,a=new Ze({files:r,initialPath:n});return i.a.createElement("div",{className:t},i.a.createElement(et.Provider,{value:a},i.a.createElement(Et,null),i.a.createElement(nt,null),i.a.createElement(pt,null)))},Ct=Object(a.a)(St,{target:"e1ix5n7p0"})("display:flex;flex-direction:row;font-family:Open Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;line-height:1.4;color:#222;",Et,"{flex:1 1 200px;min-width:150px;max-width:400px;border-right:1px solid #ccc;}",nt,"{border-right:1px solid #ccc;}",nt,",",pt,"{flex:10;}"),Rt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Mt(e){if("serviceWorker"in navigator){if(new URL("/velcro",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/velcro","/service-worker.js");Rt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ut(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ut(t,e)}))}}function Ut(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Dt={"package.json":JSON.stringify({dependencies:{"@emotion/core":"^10.0.17","@emotion/styled":"^10.0.17","github-markdown-css":"^3.0.1",react:"^16.9.0","react-dom":"^16.9.0"}},null,2)+"\n","explanation.jsx":'\nimport React from \'react\';\n\nexport const Explanation = () => <>\n  <section>\n    <h2>What is this?</h2>\n    <p>\n      This is a demo of bundling and serving a browser-based sandbox fully from the browser. <strong>There are <em>no</em> servers involved</strong> except the static server hosting this demo and <a href="https://unpkg.com" target="_blank" rel="noopener">unpkg.com</a>. All module resolution, transpilation and bundling is happening in the browser.\n    </p>\n    <p>\n      Try it. Go offline, and reload...\n    </p>\n    <p>\n      <strong>I dare you.</strong>\n    </p>\n  </section>\n  <section>\n    <h2>Features</h2>\n    <ul>\n      <li>Full offline support. Once your cache is seeded, you can cut the cord.</li>\n      <li>Fully browser-based bundling.</li>\n      <li>Add (almost) any node module and no server is involved.</li>\n      <li>If you want to add another module, make sure to add it to <code>package.json</code> first.</li>\n      <li>Automatic type acquisition for full typings support in the browser, in JavaScript!</li>\n      <li>Resolve source locations in stack traces</li>\n      <li>Hot module reloading</li>\n    </ul>\n  </section>\n</>;\n    '.trim()+"\n","index.jsx":"\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'github-markdown-css';\nimport './style.css';\n\nimport { Explanation } from './explanation';\nimport { name } from './name';\n\nclass Hello extends Component {\n  render() {\n    return <div className=\"markdown-body\">\n      <h1>Hello {this.props.toWhat}</h1>\n      <blockquote>There is no <del>spoon</del> server</blockquote>\n      <Explanation/>\n    </div>;\n  }\n}\n  \nReactDOM.render(\n  <Hello toWhat={ name } />,\n  document.getElementById('root')\n);\n      ".trim()+"\n","name.js":"\nexport const name = 'Velcro';\n    ".trim()+"\n","style.css":"\n.markdown-body {\n  box-sizing: border-box;\n  min-width: 200px;\n  max-width: 980px;\n  margin: 0 auto;\n  padding: 45px;\n}\n\n@media (max-width: 767px) {\n  .markdown-body {\n    padding: 15px;\n  }\n}\n    ".trim()+"\n"},At=Object(a.a)("div",{target:"e1hm91wb0"})("position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#333;",Ct,"{flex:0 0 80vh;width:80vw;background:white;box-shadow:0 10px 20px rgba(0,0,0,0.19),0 6px 6px rgba(0,0,0,0.23);max-height:90vh;}"),Pt=Object(a.a)("div",{target:"e1hm91wb1"})({name:"1cjcprw",styles:"font-family:Open Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;line-height:1.4;color:#222;display:flex;flex-direction:column;position:absolute;right:0;bottom:0;padding:8px;& > *{box-shadow:0 19px 38px rgba(0,0,0,0.3),0 15px 12px rgba(0,0,0,0.22);max-width:200px;margin:8px;}"}),Tt=Object(a.a)(l.a,{target:"e1hm91wb2"})({name:"19yz9nx",styles:"background-color:white;padding:0.5em 1em;border-radius:4px;& > p{margin:0;}"}),Ft=function(e){var t=e.onDismiss,n=Object(f.a)({visible:!0});return i.a.createElement(Tt,Object.assign({},n,{hideOnClickOutside:!1,hideOnEsc:!1,modal:!1,role:"alertdialog","aria-label":"This application is ready for offline usage"}),i.a.createElement("p",null,"This application is ready for offline usage"),i.a.createElement(u.a,{onClick:t},"Hide"))},qt=function(e){var t=e.notification,n=e.onDismiss,r=Object(f.a)({visible:!0});return i.a.createElement(Tt,Object.assign({},r,{modal:!1,role:"alertdialog","aria-label":"A new version of this application is ready"}),i.a.createElement("p",null,"A new version of this application is ready"),i.a.createElement(u.a,{onClick:n},"Cancel"),i.a.createElement(u.a,{onClick:function(){var e=t.registration.waiting;e&&(e.addEventListener("statechange",(function(e){e.target&&"activated"===e.target.state&&window.location.reload()})),e.postMessage({type:"SKIP_WAITING"}))}},"Update"))};s.a.render(i.a.createElement((function(e){var t=Object(o.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1];Object(o.useEffect)((function(){Mt({onSuccess:function(e){var t=a.filter((function(e){return"online"!==e.type}));t.push({type:"online",registration:e}),c(t)},onUpdate:function(e){var t=a.filter((function(e){return"updated"!==e.type}));t.push({type:"updated",registration:e}),c(t)}})}));var s=function(e){var t=a.indexOf(e);if(-1!==t){var n=a.slice();n.splice(t,1),c(n)}};return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null,i.a.createElement(Pt,null,a.map((function(e,t){switch(e.type){case"online":return i.a.createElement(Ft,{key:t,notification:e,onDismiss:function(){return s(e)}});case"updated":return i.a.createElement(qt,{key:t,notification:e,onDismiss:function(){return s(e)}})}})))),e.children)}),null,i.a.createElement(At,null,i.a.createElement(Ct,{initialPath:"index.jsx",project:Dt}))),document.getElementById("root"))},52:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return q})),n.d(t,"d",(function(){return F})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return L})),n.d(t,"g",(function(){return P}));var r,a=n(143),o=n(26),i=n.n(o),c=n(51),s=n(35),u=n(39),l=n(28),f=n(112),p=n(38),d=n(114),h=n(15),v=n(20),b=n(98);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){return void 0!==e[t]&&"string"!==typeof e[t]}function k(e,t){return void 0!==e[t]&&"object"===typeof e[t]&&null!==e[t]&&!Object.keys(e[t]).every((function(n){return"string"===typeof n&&"string"===typeof e[t][n]}))}n.d(t,"b",(function(){return b.a})),n.d(t,"c",(function(){return b.b})),function(e){e.Directory="directory",e.File="file"}(r||(r={}));var w=46,x=47,j=/\/?$/;function O(e){return e.replace(j,"/")}function E(e,t,n){try{return function(e,t){var n;try{n=JSON.parse(e)}catch(r){throw new Error("Error parsing manifest as json for package ".concat(t,": ").concat(r.message))}if(!function(e){return"object"===typeof e&&null!==e&&!y(e,"name")&&!y(e,"version")&&!function(e){var t="",n=e.browser;if(n&&"object"===typeof n)for(var r in n){if("string"!==typeof r){t="The key ".concat(r," of .browser must be a string");break}if("string"!==typeof n[r]&&!1!==n[r]){t="The value ".concat(r," of .browser must be a string or false");break}}return t}(e)&&!y(e,"main")&&!y(e,"module")&&!y(e,"jsnext:main")&&!y(e,"unpkg")&&!k(e,"dependencies")&&!k(e,"devDependencies")&&!k(e,"peerDependencies")}(n))throw new Error("Invalid manifest for the package ".concat(t));return n}(e.decode(t),n)}catch(r){throw new Error("Error decoding manifest buffer for package ".concat(n,": ").concat(r.message))}}function S(e,t){for(var n=e.pathname,r=t.pathname,a="/"===r.charAt(r.length-1)?-1:0,o=0;o<=n.length;o++)if(o<r.length){if(n.charAt(o)!==r.charAt(o))throw new Error("The child entry ".concat(e.href," does not have the pathname of ").concat(t.href," as a prefix"))}else if(o===r.length+a){if("/"!==n.charAt(o))throw new Error("The child entry ".concat(e.href," does not have the pathname of ").concat(t.href," as a prefix"))}else if("/"===n.charAt(o))return n.slice(r.length+1+a,o);return n.slice(r.length+1+a)}function C(e,t){if("string"!==typeof e)throw new TypeError("The '".concat(t,"' argument must be of type string but got ").concat(typeof e))}function R(e,t){void 0!==t&&C(t,"ext"),C(e,"path");var n,r=0,a=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var i=t.length-1,c=-1;for(n=e.length-1;n>=r;--n){var s=e.charCodeAt(n);if(A(s)){if(!o){r=n+1;break}}else-1===c&&(o=!1,c=n+1),i>=0&&(s===t.charCodeAt(i)?-1===--i&&(a=n):(i=-1,a=c))}return r===a?a=c:-1===a&&(a=e.length),e.slice(r,a)}for(n=e.length-1;n>=r;--n)if(A(e.charCodeAt(n))){if(!o){r=n+1;break}}else-1===a&&(o=!1,a=n+1);return-1===a?"":e.slice(r,a)}function M(e){C(e,"path");for(var t=-1,n=0,r=-1,a=!0,o=0,i=e.length-1;i>=0;--i){var c=e.charCodeAt(i);if(A(c)){if(!a){n=i+1;break}}else-1===r&&(a=!1,r=i+1),c===w?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1)}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)}function U(e){C(e,"path");var t=e.length;if(0===t)return".";var n=-1,r=-1,a=!0,o=0,i=e.charCodeAt(0);if(t>1){if(A(i)&&(n=o=1,A(e.charCodeAt(1)))){for(var c=2,s=c;c<t&&!A(e.charCodeAt(c));++c);if(c<t&&c!==s){for(s=c;c<t&&A(e.charCodeAt(c));++c);if(c<t&&c!==s){for(s=c;c<t&&!A(e.charCodeAt(c));++c);if(c===t)return e;c!==s&&(n=o=c+1)}}}}else if(A(i))return e;for(var u=t-1;u>=o;--u)if(A(e.charCodeAt(u))){if(!a){r=u;break}}else a=!1;if(-1===r){if(-1===n)return".";r=n}return e.slice(0,r)}function D(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=void 0;if(!(n>=0))break;C(r=n<0||arguments.length<=n?void 0:arguments[n],"path"),0!==r.length&&(e=r+"/"+e,t=r.charCodeAt(0)===x)}return e=function(e,t,n,r){for(var a="",o=0,i=-1,c=0,s=-1,u=0;u<=e.length;++u){if(u<e.length)s=e.charCodeAt(u);else{if(r(s))break;s=x}if(r(s)){if(i===u-1||1===c);else if(i!==u-1&&2===c){if(a.length<2||2!==o||a.charCodeAt(a.length-1)!==w||a.charCodeAt(a.length-2)!==w){if(a.length>2){var l=a.lastIndexOf(n);-1===l?(a="",o=0):(a=a.slice(0,l),o=a.length-1-a.lastIndexOf(n)),i=u,c=0;continue}if(2===a.length||1===a.length){a="",o=0,i=u,c=0;continue}}t&&(a.length>0?a+="".concat(n,".."):a="..",o=2)}else a.length>0?a+=n+e.slice(i+1,u):a=e.slice(i+1,u),o=u-i-1;i=u,c=0}else s===w&&-1!==c?++c:c=-1}return a}(e,!t,"/",A),t?e.length>0?"/"+e:"/":e.length>0?e:"."}function A(e){return e===x}var P=Object.freeze({__proto__:null,ensureTrailingSlash:O,parseBufferAsPackageJson:E,getFirstPathSegmentAfterPrefix:S,basename:R,extname:M,dirname:U,join:function(e){for(var t=e,n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var r=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];r.startsWith("/")&&(r=r.slice(1)),t.endsWith("/")?t+=r:t+="/".concat(r)}return t},resolve:D}),T=function(){function t(){Object(h.a)(this,t),"undefined"!==typeof TextDecoder&&(this.decoder=new TextDecoder)}return Object(v.a)(t,[{key:"decode",value:function(t){var n=this.decoder?this.decoder.decode(t):e.from(t).toString("utf-8");return 65279===n.charCodeAt(0)?n.slice(1):n}}]),t}(),F=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,"Not found ".concat(e.href)))).url=e,n}return Object(p.a)(t,e),t}(function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).name=n.constructor.name,"function"===typeof Error.captureStackTrace?Error.captureStackTrace(Object(f.a)(n),n.constructor):n.stack=new Error(e).stack,n}return Object(p.a)(t,e),t}(Object(d.a)(Error))),q=function(){function e(){Object(h.a)(this,e)}return Object(v.a)(e,[{key:"getCanonicalUrl",value:function(e,t){return Promise.resolve(t)}}]),e}(),N=/\/?$/,L=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(h.a)(this,e),this.host=t,this.decoder=new T,this.extensions=Array.from(n.extensions||e.defaultExtensions),this.packageMain=n.packageMain||["main"]}return Object(v.a)(e,[{key:"resolve",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a,o,s,u,l,f,p,d,h,v,m,g=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.length>1&&void 0!==g[1]?g[1]:{},t instanceof URL){e.next=9;break}e.prev=2,t=new URL(t),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Invalid URL: ".concat(t,": ").concat(e.t0.message));case 9:return(r=n.token)||(a=new b.b,r=a.token),o={extensions:n.extensions||this.extensions,ignoreBrowserOverrides:"undefined"!==typeof n.ignoreBrowserOverrides&&n.ignoreBrowserOverrides,packageMain:n.packageMain||this.packageMain,token:r},s=this.host.getCanonicalUrl(this,t,{token:r}),e.next=15,Promise.all([s,this.host.getResolveRoot(this,t,{token:r})]);case 15:if(u=e.sent,l=Object(c.a)(u,2),f=l[0],p=l[1],!r.isCancellationRequested){e.next=21;break}throw new b.a("Canceled");case 21:if(d=p.href,h=d.replace(N,""),(v=f.href).startsWith(h)){e.next=26;break}throw new Error("Unable to resolve a module whose path ".concat(v," is above the host's root ").concat(d));case 26:if(h!==v&&d!=v){e.next=32;break}return e.next=29,this.resolveAsDirectory(f,o);case 29:e.t1=e.sent,e.next=35;break;case 32:return e.next=34,this.resolveAsFile(f,o);case 34:e.t1=e.sent;case 35:if(m=e.t1,!r.isCancellationRequested){e.next=38;break}throw new b.a("Canceled");case 38:return e.abrupt("return",{ignored:!1===m,resolvedUrl:m||void 0,rootUrl:p});case 39:case"end":return e.stop()}}),e,this,[[2,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolveAsDirectory",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a,o,s,u,l,f,p,d,h,v,m,g,y,k,w;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.host.getResolveRoot(this,t,{token:n.token}),this.host.listEntries(this,t,{token:n.token})]);case 2:if(r=e.sent,a=Object(c.a)(r,2),o=a[0],s=a[1],!n.token.isCancellationRequested){e.next=8;break}throw new b.a("Canceled");case 8:if(u="index",!(l=s.find((function(e){return"package.json"===R(e.url.pathname)})))){e.next=45;break}return e.next=13,this.host.readFileContent(this,l.url,{token:n.token});case 13:if(f=e.sent,!n.token.isCancellationRequested){e.next=16;break}throw new b.a("Canceled");case 16:p=E(this.decoder,f,t.href),d=!0,h=!1,v=void 0,e.prev=20,m=this.packageMain[Symbol.iterator]();case 22:if(d=(g=m.next()).done){e.next=31;break}if(y=g.value,"string"!==typeof(k=p[y])){e.next=28;break}return u=k,e.abrupt("break",31);case 28:d=!0,e.next=22;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(20),h=!0,v=e.t0;case 37:e.prev=37,e.prev=38,d||null==m.return||m.return();case 40:if(e.prev=40,!h){e.next=43;break}throw v;case 43:return e.finish(40);case 44:return e.finish(37);case 45:return w=new URL(D(t.pathname,u),o),e.abrupt("return",this.resolveAsFile(w,n));case 47:case"end":return e.stop()}}),e,this,[[20,33,37,45],[38,,40,44]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"resolveAsFile",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,o,c,s,u,l,f,p,d,h,v,m,y,k,w,x,j,E,C,M,A,P,T,q,N,L,B,J,H,I,W;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.pathname&&"/"!==t.pathname){e.next=2;break}throw new TypeError("Unable to resolve the root as a file: ".concat(t.href));case 2:return e.next=4,this.host.getResolveRoot(this,t,{token:n.token});case 4:if(a=e.sent,!n.token.isCancellationRequested){e.next=7;break}throw new b.a("Canceled");case 7:if(!this.packageMain.includes("browser")||n.ignoreBrowserOverrides){e.next=13;break}return e.next=10,this.readParentPackageJson(t,{token:n.token});case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=void 0;case 14:if(o=e.t0,!n.token.isCancellationRequested){e.next=17;break}throw new b.a("Canceled");case 17:if(c=new Map,!o||"object"!==typeof o.packageJson.browser){e.next=34;break}s=o.packageJson.browser,u=U(o.url.pathname),e.t1=i.a.keys(s);case 22:if((e.t2=e.t1()).done){e.next=34;break}if(l=e.t2.value,f=new URL(D(u,l),o.url),p=s[l],d=!1!==p&&new URL(D(u,p),o.url),f.href!==t.href){e.next=31;break}if(!1!==d){e.next=30;break}return e.abrupt("return",!1);case 30:return e.abrupt("return",this.resolveAsFile(d,g({},n,{ignoreBrowserOverrides:!0})));case 31:c.set(f.href,d),e.next=22;break;case 34:return h=new URL(O(U(t.pathname)),a),v=R(t.pathname),e.next=38,this.host.listEntries(this,h,{token:n.token});case 38:if(m=e.sent,!n.token.isCancellationRequested){e.next=41;break}throw new b.a("Canceled");case 41:y=new Map,k=new Map,w=!0,x=!1,j=void 0,e.prev=46,E=m[Symbol.iterator]();case 48:if(w=(C=E.next()).done){e.next=56;break}if((M=C.value).url.href!==t.href||M.type!=r.File){e.next=52;break}return e.abrupt("return",M.url);case 52:M.type===r.Directory?(A=S(M.url,h),y.set(A,M)):M.type===r.File&&(P=R(M.url.pathname),k.set(P,M));case 53:w=!0,e.next=48;break;case 56:e.next=62;break;case 58:e.prev=58,e.t3=e.catch(46),x=!0,j=e.t3;case 62:e.prev=62,e.prev=63,w||null==E.return||E.return();case 65:if(e.prev=65,!x){e.next=68;break}throw j;case 68:return e.finish(65);case 69:return e.finish(62);case 70:T=!0,q=!1,N=void 0,e.prev=73,L=n.extensions[Symbol.iterator]();case 75:if(T=(B=L.next()).done){e.next=92;break}if(J=B.value,!1!==(H=c.get("".concat(t.href).concat(J)))){e.next=82;break}return e.abrupt("return",!1);case 82:if(!H){e.next=84;break}return e.abrupt("return",this.resolveAsFile(H,g({},n,{ignoreBrowserOverrides:!0})));case 84:if(!(I=k.get("".concat(v).concat(J)))){e.next=89;break}if(I.type===r.File){e.next=88;break}return e.abrupt("continue",89);case 88:return e.abrupt("return",I.url);case 89:T=!0,e.next=75;break;case 92:e.next=98;break;case 94:e.prev=94,e.t4=e.catch(73),q=!0,N=e.t4;case 98:e.prev=98,e.prev=99,T||null==L.return||L.return();case 101:if(e.prev=101,!q){e.next=104;break}throw N;case 104:return e.finish(101);case 105:return e.finish(98);case 106:if(!(W=y.get(v))){e.next=111;break}if(W.type===r.Directory){e.next=110;break}throw new Error("Invariant violation ".concat(W.type," is unexpected"));case 110:return e.abrupt("return",this.resolveAsDirectory(W.url,n));case 111:throw new F(t);case 112:case"end":return e.stop()}}),e,this,[[46,58,62,70],[63,,65,69],[73,94,98,106],[99,,101,105]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readParentPackageJson",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a,o,c,u,l=this,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},e.next=3,this.host.getCanonicalUrl(this,t,{token:n.token});case 3:if(t=e.sent,!n.token||!n.token.isCancellationRequested){e.next=6;break}throw new b.a("Canceled");case 6:return e.next=8,this.host.getResolveRoot(this,t,{token:n.token});case 8:if(a=e.sent,!n.token||!n.token.isCancellationRequested){e.next=11;break}throw new b.a("Canceled");case 11:return o=O(a.href),c=new URL(O(U(t.pathname)),t),u=function(){var e=Object(s.a)(i.a.mark((function e(a){var c,s,f,p,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.href.startsWith(o)){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,l.host.listEntries(l,a,{token:n.token});case 4:if(c=e.sent,!n.token||!n.token.isCancellationRequested){e.next=7;break}throw new b.a("Canceled");case 7:if(!(s=c.find((function(e){return e.type===r.File&&e.url.pathname.endsWith("/package.json")})))){e.next=24;break}return e.prev=9,e.next=12,l.host.readFileContent(l,s.url,{token:n.token});case 12:if(f=e.sent,!n.token||!n.token.isCancellationRequested){e.next=15;break}throw new b.a("Canceled");case 15:return p=E(l.decoder,f,s.url.href),e.abrupt("return",{packageJson:p,url:s.url});case 19:if(e.prev=19,e.t0=e.catch(9),!(e.t0 instanceof b.a||e.t0&&"CanceledError"===e.t0.name)){e.next=23;break}throw e.t0;case 23:console.warn("Error reading the parent package manifest for ".concat(t.href," from ").concat(s.url.href,": ").concat(e.t0.message));case 24:if((d=new URL(O(U(a.pathname)),a)).href!==a.href){e.next=27;break}return e.abrupt("return",void 0);case 27:return e.abrupt("return",u(d));case 28:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",u(c));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();L.defaultExtensions=[".js",".jsx",".es6",".es",".mjs",".ts",".tsx",".json"],L.path={basename:R,dirname:U,extname:M,resolve:D}}).call(this,n(322).Buffer)}},[[332,2,3]]]);
//# sourceMappingURL=main.0070b80e.chunk.js.map